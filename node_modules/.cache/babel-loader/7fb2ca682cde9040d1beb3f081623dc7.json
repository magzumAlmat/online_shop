{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.replaceDiacritics = replaceDiacritics;\n\nvar _diacritics = require('./diacritics');\n\nvar _diacritics2 = _interopRequireDefault(_diacritics);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar flatten = function flatten(arr) {\n  return arr.reduce(function (flat, toFlatten) {\n    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n  }, []);\n};\n\nvar extractSuggestion = function extractSuggestion(val) {\n  switch (typeof val) {\n    case 'string':\n      return val;\n\n    case 'object':\n      if (Array.isArray(val)) {\n        return flatten(val);\n      }\n\n      return null;\n\n    default:\n      return val;\n  }\n};\n\nfunction replaceDiacritics(s) {\n  var str = s ? String(s) : '';\n\n  for (var i = 0; i < str.length; i++) {\n    var currentChar = str.charAt(i);\n\n    if (_diacritics2.default[currentChar]) {\n      str = str.replaceAll(currentChar, _diacritics2.default[currentChar]);\n    }\n  }\n\n  return str;\n}\n\nfunction escapeRegExp() {\n  var string = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nvar getPredictiveSuggestions = function getPredictiveSuggestions(_ref) {\n  var suggestions = _ref.suggestions,\n      currentValue = _ref.currentValue,\n      wordsToShowAfterHighlight = _ref.wordsToShowAfterHighlight;\n  var suggestionMap = {};\n\n  if (currentValue) {\n    var currentValueTrimmed = currentValue.trim();\n    var parsedSuggestion = suggestions.reduce(function (agg, _ref2) {\n      var label = _ref2.label,\n          rest = _objectWithoutProperties(_ref2, ['label']);\n\n      var parsedContent = new DOMParser().parseFromString(label, 'text/html').documentElement.textContent;\n      var regexString = '^(' + escapeRegExp(currentValueTrimmed) + ')\\\\w+';\n      var regex = new RegExp(regexString, 'i');\n      var regexExecution = regex.exec(parsedContent);\n\n      if (!regexExecution) {\n        regexString = '^(' + escapeRegExp(currentValueTrimmed) + ')';\n        regex = new RegExp(regexString, 'i');\n        regexExecution = regex.exec(parsedContent);\n      }\n\n      if (regexExecution) {\n        var matchedString = parsedContent.slice(regexExecution.index, parsedContent.length);\n        var highlightedWord = matchedString.slice(currentValueTrimmed.length).split(' ').slice(0, wordsToShowAfterHighlight + 1).join(' ');\n        var suggestionPhrase = currentValueTrimmed + '<mark class=\"highlight\">' + highlightedWord + '</mark>';\n        var suggestionValue = '' + currentValueTrimmed + highlightedWord;\n\n        if (!suggestionMap[suggestionPhrase]) {\n          suggestionMap[suggestionPhrase] = 1;\n          return [].concat(_toConsumableArray(agg), [_extends({}, rest, {\n            label: suggestionPhrase,\n            value: suggestionValue,\n            isPredictiveSuggestion: true\n          })]);\n        }\n\n        return agg;\n      }\n\n      return agg;\n    }, []);\n    return parsedSuggestion;\n  }\n\n  return [];\n};\n\nvar getSuggestions = function getSuggestions(_ref3) {\n  var fields = _ref3.fields,\n      suggestions = _ref3.suggestions,\n      currentValue = _ref3.currentValue,\n      _ref3$suggestionPrope = _ref3.suggestionProperties,\n      suggestionProperties = _ref3$suggestionPrope === undefined ? [] : _ref3$suggestionPrope,\n      _ref3$showDistinctSug = _ref3.showDistinctSuggestions,\n      showDistinctSuggestions = _ref3$showDistinctSug === undefined ? false : _ref3$showDistinctSug,\n      _ref3$enablePredictiv = _ref3.enablePredictiveSuggestions,\n      enablePredictiveSuggestions = _ref3$enablePredictiv === undefined ? false : _ref3$enablePredictiv,\n      _ref3$wordsToShowAfte = _ref3.wordsToShowAfterHighlight,\n      wordsToShowAfterHighlight = _ref3$wordsToShowAfte === undefined ? 2 : _ref3$wordsToShowAfte,\n      enableSynonyms = _ref3.enableSynonyms;\n  var suggestionsList = [];\n  var labelsList = [];\n  var skipWordMatch = false;\n\n  var populateSuggestionsList = function populateSuggestionsList(val, parsedSource, source) {\n    var isWordMatch = skipWordMatch || currentValue.trim().split(' ').some(function (term) {\n      return replaceDiacritics(val).toLowerCase().includes(replaceDiacritics(term));\n    });\n\n    if (isWordMatch && !labelsList.includes(val) || source._promoted) {\n      var defaultOption = {\n        label: val,\n        value: val,\n        source: source\n      };\n      var additionalKeys = {};\n\n      if (Array.isArray(suggestionProperties) && suggestionProperties.length > 0) {\n        suggestionProperties.forEach(function (prop) {\n          if (parsedSource.hasOwnProperty(prop)) {\n            additionalKeys = _extends({}, additionalKeys, _defineProperty({}, prop, parsedSource[prop]));\n          }\n        });\n      }\n\n      var option = _extends({}, defaultOption, additionalKeys);\n\n      labelsList = [].concat(_toConsumableArray(labelsList), [val]);\n      suggestionsList = [].concat(_toConsumableArray(suggestionsList), [option]);\n\n      if (showDistinctSuggestions) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  var parseField = function parseField(parsedSource) {\n    var field = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : parsedSource;\n\n    if (typeof parsedSource === 'object') {\n      var fieldNodes = field.split('.');\n      var label = parsedSource[fieldNodes[0]];\n\n      if (parsedSource[field]) {\n        var topLabel = parsedSource[field];\n        var val = extractSuggestion(topLabel);\n\n        if (val && typeof val === 'string') {\n          return populateSuggestionsList(val, parsedSource, source);\n        }\n      }\n\n      if (Array.isArray(label)) {\n        if (label.length > 1) {\n          label = label.filter(function (i) {\n            return i && i.toString().toLowerCase().includes(currentValue.toString().toLowerCase());\n          });\n        }\n\n        label = label[0];\n      }\n\n      if (label) {\n        if (fieldNodes.length > 1) {\n          var children = field.substring(fieldNodes[0].length + 1);\n          parseField(label, children, source);\n        } else {\n          var _val = extractSuggestion(label);\n\n          if (_val) {\n            return populateSuggestionsList(_val, parsedSource, source);\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n\n  var traverseSuggestions = function traverseSuggestions() {\n    suggestions.forEach(function (item) {\n      fields.forEach(function (field) {\n        parseField(item, field);\n      });\n    });\n  };\n\n  traverseSuggestions();\n\n  if (suggestionsList.length < suggestions.length && !skipWordMatch && enableSynonyms) {\n    skipWordMatch = true;\n    traverseSuggestions();\n  }\n\n  if (enablePredictiveSuggestions) {\n    var predictiveSuggestions = getPredictiveSuggestions({\n      suggestions: suggestionsList,\n      currentValue: currentValue,\n      wordsToShowAfterHighlight: wordsToShowAfterHighlight\n    });\n    suggestionsList = predictiveSuggestions;\n  }\n\n  if (showDistinctSuggestions) {\n    var idMap = {};\n    var filteredSuggestions = [];\n    suggestionsList.forEach(function (suggestion) {\n      if (suggestion.source && suggestion.source._id) {\n        if (!idMap[suggestion.source._id]) {\n          filteredSuggestions.push(suggestion);\n          idMap[suggestion.source._id] = true;\n        }\n      }\n    });\n    return filteredSuggestions;\n  }\n\n  return suggestionsList;\n};\n\nexports.default = getSuggestions;","map":{"version":3,"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","replaceDiacritics","_diacritics","require","_diacritics2","_interopRequireDefault","obj","__esModule","default","_defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","Array","isArray","arr2","from","_objectWithoutProperties","keys","indexOf","flatten","reduce","flat","toFlatten","concat","extractSuggestion","val","s","str","String","currentChar","charAt","replaceAll","escapeRegExp","string","undefined","replace","getPredictiveSuggestions","_ref","suggestions","currentValue","wordsToShowAfterHighlight","suggestionMap","currentValueTrimmed","trim","parsedSuggestion","agg","_ref2","label","rest","parsedContent","DOMParser","parseFromString","documentElement","textContent","regexString","regex","RegExp","regexExecution","exec","matchedString","slice","index","highlightedWord","split","join","suggestionPhrase","suggestionValue","isPredictiveSuggestion","getSuggestions","_ref3","fields","_ref3$suggestionPrope","suggestionProperties","_ref3$showDistinctSug","showDistinctSuggestions","_ref3$enablePredictiv","enablePredictiveSuggestions","_ref3$wordsToShowAfte","enableSynonyms","suggestionsList","labelsList","skipWordMatch","populateSuggestionsList","parsedSource","isWordMatch","some","term","toLowerCase","includes","_promoted","defaultOption","additionalKeys","forEach","prop","option","parseField","field","fieldNodes","topLabel","filter","toString","children","substring","_val","traverseSuggestions","item","predictiveSuggestions","idMap","filteredSuggestions","suggestion","_id","push"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivecore/lib/utils/suggestions.js"],"sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.replaceDiacritics=replaceDiacritics;var _diacritics=require('./diacritics');var _diacritics2=_interopRequireDefault(_diacritics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}var flatten=function flatten(arr){return arr.reduce(function(flat,toFlatten){return flat.concat(Array.isArray(toFlatten)?flatten(toFlatten):toFlatten);},[]);};var extractSuggestion=function extractSuggestion(val){switch(typeof val){case'string':return val;case'object':if(Array.isArray(val)){return flatten(val);}return null;default:return val;}};function replaceDiacritics(s){var str=s?String(s):'';for(var i=0;i<str.length;i++){var currentChar=str.charAt(i);if(_diacritics2.default[currentChar]){str=str.replaceAll(currentChar,_diacritics2.default[currentChar]);}}return str;}function escapeRegExp(){var string=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return string.replace(/[.*+?^${}()|[\\]\\\\]/g,'\\\\$&');}var getPredictiveSuggestions=function getPredictiveSuggestions(_ref){var suggestions=_ref.suggestions,currentValue=_ref.currentValue,wordsToShowAfterHighlight=_ref.wordsToShowAfterHighlight;var suggestionMap={};if(currentValue){var currentValueTrimmed=currentValue.trim();var parsedSuggestion=suggestions.reduce(function(agg,_ref2){var label=_ref2.label,rest=_objectWithoutProperties(_ref2,['label']);var parsedContent=new DOMParser().parseFromString(label,'text/html').documentElement.textContent;var regexString='^('+escapeRegExp(currentValueTrimmed)+')\\\\w+';var regex=new RegExp(regexString,'i');var regexExecution=regex.exec(parsedContent);if(!regexExecution){regexString='^('+escapeRegExp(currentValueTrimmed)+')';regex=new RegExp(regexString,'i');regexExecution=regex.exec(parsedContent);}if(regexExecution){var matchedString=parsedContent.slice(regexExecution.index,parsedContent.length);var highlightedWord=matchedString.slice(currentValueTrimmed.length).split(' ').slice(0,wordsToShowAfterHighlight+1).join(' ');var suggestionPhrase=currentValueTrimmed+'<mark class=\"highlight\">'+highlightedWord+'</mark>';var suggestionValue=''+currentValueTrimmed+highlightedWord;if(!suggestionMap[suggestionPhrase]){suggestionMap[suggestionPhrase]=1;return[].concat(_toConsumableArray(agg),[_extends({},rest,{label:suggestionPhrase,value:suggestionValue,isPredictiveSuggestion:true})]);}return agg;}return agg;},[]);return parsedSuggestion;}return[];};var getSuggestions=function getSuggestions(_ref3){var fields=_ref3.fields,suggestions=_ref3.suggestions,currentValue=_ref3.currentValue,_ref3$suggestionPrope=_ref3.suggestionProperties,suggestionProperties=_ref3$suggestionPrope===undefined?[]:_ref3$suggestionPrope,_ref3$showDistinctSug=_ref3.showDistinctSuggestions,showDistinctSuggestions=_ref3$showDistinctSug===undefined?false:_ref3$showDistinctSug,_ref3$enablePredictiv=_ref3.enablePredictiveSuggestions,enablePredictiveSuggestions=_ref3$enablePredictiv===undefined?false:_ref3$enablePredictiv,_ref3$wordsToShowAfte=_ref3.wordsToShowAfterHighlight,wordsToShowAfterHighlight=_ref3$wordsToShowAfte===undefined?2:_ref3$wordsToShowAfte,enableSynonyms=_ref3.enableSynonyms;var suggestionsList=[];var labelsList=[];var skipWordMatch=false;var populateSuggestionsList=function populateSuggestionsList(val,parsedSource,source){var isWordMatch=skipWordMatch||currentValue.trim().split(' ').some(function(term){return replaceDiacritics(val).toLowerCase().includes(replaceDiacritics(term));});if(isWordMatch&&!labelsList.includes(val)||source._promoted){var defaultOption={label:val,value:val,source:source};var additionalKeys={};if(Array.isArray(suggestionProperties)&&suggestionProperties.length>0){suggestionProperties.forEach(function(prop){if(parsedSource.hasOwnProperty(prop)){additionalKeys=_extends({},additionalKeys,_defineProperty({},prop,parsedSource[prop]));}});}var option=_extends({},defaultOption,additionalKeys);labelsList=[].concat(_toConsumableArray(labelsList),[val]);suggestionsList=[].concat(_toConsumableArray(suggestionsList),[option]);if(showDistinctSuggestions){return true;}}return false;};var parseField=function parseField(parsedSource){var field=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var source=arguments.length>2&&arguments[2]!==undefined?arguments[2]:parsedSource;if(typeof parsedSource==='object'){var fieldNodes=field.split('.');var label=parsedSource[fieldNodes[0]];if(parsedSource[field]){var topLabel=parsedSource[field];var val=extractSuggestion(topLabel);if(val&&typeof val==='string'){return populateSuggestionsList(val,parsedSource,source);}}if(Array.isArray(label)){if(label.length>1){label=label.filter(function(i){return i&&i.toString().toLowerCase().includes(currentValue.toString().toLowerCase());});}label=label[0];}if(label){if(fieldNodes.length>1){var children=field.substring(fieldNodes[0].length+1);parseField(label,children,source);}else{var _val=extractSuggestion(label);if(_val){return populateSuggestionsList(_val,parsedSource,source);}}}}return false;};var traverseSuggestions=function traverseSuggestions(){suggestions.forEach(function(item){fields.forEach(function(field){parseField(item,field);});});};traverseSuggestions();if(suggestionsList.length<suggestions.length&&!skipWordMatch&&enableSynonyms){skipWordMatch=true;traverseSuggestions();}if(enablePredictiveSuggestions){var predictiveSuggestions=getPredictiveSuggestions({suggestions:suggestionsList,currentValue:currentValue,wordsToShowAfterHighlight:wordsToShowAfterHighlight});suggestionsList=predictiveSuggestions;}if(showDistinctSuggestions){var idMap={};var filteredSuggestions=[];suggestionsList.forEach(function(suggestion){if(suggestion.source&&suggestion.source._id){if(!idMap[suggestion.source._id]){filteredSuggestions.push(suggestion);idMap[suggestion.source._id]=true;}}});return filteredSuggestions;}return suggestionsList;};exports.default=getSuggestions;"],"mappings":"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"},"metadata":{},"sourceType":"script"}