{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\n\nvar _core = require('@emotion/core');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _propTypes = require('prop-types');\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hotkeysJs = require('hotkeys-js');\n\nvar _hotkeysJs2 = _interopRequireDefault(_hotkeysJs);\n\nvar _xss = require('xss');\n\nvar _xss2 = _interopRequireDefault(_xss);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _InputGroup = require('../../styles/InputGroup');\n\nvar _InputGroup2 = _interopRequireDefault(_InputGroup);\n\nvar _InputWrapper = require('../../styles/InputWrapper');\n\nvar _InputWrapper2 = _interopRequireDefault(_InputWrapper);\n\nvar _InputAddon = require('../../styles/InputAddon');\n\nvar _InputAddon2 = _interopRequireDefault(_InputAddon);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _Tags = require('../../styles/Tags');\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Button = require('../../styles/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _utils = require('../../utils');\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _AutofillSvg = require('../shared/AutofillSvg');\n\nvar _AutofillSvg2 = _interopRequireDefault(_AutofillSvg);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar useConstructor = function useConstructor() {\n  var callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n  var _useState = (0, _react.useState)(false),\n      hasBeenCalled = _useState[0],\n      setHasBeenCalled = _useState[1];\n\n  if (hasBeenCalled) return;\n  callBack();\n  setHasBeenCalled(true);\n};\n\nvar SearchBox = function SearchBox(props) {\n  var selectedValue = props.selectedValue,\n      selectedCategory = props.selectedCategory,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      componentId = props.componentId,\n      rawData = props.rawData,\n      aggregationData = props.aggregationData,\n      isLoading = props.isLoading,\n      error = props.error,\n      onData = props.onData,\n      onChange = props.onChange,\n      focusShortcuts = props.focusShortcuts,\n      defaultQuery = props.defaultQuery,\n      filterLabel = props.filterLabel,\n      showFilter = props.showFilter,\n      URLParams = props.URLParams,\n      customQuery = props.customQuery,\n      customEvents = props.customEvents;\n  var internalComponent = (0, _transform.getInternalComponentID)(componentId);\n\n  var _useState2 = (0, _react.useState)(''),\n      currentValue = _useState2[0],\n      setCurrentValue = _useState2[1]; // eslint-disable-next-line prefer-const\n\n\n  var _useState3 = (0, _react.useState)([]),\n      selectedTags = _useState3[0],\n      setSelectedTags = _useState3[1];\n\n  var _useState4 = (0, _react.useState)(props.isOpen),\n      isOpen = _useState4[0],\n      setIsOpen = _useState4[1];\n\n  var _inputRef = (0, _react.useRef)(null);\n\n  var isTagsMode = (0, _react.useRef)(false);\n\n  var stats = function stats() {\n    return (0, _helper.getResultStats)(props);\n  };\n\n  var parsedSuggestions = function parsedSuggestions() {\n    var suggestionsArray = [];\n\n    if (Array.isArray(props.suggestions) && props.suggestions.length) {\n      suggestionsArray = [].concat((0, _helper.withClickIds)(props.suggestions));\n    }\n\n    var sectionsAccumulated = [];\n    var sectionisedSuggestions = suggestionsArray.reduce(function (acc, d, currentIndex) {\n      if (sectionsAccumulated.includes(d.sectionId)) return acc;\n\n      if (d.sectionId) {\n        acc[currentIndex] = suggestionsArray.filter(function (g) {\n          return g.sectionId === d.sectionId;\n        });\n        sectionsAccumulated.push(d.sectionId);\n      } else {\n        acc[currentIndex] = d;\n      }\n\n      return acc;\n    }, {});\n    return Object.values(sectionisedSuggestions);\n  };\n\n  var focusSearchBox = function focusSearchBox(event) {\n    var elt = event.target || event.srcElement;\n    var tagName = elt.tagName;\n\n    if (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n      // already in an input\n      return;\n    }\n\n    if (_inputRef.current) {\n      _inputRef.current.focus();\n    }\n  };\n\n  var listenForFocusShortcuts = function listenForFocusShortcuts() {\n    if ((0, _utils.isEmpty)(focusShortcuts)) {\n      return;\n    } // for single press keys (a-z, A-Z) &, hotkeys' combinations such as 'cmd+k', 'ctrl+shft+a', etc\n\n\n    (0, _hotkeysJs2.default)((0, _utils.parseFocusShortcuts)(focusShortcuts).join(','),\n    /* eslint-disable no-shadow */\n    // eslint-disable-next-line no-unused-vars\n    function (event, handler) {\n      // Prevent the default refresh event under WINDOWS system\n      event.preventDefault();\n      focusSearchBox(event);\n    }); // if one of modifier keys are used, they are handled below\n\n    (0, _hotkeysJs2.default)('*', function (event) {\n      var modifierKeys = (0, _utils.extractModifierKeysFromFocusShortcuts)(focusShortcuts);\n      if (modifierKeys.length === 0) return;\n\n      for (var index = 0; index < modifierKeys.length; index += 1) {\n        var element = modifierKeys[index];\n\n        if (_hotkeysJs2.default[element]) {\n          focusSearchBox(event);\n          break;\n        }\n      }\n    });\n  };\n\n  var triggerClickAnalytics = function triggerClickAnalytics(searchPosition, documentId) {\n    var docId = documentId;\n\n    if (!docId) {\n      var hitData = parsedSuggestions().find(function (hit) {\n        return hit._click_id === searchPosition;\n      });\n\n      if (hitData && hitData.source && hitData.source._id) {\n        docId = hitData.source._id;\n      }\n    }\n\n    props.triggerAnalytics(searchPosition, docId);\n  };\n\n  var shouldQuery = function shouldQuery(value, dataFields, props) {\n    var finalQuery = [];\n    var phrasePrefixFields = [];\n    var fields = dataFields.map(function (dataField) {\n      var queryField = '' + dataField.field + (dataField.weight ? '^' + dataField.weight : '');\n\n      if (!(dataField.field.endsWith('.keyword') || dataField.field.endsWith('.autosuggest') || dataField.field.endsWith('.search'))) {\n        phrasePrefixFields.push(queryField);\n      }\n\n      return queryField;\n    });\n\n    if (props.searchOperators || props.queryString) {\n      return {\n        query: value,\n        fields: fields,\n        default_operator: props.queryFormat\n      };\n    }\n\n    if (props.queryFormat === 'and') {\n      finalQuery.push({\n        multi_match: {\n          query: value,\n          fields: fields,\n          type: 'cross_fields',\n          operator: 'and'\n        }\n      });\n      finalQuery.push({\n        multi_match: {\n          query: value,\n          fields: fields,\n          type: 'phrase',\n          operator: 'and'\n        }\n      });\n\n      if (phrasePrefixFields.length > 0) {\n        finalQuery.push({\n          multi_match: {\n            query: value,\n            fields: phrasePrefixFields,\n            type: 'phrase_prefix',\n            operator: 'and'\n          }\n        });\n      }\n\n      return finalQuery;\n    }\n\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'best_fields',\n        operator: 'or',\n        fuzziness: props.fuzziness ? props.fuzziness : 0\n      }\n    });\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'phrase',\n        operator: 'or'\n      }\n    });\n\n    if (phrasePrefixFields.length > 0) {\n      finalQuery.push({\n        multi_match: {\n          query: value,\n          fields: phrasePrefixFields,\n          type: 'phrase_prefix',\n          operator: 'or'\n        }\n      });\n    }\n\n    return finalQuery;\n  };\n\n  var searchBoxDefaultQuery = function searchBoxDefaultQuery(value, props) {\n    var finalQuery = null;\n    var fields = (0, _helper.normalizeDataField)(props.dataField, props.fieldWeights);\n\n    if (value) {\n      if (props.queryString) {\n        finalQuery = {\n          query_string: shouldQuery(value, fields, props)\n        };\n      } else if (props.searchOperators) {\n        finalQuery = {\n          simple_query_string: shouldQuery(value, fields, props)\n        };\n      } else {\n        finalQuery = {\n          bool: {\n            should: shouldQuery(value, fields, props),\n            minimum_should_match: '1'\n          }\n        };\n      }\n    }\n\n    if (value === '') {\n      finalQuery = {\n        bool: {\n          should: shouldQuery(value, fields, props),\n          minimum_should_match: '1'\n        }\n      };\n    }\n\n    if (finalQuery && props.nestedField) {\n      finalQuery = {\n        nested: {\n          path: props.nestedField,\n          query: finalQuery\n        }\n      };\n    }\n\n    return finalQuery;\n  }; // fires query to fetch suggestion\n\n\n  var triggerDefaultQuery = function triggerDefaultQuery(paramValue) {\n    if (!props.autosuggest) {\n      return;\n    }\n\n    var value = typeof paramValue !== 'string' ? currentValue : paramValue;\n    var query = searchBoxDefaultQuery(value, props);\n\n    if (defaultQuery) {\n      var defaultQueryTobeSet = defaultQuery(value, props) || {};\n\n      if (defaultQueryTobeSet.query) {\n        query = defaultQueryTobeSet.query;\n      } // Update calculated default query in store\n\n\n      (0, _helper.updateDefaultQuery)(componentId, props, value);\n    }\n\n    props.updateQuery({\n      componentId: internalComponent,\n      query: query,\n      value: value,\n      componentType: _constants.componentTypes.searchBox\n    });\n  }; // fires query to fetch results(dependent components are affected here)\n\n\n  var triggerCustomQuery = function triggerCustomQuery(paramValue) {\n    var categoryValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    var value = typeof paramValue !== 'string' ? currentValue : paramValue;\n\n    if (isTagsMode.current) {\n      value = paramValue;\n    }\n\n    var query = searchBoxDefaultQuery('' + value + (!isTagsMode.current && categoryValue ? ' in ' + categoryValue : ''), props);\n\n    if (customQuery) {\n      var customQueryTobeSet = customQuery(value, props) || {};\n      var queryTobeSet = customQueryTobeSet.query;\n\n      if (queryTobeSet) {\n        query = queryTobeSet;\n      }\n\n      (0, _helper.updateCustomQuery)(componentId, props, value);\n    }\n\n    props.updateQuery(_extends({\n      componentId: componentId,\n      value: value,\n      query: query,\n      label: filterLabel,\n      showFilter: showFilter,\n      URLParams: URLParams,\n      componentType: _constants.componentTypes.searchBox\n    }, !isTagsMode.current ? {\n      category: categoryValue\n    } : {}));\n  };\n\n  var triggerQuery = function triggerQuery() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$isOpen = _ref.isOpen,\n        isOpen = _ref$isOpen === undefined ? undefined : _ref$isOpen,\n        _ref$customQuery = _ref.customQuery,\n        customQuery = _ref$customQuery === undefined ? false : _ref$customQuery,\n        _ref$defaultQuery = _ref.defaultQuery,\n        defaultQuery = _ref$defaultQuery === undefined ? false : _ref$defaultQuery,\n        _ref$value = _ref.value,\n        value = _ref$value === undefined ? undefined : _ref$value,\n        _ref$categoryValue = _ref.categoryValue,\n        categoryValue = _ref$categoryValue === undefined ? undefined : _ref$categoryValue;\n\n    if (typeof isOpen === 'boolean') {\n      setIsOpen(isOpen);\n    }\n\n    if (customQuery) {\n      triggerCustomQuery(value, categoryValue);\n    }\n\n    if (defaultQuery) {\n      triggerDefaultQuery(value);\n    }\n  };\n\n  var onValueSelected = function onValueSelected() {\n    var valueSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : currentValue;\n    var cause = arguments[1];\n    var suggestion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var onValueSelected = props.onValueSelected;\n\n    if (onValueSelected) {\n      onValueSelected(valueSelected, cause, suggestion);\n    }\n  };\n\n  var handleTextChange = (0, _react.useRef)((0, _helper.debounce)(function () {\n    var valueParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n    var cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    var enterButton = props.enterButton;\n\n    if (cause === _causes2.default.CLEAR_VALUE) {\n      triggerCustomQuery(valueParam);\n      triggerDefaultQuery(valueParam);\n    } else if (props.autosuggest) {\n      triggerDefaultQuery(valueParam);\n    } else if (value === undefined && !onChange && !enterButton) {\n      triggerCustomQuery(valueParam);\n    }\n  }, props.debounce));\n\n  var setValue = function setValue(value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var setValueProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : props;\n    var cause = arguments[3];\n    var hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n    var categoryValue = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : undefined;\n\n    var performUpdate = function performUpdate() {\n      if (isTagsMode.current && (0, _helper.isEqual)(value, selectedTags)) {\n        return;\n      }\n\n      var newSelectedTags = [];\n      var newCurrentValue = (0, _utils.decodeHtml)(value);\n\n      if (hasMounted) {\n        if (isTagsMode.current && cause === _causes2.default.SUGGESTION_SELECT) {\n          if (Array.isArray(selectedTags) && selectedTags.length) {\n            // check if value already present in selectedTags\n            if (typeof value === 'string' && selectedTags.includes(value)) {\n              setIsOpen(false);\n              return;\n            }\n\n            if (typeof value === 'string' && !!value) {\n              newSelectedTags = [].concat(selectedTags, [value]);\n            } else if (Array.isArray(value) && !(0, _helper.isEqual)(selectedTags, value)) {\n              var mergedArray = Array.from(new Set([].concat(selectedTags, value)));\n              newSelectedTags = mergedArray;\n            }\n          } else if (value) {\n            newSelectedTags = typeof value !== 'string' ? value : [].concat(value);\n          }\n\n          newCurrentValue = '';\n          setSelectedTags(newSelectedTags);\n        } else {\n          newCurrentValue = (0, _utils.decodeHtml)(value);\n        }\n\n        if (toggleIsOpen) setIsOpen(!isOpen);\n        setCurrentValue(newCurrentValue);\n        var queryHandlerValue = value;\n\n        if (isTagsMode.current && cause === _causes2.default.SUGGESTION_SELECT) {\n          queryHandlerValue = Array.isArray(newSelectedTags) && newSelectedTags.length ? newSelectedTags : undefined;\n        }\n\n        if (isDefaultValue) {\n          if (props.autosuggest) {\n            triggerQuery(_extends({}, toggleIsOpen && {\n              isOpen: !isOpen\n            }, {\n              defaultQuery: false,\n              value: value\n            }));\n            triggerDefaultQuery(newCurrentValue);\n          } // in case of strict selection only SUGGESTION_SELECT should be able\n          // to set the query otherwise the value should reset\n\n\n          if (setValueProps.strictSelection) {\n            if (cause === _causes2.default.SUGGESTION_SELECT || (isTagsMode.current ? newSelectedTags.length === 0 : value === '')) {\n              triggerCustomQuery(queryHandlerValue, isTagsMode.current ? undefined : categoryValue);\n            } else {\n              setValue('', true);\n            }\n          } else if (props.value === undefined || cause === _causes2.default.SUGGESTION_SELECT || cause === _causes2.default.CLEAR_VALUE || cause === _causes2.default.ENTER_PRESS || cause === _causes2.default.SEARCH_ICON_CLICK) {\n            triggerCustomQuery(queryHandlerValue, isTagsMode.current ? undefined : categoryValue);\n          }\n        } else {\n          // debounce for handling text while typing\n          handleTextChange.current(value, cause);\n        }\n\n        if (setValueProps.onValueChange) setValueProps.onValueChange(value);\n      } else {\n        triggerQuery({\n          defaultQuery: props.autosuggest,\n          customQuery: true,\n          value: value,\n          categoryValue: isTagsMode.current ? undefined : categoryValue\n        });\n        if (setValueProps.onValueChange) setValueProps.onValueChange(value);\n      }\n    };\n\n    (0, _helper.checkValueChange)(setValueProps.componentId, value, setValueProps.beforeValueChange, performUpdate);\n  };\n\n  var withTriggerQuery = function withTriggerQuery(func) {\n    if (func) {\n      return function (e) {\n        return func(e, function () {\n          var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            isOpen: false\n          },\n              isOpen = _ref2.isOpen;\n\n          return setValue(props.value, !isOpen, props);\n        });\n      };\n    }\n\n    return undefined;\n  };\n\n  var handleFeaturedSuggestionClicked = function handleFeaturedSuggestionClicked(suggestion) {\n    try {\n      if (suggestion.action === _helper.featuredSuggestionsActionTypes.NAVIGATE) {\n        var _JSON$parse = JSON.parse(suggestion.subAction),\n            _JSON$parse$target = _JSON$parse.target,\n            target = _JSON$parse$target === undefined ? '_self' : _JSON$parse$target,\n            _JSON$parse$link = _JSON$parse.link,\n            link = _JSON$parse$link === undefined ? '/' : _JSON$parse$link;\n\n        if (typeof window !== 'undefined') {\n          window.open(link, target);\n        }\n      }\n\n      if (suggestion.action === _helper.featuredSuggestionsActionTypes.FUNCTION) {\n        // eslint-disable-next-line no-new-func\n        var func = new Function('return ' + suggestion.subAction)();\n        func(suggestion, currentValue, customEvents);\n      }\n\n      if (suggestion.action === _helper.featuredSuggestionsActionTypes.SELECT) {\n        setValue(suggestion.value, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : _causes2.default.ENTER_PRESS);\n        onValueSelected(suggestion.value, _causes2.default.SUGGESTION_SELECT);\n      } // blur is important to close the dropdown\n      // on selecting one of featured suggestions\n      // else Downshift probably is focusing the dropdown\n      // and not letting it close\n\n\n      _inputRef.current.blur();\n    } catch (e) {\n      console.error('Error: There was an error parsing the subAction for the featured suggestion with label, \"' + suggestion.label + '\"', e);\n    }\n  };\n\n  var onSuggestionSelected = function onSuggestionSelected(suggestion) {\n    setIsOpen(false); // handle featured suggestions click event\n\n    if (suggestion._suggestion_type === _helper.suggestionTypes.Featured) {\n      handleFeaturedSuggestionClicked(suggestion);\n      return;\n    }\n\n    var suggestionValue = suggestion.value;\n\n    if (value === undefined) {\n      setValue(suggestionValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n    } else if (onChange) {\n      var emitValue = suggestionValue;\n\n      if (isTagsMode.current) {\n        emitValue = Array.isArray(selectedTags) ? [].concat(selectedTags) : [];\n\n        if (selectedTags && selectedTags.includes(suggestionValue)) {\n          // avoid duplicates in tags array\n          setIsOpen(false);\n          return;\n        }\n\n        emitValue.push(suggestionValue);\n      }\n\n      setValue(emitValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n      onChange(emitValue, function () {\n        return triggerQuery(_extends({\n          customQuery: true,\n          value: emitValue,\n          isOpen: false\n        }, !isTagsMode.current && {\n          categoryValue: suggestion._category\n        }));\n      });\n    } // Record analytics for selected suggestions\n\n\n    triggerClickAnalytics(suggestion._click_id); // onValueSelected is user interaction driven:\n    // it should be triggered irrespective of controlled (or)\n    // uncontrolled component behavior\n\n    onValueSelected(suggestionValue, _causes2.default.SUGGESTION_SELECT, suggestion);\n  };\n\n  var onInputChange = function onInputChange(e) {\n    var inputValue = e.target.value;\n\n    if (!isOpen && props.autosuggest) {\n      setIsOpen(true);\n    }\n\n    if (value === undefined) {\n      setValue(inputValue, false, props, inputValue === '' ? _causes2.default.CLEAR_VALUE : undefined, true, false);\n    } else if (onChange) {\n      // handle caret position in controlled components\n      (0, _utils.handleCaretPosition)(e);\n      onChange(inputValue, function () {\n        var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref3.isOpen;\n\n        triggerQuery({\n          customQuery: true,\n          value: inputValue,\n          isOpen: isOpen\n        });\n      }, e);\n    }\n  };\n\n  var enterButtonOnClick = function enterButtonOnClick() {\n    return triggerQuery({\n      isOpen: false,\n      value: currentValue,\n      customQuery: true\n    });\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var highlightedIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; // if a suggestion was selected, delegate the handling\n    // to suggestion handler\n\n    if (event.key === 'Enter') {\n      if (props.autosuggest === false) {\n        enterButtonOnClick();\n      } else if (highlightedIndex === null) {\n        setValue(event.target.value, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : _causes2.default.ENTER_PRESS);\n        onValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n      }\n    }\n\n    if (props.onKeyDown) {\n      props.onKeyDown(event, undefined.triggerQuery);\n    }\n  };\n\n  var clearValue = function clearValue() {\n    setValue('', false, props, _causes2.default.CLEAR_VALUE, true, false);\n\n    if (onChange) {\n      onChange('', function () {\n        var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref4.isOpen;\n\n        return triggerQuery({\n          customQuery: true,\n          value: '',\n          isOpen: isOpen\n        });\n      });\n    }\n\n    onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n  };\n\n  var shouldMicRender = function shouldMicRender(showVoiceSearch) {\n    // checks for SSR\n    if (typeof window === 'undefined') return false;\n    return showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n  };\n\n  var handleStateChange = function handleStateChange(changes, stateAndHelpers) {\n    var isOpen = changes.isOpen,\n        type = changes.type;\n    var selectedItem = stateAndHelpers.selectedItem;\n\n    if (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n      setIsOpen(isOpen);\n    } // allow invoking click event repeatedly on featured suggestions\n\n\n    if (!changes.selectedItem && (type === _downshift2.default.stateChangeTypes.clickItem || type === _downshift2.default.stateChangeTypes.keyDownEnter) && selectedItem && selectedItem._suggestion_type === _helper.suggestionTypes.Featured) {\n      onSuggestionSelected(selectedItem);\n    }\n  };\n\n  var handleSearchIconClick = function handleSearchIconClick() {\n    if (currentValue.trim()) {\n      setValue(currentValue, true, props, _causes2.default.SEARCH_ICON_CLICK);\n      onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n    }\n  };\n\n  var handleVoiceResults = function handleVoiceResults(_ref5) {\n    var results = _ref5.results;\n\n    if (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n      setValue(results[0][0].transcript.trim(), true, props, undefined, true, isOpen);\n    }\n  };\n\n  var renderNoSuggestion = function renderNoSuggestion() {\n    var finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var themePreset = props.themePreset,\n        theme = props.theme,\n        isLoading = props.isLoading,\n        renderNoSuggestion = props.renderNoSuggestion,\n        innerClass = props.innerClass,\n        error = props.error,\n        renderError = props.renderError;\n\n    if (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        themePreset: themePreset,\n        theme: theme,\n        innerClassName: 'noSuggestion'\n      }, typeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion);\n    }\n\n    return null;\n  };\n\n  var renderLoader = function renderLoader() {\n    var loader = props.loader,\n        isLoading = props.isLoading,\n        themePreset = props.themePreset,\n        theme = props.theme,\n        innerClass = props.innerClass;\n\n    if (isLoading && loader && currentValue) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'loader',\n        theme: theme,\n        themePreset: themePreset\n      }, loader);\n    }\n\n    return null;\n  };\n\n  var renderError = function renderError() {\n    var error = props.error,\n        renderError = props.renderError,\n        themePreset = props.themePreset,\n        theme = props.theme,\n        isLoading = props.isLoading,\n        innerClass = props.innerClass;\n\n    if (error && renderError && currentValue && !isLoading) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'error',\n        theme: theme,\n        themePreset: themePreset\n      }, (0, _helper.isFunction)(renderError) ? renderError(error) : renderError);\n    }\n\n    return null;\n  };\n\n  var getComponent = function getComponent() {\n    var downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var error = props.error,\n        isLoading = props.isLoading,\n        rawData = props.rawData;\n    var data = {\n      error: error,\n      loading: isLoading,\n      downshiftProps: downshiftProps,\n      data: props.suggestions,\n      value: currentValue,\n      triggerClickAnalytics: triggerClickAnalytics,\n      resultStats: stats(),\n      rawData: rawData\n    };\n    return (0, _helper.getComponent)(data, props);\n  };\n\n  var renderInputAddonBefore = function renderInputAddonBefore() {\n    var addonBefore = props.addonBefore,\n        expandSuggestionsContainer = props.expandSuggestionsContainer;\n\n    if (addonBefore) {\n      return (0, _core.jsx)(_InputAddon2.default, {\n        isOpen: isOpen,\n        expandSuggestionsContainer: expandSuggestionsContainer\n      }, addonBefore);\n    }\n\n    return null;\n  };\n\n  var renderInputAddonAfter = function renderInputAddonAfter() {\n    var addonAfter = props.addonAfter,\n        expandSuggestionsContainer = props.expandSuggestionsContainer;\n\n    if (addonAfter) {\n      return (0, _core.jsx)(_InputAddon2.default, {\n        isOpen: isOpen,\n        expandSuggestionsContainer: expandSuggestionsContainer\n      }, addonAfter);\n    }\n\n    return null;\n  };\n\n  var renderEnterButtonElement = function renderEnterButtonElement() {\n    var enterButton = props.enterButton,\n        renderEnterButton = props.renderEnterButton,\n        innerClass = props.innerClass;\n\n    if (enterButton) {\n      var getEnterButtonMarkup = function getEnterButtonMarkup() {\n        if (typeof renderEnterButton === 'function') {\n          return renderEnterButton(enterButtonOnClick);\n        }\n\n        return (0, _core.jsx)(_Button2.default, {\n          className: 'enter-btn ' + (0, _helper.getClassName)(innerClass, 'enter-button'),\n          primary: true,\n          onClick: enterButtonOnClick\n        }, 'Search');\n      };\n\n      return (0, _core.jsx)('div', {\n        className: 'enter-button-wrapper'\n      }, getEnterButtonMarkup());\n    }\n\n    return null;\n  };\n\n  var renderIcon = function renderIcon() {\n    if (props.showIcon) {\n      return props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  var renderCancelIcon = function renderCancelIcon() {\n    if (props.showClear) {\n      return props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  var renderIcons = function renderIcons() {\n    var showIcon = props.showIcon,\n        showClear = props.showClear,\n        renderMic = props.renderMic,\n        getMicInstance = props.getMicInstance,\n        showVoiceSearch = props.showVoiceSearch,\n        iconPosition = props.iconPosition,\n        innerClass = props.innerClass;\n    return (0, _core.jsx)('div', null, (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'right',\n      positionType: 'absolute'\n    }, currentValue && showClear && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: clearValue,\n      showIcon: showIcon,\n      isClearIcon: true\n    }, renderCancelIcon()), shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n      getInstance: getMicInstance,\n      render: renderMic,\n      onResult: handleVoiceResults,\n      className: (0, _helper.getClassName)(innerClass, 'mic') || null\n    }), iconPosition === 'right' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: handleSearchIconClick\n    }, renderIcon())), (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'left',\n      positionType: 'absolute'\n    }, iconPosition === 'left' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: handleSearchIconClick\n    }, renderIcon())));\n  };\n\n  var handleFocus = function handleFocus(event) {\n    if (props.autosuggest) {\n      setIsOpen(true);\n    }\n\n    if (props.onFocus) {\n      props.onFocus(event, triggerQuery);\n    }\n  };\n\n  var onAutofillClick = function onAutofillClick(suggestion) {\n    var value = suggestion.value;\n    setIsOpen(true);\n    setCurrentValue((0, _utils.decodeHtml)(value));\n    triggerDefaultQuery(value);\n  };\n\n  var hasMounted = (0, _react.useRef)();\n  useConstructor(function () {\n    var mode = props.mode;\n\n    if (mode === _constants.SEARCH_COMPONENTS_MODES.TAG) {\n      isTagsMode.current = true;\n    }\n\n    if (isTagsMode.current) {\n      console.warn('Warning(ReactiveSearch): The `categoryField` prop is not supported when `mode` prop is set to `tag`');\n    }\n\n    if (!props.enableAppbase) {\n      throw new Error('enableAppbase is required to be true when using SearchBox component.');\n    }\n\n    var currentLocalValue = selectedValue || value || defaultValue || '';\n    hasMounted.current = false;\n\n    if (currentLocalValue) {\n      if (props.onChange) {\n        props.onChange(currentLocalValue, function () {\n          var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n              isOpen = _ref6.isOpen;\n\n          return triggerQuery({\n            customQuery: true,\n            value: currentLocalValue,\n            isOpen: isOpen\n          });\n        });\n      }\n    }\n\n    setCurrentValue(isTagsMode.current ? '' : (0, _utils.decodeHtml)(currentLocalValue));\n\n    if (isTagsMode.current && Array.isArray(currentLocalValue)) {\n      setSelectedTags(currentLocalValue);\n    } // Set custom and default queries in store\n\n\n    triggerCustomQuery(currentLocalValue, selectedCategory);\n    triggerDefaultQuery(currentLocalValue);\n  });\n\n  var clearTag = function clearTag(tagValue) {\n    var newSelectedTags = [].concat(selectedTags.filter(function (tag) {\n      return tag !== tagValue;\n    }));\n    setSelectedTags(newSelectedTags);\n    setCurrentValue('');\n    triggerCustomQuery(newSelectedTags);\n\n    if (props.value !== undefined && typeof onChange === 'function') {\n      onChange(newSelectedTags, function () {\n        var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref7.isOpen;\n\n        return triggerQuery({\n          customQuery: true,\n          value: newSelectedTags,\n          isOpen: isOpen\n        });\n      });\n    }\n  };\n\n  var clearAllTags = function clearAllTags() {\n    setSelectedTags([]);\n    setValue('', true, props, _causes2.default.SUGGESTION_SELECT, hasMounted.current, false);\n\n    if (props.value !== undefined && typeof onChange === 'function') {\n      onChange([], function () {\n        var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref8.isOpen;\n\n        return triggerQuery({\n          customQuery: true,\n          value: [],\n          isOpen: isOpen\n        });\n      });\n    }\n  };\n\n  var renderTag = function renderTag(item) {\n    var innerClass = props.innerClass;\n    return (0, _core.jsx)(_Tags.TagItem, {\n      key: item,\n      className: (0, _helper.getClassName)(innerClass, 'selected-tag') || ''\n    }, (0, _core.jsx)('span', null, item), (0, _core.jsx)('span', {\n      role: 'img',\n      'aria-label': 'delete-tag',\n      className: 'close-icon',\n      onClick: function onClick() {\n        return clearTag(item);\n      }\n    }, (0, _core.jsx)(_CancelSvg2.default, null)));\n  };\n\n  var renderTags = function renderTags() {\n    if (!Array.isArray(selectedTags)) {\n      return null;\n    }\n\n    var tagsList = [].concat(selectedTags);\n    var shouldRenderClearAllTag = tagsList.length > 1;\n    var renderSelectedTags = props.renderSelectedTags,\n        innerClass = props.innerClass;\n    return renderSelectedTags ? renderSelectedTags({\n      values: selectedTags,\n      handleClear: clearTag,\n      handleClearAll: clearAllTags\n    }) : (0, _core.jsx)(_Tags.TagsContainer, null, tagsList.map(function (item) {\n      return renderTag(item);\n    }), shouldRenderClearAllTag && (0, _core.jsx)(_Tags.TagItem, {\n      'class': (0, _helper.getClassName)(innerClass, 'selected-tag') || ''\n    }, (0, _core.jsx)('span', null, 'Clear All'), (0, _core.jsx)('span', {\n      role: 'img',\n      'aria-label': 'delete-tag',\n      className: 'close-icon',\n      onClick: clearAllTags\n    }, (0, _core.jsx)(_CancelSvg2.default, null)), ' '));\n  };\n\n  (0, _react.useEffect)(function () {\n    if (onData) {\n      onData({\n        data: parsedSuggestions(),\n        rawData: rawData,\n        aggregationData: aggregationData,\n        loading: isLoading,\n        error: error\n      });\n    }\n  }, [rawData, aggregationData, isLoading, error]);\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      if (value !== undefined && !(0, _helper.isEqual)(value, isTagsMode.current ? selectedTags : currentValue)) {\n        var cause = !value ? _causes2.default.CLEAR_VALUE : undefined;\n\n        if (isTagsMode.current) {\n          cause = _causes2.default.SUGGESTION_SELECT;\n        }\n\n        if (isTagsMode.current && typeof value === 'string') {\n          setValue(value, false, props, undefined, true, false);\n          setCurrentValue(value);\n          triggerDefaultQuery();\n          return;\n        }\n\n        setValue(value, !isOpen && props.autosuggest && !props.strictSelection, props, cause, undefined, false);\n      }\n    }\n  }, [value]);\n  (0, _react.useEffect)(function () {\n    if ( // since, selectedValue will be updated when currentValue changes,\n    // we must only check for the changes introduced by\n    // clear action from SelectedFilters component in which case,\n    // the currentValue will never match the updated selectedValue\n    // currentValue !== props.defaultValue &&\n    hasMounted.current && !(0, _helper.isEqual)(isTagsMode.current ? selectedTags : currentValue, selectedValue) && !(typeof currentValue !== 'string' && !selectedValue)) {\n      if (!selectedValue && currentValue) {\n        // selected value is cleared, call onValueSelected\n        onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n      }\n\n      if (isTagsMode.current && Array.isArray(selectedValue)) {\n        selectedTags = []; // reset\n      }\n\n      if (value === undefined) {\n        setValue(!selectedValue || (0, _utils.isEmpty)(selectedValue) ? '' : selectedValue, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : undefined, hasMounted.current, false);\n      } else if (onChange) {\n        if (!(0, _helper.isEqual)(value, selectedValue) && !(0, _helper.isEqual)(selectedValue, isTagsMode.current ? selectedTags : currentValue)) {\n          if (isTagsMode.current && typeof selectedValue !== 'string') {\n            setSelectedTags(selectedValue);\n          } // value prop exists\n\n\n          onChange(selectedValue || (isTagsMode.current ? [] : ''), function () {\n            var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                isOpen = _ref9.isOpen;\n\n            return triggerQuery({\n              customQuery: true,\n              value: selectedValue || '',\n              isOpen: isOpen\n            });\n          });\n        }\n      } else {\n        // value prop exists and onChange is not defined:\n        // we need to put the current value back into the store\n        // if the clear action was triggered by interacting with\n        // selected-filters component\n        setValue(isTagsMode.current ? selectedTags : currentValue, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : undefined, true, false);\n      }\n    }\n  }, [selectedValue]);\n  (0, _react.useEffect)(function () {\n    hasMounted.current = true; // register hotkeys for listening to focusShortcuts' key presses\n\n    listenForFocusShortcuts();\n  }, []);\n\n  var hasSuggestions = function hasSuggestions() {\n    return Array.isArray(parsedSuggestions()) && parsedSuggestions().length;\n  };\n\n  return (0, _core.jsx)(_Container2.default, {\n    style: props.style,\n    className: props.className\n  }, props.title && (0, _core.jsx)(_Title2.default, {\n    className: (0, _helper.getClassName)(props.innerClass, 'title') || null\n  }, props.title), props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n    id: props.componentId + '-downshift',\n    onChange: onSuggestionSelected,\n    onStateChange: handleStateChange,\n    isOpen: isOpen,\n    itemToString: function itemToString(i) {\n      return i;\n    },\n    render: function render(_ref10) {\n      var getRootProps = _ref10.getRootProps,\n          getInputProps = _ref10.getInputProps,\n          getItemProps = _ref10.getItemProps,\n          isOpen = _ref10.isOpen,\n          highlightedIndex = _ref10.highlightedIndex,\n          setHighlightedIndex = _ref10.setHighlightedIndex,\n          rest = _objectWithoutProperties(_ref10, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n      var renderSuggestionsDropdown = function renderSuggestionsDropdown() {\n        var getIcon = function getIcon(iconType, item) {\n          switch (iconType) {\n            case _helper.suggestionTypes.Recent:\n              return props.recentSearchesIcon;\n\n            case _helper.suggestionTypes.Popular:\n              return props.popularSearchesIcon;\n\n            case _helper.suggestionTypes.Featured:\n              if (item.icon) {\n                return (0, _core.jsx)('div', {\n                  style: {\n                    display: 'flex'\n                  },\n                  dangerouslySetInnerHTML: {\n                    __html: (0, _xss2.default)(item.icon)\n                  }\n                });\n              }\n\n              return (0, _core.jsx)('img', {\n                style: {\n                  maxHeight: '25px'\n                },\n                src: (0, _xss2.default)(item.iconURL),\n                alt: item.value\n              });\n\n            default:\n              return null;\n          }\n        }; // action icon is dispkayed on right of the suggestion item\n\n\n        var getActionIcon = function getActionIcon(item) {\n          if (item._suggestion_type === _helper.suggestionTypes.Featured) {\n            if (item.action === _helper.featuredSuggestionsActionTypes.FUNCTION) {\n              return (0, _core.jsx)(_AutofillSvg2.default, {\n                style: {\n                  transform: 'rotate(135deg)',\n                  pointerEvents: 'none'\n                }\n              });\n            }\n\n            return null;\n          } else if (!item._category) {\n            /* 👇 avoid showing autofill for category suggestions👇 */\n            return (0, _core.jsx)(_AutofillSvg2.default, {\n              onClick: function onClick(e) {\n                e.stopPropagation();\n                onAutofillClick(item);\n              }\n            });\n          }\n\n          return null;\n        };\n\n        var indexOffset = 0;\n        return (0, _core.jsx)(_react2.default.Fragment, null, (0, _helper.hasCustomRenderer)(props) && getComponent(_extends({\n          getInputProps: getInputProps,\n          getItemProps: getItemProps,\n          isOpen: isOpen,\n          highlightedIndex: highlightedIndex,\n          setHighlightedIndex: setHighlightedIndex\n        }, rest)), isOpen && renderLoader(), isOpen && renderError(), !(0, _helper.hasCustomRenderer)(props) && isOpen && hasSuggestions() ? (0, _core.jsx)('ul', {\n          css: (0, _Input.searchboxSuggestions)(props.themePreset, props.theme),\n          className: '' + (0, _helper.getClassName)(props.innerClass, 'list')\n        }, parsedSuggestions().map(function (item, itemIndex) {\n          var index = indexOffset + itemIndex;\n\n          if (Array.isArray(item)) {\n            var sectionHtml = (0, _xss2.default)(item[0].sectionLabel);\n            indexOffset += item.length - 1;\n            return (0, _core.jsx)('div', {\n              className: 'section-container',\n              key: '' + item[0].sectionId\n            }, sectionHtml && (0, _core.jsx)('div', {\n              className: 'section-header ' + (0, _helper.getClassName)(props.innerClass, 'section-label'),\n              dangerouslySetInnerHTML: {\n                __html: sectionHtml\n              }\n            }), (0, _core.jsx)('ul', {\n              className: 'section-list'\n            }, item.map(function (sectionItem, sectionIndex) {\n              return (0, _core.jsx)('li', _extends({}, getItemProps({\n                item: sectionItem\n              }), {\n                key: sectionItem.sectionId + sectionIndex + '-' + sectionItem.value,\n                style: {\n                  justifyContent: 'flex-start',\n                  alignItems: 'center'\n                },\n                className: '' + (highlightedIndex === index + sectionIndex ? 'active-li-item ' + (0, _helper.getClassName)(props.innerClass, 'active-suggestion-item') : 'li-item ' + (0, _helper.getClassName)(props.innerClass, 'suggestion-item'))\n              }), props.renderItem ? props.renderItem(sectionItem) : (0, _core.jsx)(_react2.default.Fragment, null, (0, _core.jsx)('div', {\n                style: {\n                  padding: '0 10px 0 0',\n                  display: 'flex'\n                }\n              }, (0, _core.jsx)(_CustomSvg2.default, {\n                iconId: sectionIndex + index + 1 + '-' + sectionItem.value + '-icon',\n                className: (0, _helper.getClassName)(props.innerClass, sectionItem._suggestion_type + '-search-icon') || null,\n                icon: getIcon(sectionItem._suggestion_type, sectionItem),\n                type: sectionItem._suggestion_type + '-search-icon'\n              })), (0, _core.jsx)('div', {\n                className: 'trim'\n              }, (0, _core.jsx)(_Flex2.default, {\n                direction: 'column'\n              }, sectionItem.label && (0, _core.jsx)('div', {\n                className: 'section-list-item__label',\n                dangerouslySetInnerHTML: {\n                  __html: (0, _xss2.default)(sectionItem.label)\n                }\n              }), sectionItem.description && (0, _core.jsx)('div', {\n                className: 'section-list-item__description',\n                dangerouslySetInnerHTML: {\n                  __html: (0, _xss2.default)(sectionItem.description)\n                }\n              }))), getActionIcon(sectionItem)));\n            })));\n          }\n\n          return (0, _core.jsx)('li', _extends({}, getItemProps({\n            item: item\n          }), {\n            key: index + 1 + '-' + item.value,\n            style: {\n              justifyContent: 'flex-start',\n              alignItems: 'center'\n            },\n            className: '' + (highlightedIndex === index ? 'active-li-item ' + (0, _helper.getClassName)(props.innerClass, 'active-suggestion-item') : 'li-item ' + (0, _helper.getClassName)(props.innerClass, 'suggestion-item'))\n          }), props.renderItem ? props.renderItem(item) : (0, _core.jsx)(_react2.default.Fragment, null, (0, _core.jsx)('div', {\n            style: {\n              padding: '0 10px 0 0',\n              display: 'flex'\n            }\n          }, (0, _core.jsx)(_CustomSvg2.default, {\n            iconId: index + 1 + '-' + item.value + '-icon',\n            className: (0, _helper.getClassName)(props.innerClass, item._suggestion_type + '-search-icon') || null,\n            icon: getIcon(item._suggestion_type, item),\n            type: item._suggestion_type + '-search-icon'\n          })), (0, _core.jsx)(_SuggestionItem2.default, {\n            currentValue: currentValue || '',\n            suggestion: item\n          }), getActionIcon(item)));\n        })) : renderNoSuggestion(parsedSuggestions()));\n      };\n\n      return (0, _core.jsx)('div', getRootProps({\n        css: _Input.suggestionsContainer\n      }, {\n        suppressRefError: true\n      }), (0, _core.jsx)(_InputGroup2.default, {\n        isOpen: isOpen\n      }, renderInputAddonBefore(), (0, _core.jsx)(_InputWrapper2.default, null, (0, _core.jsx)(_Input2.default, _extends({\n        'aria-label': props.componentId,\n        id: props.componentId + '-input',\n        showIcon: props.showIcon,\n        showClear: props.showClear,\n        iconPosition: props.iconPosition,\n        ref: _inputRef\n      }, getInputProps({\n        className: (0, _helper.getClassName)(props.innerClass, 'input'),\n        placeholder: props.placeholder,\n        value: currentValue === null ? '' : currentValue,\n        onChange: onInputChange,\n        onBlur: withTriggerQuery(props.onBlur),\n        onFocus: handleFocus,\n        onClick: function onClick() {\n          // clear highlighted index\n          setHighlightedIndex(null);\n        },\n        onKeyPress: withTriggerQuery(props.onKeyPress),\n        onKeyDown: function onKeyDown(e) {\n          return handleKeyDown(e, highlightedIndex);\n        },\n        onKeyUp: withTriggerQuery(props.onKeyUp),\n        autoFocus: props.autoFocus\n      }), {\n        themePreset: props.themePreset,\n        type: props.type,\n        searchBox: true // a prop specific to Input styled-component\n        ,\n        isOpen: isOpen // is dropdown open or not\n\n      })), renderIcons(), !props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))), renderInputAddonAfter(), renderEnterButtonElement()), props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest)), renderTags());\n    }\n  }, props.downShiftProps)) : (0, _core.jsx)('div', {\n    css: _Input.suggestionsContainer\n  }, (0, _core.jsx)(_InputGroup2.default, {\n    isOpen: false\n  }, renderInputAddonBefore(), (0, _core.jsx)(_InputWrapper2.default, null, (0, _core.jsx)(_Input2.default, {\n    'aria-label': props.componentId,\n    className: (0, _helper.getClassName)(props.innerClass, 'input') || null,\n    placeholder: props.placeholder,\n    value: currentValue || '',\n    onChange: onInputChange,\n    onBlur: withTriggerQuery(props.onBlur),\n    onFocus: withTriggerQuery(props.onFocus),\n    onKeyPress: withTriggerQuery(props.onKeyPress),\n    onKeyDown: handleKeyDown,\n    onKeyUp: withTriggerQuery(props.onKeyUp),\n    autoFocus: props.autoFocus,\n    iconPosition: props.iconPosition,\n    showIcon: props.showIcon,\n    showClear: props.showClear,\n    themePreset: props.themePreset,\n    searchBox: true // a prop specific to Input styled-component\n    ,\n    isOpen: false // is dropdown open or not\n    ,\n    type: props.type\n  }), renderIcons()), renderInputAddonAfter(), renderEnterButtonElement())));\n};\n\nSearchBox.propTypes = {\n  updateQuery: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  selectedCategory: _types2.default.string,\n  suggestions: _types2.default.suggestions,\n  triggerAnalytics: _types2.default.funcRequired,\n  error: _types2.default.title,\n  isLoading: _types2.default.bool,\n  time: _types2.default.number,\n  enableAppbase: _types2.default.bool,\n  rawData: _types2.default.rawData,\n  aggregationData: _types2.default.aggregationData,\n  // component props\n  autoFocus: _types2.default.bool,\n  autosuggest: _types2.default.bool,\n  enableSynonyms: _types2.default.bool,\n  distinctField: _types2.default.string,\n  distinctFieldConfig: _types2.default.componentObject,\n  index: _types2.default.string,\n  enablePopularSuggestions: _types2.default.bool,\n  enableRecentSuggestions: _types2.default.bool,\n  queryString: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  clearIcon: _types2.default.children,\n  componentId: _types2.default.stringRequired,\n  customHighlight: _types2.default.func,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  dataField: _types2.default.dataFieldValidator,\n  aggregationField: _types2.default.string,\n  aggregationSize: _types2.default.number,\n  size: _types2.default.number,\n  debounce: _types2.default.number,\n  defaultValue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n  value: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n  customData: _types2.default.title,\n  downShiftProps: _types2.default.props,\n  children: _types2.default.func,\n  excludeFields: _types2.default.excludeFields,\n  fieldWeights: _types2.default.fieldWeights,\n  filterLabel: _types2.default.string,\n  fuzziness: _types2.default.fuzziness,\n  highlight: _types2.default.bool,\n  highlightField: _types2.default.stringOrArray,\n  icon: _types2.default.children,\n  iconPosition: _types2.default.iconPosition,\n  innerClass: _types2.default.style,\n  includeFields: _types2.default.includeFields,\n  loader: _types2.default.title,\n  nestedField: _types2.default.string,\n  onError: _types2.default.func,\n  onBlur: _types2.default.func,\n  onFocus: _types2.default.func,\n  onKeyDown: _types2.default.func,\n  onKeyPress: _types2.default.func,\n  onKeyUp: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  onValueSelected: _types2.default.func,\n  placeholder: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  react: _types2.default.react,\n  render: _types2.default.func,\n  renderError: _types2.default.title,\n  renderNoSuggestion: _types2.default.title,\n  showClear: _types2.default.bool,\n  showDistinctSuggestions: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  showIcon: _types2.default.bool,\n  showVoiceSearch: _types2.default.bool,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  theme: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  type: _types2.default.string,\n  URLParams: _types2.default.bool,\n  strictSelection: _types2.default.bool,\n  searchOperators: _types2.default.bool,\n  enablePredictiveSuggestions: _types2.default.bool,\n  recentSearchesIcon: _types2.default.componentObject,\n  popularSearchesIcon: _types2.default.componentObject,\n  // Mic props\n  getMicInstance: _types2.default.func,\n  renderMic: _types2.default.func,\n  //\n  focusShortcuts: _types2.default.focusShortcuts,\n  addonBefore: _types2.default.children,\n  addonAfter: _types2.default.children,\n  expandSuggestionsContainer: _types2.default.bool,\n  popularSuggestionsConfig: _types2.default.componentObject,\n  recentSuggestionsConfig: _types2.default.componentObject,\n  applyStopwords: _types2.default.bool,\n  customStopwords: _types2.default.stringArray,\n  onData: _types2.default.func,\n  renderItem: _types2.default.func,\n  isOpen: _types2.default.bool,\n  enableIndexSuggestions: _types2.default.bool,\n  enableFeaturedSuggestions: _types2.default.bool,\n  featuredSuggestionsConfig: _types2.default.componentObject,\n  indexSuggestionsConfig: _types2.default.componentObject,\n  enterButton: _types2.default.bool,\n  renderEnterButton: _types2.default.func,\n  customEvents: _types2.default.componentObject,\n  searchboxId: _types2.default.string,\n  endpoint: _types2.default.endpoint,\n  mode: (0, _propTypes.oneOf)(['select', 'tag']),\n  highlightConfig: _types2.default.componentObject,\n  renderSelectedTags: _types2.default.func\n};\nSearchBox.defaultProps = {\n  autosuggest: true,\n  className: null,\n  debounce: 0,\n  downShiftProps: {},\n  enableSynonyms: true,\n  enablePopularSuggestions: false,\n  excludeFields: [],\n  iconPosition: 'left',\n  includeFields: ['*'],\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showFilter: true,\n  showIcon: true,\n  showVoiceSearch: false,\n  style: {},\n  URLParams: false,\n  showClear: false,\n  showDistinctSuggestions: true,\n  strictSelection: false,\n  searchOperators: false,\n  size: 10,\n  time: 0,\n  focusShortcuts: ['/'],\n  addonBefore: undefined,\n  addonAfter: undefined,\n  expandSuggestionsContainer: true,\n  suggestions: [],\n  isOpen: false,\n  enterButton: false,\n  type: 'search',\n  mode: 'select'\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    selectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n    suggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n    rawData: state.rawData[props.componentId],\n    aggregationData: state.compositeAggregations[props.componentId],\n    themePreset: state.config.themePreset,\n    isLoading: !!state.isLoading[props.componentId + '_active'],\n    error: state.error[props.componentId],\n    enableAppbase: state.config.enableAppbase,\n    time: state.hits[props.componentId] && state.hits[props.componentId].time,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    customEvents: state.config.analyticsConfig ? state.config.analyticsConfig.customEvents : {}\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n      return dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n    },\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)(SearchBox, _extends({\n    ref: props.myForwardedRef\n  }, props));\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(_PreferencesConsumer2.default, {\n    userProps: props\n  }, function (preferenceProps) {\n    return (0, _core.jsx)(_ComponentWrapper2.default, _extends({}, preferenceProps, {\n      internalComponent: true,\n      componentType: _constants.componentTypes.searchBox,\n      mode: preferenceProps.testMode ? 'test' : ''\n    }), function (componentProps) {\n      return (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n        myForwardedRef: ref\n      }));\n    });\n  });\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, SearchBox);\nForwardRefComponent.displayName = 'SearchBox';\nexports.default = ForwardRefComponent;","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_core","require","_constants","_transform","_emotionTheming","_propTypes","_causes","_causes2","_interopRequireDefault","_helper","_downshift","_downshift2","_hoistNonReactStatics","_hoistNonReactStatics2","_react","_react2","_types","_types2","_actions","_hotkeysJs","_hotkeysJs2","_xss","_xss2","_PreferencesConsumer","_PreferencesConsumer2","_ComponentWrapper","_ComponentWrapper2","_InputGroup","_InputGroup2","_InputWrapper","_InputWrapper2","_InputAddon","_InputAddon2","_IconGroup","_IconGroup2","_IconWrapper","_IconWrapper2","_SearchSvg","_SearchSvg2","_Tags","_Container","_Container2","_Title","_Title2","_Input","_Input2","_Button","_Button2","_SuggestionItem","_SuggestionItem2","_utils","_Mic","_Mic2","_CancelSvg","_CancelSvg2","_CustomSvg","_CustomSvg2","_SuggestionWrapper","_SuggestionWrapper2","_AutofillSvg","_AutofillSvg2","_Flex","_Flex2","obj","default","_objectWithoutProperties","keys","indexOf","useConstructor","callBack","undefined","_useState","useState","hasBeenCalled","setHasBeenCalled","SearchBox","props","selectedValue","selectedCategory","value","defaultValue","componentId","rawData","aggregationData","isLoading","error","onData","onChange","focusShortcuts","defaultQuery","filterLabel","showFilter","URLParams","customQuery","customEvents","internalComponent","getInternalComponentID","_useState2","currentValue","setCurrentValue","_useState3","selectedTags","setSelectedTags","_useState4","isOpen","setIsOpen","_inputRef","useRef","isTagsMode","stats","getResultStats","parsedSuggestions","suggestionsArray","Array","isArray","suggestions","concat","withClickIds","sectionsAccumulated","sectionisedSuggestions","reduce","acc","d","currentIndex","includes","sectionId","filter","g","push","values","focusSearchBox","event","elt","srcElement","tagName","isContentEditable","current","focus","listenForFocusShortcuts","isEmpty","parseFocusShortcuts","join","handler","preventDefault","modifierKeys","extractModifierKeysFromFocusShortcuts","index","element","triggerClickAnalytics","searchPosition","documentId","docId","hitData","find","hit","_click_id","_id","triggerAnalytics","shouldQuery","dataFields","finalQuery","phrasePrefixFields","fields","map","dataField","queryField","field","weight","endsWith","searchOperators","queryString","query","default_operator","queryFormat","multi_match","type","operator","fuzziness","searchBoxDefaultQuery","normalizeDataField","fieldWeights","query_string","simple_query_string","bool","should","minimum_should_match","nestedField","nested","path","triggerDefaultQuery","paramValue","autosuggest","defaultQueryTobeSet","updateDefaultQuery","updateQuery","componentType","componentTypes","searchBox","triggerCustomQuery","categoryValue","customQueryTobeSet","queryTobeSet","updateCustomQuery","label","category","triggerQuery","_ref","_ref$isOpen","_ref$customQuery","_ref$defaultQuery","_ref$value","_ref$categoryValue","onValueSelected","valueSelected","cause","suggestion","handleTextChange","debounce","valueParam","enterButton","CLEAR_VALUE","setValue","isDefaultValue","setValueProps","hasMounted","toggleIsOpen","performUpdate","isEqual","newSelectedTags","newCurrentValue","decodeHtml","SUGGESTION_SELECT","mergedArray","from","Set","queryHandlerValue","strictSelection","ENTER_PRESS","SEARCH_ICON_CLICK","onValueChange","checkValueChange","beforeValueChange","withTriggerQuery","func","e","_ref2","handleFeaturedSuggestionClicked","action","featuredSuggestionsActionTypes","NAVIGATE","_JSON$parse","JSON","parse","subAction","_JSON$parse$target","_JSON$parse$link","link","window","open","FUNCTION","Function","SELECT","blur","console","onSuggestionSelected","_suggestion_type","suggestionTypes","Featured","suggestionValue","_category","emitValue","onInputChange","inputValue","handleCaretPosition","_ref3","enterButtonOnClick","handleKeyDown","highlightedIndex","onKeyDown","clearValue","_ref4","shouldMicRender","showVoiceSearch","webkitSpeechRecognition","SpeechRecognition","handleStateChange","changes","stateAndHelpers","selectedItem","stateChangeTypes","mouseUp","clickItem","keyDownEnter","handleSearchIconClick","trim","handleVoiceResults","_ref5","results","isFinal","transcript","renderNoSuggestion","finalSuggestionsList","themePreset","theme","innerClass","renderError","jsx","innerClassName","renderLoader","loader","isFunction","getComponent","downshiftProps","data","loading","resultStats","renderInputAddonBefore","addonBefore","expandSuggestionsContainer","renderInputAddonAfter","addonAfter","renderEnterButtonElement","renderEnterButton","getEnterButtonMarkup","className","getClassName","primary","onClick","renderIcon","showIcon","icon","renderCancelIcon","showClear","clearIcon","renderIcons","renderMic","getMicInstance","iconPosition","groupPosition","positionType","isClearIcon","getInstance","render","onResult","handleFocus","onFocus","onAutofillClick","mode","SEARCH_COMPONENTS_MODES","TAG","warn","enableAppbase","Error","currentLocalValue","_ref6","clearTag","tagValue","tag","_ref7","clearAllTags","_ref8","renderTag","item","TagItem","role","renderTags","tagsList","shouldRenderClearAllTag","renderSelectedTags","handleClear","handleClearAll","TagsContainer","useEffect","_ref9","hasSuggestions","style","title","id","onStateChange","itemToString","_ref10","getRootProps","getInputProps","getItemProps","setHighlightedIndex","rest","renderSuggestionsDropdown","getIcon","iconType","Recent","recentSearchesIcon","Popular","popularSearchesIcon","display","dangerouslySetInnerHTML","__html","maxHeight","src","iconURL","alt","getActionIcon","transform","pointerEvents","stopPropagation","indexOffset","Fragment","hasCustomRenderer","css","searchboxSuggestions","itemIndex","sectionHtml","sectionLabel","sectionItem","sectionIndex","justifyContent","alignItems","renderItem","padding","iconId","direction","description","suggestionsContainer","suppressRefError","ref","placeholder","onBlur","onKeyPress","onKeyUp","autoFocus","apply","downShiftProps","propTypes","funcRequired","string","time","number","enableSynonyms","distinctField","distinctFieldConfig","componentObject","enablePopularSuggestions","enableRecentSuggestions","children","stringRequired","customHighlight","dataFieldValidator","aggregationField","aggregationSize","size","oneOfType","stringArray","customData","excludeFields","highlight","highlightField","stringOrArray","includeFields","onError","onQueryChange","queryFormatSearch","react","showDistinctSuggestions","enablePredictiveSuggestions","popularSuggestionsConfig","recentSuggestionsConfig","applyStopwords","customStopwords","enableIndexSuggestions","enableFeaturedSuggestions","featuredSuggestionsConfig","indexSuggestionsConfig","searchboxId","endpoint","oneOf","highlightConfig","defaultProps","mapStateToProps","state","selectedValues","hits","compositeAggregations","config","total","hidden","analyticsConfig","mapDispatchtoProps","dispatch","updateQueryObject","recordSuggestionClick","setCustomQuery","component","setDefaultQuery","ConnectedComponent","connect","withTheme","myForwardedRef","ForwardRefComponent","forwardRef","userProps","preferenceProps","testMode","componentProps","displayName"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/search/SearchBox.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /** @jsxRuntime classic */\n/** @jsx jsx */\n\n\nvar _core = require('@emotion/core');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _propTypes = require('prop-types');\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hotkeysJs = require('hotkeys-js');\n\nvar _hotkeysJs2 = _interopRequireDefault(_hotkeysJs);\n\nvar _xss = require('xss');\n\nvar _xss2 = _interopRequireDefault(_xss);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _InputGroup = require('../../styles/InputGroup');\n\nvar _InputGroup2 = _interopRequireDefault(_InputGroup);\n\nvar _InputWrapper = require('../../styles/InputWrapper');\n\nvar _InputWrapper2 = _interopRequireDefault(_InputWrapper);\n\nvar _InputAddon = require('../../styles/InputAddon');\n\nvar _InputAddon2 = _interopRequireDefault(_InputAddon);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _Tags = require('../../styles/Tags');\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Button = require('../../styles/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _utils = require('../../utils');\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _AutofillSvg = require('../shared/AutofillSvg');\n\nvar _AutofillSvg2 = _interopRequireDefault(_AutofillSvg);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar useConstructor = function useConstructor() {\n\tvar callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n\tvar _useState = (0, _react.useState)(false),\n\t    hasBeenCalled = _useState[0],\n\t    setHasBeenCalled = _useState[1];\n\n\tif (hasBeenCalled) return;\n\tcallBack();\n\tsetHasBeenCalled(true);\n};\n\nvar SearchBox = function SearchBox(props) {\n\tvar selectedValue = props.selectedValue,\n\t    selectedCategory = props.selectedCategory,\n\t    value = props.value,\n\t    defaultValue = props.defaultValue,\n\t    componentId = props.componentId,\n\t    rawData = props.rawData,\n\t    aggregationData = props.aggregationData,\n\t    isLoading = props.isLoading,\n\t    error = props.error,\n\t    onData = props.onData,\n\t    onChange = props.onChange,\n\t    focusShortcuts = props.focusShortcuts,\n\t    defaultQuery = props.defaultQuery,\n\t    filterLabel = props.filterLabel,\n\t    showFilter = props.showFilter,\n\t    URLParams = props.URLParams,\n\t    customQuery = props.customQuery,\n\t    customEvents = props.customEvents;\n\n\n\tvar internalComponent = (0, _transform.getInternalComponentID)(componentId);\n\n\tvar _useState2 = (0, _react.useState)(''),\n\t    currentValue = _useState2[0],\n\t    setCurrentValue = _useState2[1];\n\t// eslint-disable-next-line prefer-const\n\n\n\tvar _useState3 = (0, _react.useState)([]),\n\t    selectedTags = _useState3[0],\n\t    setSelectedTags = _useState3[1];\n\n\tvar _useState4 = (0, _react.useState)(props.isOpen),\n\t    isOpen = _useState4[0],\n\t    setIsOpen = _useState4[1];\n\n\tvar _inputRef = (0, _react.useRef)(null);\n\tvar isTagsMode = (0, _react.useRef)(false);\n\tvar stats = function stats() {\n\t\treturn (0, _helper.getResultStats)(props);\n\t};\n\n\tvar parsedSuggestions = function parsedSuggestions() {\n\t\tvar suggestionsArray = [];\n\t\tif (Array.isArray(props.suggestions) && props.suggestions.length) {\n\t\t\tsuggestionsArray = [].concat((0, _helper.withClickIds)(props.suggestions));\n\t\t}\n\n\t\tvar sectionsAccumulated = [];\n\t\tvar sectionisedSuggestions = suggestionsArray.reduce(function (acc, d, currentIndex) {\n\t\t\tif (sectionsAccumulated.includes(d.sectionId)) return acc;\n\t\t\tif (d.sectionId) {\n\t\t\t\tacc[currentIndex] = suggestionsArray.filter(function (g) {\n\t\t\t\t\treturn g.sectionId === d.sectionId;\n\t\t\t\t});\n\t\t\t\tsectionsAccumulated.push(d.sectionId);\n\t\t\t} else {\n\t\t\t\tacc[currentIndex] = d;\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, {});\n\t\treturn Object.values(sectionisedSuggestions);\n\t};\n\tvar focusSearchBox = function focusSearchBox(event) {\n\t\tvar elt = event.target || event.srcElement;\n\t\tvar tagName = elt.tagName;\n\t\tif (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n\t\t\t// already in an input\n\t\t\treturn;\n\t\t}\n\n\t\tif (_inputRef.current) {\n\t\t\t_inputRef.current.focus();\n\t\t}\n\t};\n\tvar listenForFocusShortcuts = function listenForFocusShortcuts() {\n\t\tif ((0, _utils.isEmpty)(focusShortcuts)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// for single press keys (a-z, A-Z) &, hotkeys' combinations such as 'cmd+k', 'ctrl+shft+a', etc\n\t\t(0, _hotkeysJs2.default)((0, _utils.parseFocusShortcuts)(focusShortcuts).join(','),\n\t\t/* eslint-disable no-shadow */\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tfunction (event, handler) {\n\t\t\t// Prevent the default refresh event under WINDOWS system\n\t\t\tevent.preventDefault();\n\t\t\tfocusSearchBox(event);\n\t\t});\n\n\t\t// if one of modifier keys are used, they are handled below\n\t\t(0, _hotkeysJs2.default)('*', function (event) {\n\t\t\tvar modifierKeys = (0, _utils.extractModifierKeysFromFocusShortcuts)(focusShortcuts);\n\n\t\t\tif (modifierKeys.length === 0) return;\n\n\t\t\tfor (var index = 0; index < modifierKeys.length; index += 1) {\n\t\t\t\tvar element = modifierKeys[index];\n\t\t\t\tif (_hotkeysJs2.default[element]) {\n\t\t\t\t\tfocusSearchBox(event);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\tvar triggerClickAnalytics = function triggerClickAnalytics(searchPosition, documentId) {\n\t\tvar docId = documentId;\n\t\tif (!docId) {\n\t\t\tvar hitData = parsedSuggestions().find(function (hit) {\n\t\t\t\treturn hit._click_id === searchPosition;\n\t\t\t});\n\t\t\tif (hitData && hitData.source && hitData.source._id) {\n\t\t\t\tdocId = hitData.source._id;\n\t\t\t}\n\t\t}\n\t\tprops.triggerAnalytics(searchPosition, docId);\n\t};\n\n\tvar shouldQuery = function shouldQuery(value, dataFields, props) {\n\t\tvar finalQuery = [];\n\t\tvar phrasePrefixFields = [];\n\t\tvar fields = dataFields.map(function (dataField) {\n\t\t\tvar queryField = '' + dataField.field + (dataField.weight ? '^' + dataField.weight : '');\n\t\t\tif (!(dataField.field.endsWith('.keyword') || dataField.field.endsWith('.autosuggest') || dataField.field.endsWith('.search'))) {\n\t\t\t\tphrasePrefixFields.push(queryField);\n\t\t\t}\n\t\t\treturn queryField;\n\t\t});\n\t\tif (props.searchOperators || props.queryString) {\n\t\t\treturn {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\tdefault_operator: props.queryFormat\n\t\t\t};\n\t\t}\n\n\t\tif (props.queryFormat === 'and') {\n\t\t\tfinalQuery.push({\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields: fields,\n\t\t\t\t\ttype: 'cross_fields',\n\t\t\t\t\toperator: 'and'\n\t\t\t\t}\n\t\t\t});\n\t\t\tfinalQuery.push({\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields: fields,\n\t\t\t\t\ttype: 'phrase',\n\t\t\t\t\toperator: 'and'\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (phrasePrefixFields.length > 0) {\n\t\t\t\tfinalQuery.push({\n\t\t\t\t\tmulti_match: {\n\t\t\t\t\t\tquery: value,\n\t\t\t\t\t\tfields: phrasePrefixFields,\n\t\t\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\t\t\toperator: 'and'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn finalQuery;\n\t\t}\n\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'best_fields',\n\t\t\t\toperator: 'or',\n\t\t\t\tfuzziness: props.fuzziness ? props.fuzziness : 0\n\t\t\t}\n\t\t});\n\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'phrase',\n\t\t\t\toperator: 'or'\n\t\t\t}\n\t\t});\n\n\t\tif (phrasePrefixFields.length > 0) {\n\t\t\tfinalQuery.push({\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields: phrasePrefixFields,\n\t\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\t\toperator: 'or'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn finalQuery;\n\t};\n\n\tvar searchBoxDefaultQuery = function searchBoxDefaultQuery(value, props) {\n\t\tvar finalQuery = null;\n\n\t\tvar fields = (0, _helper.normalizeDataField)(props.dataField, props.fieldWeights);\n\t\tif (value) {\n\t\t\tif (props.queryString) {\n\t\t\t\tfinalQuery = {\n\t\t\t\t\tquery_string: shouldQuery(value, fields, props)\n\t\t\t\t};\n\t\t\t} else if (props.searchOperators) {\n\t\t\t\tfinalQuery = {\n\t\t\t\t\tsimple_query_string: shouldQuery(value, fields, props)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tfinalQuery = {\n\t\t\t\t\tbool: {\n\t\t\t\t\t\tshould: shouldQuery(value, fields, props),\n\t\t\t\t\t\tminimum_should_match: '1'\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (value === '') {\n\t\t\tfinalQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tshould: shouldQuery(value, fields, props),\n\t\t\t\t\tminimum_should_match: '1'\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (finalQuery && props.nestedField) {\n\t\t\tfinalQuery = {\n\t\t\t\tnested: {\n\t\t\t\t\tpath: props.nestedField,\n\t\t\t\t\tquery: finalQuery\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn finalQuery;\n\t};\n\n\t// fires query to fetch suggestion\n\tvar triggerDefaultQuery = function triggerDefaultQuery(paramValue) {\n\t\tif (!props.autosuggest) {\n\t\t\treturn;\n\t\t}\n\t\tvar value = typeof paramValue !== 'string' ? currentValue : paramValue;\n\t\tvar query = searchBoxDefaultQuery(value, props);\n\t\tif (defaultQuery) {\n\t\t\tvar defaultQueryTobeSet = defaultQuery(value, props) || {};\n\t\t\tif (defaultQueryTobeSet.query) {\n\t\t\t\tquery = defaultQueryTobeSet.query;\n\t\t\t}\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(componentId, props, value);\n\t\t}\n\t\tprops.updateQuery({\n\t\t\tcomponentId: internalComponent,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tcomponentType: _constants.componentTypes.searchBox\n\t\t});\n\t};\n\n\t// fires query to fetch results(dependent components are affected here)\n\tvar triggerCustomQuery = function triggerCustomQuery(paramValue) {\n\t\tvar categoryValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tvar value = typeof paramValue !== 'string' ? currentValue : paramValue;\n\t\tif (isTagsMode.current) {\n\t\t\tvalue = paramValue;\n\t\t}\n\t\tvar query = searchBoxDefaultQuery('' + value + (!isTagsMode.current && categoryValue ? ' in ' + categoryValue : ''), props);\n\t\tif (customQuery) {\n\t\t\tvar customQueryTobeSet = customQuery(value, props) || {};\n\t\t\tvar queryTobeSet = customQueryTobeSet.query;\n\t\t\tif (queryTobeSet) {\n\t\t\t\tquery = queryTobeSet;\n\t\t\t}\n\t\t\t(0, _helper.updateCustomQuery)(componentId, props, value);\n\t\t}\n\t\tprops.updateQuery(_extends({\n\t\t\tcomponentId: componentId,\n\t\t\tvalue: value,\n\t\t\tquery: query,\n\t\t\tlabel: filterLabel,\n\t\t\tshowFilter: showFilter,\n\t\t\tURLParams: URLParams,\n\t\t\tcomponentType: _constants.componentTypes.searchBox\n\t\t}, !isTagsMode.current ? { category: categoryValue } : {}));\n\t};\n\n\tvar triggerQuery = function triggerQuery() {\n\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t    _ref$isOpen = _ref.isOpen,\n\t\t    isOpen = _ref$isOpen === undefined ? undefined : _ref$isOpen,\n\t\t    _ref$customQuery = _ref.customQuery,\n\t\t    customQuery = _ref$customQuery === undefined ? false : _ref$customQuery,\n\t\t    _ref$defaultQuery = _ref.defaultQuery,\n\t\t    defaultQuery = _ref$defaultQuery === undefined ? false : _ref$defaultQuery,\n\t\t    _ref$value = _ref.value,\n\t\t    value = _ref$value === undefined ? undefined : _ref$value,\n\t\t    _ref$categoryValue = _ref.categoryValue,\n\t\t    categoryValue = _ref$categoryValue === undefined ? undefined : _ref$categoryValue;\n\n\t\tif (typeof isOpen === 'boolean') {\n\t\t\tsetIsOpen(isOpen);\n\t\t}\n\n\t\tif (customQuery) {\n\t\t\ttriggerCustomQuery(value, categoryValue);\n\t\t}\n\t\tif (defaultQuery) {\n\t\t\ttriggerDefaultQuery(value);\n\t\t}\n\t};\n\n\tvar onValueSelected = function onValueSelected() {\n\t\tvar valueSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : currentValue;\n\t\tvar cause = arguments[1];\n\t\tvar suggestion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\t\tvar onValueSelected = props.onValueSelected;\n\n\t\tif (onValueSelected) {\n\t\t\tonValueSelected(valueSelected, cause, suggestion);\n\t\t}\n\t};\n\tvar handleTextChange = (0, _react.useRef)((0, _helper.debounce)(function () {\n\t\tvar valueParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\t\tvar cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\t\tvar enterButton = props.enterButton;\n\n\t\tif (cause === _causes2.default.CLEAR_VALUE) {\n\t\t\ttriggerCustomQuery(valueParam);\n\t\t\ttriggerDefaultQuery(valueParam);\n\t\t} else if (props.autosuggest) {\n\t\t\ttriggerDefaultQuery(valueParam);\n\t\t} else if (value === undefined && !onChange && !enterButton) {\n\t\t\ttriggerCustomQuery(valueParam);\n\t\t}\n\t}, props.debounce));\n\n\tvar setValue = function setValue(value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar setValueProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : props;\n\t\tvar cause = arguments[3];\n\t\tvar hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\t\tvar toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\t\tvar categoryValue = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : undefined;\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tif (isTagsMode.current && (0, _helper.isEqual)(value, selectedTags)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar newSelectedTags = [];\n\t\t\tvar newCurrentValue = (0, _utils.decodeHtml)(value);\n\t\t\tif (hasMounted) {\n\t\t\t\tif (isTagsMode.current && cause === _causes2.default.SUGGESTION_SELECT) {\n\t\t\t\t\tif (Array.isArray(selectedTags) && selectedTags.length) {\n\t\t\t\t\t\t// check if value already present in selectedTags\n\t\t\t\t\t\tif (typeof value === 'string' && selectedTags.includes(value)) {\n\t\t\t\t\t\t\tsetIsOpen(false);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof value === 'string' && !!value) {\n\t\t\t\t\t\t\tnewSelectedTags = [].concat(selectedTags, [value]);\n\t\t\t\t\t\t} else if (Array.isArray(value) && !(0, _helper.isEqual)(selectedTags, value)) {\n\t\t\t\t\t\t\tvar mergedArray = Array.from(new Set([].concat(selectedTags, value)));\n\t\t\t\t\t\t\tnewSelectedTags = mergedArray;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (value) {\n\t\t\t\t\t\tnewSelectedTags = typeof value !== 'string' ? value : [].concat(value);\n\t\t\t\t\t}\n\t\t\t\t\tnewCurrentValue = '';\n\t\t\t\t\tsetSelectedTags(newSelectedTags);\n\t\t\t\t} else {\n\t\t\t\t\tnewCurrentValue = (0, _utils.decodeHtml)(value);\n\t\t\t\t}\n\n\t\t\t\tif (toggleIsOpen) setIsOpen(!isOpen);\n\t\t\t\tsetCurrentValue(newCurrentValue);\n\n\t\t\t\tvar queryHandlerValue = value;\n\t\t\t\tif (isTagsMode.current && cause === _causes2.default.SUGGESTION_SELECT) {\n\t\t\t\t\tqueryHandlerValue = Array.isArray(newSelectedTags) && newSelectedTags.length ? newSelectedTags : undefined;\n\t\t\t\t}\n\n\t\t\t\tif (isDefaultValue) {\n\t\t\t\t\tif (props.autosuggest) {\n\t\t\t\t\t\ttriggerQuery(_extends({}, toggleIsOpen && { isOpen: !isOpen }, {\n\t\t\t\t\t\t\tdefaultQuery: false,\n\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\ttriggerDefaultQuery(newCurrentValue);\n\t\t\t\t\t}\n\t\t\t\t\t// in case of strict selection only SUGGESTION_SELECT should be able\n\t\t\t\t\t// to set the query otherwise the value should reset\n\t\t\t\t\tif (setValueProps.strictSelection) {\n\t\t\t\t\t\tif (cause === _causes2.default.SUGGESTION_SELECT || (isTagsMode.current ? newSelectedTags.length === 0 : value === '')) {\n\t\t\t\t\t\t\ttriggerCustomQuery(queryHandlerValue, isTagsMode.current ? undefined : categoryValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetValue('', true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (props.value === undefined || cause === _causes2.default.SUGGESTION_SELECT || cause === _causes2.default.CLEAR_VALUE || cause === _causes2.default.ENTER_PRESS || cause === _causes2.default.SEARCH_ICON_CLICK) {\n\t\t\t\t\t\ttriggerCustomQuery(queryHandlerValue, isTagsMode.current ? undefined : categoryValue);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// debounce for handling text while typing\n\t\t\t\t\thandleTextChange.current(value, cause);\n\t\t\t\t}\n\t\t\t\tif (setValueProps.onValueChange) setValueProps.onValueChange(value);\n\t\t\t} else {\n\t\t\t\ttriggerQuery({\n\t\t\t\t\tdefaultQuery: props.autosuggest,\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: value,\n\t\t\t\t\tcategoryValue: isTagsMode.current ? undefined : categoryValue\n\t\t\t\t});\n\t\t\t\tif (setValueProps.onValueChange) setValueProps.onValueChange(value);\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(setValueProps.componentId, value, setValueProps.beforeValueChange, performUpdate);\n\t};\n\tvar withTriggerQuery = function withTriggerQuery(func) {\n\t\tif (func) {\n\t\t\treturn function (e) {\n\t\t\t\treturn func(e, function () {\n\t\t\t\t\tvar _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { isOpen: false },\n\t\t\t\t\t    isOpen = _ref2.isOpen;\n\n\t\t\t\t\treturn setValue(props.value, !isOpen, props);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t};\n\n\tvar handleFeaturedSuggestionClicked = function handleFeaturedSuggestionClicked(suggestion) {\n\t\ttry {\n\t\t\tif (suggestion.action === _helper.featuredSuggestionsActionTypes.NAVIGATE) {\n\t\t\t\tvar _JSON$parse = JSON.parse(suggestion.subAction),\n\t\t\t\t    _JSON$parse$target = _JSON$parse.target,\n\t\t\t\t    target = _JSON$parse$target === undefined ? '_self' : _JSON$parse$target,\n\t\t\t\t    _JSON$parse$link = _JSON$parse.link,\n\t\t\t\t    link = _JSON$parse$link === undefined ? '/' : _JSON$parse$link;\n\n\t\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t\twindow.open(link, target);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (suggestion.action === _helper.featuredSuggestionsActionTypes.FUNCTION) {\n\t\t\t\t// eslint-disable-next-line no-new-func\n\t\t\t\tvar func = new Function('return ' + suggestion.subAction)();\n\t\t\t\tfunc(suggestion, currentValue, customEvents);\n\t\t\t}\n\t\t\tif (suggestion.action === _helper.featuredSuggestionsActionTypes.SELECT) {\n\t\t\t\tsetValue(suggestion.value, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : _causes2.default.ENTER_PRESS);\n\t\t\t\tonValueSelected(suggestion.value, _causes2.default.SUGGESTION_SELECT);\n\t\t\t}\n\t\t\t// blur is important to close the dropdown\n\t\t\t// on selecting one of featured suggestions\n\t\t\t// else Downshift probably is focusing the dropdown\n\t\t\t// and not letting it close\n\t\t\t_inputRef.current.blur();\n\t\t} catch (e) {\n\t\t\tconsole.error('Error: There was an error parsing the subAction for the featured suggestion with label, \"' + suggestion.label + '\"', e);\n\t\t}\n\t};\n\n\tvar onSuggestionSelected = function onSuggestionSelected(suggestion) {\n\t\tsetIsOpen(false);\n\t\t// handle featured suggestions click event\n\t\tif (suggestion._suggestion_type === _helper.suggestionTypes.Featured) {\n\t\t\thandleFeaturedSuggestionClicked(suggestion);\n\t\t\treturn;\n\t\t}\n\n\t\tvar suggestionValue = suggestion.value;\n\n\t\tif (value === undefined) {\n\t\t\tsetValue(suggestionValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n\t\t} else if (onChange) {\n\t\t\tvar emitValue = suggestionValue;\n\t\t\tif (isTagsMode.current) {\n\t\t\t\temitValue = Array.isArray(selectedTags) ? [].concat(selectedTags) : [];\n\t\t\t\tif (selectedTags && selectedTags.includes(suggestionValue)) {\n\t\t\t\t\t// avoid duplicates in tags array\n\t\t\t\t\tsetIsOpen(false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\temitValue.push(suggestionValue);\n\t\t\t}\n\t\t\tsetValue(emitValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n\t\t\tonChange(emitValue, function () {\n\t\t\t\treturn triggerQuery(_extends({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: emitValue,\n\t\t\t\t\tisOpen: false\n\t\t\t\t}, !isTagsMode.current && { categoryValue: suggestion._category }));\n\t\t\t});\n\t\t}\n\t\t// Record analytics for selected suggestions\n\t\ttriggerClickAnalytics(suggestion._click_id);\n\t\t// onValueSelected is user interaction driven:\n\t\t// it should be triggered irrespective of controlled (or)\n\t\t// uncontrolled component behavior\n\t\tonValueSelected(suggestionValue, _causes2.default.SUGGESTION_SELECT, suggestion);\n\t};\n\n\tvar onInputChange = function onInputChange(e) {\n\t\tvar inputValue = e.target.value;\n\n\t\tif (!isOpen && props.autosuggest) {\n\t\t\tsetIsOpen(true);\n\t\t}\n\t\tif (value === undefined) {\n\t\t\tsetValue(inputValue, false, props, inputValue === '' ? _causes2.default.CLEAR_VALUE : undefined, true, false);\n\t\t} else if (onChange) {\n\t\t\t// handle caret position in controlled components\n\t\t\t(0, _utils.handleCaretPosition)(e);\n\n\t\t\tonChange(inputValue, function () {\n\t\t\t\tvar _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref3.isOpen;\n\n\t\t\t\ttriggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: inputValue,\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t}, e);\n\t\t}\n\t};\n\tvar enterButtonOnClick = function enterButtonOnClick() {\n\t\treturn triggerQuery({ isOpen: false, value: currentValue, customQuery: true });\n\t};\n\n\tvar handleKeyDown = function handleKeyDown(event) {\n\t\tvar highlightedIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\t\t// if a suggestion was selected, delegate the handling\n\t\t// to suggestion handler\n\t\tif (event.key === 'Enter') {\n\t\t\tif (props.autosuggest === false) {\n\t\t\t\tenterButtonOnClick();\n\t\t\t} else if (highlightedIndex === null) {\n\t\t\t\tsetValue(event.target.value, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : _causes2.default.ENTER_PRESS);\n\t\t\t\tonValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n\t\t\t}\n\t\t}\n\n\t\tif (props.onKeyDown) {\n\t\t\tprops.onKeyDown(event, undefined.triggerQuery);\n\t\t}\n\t};\n\n\tvar clearValue = function clearValue() {\n\t\tsetValue('', false, props, _causes2.default.CLEAR_VALUE, true, false);\n\t\tif (onChange) {\n\t\t\tonChange('', function () {\n\t\t\t\tvar _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref4.isOpen;\n\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tonValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t};\n\n\tvar shouldMicRender = function shouldMicRender(showVoiceSearch) {\n\t\t// checks for SSR\n\t\tif (typeof window === 'undefined') return false;\n\t\treturn showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n\t};\n\n\tvar handleStateChange = function handleStateChange(changes, stateAndHelpers) {\n\t\tvar isOpen = changes.isOpen,\n\t\t    type = changes.type;\n\t\tvar selectedItem = stateAndHelpers.selectedItem;\n\n\t\tif (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n\t\t\tsetIsOpen(isOpen);\n\t\t}\n\n\t\t// allow invoking click event repeatedly on featured suggestions\n\t\tif (!changes.selectedItem && (type === _downshift2.default.stateChangeTypes.clickItem || type === _downshift2.default.stateChangeTypes.keyDownEnter) && selectedItem && selectedItem._suggestion_type === _helper.suggestionTypes.Featured) {\n\t\t\tonSuggestionSelected(selectedItem);\n\t\t}\n\t};\n\n\tvar handleSearchIconClick = function handleSearchIconClick() {\n\t\tif (currentValue.trim()) {\n\t\t\tsetValue(currentValue, true, props, _causes2.default.SEARCH_ICON_CLICK);\n\t\t\tonValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n\t\t}\n\t};\n\n\tvar handleVoiceResults = function handleVoiceResults(_ref5) {\n\t\tvar results = _ref5.results;\n\n\t\tif (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n\t\t\tsetValue(results[0][0].transcript.trim(), true, props, undefined, true, isOpen);\n\t\t}\n\t};\n\n\tvar renderNoSuggestion = function renderNoSuggestion() {\n\t\tvar finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\tvar themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    isLoading = props.isLoading,\n\t\t    renderNoSuggestion = props.renderNoSuggestion,\n\t\t    innerClass = props.innerClass,\n\t\t    error = props.error,\n\t\t    renderError = props.renderError;\n\n\t\tif (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tthemePreset: themePreset,\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tinnerClassName: 'noSuggestion'\n\t\t\t\t},\n\t\t\t\ttypeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderLoader = function renderLoader() {\n\t\tvar loader = props.loader,\n\t\t    isLoading = props.isLoading,\n\t\t    themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    innerClass = props.innerClass;\n\n\t\tif (isLoading && loader && currentValue) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'loader',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\tloader\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderError = function renderError() {\n\t\tvar error = props.error,\n\t\t    renderError = props.renderError,\n\t\t    themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    isLoading = props.isLoading,\n\t\t    innerClass = props.innerClass;\n\n\t\tif (error && renderError && currentValue && !isLoading) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'error',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\t(0, _helper.isFunction)(renderError) ? renderError(error) : renderError\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar getComponent = function getComponent() {\n\t\tvar downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\tvar error = props.error,\n\t\t    isLoading = props.isLoading,\n\t\t    rawData = props.rawData;\n\n\n\t\tvar data = {\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tdownshiftProps: downshiftProps,\n\t\t\tdata: props.suggestions,\n\t\t\tvalue: currentValue,\n\t\t\ttriggerClickAnalytics: triggerClickAnalytics,\n\t\t\tresultStats: stats(),\n\t\t\trawData: rawData\n\t\t};\n\t\treturn (0, _helper.getComponent)(data, props);\n\t};\n\tvar renderInputAddonBefore = function renderInputAddonBefore() {\n\t\tvar addonBefore = props.addonBefore,\n\t\t    expandSuggestionsContainer = props.expandSuggestionsContainer;\n\n\t\tif (addonBefore) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_InputAddon2.default,\n\t\t\t\t{ isOpen: isOpen, expandSuggestionsContainer: expandSuggestionsContainer },\n\t\t\t\taddonBefore\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\tvar renderInputAddonAfter = function renderInputAddonAfter() {\n\t\tvar addonAfter = props.addonAfter,\n\t\t    expandSuggestionsContainer = props.expandSuggestionsContainer;\n\n\t\tif (addonAfter) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_InputAddon2.default,\n\t\t\t\t{ isOpen: isOpen, expandSuggestionsContainer: expandSuggestionsContainer },\n\t\t\t\taddonAfter\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tvar renderEnterButtonElement = function renderEnterButtonElement() {\n\t\tvar enterButton = props.enterButton,\n\t\t    renderEnterButton = props.renderEnterButton,\n\t\t    innerClass = props.innerClass;\n\n\n\t\tif (enterButton) {\n\t\t\tvar getEnterButtonMarkup = function getEnterButtonMarkup() {\n\t\t\t\tif (typeof renderEnterButton === 'function') {\n\t\t\t\t\treturn renderEnterButton(enterButtonOnClick);\n\t\t\t\t}\n\n\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t_Button2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: 'enter-btn ' + (0, _helper.getClassName)(innerClass, 'enter-button'),\n\t\t\t\t\t\tprimary: true,\n\t\t\t\t\t\tonClick: enterButtonOnClick\n\t\t\t\t\t},\n\t\t\t\t\t'Search'\n\t\t\t\t);\n\t\t\t};\n\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'enter-button-wrapper' },\n\t\t\t\tgetEnterButtonMarkup()\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tvar renderIcon = function renderIcon() {\n\t\tif (props.showIcon) {\n\t\t\treturn props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderCancelIcon = function renderCancelIcon() {\n\t\tif (props.showClear) {\n\t\t\treturn props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderIcons = function renderIcons() {\n\t\tvar showIcon = props.showIcon,\n\t\t    showClear = props.showClear,\n\t\t    renderMic = props.renderMic,\n\t\t    getMicInstance = props.getMicInstance,\n\t\t    showVoiceSearch = props.showVoiceSearch,\n\t\t    iconPosition = props.iconPosition,\n\t\t    innerClass = props.innerClass;\n\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'right', positionType: 'absolute' },\n\t\t\t\tcurrentValue && showClear && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: clearValue, showIcon: showIcon, isClearIcon: true },\n\t\t\t\t\trenderCancelIcon()\n\t\t\t\t),\n\t\t\t\tshouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n\t\t\t\t\tgetInstance: getMicInstance,\n\t\t\t\t\trender: renderMic,\n\t\t\t\t\tonResult: handleVoiceResults,\n\t\t\t\t\tclassName: (0, _helper.getClassName)(innerClass, 'mic') || null\n\t\t\t\t}),\n\t\t\t\ticonPosition === 'right' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: handleSearchIconClick },\n\t\t\t\t\trenderIcon()\n\t\t\t\t)\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'left', positionType: 'absolute' },\n\t\t\t\ticonPosition === 'left' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: handleSearchIconClick },\n\t\t\t\t\trenderIcon()\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\tvar handleFocus = function handleFocus(event) {\n\t\tif (props.autosuggest) {\n\t\t\tsetIsOpen(true);\n\t\t}\n\t\tif (props.onFocus) {\n\t\t\tprops.onFocus(event, triggerQuery);\n\t\t}\n\t};\n\n\tvar onAutofillClick = function onAutofillClick(suggestion) {\n\t\tvar value = suggestion.value;\n\n\t\tsetIsOpen(true);\n\t\tsetCurrentValue((0, _utils.decodeHtml)(value));\n\t\ttriggerDefaultQuery(value);\n\t};\n\n\tvar hasMounted = (0, _react.useRef)();\n\tuseConstructor(function () {\n\t\tvar mode = props.mode;\n\n\t\tif (mode === _constants.SEARCH_COMPONENTS_MODES.TAG) {\n\t\t\tisTagsMode.current = true;\n\t\t}\n\n\t\tif (isTagsMode.current) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `categoryField` prop is not supported when `mode` prop is set to `tag`');\n\t\t}\n\t\tif (!props.enableAppbase) {\n\t\t\tthrow new Error('enableAppbase is required to be true when using SearchBox component.');\n\t\t}\n\t\tvar currentLocalValue = selectedValue || value || defaultValue || '';\n\n\t\thasMounted.current = false;\n\t\tif (currentLocalValue) {\n\t\t\tif (props.onChange) {\n\t\t\t\tprops.onChange(currentLocalValue, function () {\n\t\t\t\t\tvar _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t\t    isOpen = _ref6.isOpen;\n\n\t\t\t\t\treturn triggerQuery({\n\t\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\t\tvalue: currentLocalValue,\n\t\t\t\t\t\tisOpen: isOpen\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tsetCurrentValue(isTagsMode.current ? '' : (0, _utils.decodeHtml)(currentLocalValue));\n\t\tif (isTagsMode.current && Array.isArray(currentLocalValue)) {\n\t\t\tsetSelectedTags(currentLocalValue);\n\t\t}\n\t\t// Set custom and default queries in store\n\t\ttriggerCustomQuery(currentLocalValue, selectedCategory);\n\t\ttriggerDefaultQuery(currentLocalValue);\n\t});\n\tvar clearTag = function clearTag(tagValue) {\n\t\tvar newSelectedTags = [].concat(selectedTags.filter(function (tag) {\n\t\t\treturn tag !== tagValue;\n\t\t}));\n\t\tsetSelectedTags(newSelectedTags);\n\t\tsetCurrentValue('');\n\t\ttriggerCustomQuery(newSelectedTags);\n\n\t\tif (props.value !== undefined && typeof onChange === 'function') {\n\t\t\tonChange(newSelectedTags, function () {\n\t\t\t\tvar _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref7.isOpen;\n\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: newSelectedTags,\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\tvar clearAllTags = function clearAllTags() {\n\t\tsetSelectedTags([]);\n\n\t\tsetValue('', true, props, _causes2.default.SUGGESTION_SELECT, hasMounted.current, false);\n\t\tif (props.value !== undefined && typeof onChange === 'function') {\n\t\t\tonChange([], function () {\n\t\t\t\tvar _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref8.isOpen;\n\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: [],\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\tvar renderTag = function renderTag(item) {\n\t\tvar innerClass = props.innerClass;\n\n\n\t\treturn (0, _core.jsx)(\n\t\t\t_Tags.TagItem,\n\t\t\t{ key: item, className: (0, _helper.getClassName)(innerClass, 'selected-tag') || '' },\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'span',\n\t\t\t\tnull,\n\t\t\t\titem\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'span',\n\t\t\t\t{\n\t\t\t\t\trole: 'img',\n\t\t\t\t\t'aria-label': 'delete-tag',\n\t\t\t\t\tclassName: 'close-icon',\n\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\treturn clearTag(item);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(0, _core.jsx)(_CancelSvg2.default, null)\n\t\t\t)\n\t\t);\n\t};\n\n\tvar renderTags = function renderTags() {\n\t\tif (!Array.isArray(selectedTags)) {\n\t\t\treturn null;\n\t\t}\n\t\tvar tagsList = [].concat(selectedTags);\n\t\tvar shouldRenderClearAllTag = tagsList.length > 1;\n\t\tvar renderSelectedTags = props.renderSelectedTags,\n\t\t    innerClass = props.innerClass;\n\n\n\t\treturn renderSelectedTags ? renderSelectedTags({\n\t\t\tvalues: selectedTags,\n\t\t\thandleClear: clearTag,\n\t\t\thandleClearAll: clearAllTags\n\t\t}) : (0, _core.jsx)(\n\t\t\t_Tags.TagsContainer,\n\t\t\tnull,\n\t\t\ttagsList.map(function (item) {\n\t\t\t\treturn renderTag(item);\n\t\t\t}),\n\t\t\tshouldRenderClearAllTag && (0, _core.jsx)(\n\t\t\t\t_Tags.TagItem,\n\t\t\t\t{ 'class': (0, _helper.getClassName)(innerClass, 'selected-tag') || '' },\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t'span',\n\t\t\t\t\tnull,\n\t\t\t\t\t'Clear All'\n\t\t\t\t),\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t'span',\n\t\t\t\t\t{\n\t\t\t\t\t\trole: 'img',\n\t\t\t\t\t\t'aria-label': 'delete-tag',\n\t\t\t\t\t\tclassName: 'close-icon',\n\t\t\t\t\t\tonClick: clearAllTags\n\t\t\t\t\t},\n\t\t\t\t\t(0, _core.jsx)(_CancelSvg2.default, null)\n\t\t\t\t),\n\t\t\t\t' '\n\t\t\t)\n\t\t);\n\t};\n\t(0, _react.useEffect)(function () {\n\t\tif (onData) {\n\t\t\tonData({\n\t\t\t\tdata: parsedSuggestions(),\n\t\t\t\trawData: rawData,\n\t\t\t\taggregationData: aggregationData,\n\t\t\t\tloading: isLoading,\n\t\t\t\terror: error\n\t\t\t});\n\t\t}\n\t}, [rawData, aggregationData, isLoading, error]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tif (value !== undefined && !(0, _helper.isEqual)(value, isTagsMode.current ? selectedTags : currentValue)) {\n\t\t\t\tvar cause = !value ? _causes2.default.CLEAR_VALUE : undefined;\n\t\t\t\tif (isTagsMode.current) {\n\t\t\t\t\tcause = _causes2.default.SUGGESTION_SELECT;\n\t\t\t\t}\n\n\t\t\t\tif (isTagsMode.current && typeof value === 'string') {\n\t\t\t\t\tsetValue(value, false, props, undefined, true, false);\n\t\t\t\t\tsetCurrentValue(value);\n\t\t\t\t\ttriggerDefaultQuery();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetValue(value, !isOpen && props.autosuggest && !props.strictSelection, props, cause, undefined, false);\n\t\t\t}\n\t\t}\n\t}, [value]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (\n\t\t// since, selectedValue will be updated when currentValue changes,\n\t\t// we must only check for the changes introduced by\n\t\t// clear action from SelectedFilters component in which case,\n\t\t// the currentValue will never match the updated selectedValue\n\t\t// currentValue !== props.defaultValue &&\n\t\thasMounted.current && !(0, _helper.isEqual)(isTagsMode.current ? selectedTags : currentValue, selectedValue) && !(typeof currentValue !== 'string' && !selectedValue)) {\n\t\t\tif (!selectedValue && currentValue) {\n\t\t\t\t// selected value is cleared, call onValueSelected\n\t\t\t\tonValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t\t\t}\n\t\t\tif (isTagsMode.current && Array.isArray(selectedValue)) {\n\t\t\t\tselectedTags = []; // reset\n\t\t\t}\n\t\t\tif (value === undefined) {\n\t\t\t\tsetValue(!selectedValue || (0, _utils.isEmpty)(selectedValue) ? '' : selectedValue, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : undefined, hasMounted.current, false);\n\t\t\t} else if (onChange) {\n\t\t\t\tif (!(0, _helper.isEqual)(value, selectedValue) && !(0, _helper.isEqual)(selectedValue, isTagsMode.current ? selectedTags : currentValue)) {\n\t\t\t\t\tif (isTagsMode.current && typeof selectedValue !== 'string') {\n\t\t\t\t\t\tsetSelectedTags(selectedValue);\n\t\t\t\t\t}\n\t\t\t\t\t// value prop exists\n\t\t\t\t\tonChange(selectedValue || (isTagsMode.current ? [] : ''), function () {\n\t\t\t\t\t\tvar _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t\t\t    isOpen = _ref9.isOpen;\n\n\t\t\t\t\t\treturn triggerQuery({\n\t\t\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\t\t\tvalue: selectedValue || '',\n\t\t\t\t\t\t\tisOpen: isOpen\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// value prop exists and onChange is not defined:\n\t\t\t\t// we need to put the current value back into the store\n\t\t\t\t// if the clear action was triggered by interacting with\n\t\t\t\t// selected-filters component\n\n\t\t\t\tsetValue(isTagsMode.current ? selectedTags : currentValue, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : undefined, true, false);\n\t\t\t}\n\t\t}\n\t}, [selectedValue]);\n\n\t(0, _react.useEffect)(function () {\n\t\thasMounted.current = true;\n\t\t// register hotkeys for listening to focusShortcuts' key presses\n\t\tlistenForFocusShortcuts();\n\t}, []);\n\n\tvar hasSuggestions = function hasSuggestions() {\n\t\treturn Array.isArray(parsedSuggestions()) && parsedSuggestions().length;\n\t};\n\treturn (0, _core.jsx)(\n\t\t_Container2.default,\n\t\t{ style: props.style, className: props.className },\n\t\tprops.title && (0, _core.jsx)(\n\t\t\t_Title2.default,\n\t\t\t{ className: (0, _helper.getClassName)(props.innerClass, 'title') || null },\n\t\t\tprops.title\n\t\t),\n\t\tprops.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n\t\t\tid: props.componentId + '-downshift',\n\t\t\tonChange: onSuggestionSelected,\n\t\t\tonStateChange: handleStateChange,\n\t\t\tisOpen: isOpen,\n\t\t\titemToString: function itemToString(i) {\n\t\t\t\treturn i;\n\t\t\t},\n\t\t\trender: function render(_ref10) {\n\t\t\t\tvar getRootProps = _ref10.getRootProps,\n\t\t\t\t    getInputProps = _ref10.getInputProps,\n\t\t\t\t    getItemProps = _ref10.getItemProps,\n\t\t\t\t    isOpen = _ref10.isOpen,\n\t\t\t\t    highlightedIndex = _ref10.highlightedIndex,\n\t\t\t\t    setHighlightedIndex = _ref10.setHighlightedIndex,\n\t\t\t\t    rest = _objectWithoutProperties(_ref10, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n\t\t\t\tvar renderSuggestionsDropdown = function renderSuggestionsDropdown() {\n\t\t\t\t\tvar getIcon = function getIcon(iconType, item) {\n\t\t\t\t\t\tswitch (iconType) {\n\t\t\t\t\t\t\tcase _helper.suggestionTypes.Recent:\n\t\t\t\t\t\t\t\treturn props.recentSearchesIcon;\n\t\t\t\t\t\t\tcase _helper.suggestionTypes.Popular:\n\t\t\t\t\t\t\t\treturn props.popularSearchesIcon;\n\t\t\t\t\t\t\tcase _helper.suggestionTypes.Featured:\n\t\t\t\t\t\t\t\tif (item.icon) {\n\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)('div', {\n\t\t\t\t\t\t\t\t\t\tstyle: { display: 'flex' },\n\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t\t\t\t\t__html: (0, _xss2.default)(item.icon)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)('img', {\n\t\t\t\t\t\t\t\t\tstyle: { maxHeight: '25px' },\n\t\t\t\t\t\t\t\t\tsrc: (0, _xss2.default)(item.iconURL),\n\t\t\t\t\t\t\t\t\talt: item.value\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// action icon is dispkayed on right of the suggestion item\n\t\t\t\t\tvar getActionIcon = function getActionIcon(item) {\n\t\t\t\t\t\tif (item._suggestion_type === _helper.suggestionTypes.Featured) {\n\t\t\t\t\t\t\tif (item.action === _helper.featuredSuggestionsActionTypes.FUNCTION) {\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(_AutofillSvg2.default, {\n\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\ttransform: 'rotate(135deg)',\n\t\t\t\t\t\t\t\t\t\tpointerEvents: 'none'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t} else if (!item._category) {\n\t\t\t\t\t\t\t/* 👇 avoid showing autofill for category suggestions👇 */\n\n\t\t\t\t\t\t\treturn (0, _core.jsx)(_AutofillSvg2.default, {\n\t\t\t\t\t\t\t\tonClick: function onClick(e) {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tonAutofillClick(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t};\n\n\t\t\t\t\tvar indexOffset = 0;\n\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t(0, _helper.hasCustomRenderer)(props) && getComponent(_extends({\n\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\thighlightedIndex: highlightedIndex,\n\t\t\t\t\t\t\tsetHighlightedIndex: setHighlightedIndex\n\t\t\t\t\t\t}, rest)),\n\t\t\t\t\t\tisOpen && renderLoader(),\n\t\t\t\t\t\tisOpen && renderError(),\n\t\t\t\t\t\t!(0, _helper.hasCustomRenderer)(props) && isOpen && hasSuggestions() ? (0, _core.jsx)(\n\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcss: (0, _Input.searchboxSuggestions)(props.themePreset, props.theme),\n\t\t\t\t\t\t\t\tclassName: '' + (0, _helper.getClassName)(props.innerClass, 'list')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tparsedSuggestions().map(function (item, itemIndex) {\n\t\t\t\t\t\t\t\tvar index = indexOffset + itemIndex;\n\t\t\t\t\t\t\t\tif (Array.isArray(item)) {\n\t\t\t\t\t\t\t\t\tvar sectionHtml = (0, _xss2.default)(item[0].sectionLabel);\n\t\t\t\t\t\t\t\t\tindexOffset += item.length - 1;\n\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'section-container',\n\t\t\t\t\t\t\t\t\t\t\tkey: '' + item[0].sectionId\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tsectionHtml && (0, _core.jsx)('div', {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'section-header ' + (0, _helper.getClassName)(props.innerClass, 'section-label'),\n\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t\t\t\t\t\t__html: sectionHtml\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t\t\t\t\t{ className: 'section-list' },\n\t\t\t\t\t\t\t\t\t\t\titem.map(function (sectionItem, sectionIndex) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem: sectionItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: sectionItem.sectionId + sectionIndex + '-' + sectionItem.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: '' + (highlightedIndex === index + sectionIndex ? 'active-li-item ' + (0, _helper.getClassName)(props.innerClass, 'active-suggestion-item') : 'li-item ' + (0, _helper.getClassName)(props.innerClass, 'suggestion-item'))\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t\tprops.renderItem ? props.renderItem(sectionItem) : (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0 10px 0 0',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonId: sectionIndex + index + 1 + '-' + sectionItem.value + '-icon',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, sectionItem._suggestion_type + '-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: getIcon(sectionItem._suggestion_type, sectionItem),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: sectionItem._suggestion_type + '-search-icon'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ className: 'trim' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ direction: 'column' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionItem.label && (0, _core.jsx)('div', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'section-list-item__label',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t__html: (0, _xss2.default)(sectionItem.label)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionItem.description && (0, _core.jsx)('div', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'section-list-item__description',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t__html: (0, _xss2.default)(sectionItem.description)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetActionIcon(sectionItem)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: item }), {\n\t\t\t\t\t\t\t\t\t\tkey: index + 1 + '-' + item.value,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tclassName: '' + (highlightedIndex === index ? 'active-li-item ' + (0, _helper.getClassName)(props.innerClass, 'active-suggestion-item') : 'li-item ' + (0, _helper.getClassName)(props.innerClass, 'suggestion-item'))\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tprops.renderItem ? props.renderItem(item) : (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0 10px 0 0',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\t\ticonId: index + 1 + '-' + item.value + '-icon',\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, item._suggestion_type + '-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\t\ticon: getIcon(item._suggestion_type, item),\n\t\t\t\t\t\t\t\t\t\t\t\ttype: item._suggestion_type + '-search-icon'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue || '',\n\t\t\t\t\t\t\t\t\t\t\tsuggestion: item\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tgetActionIcon(item)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) : renderNoSuggestion(parsedSuggestions())\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t'div',\n\t\t\t\t\tgetRootProps({ css: _Input.suggestionsContainer }, { suppressRefError: true }),\n\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t_InputGroup2.default,\n\t\t\t\t\t\t{ isOpen: isOpen },\n\t\t\t\t\t\trenderInputAddonBefore(),\n\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t_InputWrapper2.default,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t(0, _core.jsx)(_Input2.default, _extends({\n\t\t\t\t\t\t\t\t'aria-label': props.componentId,\n\t\t\t\t\t\t\t\tid: props.componentId + '-input',\n\t\t\t\t\t\t\t\tshowIcon: props.showIcon,\n\t\t\t\t\t\t\t\tshowClear: props.showClear,\n\t\t\t\t\t\t\t\ticonPosition: props.iconPosition,\n\t\t\t\t\t\t\t\tref: _inputRef\n\t\t\t\t\t\t\t}, getInputProps({\n\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, 'input'),\n\t\t\t\t\t\t\t\tplaceholder: props.placeholder,\n\t\t\t\t\t\t\t\tvalue: currentValue === null ? '' : currentValue,\n\t\t\t\t\t\t\t\tonChange: onInputChange,\n\t\t\t\t\t\t\t\tonBlur: withTriggerQuery(props.onBlur),\n\t\t\t\t\t\t\t\tonFocus: handleFocus,\n\t\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\t\t// clear highlighted index\n\t\t\t\t\t\t\t\t\tsetHighlightedIndex(null);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonKeyPress: withTriggerQuery(props.onKeyPress),\n\t\t\t\t\t\t\t\tonKeyDown: function onKeyDown(e) {\n\t\t\t\t\t\t\t\t\treturn handleKeyDown(e, highlightedIndex);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonKeyUp: withTriggerQuery(props.onKeyUp),\n\t\t\t\t\t\t\t\tautoFocus: props.autoFocus\n\t\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\t\tthemePreset: props.themePreset,\n\t\t\t\t\t\t\t\ttype: props.type,\n\t\t\t\t\t\t\t\tsearchBox: true // a prop specific to Input styled-component\n\t\t\t\t\t\t\t\t, isOpen: isOpen // is dropdown open or not\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\trenderIcons(),\n\t\t\t\t\t\t\t!props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderInputAddonAfter(),\n\t\t\t\t\t\trenderEnterButtonElement()\n\t\t\t\t\t),\n\t\t\t\t\tprops.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest)),\n\t\t\t\t\trenderTags()\n\t\t\t\t);\n\t\t\t}\n\t\t}, props.downShiftProps)) : (0, _core.jsx)(\n\t\t\t'div',\n\t\t\t{ css: _Input.suggestionsContainer },\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_InputGroup2.default,\n\t\t\t\t{ isOpen: false },\n\t\t\t\trenderInputAddonBefore(),\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t_InputWrapper2.default,\n\t\t\t\t\tnull,\n\t\t\t\t\t(0, _core.jsx)(_Input2.default, {\n\t\t\t\t\t\t'aria-label': props.componentId,\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, 'input') || null,\n\t\t\t\t\t\tplaceholder: props.placeholder,\n\t\t\t\t\t\tvalue: currentValue || '',\n\t\t\t\t\t\tonChange: onInputChange,\n\t\t\t\t\t\tonBlur: withTriggerQuery(props.onBlur),\n\t\t\t\t\t\tonFocus: withTriggerQuery(props.onFocus),\n\t\t\t\t\t\tonKeyPress: withTriggerQuery(props.onKeyPress),\n\t\t\t\t\t\tonKeyDown: handleKeyDown,\n\t\t\t\t\t\tonKeyUp: withTriggerQuery(props.onKeyUp),\n\t\t\t\t\t\tautoFocus: props.autoFocus,\n\t\t\t\t\t\ticonPosition: props.iconPosition,\n\t\t\t\t\t\tshowIcon: props.showIcon,\n\t\t\t\t\t\tshowClear: props.showClear,\n\t\t\t\t\t\tthemePreset: props.themePreset,\n\t\t\t\t\t\tsearchBox: true // a prop specific to Input styled-component\n\t\t\t\t\t\t, isOpen: false // is dropdown open or not\n\t\t\t\t\t\t, type: props.type\n\t\t\t\t\t}),\n\t\t\t\t\trenderIcons()\n\t\t\t\t),\n\t\t\t\trenderInputAddonAfter(),\n\t\t\t\trenderEnterButtonElement()\n\t\t\t)\n\t\t)\n\t);\n};\nSearchBox.propTypes = {\n\tupdateQuery: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\tselectedCategory: _types2.default.string,\n\tsuggestions: _types2.default.suggestions,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\terror: _types2.default.title,\n\tisLoading: _types2.default.bool,\n\ttime: _types2.default.number,\n\tenableAppbase: _types2.default.bool,\n\trawData: _types2.default.rawData,\n\taggregationData: _types2.default.aggregationData,\n\t// component props\n\tautoFocus: _types2.default.bool,\n\tautosuggest: _types2.default.bool,\n\tenableSynonyms: _types2.default.bool,\n\tdistinctField: _types2.default.string,\n\tdistinctFieldConfig: _types2.default.componentObject,\n\tindex: _types2.default.string,\n\tenablePopularSuggestions: _types2.default.bool,\n\tenableRecentSuggestions: _types2.default.bool,\n\tqueryString: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tclearIcon: _types2.default.children,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomHighlight: _types2.default.func,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdataField: _types2.default.dataFieldValidator,\n\taggregationField: _types2.default.string,\n\taggregationSize: _types2.default.number,\n\tsize: _types2.default.number,\n\tdebounce: _types2.default.number,\n\tdefaultValue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n\tvalue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n\tcustomData: _types2.default.title,\n\tdownShiftProps: _types2.default.props,\n\tchildren: _types2.default.func,\n\texcludeFields: _types2.default.excludeFields,\n\tfieldWeights: _types2.default.fieldWeights,\n\tfilterLabel: _types2.default.string,\n\tfuzziness: _types2.default.fuzziness,\n\thighlight: _types2.default.bool,\n\thighlightField: _types2.default.stringOrArray,\n\ticon: _types2.default.children,\n\ticonPosition: _types2.default.iconPosition,\n\tinnerClass: _types2.default.style,\n\tincludeFields: _types2.default.includeFields,\n\tloader: _types2.default.title,\n\tnestedField: _types2.default.string,\n\tonError: _types2.default.func,\n\tonBlur: _types2.default.func,\n\tonFocus: _types2.default.func,\n\tonKeyDown: _types2.default.func,\n\tonKeyPress: _types2.default.func,\n\tonKeyUp: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tonValueSelected: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\treact: _types2.default.react,\n\trender: _types2.default.func,\n\trenderError: _types2.default.title,\n\trenderNoSuggestion: _types2.default.title,\n\tshowClear: _types2.default.bool,\n\tshowDistinctSuggestions: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tshowIcon: _types2.default.bool,\n\tshowVoiceSearch: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\ttheme: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\ttype: _types2.default.string,\n\tURLParams: _types2.default.bool,\n\tstrictSelection: _types2.default.bool,\n\tsearchOperators: _types2.default.bool,\n\tenablePredictiveSuggestions: _types2.default.bool,\n\trecentSearchesIcon: _types2.default.componentObject,\n\tpopularSearchesIcon: _types2.default.componentObject,\n\t// Mic props\n\tgetMicInstance: _types2.default.func,\n\trenderMic: _types2.default.func,\n\t//\n\tfocusShortcuts: _types2.default.focusShortcuts,\n\taddonBefore: _types2.default.children,\n\taddonAfter: _types2.default.children,\n\texpandSuggestionsContainer: _types2.default.bool,\n\tpopularSuggestionsConfig: _types2.default.componentObject,\n\trecentSuggestionsConfig: _types2.default.componentObject,\n\tapplyStopwords: _types2.default.bool,\n\tcustomStopwords: _types2.default.stringArray,\n\tonData: _types2.default.func,\n\trenderItem: _types2.default.func,\n\tisOpen: _types2.default.bool,\n\tenableIndexSuggestions: _types2.default.bool,\n\tenableFeaturedSuggestions: _types2.default.bool,\n\tfeaturedSuggestionsConfig: _types2.default.componentObject,\n\tindexSuggestionsConfig: _types2.default.componentObject,\n\tenterButton: _types2.default.bool,\n\trenderEnterButton: _types2.default.func,\n\tcustomEvents: _types2.default.componentObject,\n\tsearchboxId: _types2.default.string,\n\tendpoint: _types2.default.endpoint,\n\tmode: (0, _propTypes.oneOf)(['select', 'tag']),\n\thighlightConfig: _types2.default.componentObject,\n\trenderSelectedTags: _types2.default.func\n};\n\nSearchBox.defaultProps = {\n\tautosuggest: true,\n\tclassName: null,\n\tdebounce: 0,\n\tdownShiftProps: {},\n\tenableSynonyms: true,\n\tenablePopularSuggestions: false,\n\texcludeFields: [],\n\ticonPosition: 'left',\n\tincludeFields: ['*'],\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowFilter: true,\n\tshowIcon: true,\n\tshowVoiceSearch: false,\n\tstyle: {},\n\tURLParams: false,\n\tshowClear: false,\n\tshowDistinctSuggestions: true,\n\tstrictSelection: false,\n\tsearchOperators: false,\n\tsize: 10,\n\ttime: 0,\n\tfocusShortcuts: ['/'],\n\taddonBefore: undefined,\n\taddonAfter: undefined,\n\texpandSuggestionsContainer: true,\n\tsuggestions: [],\n\tisOpen: false,\n\tenterButton: false,\n\ttype: 'search',\n\tmode: 'select'\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tselectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n\t\tsuggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\t\trawData: state.rawData[props.componentId],\n\t\taggregationData: state.compositeAggregations[props.componentId],\n\t\tthemePreset: state.config.themePreset,\n\t\tisLoading: !!state.isLoading[props.componentId + '_active'],\n\t\terror: state.error[props.componentId],\n\t\tenableAppbase: state.config.enableAppbase,\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tcustomEvents: state.config.analyticsConfig ? state.config.analyticsConfig.customEvents : {}\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n\t\t\treturn dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n\t\t},\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(SearchBox, _extends({ ref: props.myForwardedRef }, props));\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(\n\t\t_PreferencesConsumer2.default,\n\t\t{ userProps: props },\n\t\tfunction (preferenceProps) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_ComponentWrapper2.default,\n\t\t\t\t_extends({}, preferenceProps, {\n\t\t\t\t\tinternalComponent: true,\n\t\t\t\t\tcomponentType: _constants.componentTypes.searchBox,\n\t\t\t\t\tmode: preferenceProps.testMode ? 'test' : ''\n\t\t\t\t}),\n\t\t\t\tfunction (componentProps) {\n\t\t\t\t\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n\t\t\t\t\t\tmyForwardedRef: ref\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, SearchBox);\n\nForwardRefComponent.displayName = 'SearchBox';\nexports.default = ForwardRefComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}