{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CALL_FIRESTORE = undefined;\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = reduxFirestoreMiddleware;\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction callFirestore(firebaseInstance, callInfoObj) {\n  var method = callInfoObj.method;\n  var modelArgs = callInfoObj.modelArgs,\n      methodArgs = callInfoObj.methodArgs;\n  if (!(0, _isArray3.default)(modelArgs)) modelArgs = [modelArgs];\n  if (!(0, _isArray3.default)(methodArgs)) methodArgs = [methodArgs];\n\n  if (!firebaseInstance || !firebaseInstance.firestore) {\n    throw new Error('firestore is not a Firebase namespace');\n  }\n\n  return !methodArgs ? firebaseInstance.firestore()[method] : firebaseInstance.firestore()[method].apply(firebaseInstance, methodArgs);\n}\n\nvar CALL_FIRESTORE = exports.CALL_FIRESTORE = 'CALL_FIRESTORE';\nvar typesMap = {\n  get: [_constants.actionTypes.GET_REQUEST, _constants.actionTypes.GET_SUCCESS, _constants.actionTypes.GET_FAILURE]\n};\n\nfunction reduxFirestoreMiddleware(firestore) {\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        var callAPI = action.type === CALL_FIRESTORE ? action : undefined;\n        if (typeof callAPI === 'undefined') return next(action);\n        var method = callAPI.method;\n        if (typeof method === 'function') method = method(store.getState());\n        if (typeof method !== 'string') throw new Error('Specify a method.');\n        var args = callAPI.args;\n        var types = typesMap[method];\n\n        if (!Array.isArray(types) || types.length !== 3) {\n          throw new Error('Expected an array of three action types.');\n        }\n\n        if (!types.every(function (type) {\n          return typeof type === 'string';\n        })) {\n          throw new Error('Expected action types to be strings.');\n        }\n\n        function actionWith(data) {\n          var finalAction = _extends({}, action, data);\n\n          delete finalAction[CALL_FIRESTORE];\n          return finalAction;\n        }\n\n        var _types = _slicedToArray(types, 3),\n            requestType = _types[0],\n            successType = _types[1],\n            failureType = _types[2];\n\n        next({\n          type: requestType\n        });\n        var callInfoObj = {\n          method: method\n        };\n        return callFirestore(firestore, callInfoObj).then(function (response) {\n          return next({\n            response: response,\n            method: method,\n            args: args,\n            type: successType\n          });\n        }).catch(function (error) {\n          return next(actionWith({\n            type: failureType,\n            error: error.message || error || 'Something bad happened'\n          }));\n        });\n      };\n    };\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","CALL_FIRESTORE","undefined","_isArray2","require","_isArray3","_interopRequireDefault","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","default","reduxFirestoreMiddleware","_constants","obj","__esModule","callFirestore","firebaseInstance","callInfoObj","method","modelArgs","methodArgs","firestore","Error","apply","typesMap","get","actionTypes","GET_REQUEST","GET_SUCCESS","GET_FAILURE","store","action","callAPI","type","getState","args","types","every","actionWith","data","finalAction","_types","requestType","successType","failureType","then","response","catch","error","message"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/redux-firestore/es/middleware.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CALL_FIRESTORE = undefined;\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = reduxFirestoreMiddleware;\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction callFirestore(firebaseInstance, callInfoObj) {\n  var method = callInfoObj.method;\n  var modelArgs = callInfoObj.modelArgs,\n      methodArgs = callInfoObj.methodArgs;\n\n  if (!(0, _isArray3.default)(modelArgs)) modelArgs = [modelArgs];\n  if (!(0, _isArray3.default)(methodArgs)) methodArgs = [methodArgs];\n  if (!firebaseInstance || !firebaseInstance.firestore) {\n    throw new Error('firestore is not a Firebase namespace');\n  }\n\n  return !methodArgs ? firebaseInstance.firestore()[method] : firebaseInstance.firestore()[method].apply(firebaseInstance, methodArgs);\n}\n\nvar CALL_FIRESTORE = exports.CALL_FIRESTORE = 'CALL_FIRESTORE';\n\nvar typesMap = {\n  get: [_constants.actionTypes.GET_REQUEST, _constants.actionTypes.GET_SUCCESS, _constants.actionTypes.GET_FAILURE]\n};\n\nfunction reduxFirestoreMiddleware(firestore) {\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        var callAPI = action.type === CALL_FIRESTORE ? action : undefined;\n        if (typeof callAPI === 'undefined') return next(action);\n\n        var method = callAPI.method;\n\n\n        if (typeof method === 'function') method = method(store.getState());\n\n        if (typeof method !== 'string') throw new Error('Specify a method.');\n\n        var args = callAPI.args;\n\n        var types = typesMap[method];\n\n        if (!Array.isArray(types) || types.length !== 3) {\n          throw new Error('Expected an array of three action types.');\n        }\n\n        if (!types.every(function (type) {\n          return typeof type === 'string';\n        })) {\n          throw new Error('Expected action types to be strings.');\n        }\n\n        function actionWith(data) {\n          var finalAction = _extends({}, action, data);\n          delete finalAction[CALL_FIRESTORE];\n          return finalAction;\n        }\n\n        var _types = _slicedToArray(types, 3),\n            requestType = _types[0],\n            successType = _types[1],\n            failureType = _types[2];\n\n        next({ type: requestType });\n        var callInfoObj = { method: method };\n        return callFirestore(firestore, callInfoObj).then(function (response) {\n          return next({ response: response, method: method, args: args, type: successType });\n        }).catch(function (error) {\n          return next(actionWith({\n            type: failureType,\n            error: error.message || error || 'Something bad happened'\n          }));\n        });\n      };\n    };\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}