{"ast":null,"code":"/**\n * filter xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\nvar FilterCSS = require(\"cssfilter\").FilterCSS;\n\nvar DEFAULT = require(\"./default\");\n\nvar parser = require(\"./parser\");\n\nvar parseTag = parser.parseTag;\nvar parseAttr = parser.parseAttr;\n\nvar _ = require(\"./util\");\n/**\n * returns `true` if the input value is `undefined` or `null`\n *\n * @param {Object} obj\n * @return {Boolean}\n */\n\n\nfunction isNull(obj) {\n  return obj === undefined || obj === null;\n}\n/**\n * get attributes for a tag\n *\n * @param {String} html\n * @return {Object}\n *   - {String} html\n *   - {Boolean} closing\n */\n\n\nfunction getAttrs(html) {\n  var i = _.spaceIndex(html);\n\n  if (i === -1) {\n    return {\n      html: \"\",\n      closing: html[html.length - 2] === \"/\"\n    };\n  }\n\n  html = _.trim(html.slice(i + 1, -1));\n  var isClosing = html[html.length - 1] === \"/\";\n  if (isClosing) html = _.trim(html.slice(0, -1));\n  return {\n    html: html,\n    closing: isClosing\n  };\n}\n/**\n * shallow copy\n *\n * @param {Object} obj\n * @return {Object}\n */\n\n\nfunction shallowCopyObject(obj) {\n  var ret = {};\n\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n\n  return ret;\n}\n\nfunction keysToLowerCase(obj) {\n  var ret = {};\n\n  for (var i in obj) {\n    if (Array.isArray(obj[i])) {\n      ret[i.toLowerCase()] = obj[i].map(function (item) {\n        return item.toLowerCase();\n      });\n    } else {\n      ret[i.toLowerCase()] = obj[i];\n    }\n  }\n\n  return ret;\n}\n/**\n * FilterXSS class\n *\n * @param {Object} options\n *        whiteList (or allowList), onTag, onTagAttr, onIgnoreTag,\n *        onIgnoreTagAttr, safeAttrValue, escapeHtml\n *        stripIgnoreTagBody, allowCommentTag, stripBlankChar\n *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`\n */\n\n\nfunction FilterXSS(options) {\n  options = shallowCopyObject(options || {});\n\n  if (options.stripIgnoreTag) {\n    if (options.onIgnoreTag) {\n      console.error('Notes: cannot use these two options \"stripIgnoreTag\" and \"onIgnoreTag\" at the same time');\n    }\n\n    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;\n  }\n\n  if (options.whiteList || options.allowList) {\n    options.whiteList = keysToLowerCase(options.whiteList || options.allowList);\n  } else {\n    options.whiteList = DEFAULT.whiteList;\n  }\n\n  options.onTag = options.onTag || DEFAULT.onTag;\n  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;\n  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;\n  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;\n  this.options = options;\n\n  if (options.css === false) {\n    this.cssFilter = false;\n  } else {\n    options.css = options.css || {};\n    this.cssFilter = new FilterCSS(options.css);\n  }\n}\n/**\n * start process and returns result\n *\n * @param {String} html\n * @return {String}\n */\n\n\nFilterXSS.prototype.process = function (html) {\n  // compatible with the input\n  html = html || \"\";\n  html = html.toString();\n  if (!html) return \"\";\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onTag = options.onTag;\n  var onIgnoreTag = options.onIgnoreTag;\n  var onTagAttr = options.onTagAttr;\n  var onIgnoreTagAttr = options.onIgnoreTagAttr;\n  var safeAttrValue = options.safeAttrValue;\n  var escapeHtml = options.escapeHtml;\n  var cssFilter = me.cssFilter; // remove invisible characters\n\n  if (options.stripBlankChar) {\n    html = DEFAULT.stripBlankChar(html);\n  } // remove html comments\n\n\n  if (!options.allowCommentTag) {\n    html = DEFAULT.stripCommentTag(html);\n  } // if enable stripIgnoreTagBody\n\n\n  var stripIgnoreTagBody = false;\n\n  if (options.stripIgnoreTagBody) {\n    stripIgnoreTagBody = DEFAULT.StripTagBody(options.stripIgnoreTagBody, onIgnoreTag);\n    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;\n  }\n\n  var retHtml = parseTag(html, function (sourcePosition, position, tag, html, isClosing) {\n    var info = {\n      sourcePosition: sourcePosition,\n      position: position,\n      isClosing: isClosing,\n      isWhite: Object.prototype.hasOwnProperty.call(whiteList, tag)\n    }; // call `onTag()`\n\n    var ret = onTag(tag, html, info);\n    if (!isNull(ret)) return ret;\n\n    if (info.isWhite) {\n      if (info.isClosing) {\n        return \"</\" + tag + \">\";\n      }\n\n      var attrs = getAttrs(html);\n      var whiteAttrList = whiteList[tag];\n      var attrsHtml = parseAttr(attrs.html, function (name, value) {\n        // call `onTagAttr()`\n        var isWhiteAttr = _.indexOf(whiteAttrList, name) !== -1;\n        var ret = onTagAttr(tag, name, value, isWhiteAttr);\n        if (!isNull(ret)) return ret;\n\n        if (isWhiteAttr) {\n          // call `safeAttrValue()`\n          value = safeAttrValue(tag, name, value, cssFilter);\n\n          if (value) {\n            return name + '=\"' + value + '\"';\n          } else {\n            return name;\n          }\n        } else {\n          // call `onIgnoreTagAttr()`\n          ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);\n          if (!isNull(ret)) return ret;\n          return;\n        }\n      }); // build new tag html\n\n      html = \"<\" + tag;\n      if (attrsHtml) html += \" \" + attrsHtml;\n      if (attrs.closing) html += \" /\";\n      html += \">\";\n      return html;\n    } else {\n      // call `onIgnoreTag()`\n      ret = onIgnoreTag(tag, html, info);\n      if (!isNull(ret)) return ret;\n      return escapeHtml(html);\n    }\n  }, escapeHtml); // if enable stripIgnoreTagBody\n\n  if (stripIgnoreTagBody) {\n    retHtml = stripIgnoreTagBody.remove(retHtml);\n  }\n\n  return retHtml;\n};\n\nmodule.exports = FilterXSS;","map":{"version":3,"names":["FilterCSS","require","DEFAULT","parser","parseTag","parseAttr","_","isNull","obj","undefined","getAttrs","html","i","spaceIndex","closing","length","trim","slice","isClosing","shallowCopyObject","ret","keysToLowerCase","Array","isArray","toLowerCase","map","item","FilterXSS","options","stripIgnoreTag","onIgnoreTag","console","error","onIgnoreTagStripAll","whiteList","allowList","onTag","onTagAttr","onIgnoreTagAttr","safeAttrValue","escapeHtml","css","cssFilter","prototype","process","toString","me","stripBlankChar","allowCommentTag","stripCommentTag","stripIgnoreTagBody","StripTagBody","retHtml","sourcePosition","position","tag","info","isWhite","Object","hasOwnProperty","call","attrs","whiteAttrList","attrsHtml","name","value","isWhiteAttr","indexOf","remove","module","exports"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/xss/lib/xss.js"],"sourcesContent":["/**\n * filter xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS = require(\"cssfilter\").FilterCSS;\nvar DEFAULT = require(\"./default\");\nvar parser = require(\"./parser\");\nvar parseTag = parser.parseTag;\nvar parseAttr = parser.parseAttr;\nvar _ = require(\"./util\");\n\n/**\n * returns `true` if the input value is `undefined` or `null`\n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull(obj) {\n  return obj === undefined || obj === null;\n}\n\n/**\n * get attributes for a tag\n *\n * @param {String} html\n * @return {Object}\n *   - {String} html\n *   - {Boolean} closing\n */\nfunction getAttrs(html) {\n  var i = _.spaceIndex(html);\n  if (i === -1) {\n    return {\n      html: \"\",\n      closing: html[html.length - 2] === \"/\",\n    };\n  }\n  html = _.trim(html.slice(i + 1, -1));\n  var isClosing = html[html.length - 1] === \"/\";\n  if (isClosing) html = _.trim(html.slice(0, -1));\n  return {\n    html: html,\n    closing: isClosing,\n  };\n}\n\n/**\n * shallow copy\n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject(obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\nfunction keysToLowerCase(obj) {\n  var ret = {};\n  for (var i in obj) {\n    if (Array.isArray(obj[i])) {\n      ret[i.toLowerCase()] = obj[i].map(function (item) {\n        return item.toLowerCase();\n      });\n    } else {\n      ret[i.toLowerCase()] = obj[i];\n    }\n  }\n  return ret;\n}\n\n/**\n * FilterXSS class\n *\n * @param {Object} options\n *        whiteList (or allowList), onTag, onTagAttr, onIgnoreTag,\n *        onIgnoreTagAttr, safeAttrValue, escapeHtml\n *        stripIgnoreTagBody, allowCommentTag, stripBlankChar\n *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`\n */\nfunction FilterXSS(options) {\n  options = shallowCopyObject(options || {});\n\n  if (options.stripIgnoreTag) {\n    if (options.onIgnoreTag) {\n      console.error(\n        'Notes: cannot use these two options \"stripIgnoreTag\" and \"onIgnoreTag\" at the same time'\n      );\n    }\n    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;\n  }\n  if (options.whiteList || options.allowList) {\n    options.whiteList = keysToLowerCase(options.whiteList || options.allowList);\n  } else {\n    options.whiteList = DEFAULT.whiteList;\n  }\n\n  options.onTag = options.onTag || DEFAULT.onTag;\n  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;\n  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;\n  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;\n  this.options = options;\n\n  if (options.css === false) {\n    this.cssFilter = false;\n  } else {\n    options.css = options.css || {};\n    this.cssFilter = new FilterCSS(options.css);\n  }\n}\n\n/**\n * start process and returns result\n *\n * @param {String} html\n * @return {String}\n */\nFilterXSS.prototype.process = function (html) {\n  // compatible with the input\n  html = html || \"\";\n  html = html.toString();\n  if (!html) return \"\";\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onTag = options.onTag;\n  var onIgnoreTag = options.onIgnoreTag;\n  var onTagAttr = options.onTagAttr;\n  var onIgnoreTagAttr = options.onIgnoreTagAttr;\n  var safeAttrValue = options.safeAttrValue;\n  var escapeHtml = options.escapeHtml;\n  var cssFilter = me.cssFilter;\n\n  // remove invisible characters\n  if (options.stripBlankChar) {\n    html = DEFAULT.stripBlankChar(html);\n  }\n\n  // remove html comments\n  if (!options.allowCommentTag) {\n    html = DEFAULT.stripCommentTag(html);\n  }\n\n  // if enable stripIgnoreTagBody\n  var stripIgnoreTagBody = false;\n  if (options.stripIgnoreTagBody) {\n    stripIgnoreTagBody = DEFAULT.StripTagBody(\n      options.stripIgnoreTagBody,\n      onIgnoreTag\n    );\n    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;\n  }\n\n  var retHtml = parseTag(\n    html,\n    function (sourcePosition, position, tag, html, isClosing) {\n      var info = {\n        sourcePosition: sourcePosition,\n        position: position,\n        isClosing: isClosing,\n        isWhite: Object.prototype.hasOwnProperty.call(whiteList, tag),\n      };\n\n      // call `onTag()`\n      var ret = onTag(tag, html, info);\n      if (!isNull(ret)) return ret;\n\n      if (info.isWhite) {\n        if (info.isClosing) {\n          return \"</\" + tag + \">\";\n        }\n\n        var attrs = getAttrs(html);\n        var whiteAttrList = whiteList[tag];\n        var attrsHtml = parseAttr(attrs.html, function (name, value) {\n          // call `onTagAttr()`\n          var isWhiteAttr = _.indexOf(whiteAttrList, name) !== -1;\n          var ret = onTagAttr(tag, name, value, isWhiteAttr);\n          if (!isNull(ret)) return ret;\n\n          if (isWhiteAttr) {\n            // call `safeAttrValue()`\n            value = safeAttrValue(tag, name, value, cssFilter);\n            if (value) {\n              return name + '=\"' + value + '\"';\n            } else {\n              return name;\n            }\n          } else {\n            // call `onIgnoreTagAttr()`\n            ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);\n            if (!isNull(ret)) return ret;\n            return;\n          }\n        });\n\n        // build new tag html\n        html = \"<\" + tag;\n        if (attrsHtml) html += \" \" + attrsHtml;\n        if (attrs.closing) html += \" /\";\n        html += \">\";\n        return html;\n      } else {\n        // call `onIgnoreTag()`\n        ret = onIgnoreTag(tag, html, info);\n        if (!isNull(ret)) return ret;\n        return escapeHtml(html);\n      }\n    },\n    escapeHtml\n  );\n\n  // if enable stripIgnoreTagBody\n  if (stripIgnoreTagBody) {\n    retHtml = stripIgnoreTagBody.remove(retHtml);\n  }\n\n  return retHtml;\n};\n\nmodule.exports = FilterXSS;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}