{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _dayjs = require('dayjs');\n\nvar _dayjs2 = _interopRequireDefault(_dayjs);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Slider = require('@appbaseio/rheostat/lib/Slider');\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _propTypes = require('prop-types');\n\nvar _dateFormats = require('@appbaseio/reactivecore/lib/utils/dateFormats');\n\nvar _dateFormats2 = _interopRequireDefault(_dateFormats);\n\nvar _HistogramContainer = require('./addons/HistogramContainer');\n\nvar _HistogramContainer2 = _interopRequireDefault(_HistogramContainer);\n\nvar _RangeLabel = require('./addons/RangeLabel');\n\nvar _RangeLabel2 = _interopRequireDefault(_RangeLabel);\n\nvar _SliderHandle = require('./addons/SliderHandle');\n\nvar _SliderHandle2 = _interopRequireDefault(_SliderHandle);\n\nvar _Slider3 = require('../../styles/Slider');\n\nvar _Slider4 = _interopRequireDefault(_Slider3);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Label = require('../../styles/Label');\n\nvar _utils = require('../../utils');\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\n\nvar RangeSlider = function (_Component) {\n  _inherits(RangeSlider, _Component);\n\n  function RangeSlider(props) {\n    _classCallCheck(this, RangeSlider);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue,\n        defaultValue = props.defaultValue,\n        value = props.value,\n        range = props.range,\n        queryFormat = props.queryFormat;\n\n    if (queryFormat) {\n      if (!(0, _helper.isValidDateRangeQueryFormat)(queryFormat)) {\n        throw new Error('queryFormat is not supported. Try with a valid queryFormat.');\n      }\n\n      if (!(0, _dayjs2.default)(new Date(range.start)).isValid() || !(0, _dayjs2.default)(new Date(range.end)).isValid()) {\n        throw new Error('`reactivesearch` uses dayjs for processing date-types, Try passing valid value(s) accepted by the dayjs constructor. Dayjs ref: https://day.js.org/docs/en/parse/parse');\n      }\n    } else if (typeof range.start !== 'number' || typeof range.end !== 'number') {\n      throw new Error('`RangeSlider` expects numerics, strings/ objects(date) are exception when dealing with date-types. Provide a valid queryFormat if you intend to use date-types.');\n    }\n\n    var valueToParse = selectedValue || value || defaultValue;\n    var currentValue = RangeSlider.parseValue(valueToParse, props);\n\n    if (!_this.shouldUpdate(currentValue)) {\n      // the standard way to deal with internal state is using numerics\n      // to  avoid complications as date type can be an object, string, numeric, etc.\n      // thus we convert it to numeric as a standard\n      currentValue = (0, _utils.getNumericRangeArray)(props.range, props.queryFormat);\n    }\n\n    var inRangeValueArray = (0, _utils.getValueArrayWithinLimits)(currentValue, (0, _utils.getNumericRangeArray)(props.range, props.queryFormat));\n    _this.state = {\n      currentValue: inRangeValueArray,\n      stats: [],\n      dateFormat: props._dateFormat || 'YYYY-MM-DD[T]HH:mm:ss'\n    };\n    _this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId); // Set custom query in store\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n\n    _this.updateQueryOptions(props);\n\n    var hasMounted = false;\n\n    if (currentValue) {\n      _this.handleChange(inRangeValueArray, props, hasMounted);\n    }\n\n    props.updateComponentProps(props.componentId, _extends({}, props, props.range && !props.calendarInterval && props.queryFormat ? {\n      calendarInterval: (0, _helper.getCalendarIntervalErrorMessage)(inRangeValueArray[1] - inRangeValueArray[0]).calculatedCalendarInterval\n    } : {}), _constants.componentTypes.rangeSlider);\n    return _this;\n  }\n\n  RangeSlider.prototype.componentDidMount = function componentDidMount() {\n    var _props = this.props,\n        enableAppbase = _props.enableAppbase,\n        index = _props.index;\n\n    if (!enableAppbase && index) {\n      console.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n  };\n\n  RangeSlider.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['showHistogram', 'interval', 'range', 'calendarInterval'], function () {\n      return _this2.updateQueryOptions(_this2.props);\n    });\n    (0, _helper.checkPropChange)(this.props.options, prevProps.options, function () {\n      var options = _this2.props.options;\n\n      if (Array.isArray(options)) {\n        options.sort(function (a, b) {\n          if (a.key < b.key) return -1;\n          if (a.key > b.key) return 1;\n          return 0;\n        });\n      }\n\n      _this2.setState({\n        stats: options || []\n      });\n    });\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField', 'aggregationSize'], function () {\n      _this2.updateQueryOptions(_this2.props);\n\n      _this2.handleChange(_this2.state.currentValue, _this2.props);\n    });\n\n    if (!(0, _helper.isEqual)((0, _utils.getNumericRangeArray)(this.props.value, this.props.queryFormat), (0, _utils.getNumericRangeArray)(prevProps.value, this.props.queryFormat))) {\n      var value = (0, _utils.getValueArrayWithinLimits)(RangeSlider.parseValue(this.props.value, this.props), (0, _utils.getNumericRangeArray)(this.props.range, this.props.queryFormat)); // when the current value is equal to the range,\n      // this implies the component is reset to initial values\n      // thus we pass null to handleChange that would fire query\n      // to update the dependent result components as well\n\n      value = !(0, _helper.isEqual)(value, (0, _utils.getNumericRangeArray)(this.props.range, this.props.queryFormat)) ? (0, _utils.getValueArrayWithinLimits)(value, (0, _utils.getNumericRangeArray)(this.props.range, this.props.queryFormat)) : null;\n      this.handleChange(value, this.props);\n    } else if ( // cautionary conversion of state and selectedValues from state to numerics\n    // in order to make comparison meaningful\n    // since support of date-types might use date-object, string or numerics.\n    !(0, _helper.isEqual)(this.state.currentValue ? this.state.currentValue.map(function (val) {\n      return (0, _utils.formatDateString)((0, _dayjs2.default)(new Date(val)), _this2.state.dateFormat);\n    }) : null, Array.isArray(this.props.selectedValue) ? this.props.selectedValue : null) && !(0, _helper.isEqual)(Array.isArray(this.props.selectedValue) ? this.props.selectedValue : null, Array.isArray(prevProps.selectedValue) ? prevProps.selectedValue : null)) {\n      var _props2 = this.props,\n          _value = _props2.value,\n          onChange = _props2.onChange;\n\n      if (_value === undefined) {\n        var selectedValue = this.props.selectedValue ? RangeSlider.parseValue(this.props.selectedValue, this.props) : null;\n        this.handleChange(selectedValue, this.props);\n      } else if (onChange) {\n        onChange(this.props.selectedValue || null);\n      } else {\n        this.handleChange(this.state.currentValue);\n      }\n    }\n  };\n\n  RangeSlider.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    var _this3 = this;\n\n    var upperLimit = Math.floor((nextProps.range.end - nextProps.range.start) / 2);\n\n    if (nextProps.stepValue < 1 || nextProps.stepValue > upperLimit) {\n      console.warn('stepValue for RangeSlider ' + nextProps.componentId + ' should be greater than 0 and less than or equal to ' + upperLimit);\n      return false;\n    }\n\n    (0, _helper.checkSomePropChange)(nextProps, this.props, ['queryFormat'], function () {\n      // when testing with playround, the queryformat knob changed the queryFormat prop\n      // which changed the value incase of date types but the local state didn't update\n      // this block of code takes care of updating the local value with optimized rerendering\n      _this3.setState({\n        currentValue: RangeSlider.parseValue(nextProps.range, nextProps)\n      }, function () {\n        _this3.updateQueryOptions(nextProps);\n\n        _this3.handleChange(_this3.state.currentValue, nextProps);\n      }); // stopping the rerender since setState call above would rerender anyway.\n\n\n      return false;\n    });\n    return true;\n  };\n\n  RangeSlider.prototype.render = function render() {\n    var _this4 = this;\n\n    var _getNumericRangeArray = (0, _utils.getNumericRangeArray)(this.props.range, this.props.queryFormat),\n        startRangeValue = _getNumericRangeArray[0],\n        endRangeValue = _getNumericRangeArray[1]; // Account for the controlled usage if value is passed as prop\n\n\n    var currentValue = this.props.value ? (0, _utils.getNumericRangeArray)(this.props.value, this.props.queryFormat) : this.state.currentValue;\n    return (0, _core.jsx)(_Slider4.default, {\n      primary: true,\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && (0, _core.jsx)(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.state.stats.length && this.props.showHistogram && this.props.showSlider ? (0, _core.jsx)(_HistogramContainer2.default, {\n      stats: this.state.stats,\n      range: {\n        start: startRangeValue,\n        end: endRangeValue\n      },\n      interval: this.getValidInterval(this.props)\n    }) : null, this.props.showSlider && (0, _core.jsx)(_Slider2.default, {\n      min: startRangeValue,\n      max: endRangeValue,\n      values: currentValue || [startRangeValue, endRangeValue],\n      onChange: this.handleSlider,\n      onValuesUpdated: this.handleDrag,\n      snap: this.props.snap,\n      snapPoints: this.props.snap ? this.getSnapPoints() : null,\n      className: (0, _helper.getClassName)(this.props.innerClass, 'slider'),\n      handle: function handle(_ref) {\n        var className = _ref.className,\n            style = _ref.style,\n            passProps = _objectWithoutProperties(_ref, ['className', 'style']);\n\n        return (0, _core.jsx)(_SliderHandle2.default, _extends({\n          style: style,\n          className: className\n        }, passProps, {\n          renderTooltipData: _this4.props.renderTooltipData,\n          tooltipTrigger: _this4.props.tooltipTrigger\n        }));\n      }\n    }), this.props.rangeLabels && this.props.showSlider && (0, _core.jsx)('div', {\n      css: _Label.rangeLabelsContainer\n    }, (0, _core.jsx)(_RangeLabel2.default, {\n      align: 'left',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n    }, this.props.rangeLabels.start), (0, _core.jsx)(_RangeLabel2.default, {\n      align: 'right',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n    }, this.props.rangeLabels.end)));\n  };\n\n  return RangeSlider;\n}(_react.Component);\n\nRangeSlider.parseValue = function (value, props) {\n  if (Array.isArray(value)) {\n    return (0, _utils.getNumericRangeArray)({\n      start: value[0],\n      end: value[1]\n    }, props.queryFormat).filter(function (val) {\n      return typeof val === 'number';\n    });\n  }\n\n  return value ? (0, _utils.getNumericRangeArray)(value, props.queryFormat) : (0, _utils.getNumericRangeArray)(props.range, props.queryFormat);\n};\n\nRangeSlider.defaultQuery = function (value, props) {\n  var query = null;\n\n  if (Array.isArray(value) && value.length) {\n    query = (0, _utils.getRangeQueryWithNullValues)(value, props);\n  }\n\n  if (query && props.nestedField) {\n    return {\n      nested: {\n        path: props.nestedField,\n        query: query\n      }\n    };\n  }\n\n  return query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.getSnapPoints = function () {\n    var snapPoints = [];\n    var stepValue = _this5.props.stepValue;\n\n    var _getNumericRangeArray2 = (0, _utils.getNumericRangeArray)(_this5.props.range, _this5.props.queryFormat),\n        startPoint = _getNumericRangeArray2[0],\n        endPoint = _getNumericRangeArray2[1]; // limit the number of steps to prevent generating a large number of snapPoints\n\n\n    if ((endPoint - startPoint) / stepValue > 100) {\n      stepValue = (endPoint - startPoint) / 100;\n    }\n\n    for (var i = startPoint; i <= endPoint; i += stepValue) {\n      snapPoints = snapPoints.concat(i);\n    }\n\n    if (snapPoints[snapPoints.length - 1] !== endPoint) {\n      snapPoints = snapPoints.concat(endPoint);\n    }\n\n    return snapPoints;\n  };\n\n  this.getValidInterval = function (props) {\n    var _getNumericRangeArray3 = (0, _utils.getNumericRangeArray)(props.range, props.queryFormat),\n        start = _getNumericRangeArray3[0],\n        end = _getNumericRangeArray3[1];\n\n    if ((0, _helper.isValidDateRangeQueryFormat)(props.queryFormat)) {\n      var calendarInterval = props.calendarInterval || (0, _helper.getCalendarIntervalErrorMessage)(end - start).calculatedCalendarInterval;\n      var numberOfIntervals = Math.ceil((end - start) / _helper.queryFormatMillisecondsMap[calendarInterval]);\n\n      if (numberOfIntervals > 100) {\n        console.error(props.componentId + ': ' + (0, _helper.getCalendarIntervalErrorMessage)(end - start, calendarInterval).errorMessage);\n      }\n\n      return _helper.queryFormatMillisecondsMap[calendarInterval];\n    }\n\n    var min = Math.ceil((end - start) / 100) || 1;\n\n    if (!props.interval) {\n      return min;\n    } else if (props.interval < min) {\n      console.error(props.componentId + ': interval prop\\'s value should be greater than or equal to ' + min);\n      return min;\n    }\n\n    return props.interval;\n  };\n\n  this.histogramQuery = function (props) {\n    var _query;\n\n    var query = (_query = {}, _query[props.dataField] = {\n      histogram: {\n        field: props.dataField,\n        interval: _this5.getValidInterval(props),\n        offset: (0, _utils.getNumericRangeArray)(props.range, props.queryFormat)[0]\n      }\n    }, _query);\n\n    if (props.nestedField) {\n      return {\n        inner: {\n          aggs: query,\n          nested: {\n            path: props.nestedField\n          }\n        }\n      };\n    }\n\n    return query;\n  };\n\n  this.handleChange = function (currentValue) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this5.props;\n    var hasMounted = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var normalizedValueArray = null;\n    var processedStart = void 0;\n    var processedEnd = void 0;\n\n    if (currentValue) {\n      var start = currentValue[0],\n          end = currentValue[1];\n      processedStart = (0, _utils.getNumericRangeArray)({\n        start: start,\n        end: end\n      }, props.queryFormat)[0];\n      processedEnd = (0, _utils.getNumericRangeArray)({\n        start: start,\n        end: end\n      }, props.queryFormat)[1];\n      normalizedValueArray = [(0, _helper.isValidDateRangeQueryFormat)(props.queryFormat) ? (0, _utils.formatDateString)(processedStart, _this5.state.dateFormat) : processedStart, (0, _helper.isValidDateRangeQueryFormat)(props.queryFormat) ? (0, _utils.formatDateString)(processedEnd, _this5.state.dateFormat) : processedEnd];\n    }\n\n    var performUpdate = function performUpdate() {\n      var range = props.range;\n\n      var _getNumericRangeArray4 = (0, _utils.getNumericRangeArray)(range, props.queryFormat),\n          rangeStart = _getNumericRangeArray4[0],\n          rangeEnd = _getNumericRangeArray4[1];\n\n      var handleUpdates = function handleUpdates() {\n        if (!(0, _helper.isEqual)(currentValue, [rangeStart, rangeEnd])) {\n          _this5.updateQuery(normalizedValueArray, props);\n\n          if (props.onValueChange) {\n            props.onValueChange(normalizedValueArray);\n          }\n        }\n      };\n\n      if (hasMounted && (currentValue ? processedStart <= processedEnd && processedStart >= rangeStart && processedEnd <= rangeEnd : true)) {\n        _this5.setState({\n          currentValue: currentValue ? [processedStart, processedEnd] : null\n        }, handleUpdates);\n      } else {\n        handleUpdates();\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, normalizedValueArray, props.beforeValueChange, performUpdate);\n  };\n\n  this.handleSlider = function (_ref2) {\n    var values = _ref2.values;\n\n    if (_this5.shouldUpdate(values)) {\n      if (!(0, _helper.isEqual)(values, _this5.state.currentValue)) {\n        var _props3 = _this5.props,\n            value = _props3.value,\n            onChange = _props3.onChange;\n\n        if (value === undefined) {\n          _this5.handleChange(values);\n        } else if (onChange) {\n          // force re-rendering to avail the currentValue\n          // in rheostat component since it doesn't respect\n          // the controlled behavior properly\n          _this5.forceUpdate();\n\n          onChange(values);\n        } else {\n          // since value prop is set & onChange is not defined\n          // we need to reset the slider position\n          // to the original 'value' prop\n          _this5.setState({\n            currentValue: _this5.state.currentValue || (0, _utils.getNumericRangeArray)(_this5.props.range, _this5.props.queryFormat)\n          });\n        }\n      }\n    }\n  };\n\n  this.handleDrag = function (values) {\n    if (_this5.props.onDrag) {\n      var min = values.min,\n          max = values.max,\n          currentValue = values.values;\n\n      _this5.props.onDrag(currentValue, [min, max]);\n    }\n  };\n\n  this.updateQuery = function (value, props) {\n    var customQuery = props.customQuery;\n    var query = RangeSlider.defaultQuery(value, props);\n    var customQueryOptions = void 0;\n\n    if (customQuery) {\n      var _ref3 = customQuery(value, props) || {};\n\n      query = _ref3.query;\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n      (0, _helper.updateCustomQuery)(props.componentId, props, value);\n    }\n\n    var showFilter = props.showFilter;\n    props.setQueryOptions(props.componentId, customQueryOptions, false);\n    props.updateQuery({\n      componentId: props.componentId,\n      query: query,\n      value: value,\n      label: props.filterLabel,\n      showFilter: showFilter,\n      URLParams: props.URLParams,\n      componentType: _constants.componentTypes.rangeSlider\n    });\n  };\n\n  this.updateQueryOptions = function (props) {\n    if (props.showHistogram) {\n      var customQuery = props.customQuery;\n      var queryOptions = {\n        size: 0,\n        aggs: (props.histogramQuery || _this5.histogramQuery)(props)\n      };\n      var value = (0, _utils.getNumericRangeArray)(props.range, props.queryFormat);\n      var query = customQuery || RangeSlider.defaultQuery;\n      var customQueryOptions = customQuery ? (0, _helper.getOptionsFromQuery)(customQuery(value, props)) : null;\n      props.setQueryOptions(_this5.internalComponent, _extends({}, queryOptions, customQueryOptions), false);\n      props.updateQuery({\n        componentId: _this5.internalComponent,\n        query: query(value, props),\n        value: value\n      });\n    }\n  };\n\n  this.shouldUpdate = function (value) {\n    var validateRange = _this5.props.validateRange;\n\n    if (validateRange) {\n      return validateRange(value);\n    }\n\n    return true;\n  };\n};\n\nRangeSlider.propTypes = {\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  options: _types2.default.options,\n  selectedValue: _types2.default.selectedValue,\n  setCustomQuery: _types2.default.funcRequired,\n  enableAppbase: _types2.default.bool,\n  // component props\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  customQuery: _types2.default.func,\n  dataField: _types2.default.stringRequired,\n  defaultValue: _types2.default.range,\n  value: _types2.default.range,\n  filterLabel: _types2.default.string,\n  innerClass: _types2.default.style,\n  interval: _types2.default.number,\n  nestedField: _types2.default.string,\n  onDrag: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  range: _types2.default.range,\n  rangeLabels: _types2.default.rangeLabels,\n  react: _types2.default.react,\n  showHistogram: _types2.default.bool,\n  histogramQuery: _types2.default.func,\n  showFilter: _types2.default.bool,\n  showSlider: _types2.default.bool,\n  tooltipTrigger: _types2.default.tooltipTrigger,\n  renderTooltipData: _types2.default.func,\n  snap: _types2.default.bool,\n  stepValue: _types2.default.number,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  URLParams: _types2.default.bool,\n  includeNullValues: _types2.default.bool,\n  validateRange: _types2.default.func,\n  index: _types2.default.string,\n  queryFormat: (0, _propTypes.oneOf)([].concat(Object.keys(_dateFormats2.default))),\n  calendarInterval: _types2.default.calendarInterval,\n  updateComponentProps: _types2.default.func,\n  // for internal purpose only\n  // introduced specifically to control the\n  // dateformat for the RS-components using RangeSlider\n  // ex: RangeInput\n  // RangeSlider bydefault supports YYYY-MM-DD[T]HH:mm:ss\n  // but this is not required for RangeInput\n  _dateFormat: _types2.default.string,\n  endpoint: _types2.default.endpoint\n};\nRangeSlider.defaultProps = {\n  className: null,\n  range: {\n    start: 0,\n    end: 10\n  },\n  showHistogram: true,\n  showSlider: true,\n  tooltipTrigger: 'none',\n  snap: true,\n  stepValue: 1,\n  showFilter: true,\n  style: {},\n  URLParams: false,\n  includeNullValues: false\n}; // Add componentType for SSR\n\nRangeSlider.componentType = _constants.componentTypes.rangeSlider;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  var aggregation = props.nestedField && state.aggregations[props.componentId] ? state.aggregations[props.componentId].inner : state.aggregations[props.componentId];\n  return {\n    options: aggregation ? aggregation[props.dataField] && aggregation[props.dataField].buckets : [],\n    selectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null,\n    enableAppbase: state.config.enableAppbase\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setQueryOptions: function setQueryOptions() {\n      return dispatch(_actions.setQueryOptions.apply(undefined, arguments));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    updateComponentProps: function updateComponentProps(component, options, componentType) {\n      return dispatch((0, _actions.updateComponentProps)(component, options, componentType));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n  return (0, _core.jsx)(RangeSlider, _extends({\n    ref: props.myForwardedRef\n  }, props));\n}); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(_PreferencesConsumer2.default, {\n    userProps: props\n  }, function (preferenceProps) {\n    return (0, _core.jsx)(_ComponentWrapper2.default, _extends({}, preferenceProps, {\n      internalComponent: true,\n      componentType: _constants.componentTypes.rangeSlider\n    }), function (componentProps) {\n      return (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n        myForwardedRef: ref\n      }));\n    });\n  });\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, RangeSlider);\nForwardRefComponent.displayName = 'RangeSlider';\nexports.default = ForwardRefComponent;","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_core","require","_react","_react2","_interopRequireDefault","_dayjs","_dayjs2","_actions","_hoistNonReactStatics","_hoistNonReactStatics2","_helper","_types","_types2","_Slider","_Slider2","_constants","_transform","_propTypes","_dateFormats","_dateFormats2","_HistogramContainer","_HistogramContainer2","_RangeLabel","_RangeLabel2","_SliderHandle","_SliderHandle2","_Slider3","_Slider4","_Title","_Title2","_Label","_utils","_PreferencesConsumer","_PreferencesConsumer2","_ComponentWrapper","_ComponentWrapper2","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","RangeSlider","_Component","props","_this","_initialiseProps","selectedValue","defaultValue","range","queryFormat","isValidDateRangeQueryFormat","Error","Date","start","isValid","end","valueToParse","currentValue","parseValue","shouldUpdate","getNumericRangeArray","inRangeValueArray","getValueArrayWithinLimits","state","stats","dateFormat","_dateFormat","internalComponent","getInternalComponentID","componentId","updateCustomQuery","updateQueryOptions","hasMounted","handleChange","updateComponentProps","calendarInterval","getCalendarIntervalErrorMessage","calculatedCalendarInterval","componentTypes","rangeSlider","componentDidMount","_props","enableAppbase","index","console","warn","componentDidUpdate","prevProps","_this2","checkSomePropChange","checkPropChange","options","Array","isArray","sort","a","b","setState","isEqual","map","val","formatDateString","_props2","_value","onChange","undefined","shouldComponentUpdate","nextProps","_this3","upperLimit","Math","floor","stepValue","render","_this4","_getNumericRangeArray","startRangeValue","endRangeValue","jsx","primary","style","className","title","getClassName","innerClass","showHistogram","showSlider","interval","getValidInterval","min","max","values","handleSlider","onValuesUpdated","handleDrag","snap","snapPoints","getSnapPoints","handle","_ref","passProps","renderTooltipData","tooltipTrigger","rangeLabels","css","rangeLabelsContainer","align","Component","filter","defaultQuery","query","getRangeQueryWithNullValues","nestedField","nested","path","_this5","_getNumericRangeArray2","startPoint","endPoint","concat","_getNumericRangeArray3","numberOfIntervals","ceil","queryFormatMillisecondsMap","error","errorMessage","histogramQuery","_query","dataField","histogram","field","offset","inner","aggs","normalizedValueArray","processedStart","processedEnd","performUpdate","_getNumericRangeArray4","rangeStart","rangeEnd","handleUpdates","updateQuery","onValueChange","checkValueChange","beforeValueChange","_ref2","_props3","forceUpdate","onDrag","customQuery","customQueryOptions","_ref3","getOptionsFromQuery","showFilter","setQueryOptions","label","filterLabel","URLParams","componentType","queryOptions","size","validateRange","propTypes","funcRequired","setCustomQuery","bool","func","string","stringRequired","number","onQueryChange","react","includeNullValues","oneOf","endpoint","defaultProps","mapStateToProps","aggregation","aggregations","buckets","selectedValues","config","mapDispatchtoProps","dispatch","component","apply","updateQueryObject","ConnectedComponent","connect","ref","myForwardedRef","ForwardRefComponent","forwardRef","userProps","preferenceProps","componentProps","displayName"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/range/RangeSlider.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _dayjs = require('dayjs');\n\nvar _dayjs2 = _interopRequireDefault(_dayjs);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Slider = require('@appbaseio/rheostat/lib/Slider');\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _propTypes = require('prop-types');\n\nvar _dateFormats = require('@appbaseio/reactivecore/lib/utils/dateFormats');\n\nvar _dateFormats2 = _interopRequireDefault(_dateFormats);\n\nvar _HistogramContainer = require('./addons/HistogramContainer');\n\nvar _HistogramContainer2 = _interopRequireDefault(_HistogramContainer);\n\nvar _RangeLabel = require('./addons/RangeLabel');\n\nvar _RangeLabel2 = _interopRequireDefault(_RangeLabel);\n\nvar _SliderHandle = require('./addons/SliderHandle');\n\nvar _SliderHandle2 = _interopRequireDefault(_SliderHandle);\n\nvar _Slider3 = require('../../styles/Slider');\n\nvar _Slider4 = _interopRequireDefault(_Slider3);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Label = require('../../styles/Label');\n\nvar _utils = require('../../utils');\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsxRuntime classic */\n/** @jsx jsx */\n\n\nvar RangeSlider = function (_Component) {\n\t_inherits(RangeSlider, _Component);\n\n\tfunction RangeSlider(props) {\n\t\t_classCallCheck(this, RangeSlider);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar selectedValue = props.selectedValue,\n\t\t    defaultValue = props.defaultValue,\n\t\t    value = props.value,\n\t\t    range = props.range,\n\t\t    queryFormat = props.queryFormat;\n\n\n\t\tif (queryFormat) {\n\t\t\tif (!(0, _helper.isValidDateRangeQueryFormat)(queryFormat)) {\n\t\t\t\tthrow new Error('queryFormat is not supported. Try with a valid queryFormat.');\n\t\t\t}\n\t\t\tif (!(0, _dayjs2.default)(new Date(range.start)).isValid() || !(0, _dayjs2.default)(new Date(range.end)).isValid()) {\n\t\t\t\tthrow new Error('`reactivesearch` uses dayjs for processing date-types, Try passing valid value(s) accepted by the dayjs constructor. Dayjs ref: https://day.js.org/docs/en/parse/parse');\n\t\t\t}\n\t\t} else if (typeof range.start !== 'number' || typeof range.end !== 'number') {\n\t\t\tthrow new Error('`RangeSlider` expects numerics, strings/ objects(date) are exception when dealing with date-types. Provide a valid queryFormat if you intend to use date-types.');\n\t\t}\n\t\tvar valueToParse = selectedValue || value || defaultValue;\n\t\tvar currentValue = RangeSlider.parseValue(valueToParse, props);\n\t\tif (!_this.shouldUpdate(currentValue)) {\n\t\t\t// the standard way to deal with internal state is using numerics\n\t\t\t// to  avoid complications as date type can be an object, string, numeric, etc.\n\t\t\t// thus we convert it to numeric as a standard\n\t\t\tcurrentValue = (0, _utils.getNumericRangeArray)(props.range, props.queryFormat);\n\t\t}\n\t\tvar inRangeValueArray = (0, _utils.getValueArrayWithinLimits)(currentValue, (0, _utils.getNumericRangeArray)(props.range, props.queryFormat));\n\t\t_this.state = {\n\t\t\tcurrentValue: inRangeValueArray,\n\t\t\tstats: [],\n\t\t\tdateFormat: props._dateFormat || 'YYYY-MM-DD[T]HH:mm:ss'\n\t\t};\n\n\t\t_this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n\t\t// Set custom query in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n\n\t\t_this.updateQueryOptions(props);\n\t\tvar hasMounted = false;\n\t\tif (currentValue) {\n\t\t\t_this.handleChange(inRangeValueArray, props, hasMounted);\n\t\t}\n\n\t\tprops.updateComponentProps(props.componentId, _extends({}, props, props.range && !props.calendarInterval && props.queryFormat ? {\n\t\t\tcalendarInterval: (0, _helper.getCalendarIntervalErrorMessage)(inRangeValueArray[1] - inRangeValueArray[0]).calculatedCalendarInterval\n\t\t} : {}), _constants.componentTypes.rangeSlider);\n\t\treturn _this;\n\t}\n\n\tRangeSlider.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _props = this.props,\n\t\t    enableAppbase = _props.enableAppbase,\n\t\t    index = _props.index;\n\n\t\tif (!enableAppbase && index) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t};\n\n\tRangeSlider.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['showHistogram', 'interval', 'range', 'calendarInterval'], function () {\n\t\t\treturn _this2.updateQueryOptions(_this2.props);\n\t\t});\n\t\t(0, _helper.checkPropChange)(this.props.options, prevProps.options, function () {\n\t\t\tvar options = _this2.props.options;\n\n\t\t\tif (Array.isArray(options)) {\n\t\t\t\toptions.sort(function (a, b) {\n\t\t\t\t\tif (a.key < b.key) return -1;\n\t\t\t\t\tif (a.key > b.key) return 1;\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\t\t}\n\t\t\t_this2.setState({\n\t\t\t\tstats: options || []\n\t\t\t});\n\t\t});\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField', 'aggregationSize'], function () {\n\t\t\t_this2.updateQueryOptions(_this2.props);\n\t\t\t_this2.handleChange(_this2.state.currentValue, _this2.props);\n\t\t});\n\t\tif (!(0, _helper.isEqual)((0, _utils.getNumericRangeArray)(this.props.value, this.props.queryFormat), (0, _utils.getNumericRangeArray)(prevProps.value, this.props.queryFormat))) {\n\t\t\tvar value = (0, _utils.getValueArrayWithinLimits)(RangeSlider.parseValue(this.props.value, this.props), (0, _utils.getNumericRangeArray)(this.props.range, this.props.queryFormat));\n\n\t\t\t// when the current value is equal to the range,\n\t\t\t// this implies the component is reset to initial values\n\t\t\t// thus we pass null to handleChange that would fire query\n\t\t\t// to update the dependent result components as well\n\n\t\t\tvalue = !(0, _helper.isEqual)(value, (0, _utils.getNumericRangeArray)(this.props.range, this.props.queryFormat)) ? (0, _utils.getValueArrayWithinLimits)(value, (0, _utils.getNumericRangeArray)(this.props.range, this.props.queryFormat)) : null;\n\n\t\t\tthis.handleChange(value, this.props);\n\t\t} else if (\n\t\t// cautionary conversion of state and selectedValues from state to numerics\n\t\t// in order to make comparison meaningful\n\t\t// since support of date-types might use date-object, string or numerics.\n\t\t!(0, _helper.isEqual)(this.state.currentValue ? this.state.currentValue.map(function (val) {\n\t\t\treturn (0, _utils.formatDateString)((0, _dayjs2.default)(new Date(val)), _this2.state.dateFormat);\n\t\t}) : null, Array.isArray(this.props.selectedValue) ? this.props.selectedValue : null) && !(0, _helper.isEqual)(Array.isArray(this.props.selectedValue) ? this.props.selectedValue : null, Array.isArray(prevProps.selectedValue) ? prevProps.selectedValue : null)) {\n\t\t\tvar _props2 = this.props,\n\t\t\t    _value = _props2.value,\n\t\t\t    onChange = _props2.onChange;\n\n\n\t\t\tif (_value === undefined) {\n\t\t\t\tvar selectedValue = this.props.selectedValue ? RangeSlider.parseValue(this.props.selectedValue, this.props) : null;\n\n\t\t\t\tthis.handleChange(selectedValue, this.props);\n\t\t\t} else if (onChange) {\n\t\t\t\tonChange(this.props.selectedValue || null);\n\t\t\t} else {\n\t\t\t\tthis.handleChange(this.state.currentValue);\n\t\t\t}\n\t\t}\n\t};\n\n\tRangeSlider.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n\t\tvar _this3 = this;\n\n\t\tvar upperLimit = Math.floor((nextProps.range.end - nextProps.range.start) / 2);\n\t\tif (nextProps.stepValue < 1 || nextProps.stepValue > upperLimit) {\n\t\t\tconsole.warn('stepValue for RangeSlider ' + nextProps.componentId + ' should be greater than 0 and less than or equal to ' + upperLimit);\n\t\t\treturn false;\n\t\t}\n\t\t(0, _helper.checkSomePropChange)(nextProps, this.props, ['queryFormat'], function () {\n\t\t\t// when testing with playround, the queryformat knob changed the queryFormat prop\n\t\t\t// which changed the value incase of date types but the local state didn't update\n\t\t\t// this block of code takes care of updating the local value with optimized rerendering\n\t\t\t_this3.setState({\n\t\t\t\tcurrentValue: RangeSlider.parseValue(nextProps.range, nextProps)\n\t\t\t}, function () {\n\t\t\t\t_this3.updateQueryOptions(nextProps);\n\t\t\t\t_this3.handleChange(_this3.state.currentValue, nextProps);\n\t\t\t});\n\t\t\t// stopping the rerender since setState call above would rerender anyway.\n\t\t\treturn false;\n\t\t});\n\t\treturn true;\n\t};\n\n\tRangeSlider.prototype.render = function render() {\n\t\tvar _this4 = this;\n\n\t\tvar _getNumericRangeArray = (0, _utils.getNumericRangeArray)(this.props.range, this.props.queryFormat),\n\t\t    startRangeValue = _getNumericRangeArray[0],\n\t\t    endRangeValue = _getNumericRangeArray[1];\n\t\t// Account for the controlled usage if value is passed as prop\n\n\n\t\tvar currentValue = this.props.value ? (0, _utils.getNumericRangeArray)(this.props.value, this.props.queryFormat) : this.state.currentValue;\n\n\t\treturn (0, _core.jsx)(\n\t\t\t_Slider4.default,\n\t\t\t{ primary: true, style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && (0, _core.jsx)(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.state.stats.length && this.props.showHistogram && this.props.showSlider ? (0, _core.jsx)(_HistogramContainer2.default, {\n\t\t\t\tstats: this.state.stats,\n\t\t\t\trange: {\n\t\t\t\t\tstart: startRangeValue,\n\t\t\t\t\tend: endRangeValue\n\t\t\t\t},\n\t\t\t\tinterval: this.getValidInterval(this.props)\n\t\t\t}) : null,\n\t\t\tthis.props.showSlider && (0, _core.jsx)(_Slider2.default, {\n\t\t\t\tmin: startRangeValue,\n\t\t\t\tmax: endRangeValue,\n\t\t\t\tvalues: currentValue || [startRangeValue, endRangeValue],\n\t\t\t\tonChange: this.handleSlider,\n\t\t\t\tonValuesUpdated: this.handleDrag,\n\t\t\t\tsnap: this.props.snap,\n\t\t\t\tsnapPoints: this.props.snap ? this.getSnapPoints() : null,\n\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'slider'),\n\t\t\t\thandle: function handle(_ref) {\n\t\t\t\t\tvar className = _ref.className,\n\t\t\t\t\t    style = _ref.style,\n\t\t\t\t\t    passProps = _objectWithoutProperties(_ref, ['className', 'style']);\n\n\t\t\t\t\treturn (0, _core.jsx)(_SliderHandle2.default, _extends({\n\t\t\t\t\t\tstyle: style,\n\t\t\t\t\t\tclassName: className\n\t\t\t\t\t}, passProps, {\n\t\t\t\t\t\trenderTooltipData: _this4.props.renderTooltipData,\n\t\t\t\t\t\ttooltipTrigger: _this4.props.tooltipTrigger\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}),\n\t\t\tthis.props.rangeLabels && this.props.showSlider && (0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{ css: _Label.rangeLabelsContainer },\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t_RangeLabel2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\talign: 'left',\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n\t\t\t\t\t},\n\t\t\t\t\tthis.props.rangeLabels.start\n\t\t\t\t),\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t_RangeLabel2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\talign: 'right',\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n\t\t\t\t\t},\n\t\t\t\t\tthis.props.rangeLabels.end\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\treturn RangeSlider;\n}(_react.Component);\n\nRangeSlider.parseValue = function (value, props) {\n\tif (Array.isArray(value)) {\n\t\treturn (0, _utils.getNumericRangeArray)({ start: value[0], end: value[1] }, props.queryFormat).filter(function (val) {\n\t\t\treturn typeof val === 'number';\n\t\t});\n\t}\n\treturn value ? (0, _utils.getNumericRangeArray)(value, props.queryFormat) : (0, _utils.getNumericRangeArray)(props.range, props.queryFormat);\n};\n\nRangeSlider.defaultQuery = function (value, props) {\n\tvar query = null;\n\tif (Array.isArray(value) && value.length) {\n\t\tquery = (0, _utils.getRangeQueryWithNullValues)(value, props);\n\t}\n\n\tif (query && props.nestedField) {\n\t\treturn {\n\t\t\tnested: {\n\t\t\t\tpath: props.nestedField,\n\t\t\t\tquery: query\n\t\t\t}\n\t\t};\n\t}\n\n\treturn query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this5 = this;\n\n\tthis.getSnapPoints = function () {\n\t\tvar snapPoints = [];\n\t\tvar stepValue = _this5.props.stepValue;\n\n\t\tvar _getNumericRangeArray2 = (0, _utils.getNumericRangeArray)(_this5.props.range, _this5.props.queryFormat),\n\t\t    startPoint = _getNumericRangeArray2[0],\n\t\t    endPoint = _getNumericRangeArray2[1];\n\t\t// limit the number of steps to prevent generating a large number of snapPoints\n\n\n\t\tif ((endPoint - startPoint) / stepValue > 100) {\n\t\t\tstepValue = (endPoint - startPoint) / 100;\n\t\t}\n\n\t\tfor (var i = startPoint; i <= endPoint; i += stepValue) {\n\t\t\tsnapPoints = snapPoints.concat(i);\n\t\t}\n\t\tif (snapPoints[snapPoints.length - 1] !== endPoint) {\n\t\t\tsnapPoints = snapPoints.concat(endPoint);\n\t\t}\n\t\treturn snapPoints;\n\t};\n\n\tthis.getValidInterval = function (props) {\n\t\tvar _getNumericRangeArray3 = (0, _utils.getNumericRangeArray)(props.range, props.queryFormat),\n\t\t    start = _getNumericRangeArray3[0],\n\t\t    end = _getNumericRangeArray3[1];\n\n\t\tif ((0, _helper.isValidDateRangeQueryFormat)(props.queryFormat)) {\n\t\t\tvar calendarInterval = props.calendarInterval || (0, _helper.getCalendarIntervalErrorMessage)(end - start).calculatedCalendarInterval;\n\t\t\tvar numberOfIntervals = Math.ceil((end - start) / _helper.queryFormatMillisecondsMap[calendarInterval]);\n\t\t\tif (numberOfIntervals > 100) {\n\t\t\t\tconsole.error(props.componentId + ': ' + (0, _helper.getCalendarIntervalErrorMessage)(end - start, calendarInterval).errorMessage);\n\t\t\t}\n\t\t\treturn _helper.queryFormatMillisecondsMap[calendarInterval];\n\t\t}\n\n\t\tvar min = Math.ceil((end - start) / 100) || 1;\n\t\tif (!props.interval) {\n\t\t\treturn min;\n\t\t} else if (props.interval < min) {\n\t\t\tconsole.error(props.componentId + ': interval prop\\'s value should be greater than or equal to ' + min);\n\t\t\treturn min;\n\t\t}\n\t\treturn props.interval;\n\t};\n\n\tthis.histogramQuery = function (props) {\n\t\tvar _query;\n\n\t\tvar query = (_query = {}, _query[props.dataField] = {\n\t\t\thistogram: {\n\t\t\t\tfield: props.dataField,\n\t\t\t\tinterval: _this5.getValidInterval(props),\n\t\t\t\toffset: (0, _utils.getNumericRangeArray)(props.range, props.queryFormat)[0]\n\t\t\t}\n\t\t}, _query);\n\t\tif (props.nestedField) {\n\t\t\treturn {\n\t\t\t\tinner: {\n\t\t\t\t\taggs: query,\n\t\t\t\t\tnested: {\n\t\t\t\t\t\tpath: props.nestedField\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn query;\n\t};\n\n\tthis.handleChange = function (currentValue) {\n\t\tvar props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this5.props;\n\t\tvar hasMounted = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n\t\tvar normalizedValueArray = null;\n\t\tvar processedStart = void 0;\n\t\tvar processedEnd = void 0;\n\t\tif (currentValue) {\n\t\t\tvar start = currentValue[0],\n\t\t\t    end = currentValue[1];\n\n\t\t\tprocessedStart = (0, _utils.getNumericRangeArray)({ start: start, end: end }, props.queryFormat)[0];\n\t\t\tprocessedEnd = (0, _utils.getNumericRangeArray)({ start: start, end: end }, props.queryFormat)[1];\n\n\t\t\tnormalizedValueArray = [(0, _helper.isValidDateRangeQueryFormat)(props.queryFormat) ? (0, _utils.formatDateString)(processedStart, _this5.state.dateFormat) : processedStart, (0, _helper.isValidDateRangeQueryFormat)(props.queryFormat) ? (0, _utils.formatDateString)(processedEnd, _this5.state.dateFormat) : processedEnd];\n\t\t}\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tvar range = props.range;\n\n\t\t\tvar _getNumericRangeArray4 = (0, _utils.getNumericRangeArray)(range, props.queryFormat),\n\t\t\t    rangeStart = _getNumericRangeArray4[0],\n\t\t\t    rangeEnd = _getNumericRangeArray4[1];\n\n\t\t\tvar handleUpdates = function handleUpdates() {\n\t\t\t\tif (!(0, _helper.isEqual)(currentValue, [rangeStart, rangeEnd])) {\n\t\t\t\t\t_this5.updateQuery(normalizedValueArray, props);\n\t\t\t\t\tif (props.onValueChange) {\n\t\t\t\t\t\tprops.onValueChange(normalizedValueArray);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (hasMounted && (currentValue ? processedStart <= processedEnd && processedStart >= rangeStart && processedEnd <= rangeEnd : true)) {\n\t\t\t\t_this5.setState({\n\t\t\t\t\tcurrentValue: currentValue ? [processedStart, processedEnd] : null\n\t\t\t\t}, handleUpdates);\n\t\t\t} else {\n\t\t\t\thandleUpdates();\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, normalizedValueArray, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.handleSlider = function (_ref2) {\n\t\tvar values = _ref2.values;\n\n\t\tif (_this5.shouldUpdate(values)) {\n\t\t\tif (!(0, _helper.isEqual)(values, _this5.state.currentValue)) {\n\t\t\t\tvar _props3 = _this5.props,\n\t\t\t\t    value = _props3.value,\n\t\t\t\t    onChange = _props3.onChange;\n\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\t_this5.handleChange(values);\n\t\t\t\t} else if (onChange) {\n\t\t\t\t\t// force re-rendering to avail the currentValue\n\t\t\t\t\t// in rheostat component since it doesn't respect\n\t\t\t\t\t// the controlled behavior properly\n\t\t\t\t\t_this5.forceUpdate();\n\t\t\t\t\tonChange(values);\n\t\t\t\t} else {\n\t\t\t\t\t// since value prop is set & onChange is not defined\n\t\t\t\t\t// we need to reset the slider position\n\t\t\t\t\t// to the original 'value' prop\n\t\t\t\t\t_this5.setState({\n\t\t\t\t\t\tcurrentValue: _this5.state.currentValue || (0, _utils.getNumericRangeArray)(_this5.props.range, _this5.props.queryFormat)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.handleDrag = function (values) {\n\t\tif (_this5.props.onDrag) {\n\t\t\tvar min = values.min,\n\t\t\t    max = values.max,\n\t\t\t    currentValue = values.values;\n\n\t\t\t_this5.props.onDrag(currentValue, [min, max]);\n\t\t}\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tvar customQuery = props.customQuery;\n\n\t\tvar query = RangeSlider.defaultQuery(value, props);\n\t\tvar customQueryOptions = void 0;\n\t\tif (customQuery) {\n\t\t\tvar _ref3 = customQuery(value, props) || {};\n\n\t\t\tquery = _ref3.query;\n\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t}\n\t\tvar showFilter = props.showFilter;\n\n\n\t\tprops.setQueryOptions(props.componentId, customQueryOptions, false);\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: showFilter,\n\t\t\tURLParams: props.URLParams,\n\t\t\tcomponentType: _constants.componentTypes.rangeSlider\n\t\t});\n\t};\n\n\tthis.updateQueryOptions = function (props) {\n\t\tif (props.showHistogram) {\n\t\t\tvar customQuery = props.customQuery;\n\n\t\t\tvar queryOptions = {\n\t\t\t\tsize: 0,\n\t\t\t\taggs: (props.histogramQuery || _this5.histogramQuery)(props)\n\t\t\t};\n\t\t\tvar value = (0, _utils.getNumericRangeArray)(props.range, props.queryFormat);\n\t\t\tvar query = customQuery || RangeSlider.defaultQuery;\n\n\t\t\tvar customQueryOptions = customQuery ? (0, _helper.getOptionsFromQuery)(customQuery(value, props)) : null;\n\t\t\tprops.setQueryOptions(_this5.internalComponent, _extends({}, queryOptions, customQueryOptions), false);\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: _this5.internalComponent,\n\t\t\t\tquery: query(value, props),\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.shouldUpdate = function (value) {\n\t\tvar validateRange = _this5.props.validateRange;\n\n\t\tif (validateRange) {\n\t\t\treturn validateRange(value);\n\t\t}\n\t\treturn true;\n\t};\n};\n\nRangeSlider.propTypes = {\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\toptions: _types2.default.options,\n\tselectedValue: _types2.default.selectedValue,\n\tsetCustomQuery: _types2.default.funcRequired,\n\tenableAppbase: _types2.default.bool,\n\t// component props\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomQuery: _types2.default.func,\n\tdataField: _types2.default.stringRequired,\n\tdefaultValue: _types2.default.range,\n\tvalue: _types2.default.range,\n\tfilterLabel: _types2.default.string,\n\tinnerClass: _types2.default.style,\n\tinterval: _types2.default.number,\n\tnestedField: _types2.default.string,\n\tonDrag: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\trange: _types2.default.range,\n\trangeLabels: _types2.default.rangeLabels,\n\treact: _types2.default.react,\n\tshowHistogram: _types2.default.bool,\n\thistogramQuery: _types2.default.func,\n\tshowFilter: _types2.default.bool,\n\tshowSlider: _types2.default.bool,\n\ttooltipTrigger: _types2.default.tooltipTrigger,\n\trenderTooltipData: _types2.default.func,\n\tsnap: _types2.default.bool,\n\tstepValue: _types2.default.number,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\tURLParams: _types2.default.bool,\n\tincludeNullValues: _types2.default.bool,\n\tvalidateRange: _types2.default.func,\n\tindex: _types2.default.string,\n\tqueryFormat: (0, _propTypes.oneOf)([].concat(Object.keys(_dateFormats2.default))),\n\tcalendarInterval: _types2.default.calendarInterval,\n\tupdateComponentProps: _types2.default.func,\n\t// for internal purpose only\n\t// introduced specifically to control the\n\t// dateformat for the RS-components using RangeSlider\n\t// ex: RangeInput\n\t// RangeSlider bydefault supports YYYY-MM-DD[T]HH:mm:ss\n\t// but this is not required for RangeInput\n\t_dateFormat: _types2.default.string,\n\tendpoint: _types2.default.endpoint\n};\n\nRangeSlider.defaultProps = {\n\tclassName: null,\n\trange: {\n\t\tstart: 0,\n\t\tend: 10\n\t},\n\tshowHistogram: true,\n\tshowSlider: true,\n\ttooltipTrigger: 'none',\n\tsnap: true,\n\tstepValue: 1,\n\tshowFilter: true,\n\tstyle: {},\n\tURLParams: false,\n\tincludeNullValues: false\n};\n\n// Add componentType for SSR\nRangeSlider.componentType = _constants.componentTypes.rangeSlider;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\tvar aggregation = props.nestedField && state.aggregations[props.componentId] ? state.aggregations[props.componentId].inner : state.aggregations[props.componentId];\n\n\treturn {\n\t\toptions: aggregation ? aggregation[props.dataField] && aggregation[props.dataField].buckets : [],\n\t\tselectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null,\n\t\tenableAppbase: state.config.enableAppbase\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions() {\n\t\t\treturn dispatch(_actions.setQueryOptions.apply(undefined, arguments));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\tupdateComponentProps: function updateComponentProps(component, options, componentType) {\n\t\t\treturn dispatch((0, _actions.updateComponentProps)(component, options, componentType));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n\treturn (0, _core.jsx)(RangeSlider, _extends({ ref: props.myForwardedRef }, props));\n});\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(\n\t\t_PreferencesConsumer2.default,\n\t\t{ userProps: props },\n\t\tfunction (preferenceProps) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_ComponentWrapper2.default,\n\t\t\t\t_extends({}, preferenceProps, {\n\t\t\t\t\tinternalComponent: true,\n\t\t\t\t\tcomponentType: _constants.componentTypes.rangeSlider\n\t\t\t\t}),\n\t\t\t\tfunction (componentProps) {\n\t\t\t\t\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n\t\t\t\t\t\tmyForwardedRef: ref\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, RangeSlider);\n\nForwardRefComponent.displayName = 'RangeSlider';\nexports.default = ForwardRefComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}