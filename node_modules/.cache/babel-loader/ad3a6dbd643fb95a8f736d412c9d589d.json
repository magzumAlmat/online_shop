{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.loadPopularSuggestions = loadPopularSuggestions;\nexports.executeQuery = executeQuery;\nexports.setQueryOptions = setQueryOptions;\nexports.updateQuery = updateQuery;\nexports.loadMore = loadMore;\nexports.loadDataToExport = loadDataToExport;\n\nvar _value2 = require('./value');\n\nvar _utils = require('./utils');\n\nvar _misc = require('./misc');\n\nvar _helper = require('../utils/helper');\n\nvar _maps = require('./maps');\n\nvar _constants = require('../utils/constants');\n\nvar _transform = require('../utils/transform');\n\nvar _transform2 = require('../../lib/utils/transform');\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction loadPopularSuggestions(componentId) {\n  return function (dispatch, getState) {\n    var _getState = getState(),\n        config = _getState.config,\n        appbaseRef = _getState.appbaseRef,\n        props = _getState.props,\n        internalValues = _getState.internalValues;\n\n    var componentProps = props[componentId] || {};\n    var internalValue = internalValues[componentId];\n    var value = internalValue && internalValue.value || '';\n\n    if (componentProps.enablePopularSuggestions) {\n      if (config.mongodb) {\n        dispatch((0, _misc.setDefaultPopularSuggestions)([], componentId.split('__internal')[0]));\n        return;\n      }\n\n      var suggQuery = (0, _utils.getSuggestionQuery)(getState, componentId);\n      appbaseRef.getQuerySuggestions(suggQuery).then(function (suggestions) {\n        var querySuggestion = suggestions[(0, _utils.getQuerySuggestionsId)(componentId)];\n\n        if (value) {\n          dispatch((0, _misc.setPopularSuggestions)(querySuggestion && querySuggestion.hits && querySuggestion.hits.hits, componentId.split('__internal')[0]));\n        } else {\n          dispatch((0, _misc.setDefaultPopularSuggestions)(querySuggestion && querySuggestion.hits && querySuggestion.hits.hits, componentId.split('__internal')[0]));\n        }\n      }).catch(function (e) {\n        (0, _utils.handleError)({\n          orderOfQueries: [componentId],\n          error: e\n        }, getState, dispatch);\n      });\n    }\n  };\n}\n\nfunction appbaseSearch() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      queryId = _ref.queryId,\n      query = _ref.query,\n      orderOfQueries = _ref.orderOfQueries,\n      _ref$appendToHits = _ref.appendToHits,\n      appendToHits = _ref$appendToHits === undefined ? false : _ref$appendToHits,\n      _ref$isSuggestionsQue = _ref.isSuggestionsQuery,\n      isSuggestionsQuery = _ref$isSuggestionsQue === undefined ? false : _ref$isSuggestionsQue,\n      searchComponentID = _ref.searchComponentID,\n      _ref$appendToAggs = _ref.appendToAggs,\n      appendToAggs = _ref$appendToAggs === undefined ? false : _ref$appendToAggs;\n\n  return function (dispatch, getState) {\n    var _getState2 = getState(),\n        appbaseRef = _getState2.appbaseRef,\n        config = _getState2.config,\n        headers = _getState2.headers;\n\n    var isAnalyticsEnabled = false;\n\n    if (config) {\n      if ((0, _utils.isPropertyDefined)(config.analytics)) {\n        isAnalyticsEnabled = config.analytics;\n      } else if (config.analyticsConfig) {\n        if ((0, _utils.isPropertyDefined)(config.analyticsConfig.recordAnalytics)) {\n          isAnalyticsEnabled = config.analyticsConfig.recordAnalytics;\n        } else if ((0, _utils.isPropertyDefined)(config.analyticsConfig.analytics)) {\n          isAnalyticsEnabled = config.analyticsConfig.analytics;\n        }\n      }\n    }\n\n    var settings = {\n      recordAnalytics: isAnalyticsEnabled\n    };\n\n    if (config.analyticsConfig) {\n      settings.userId = (0, _utils.isPropertyDefined)(config.analyticsConfig.userId) ? config.analyticsConfig.userId : undefined;\n      settings.enableQueryRules = (0, _utils.isPropertyDefined)(config.analyticsConfig.enableQueryRules) ? config.analyticsConfig.enableQueryRules : undefined;\n      settings.customEvents = (0, _utils.isPropertyDefined)(config.analyticsConfig.customEvents) ? config.analyticsConfig.customEvents : undefined;\n      settings.emptyQuery = (0, _utils.isPropertyDefined)(config.analyticsConfig.emptyQuery) ? config.analyticsConfig.emptyQuery : undefined;\n      var searchRelevancy = config.analyticsConfig.enableSearchRelevancy;\n      settings.enableSearchRelevancy = (0, _utils.isPropertyDefined)(searchRelevancy) ? searchRelevancy : undefined;\n      settings.suggestionAnalytics = (0, _utils.isPropertyDefined)(config.analyticsConfig.suggestionAnalytics) ? config.analyticsConfig.suggestionAnalytics : undefined;\n      settings.useCache = (0, _utils.isPropertyDefined)(config.analyticsConfig.useCache) ? config.analyticsConfig.useCache : undefined;\n      settings.queryParams = (0, _utils.isPropertyDefined)(config.analyticsConfig.queryParams) ? config.analyticsConfig.queryParams : undefined;\n    }\n\n    orderOfQueries.forEach(function (component) {\n      dispatch((0, _misc.setLoading)(component, true));\n      dispatch((0, _misc.setError)(component, null));\n    });\n    appbaseRef.setHeaders(_extends({}, headers));\n\n    if (isSuggestionsQuery && searchComponentID) {\n      dispatch(loadPopularSuggestions(searchComponentID));\n    }\n\n    appbaseRef.reactiveSearch(query, settings, settings.queryParams).then(function (res) {\n      (0, _utils.handleResponse)({\n        res: res,\n        orderOfQueries: orderOfQueries,\n        appendToHits: appendToHits,\n        appendToAggs: appendToAggs,\n        query: query,\n        queryId: queryId\n      }, getState, dispatch);\n    }).catch(function (err) {\n      (0, _utils.handleError)({\n        orderOfQueries: orderOfQueries,\n        error: err,\n        queryId: queryId\n      }, getState, dispatch);\n    });\n  };\n}\n\nvar requestStack = [];\n\nfunction executeQuery(componentId) {\n  var executeWatchList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var mustExecuteMapQuery = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var componentType = arguments[3];\n  var metaOptions = arguments[4];\n  var requestId = arguments[5];\n  return function (dispatch, getState) {\n    var _getState3 = getState(),\n        queryLog = _getState3.queryLog,\n        config = _getState3.config,\n        mapData = _getState3.mapData,\n        watchMan = _getState3.watchMan,\n        queryListener = _getState3.queryListener,\n        props = _getState3.props,\n        internalValues = _getState3.internalValues,\n        lock = _getState3.lock,\n        dependencyTree = _getState3.dependencyTree,\n        queryList = _getState3.queryList,\n        queryOptions = _getState3.queryOptions;\n\n    var lockTime = config.initialQueriesSyncTime || 100;\n    var initialTimestamp = config.initialTimestamp;\n    var queryId = requestId || new Date().getTime();\n\n    if (config.queryLockConfig instanceof Object) {\n      lockTime = config.queryLockConfig.lockTime;\n      initialTimestamp = config.queryLockConfig.initialTimestamp;\n    }\n\n    var componentList = [componentId];\n    var finalQuery = [];\n    var appbaseQuery = {};\n    var orderOfQueries = [];\n\n    if (executeWatchList) {\n      var watchList = watchMan[componentId] || [];\n      componentList = [].concat(_toConsumableArray(componentList), _toConsumableArray(watchList));\n    }\n\n    componentList.forEach(function (component) {\n      var _buildQuery = (0, _helper.buildQuery)(component, dependencyTree, queryList, queryOptions),\n          queryObj = _buildQuery.queryObj,\n          options = _buildQuery.options;\n\n      if (!queryObj && !options) {\n        return;\n      }\n\n      var value = void 0;\n      var isInternalComponent = componentId.endsWith('__internal');\n      var mainComponentProps = props[componentId];\n\n      if (isInternalComponent && mainComponentProps && (0, _transform.isSearchComponent)(mainComponentProps.componentType)) {\n        value = internalValues[componentId] && internalValues[componentId].value;\n      }\n\n      var query = (0, _transform.getRSQuery)(component, (0, _transform.extractPropsFromState)(getState(), component, _extends({}, value ? {\n        value: value\n      } : null, metaOptions ? {\n        from: metaOptions.from\n      } : null)));\n\n      if (query && !!Object.keys(query).length) {\n        var currentQuery = query;\n        var oldQuery = queryLog[component];\n        var componentProps = props[component];\n        var dependentQueries = (0, _transform.getDependentQueries)(getState(), component, orderOfQueries);\n\n        var queryToLog = _extends(_defineProperty({}, component, currentQuery), Object.keys(dependentQueries).reduce(function (acc, q) {\n          return _extends({}, acc, _defineProperty({}, q, _extends({}, dependentQueries[q], {\n            execute: false\n          }, dependentQueries[q].type === _constants.queryTypes.suggestion ? {\n            type: 'search'\n          } : {})));\n        }, {}));\n\n        var queryType = _transform.componentToTypeMap[componentProps && componentProps.componentType];\n\n        if ([_constants.queryTypes.range, _constants.queryTypes.term].includes(queryType)) {\n          var _value = currentQuery.value,\n              rest = _objectWithoutProperties(currentQuery, ['value']);\n\n          queryToLog = _extends(_defineProperty({}, component, rest), Object.keys(dependentQueries).reduce(function (acc, q) {\n            return _extends({}, acc, _defineProperty({}, q, _extends({}, dependentQueries[q], {\n              execute: false\n            }, dependentQueries[q].type === _constants.queryTypes.suggestion ? {\n              type: 'search'\n            } : {})));\n          }, {}));\n        }\n\n        if (mustExecuteMapQuery || !(0, _helper.compareQueries)(queryToLog, oldQuery, false)) {\n          orderOfQueries = [].concat(_toConsumableArray(orderOfQueries), [component]);\n          var isMapComponent = Object.keys(mapData).includes(component);\n\n          if (isMapComponent) {\n            dispatch((0, _misc.setLastUsedAppbaseQuery)(_defineProperty({}, component, {\n              queryId: queryId\n            })));\n          }\n\n          dispatch((0, _misc.logQuery)(component, queryToLog));\n\n          if (isMapComponent && mapData[component].query) {\n            var existingQuery = currentQuery.query;\n            currentQuery.query = {\n              bool: {\n                must: [existingQuery, mapData[component].query]\n              }\n            };\n\n            if (!mapData[component].persistMapQuery) {\n              dispatch((0, _maps.updateMapData)(componentId, null, false));\n            }\n\n            var _getState4 = getState(),\n                combinedLog = _getState4.combinedLog;\n\n            if ((0, _helper.compareQueries)(combinedLog[component], currentQuery)) return;\n            dispatch((0, _misc.logCombinedQuery)(component, currentQuery));\n          }\n\n          (0, _utils.executeQueryListener)(queryListener[component], oldQuery, currentQuery);\n\n          if (query) {\n            appbaseQuery = _extends({}, appbaseQuery, _defineProperty({}, component, query), (0, _transform.getDependentQueries)(getState(), component, orderOfQueries));\n          }\n\n          if (isMapComponent) {\n            var internalComponent = (0, _transform2.getInternalComponentID)(component);\n            var internalQuery = (0, _transform.getRSQuery)(internalComponent, (0, _transform.extractPropsFromState)(getState(), internalComponent, metaOptions ? {\n              from: metaOptions.from\n            } : null));\n\n            if (internalQuery) {\n              appbaseQuery[internalComponent] = _extends({}, internalQuery, {\n                execute: false\n              });\n            }\n          }\n        }\n      }\n    });\n    finalQuery = Object.keys(appbaseQuery).map(function (component) {\n      return appbaseQuery[component];\n    });\n\n    if (finalQuery.length) {\n      var suggestionsComponents = [_constants.componentTypes.dataSearch, _constants.componentTypes.categorySearch];\n      var isInternalComponent = componentId.endsWith('__internal');\n      var isSuggestionsQuery = isInternalComponent && suggestionsComponents.indexOf(componentType) !== -1;\n      var currentTime = new Date().getTime();\n\n      if (currentTime - initialTimestamp < lockTime) {\n        if (!lock || config.queryLockConfig) {\n          setTimeout(function () {\n            var finalOrderOfQueries = [];\n            var finalIsSuggestionsQuery = false;\n            var finalSearchComponentID = '';\n            var orderOfQueriesMap = {};\n            var processedQueriesMap = {};\n            var queryExecutionMap = {};\n            requestStack.forEach(function (request) {\n              if (!finalIsSuggestionsQuery) {\n                finalIsSuggestionsQuery = request.isSuggestionsQuery;\n              }\n\n              if (!finalSearchComponentID) {\n                finalSearchComponentID = request.searchComponentID;\n              }\n\n              if (Array.isArray(request.query)) {\n                request.query.forEach(function (query) {\n                  if (query.execute) {\n                    queryExecutionMap[query.id] = query.execute;\n                  }\n\n                  var newQuery = query;\n\n                  if (queryExecutionMap[query.id]) {\n                    newQuery.execute = true;\n                  }\n\n                  if (processedQueriesMap[query.id] && processedQueriesMap[query.id].type === _constants.queryTypes.suggestion && newQuery.type !== _constants.queryTypes.suggestion) {\n                    processedQueriesMap[query.id + '__suggestion_type'] = _extends({}, processedQueriesMap[query.id]);\n                    processedQueriesMap[query.id] = _extends({}, newQuery, {\n                      execute: false\n                    });\n                    return;\n                  }\n\n                  processedQueriesMap[query.id] = newQuery;\n                });\n              }\n\n              if (Array.isArray(request.orderOfQueries)) {\n                request.orderOfQueries.forEach(function (query) {\n                  if (!orderOfQueriesMap[query.id]) {\n                    finalOrderOfQueries = [query].concat(_toConsumableArray(finalOrderOfQueries));\n                  } else {\n                    orderOfQueriesMap[query.id] = true;\n                  }\n                });\n              }\n            });\n            var finalCombinedQuery = Object.values(processedQueriesMap);\n\n            if (finalCombinedQuery.length) {\n              dispatch(appbaseSearch({\n                query: finalCombinedQuery,\n                orderOfQueries: finalOrderOfQueries,\n                isSuggestionsQuery: finalIsSuggestionsQuery,\n                searchComponentID: finalSearchComponentID\n              }));\n            }\n\n            requestStack = [];\n            dispatch((0, _utils.updateStoreConfig)({\n              queryLockConfig: undefined\n            }));\n          }, lockTime);\n        }\n\n        dispatch((0, _utils.updateStoreConfig)({\n          lock: true\n        }));\n        requestStack.push({\n          query: finalQuery,\n          orderOfQueries: orderOfQueries,\n          isSuggestionsQuery: isSuggestionsQuery,\n          searchComponentID: componentId\n        });\n      } else {\n        dispatch(appbaseSearch({\n          queryId: queryId,\n          query: finalQuery,\n          orderOfQueries: orderOfQueries,\n          isSuggestionsQuery: isSuggestionsQuery,\n          searchComponentID: componentId\n        }));\n      }\n    }\n  };\n}\n\nfunction setQueryOptions(component, queryOptions) {\n  var execute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return function (dispatch) {\n    dispatch((0, _misc.updateQueryOptions)(component, queryOptions));\n\n    if (execute) {\n      dispatch(executeQuery(component, true));\n    }\n  };\n}\n\nfunction updateQuery(_ref2) {\n  var componentId = _ref2.componentId,\n      query = _ref2.query,\n      value = _ref2.value,\n      _ref2$label = _ref2.label,\n      label = _ref2$label === undefined ? null : _ref2$label,\n      _ref2$showFilter = _ref2.showFilter,\n      showFilter = _ref2$showFilter === undefined ? true : _ref2$showFilter,\n      _ref2$URLParams = _ref2.URLParams,\n      URLParams = _ref2$URLParams === undefined ? false : _ref2$URLParams,\n      _ref2$componentType = _ref2.componentType,\n      componentType = _ref2$componentType === undefined ? null : _ref2$componentType,\n      _ref2$category = _ref2.category,\n      category = _ref2$category === undefined ? null : _ref2$category,\n      _ref2$meta = _ref2.meta,\n      meta = _ref2$meta === undefined ? {} : _ref2$meta;\n  var execute = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var shouldSetInternalValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return function (dispatch) {\n    var queryToDispatch = query;\n\n    if (query && query.query) {\n      queryToDispatch = query.query;\n    }\n\n    if (!componentId.endsWith('__internal')) {\n      dispatch((0, _value2.setValue)(componentId, value, label, showFilter, URLParams, componentType, category, meta));\n\n      if (shouldSetInternalValue) {\n        if (componentType === _constants.componentTypes.dynamicRangeSlider) {\n          dispatch((0, _value2.setInternalValue)((0, _transform.getHistogramComponentID)(componentId), value, componentType, category, meta));\n        } else {\n          dispatch((0, _value2.setInternalValue)(componentId + '__internal', value, componentType, category, meta));\n        }\n      }\n    } else {\n      dispatch((0, _value2.setInternalValue)(componentId, value, componentType, category, meta));\n    }\n\n    dispatch((0, _misc.setQuery)(componentId, queryToDispatch));\n    if (execute) dispatch(executeQuery(componentId, true, false, componentType));\n  };\n}\n\nfunction loadMore(component, newOptions) {\n  var appendToHits = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var appendToAggs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  return function (dispatch, getState) {\n    var store = getState();\n\n    var _buildQuery2 = (0, _helper.buildQuery)(component, store.dependencyTree, store.queryList, store.queryOptions),\n        queryObj = _buildQuery2.queryObj,\n        options = _buildQuery2.options;\n\n    var queryLog = store.queryLog;\n    if (!options) options = {};\n    options = _extends({}, options, newOptions);\n\n    if (!queryObj || queryObj && !Object.keys(queryObj).length) {\n      queryObj = {\n        match_all: {}\n      };\n    }\n\n    var appbaseQuery = {};\n    var componentProps = store.props[component] || {};\n    var compositeAggregationField = componentProps.aggregationField;\n    var queryType = _transform.componentToTypeMap[componentProps.componentType];\n\n    if (queryType === _constants.queryTypes.term) {\n      compositeAggregationField = componentProps.dataField;\n    }\n\n    var query = (0, _transform.getRSQuery)(component, (0, _transform.extractPropsFromState)(store, component, {\n      from: options.from,\n      after: store.aggregations[component] && store.aggregations[component][compositeAggregationField] && store.aggregations[component][compositeAggregationField].after_key || undefined\n    }));\n    appbaseQuery = _extends(_defineProperty({}, component, query), (0, _transform.getDependentQueries)(getState(), component, []));\n    if ((0, _helper.compareQueries)(queryLog[component], appbaseQuery)) return;\n    dispatch((0, _misc.logQuery)(component, appbaseQuery));\n    var finalQuery = Object.keys(appbaseQuery).map(function (c) {\n      return appbaseQuery[c];\n    });\n    dispatch(appbaseSearch({\n      query: finalQuery,\n      orderOfQueries: [component],\n      appendToHits: appendToHits,\n      appendToAggs: appendToAggs\n    }));\n  };\n}\n\nfunction loadDataToExport(componentId) {\n  var deepPaginationCursor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var totalResults = arguments[2];\n  var data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  return function (dispatch, getState) {\n    var _getState5 = getState(),\n        appbaseRef = _getState5.appbaseRef,\n        lastUsedAppbaseQuery = _getState5.lastUsedAppbaseQuery;\n\n    var queryFromStore = lastUsedAppbaseQuery[componentId];\n\n    if (queryFromStore) {\n      var query = queryFromStore.map(function (queryItem) {\n        if (queryItem.id === componentId) {\n          var finalQueryItem = _extends({}, queryItem, {\n            deepPaginationConfig: {\n              cursor: deepPaginationCursor\n            },\n            deepPagination: true,\n            size: totalResults < 1000 ? totalResults : 1000,\n            sortField: '_id',\n            sortBy: 'asc'\n          });\n\n          delete finalQueryItem.from;\n          return finalQueryItem;\n        }\n\n        return queryItem;\n      });\n\n      if (totalResults && Array.isArray(data) && totalResults <= data.length) {\n        return data;\n      }\n\n      return appbaseRef.reactiveSearchv3(query).then(function (res) {\n        var newDataChunk = res[componentId].hits.hits;\n\n        if (!Array.isArray(newDataChunk) || newDataChunk.length === 0) {\n          return data;\n        }\n\n        return dispatch(loadDataToExport(componentId, newDataChunk[newDataChunk.length - 1]._id, res[componentId].hits.total.value, [].concat(_toConsumableArray(data), _toConsumableArray(newDataChunk))));\n      }).catch(function (err) {\n        console.error('Error fetching data to export! ', err);\n      });\n    }\n\n    return console.error('Error fetching data to export!');\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","loadPopularSuggestions","executeQuery","setQueryOptions","updateQuery","loadMore","loadDataToExport","_value2","require","_utils","_misc","_helper","_maps","_constants","_transform","_transform2","_objectWithoutProperties","obj","keys","indexOf","_defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","Array","isArray","arr2","from","componentId","dispatch","getState","_getState","config","appbaseRef","props","internalValues","componentProps","internalValue","enablePopularSuggestions","mongodb","setDefaultPopularSuggestions","split","suggQuery","getSuggestionQuery","getQuerySuggestions","then","suggestions","querySuggestion","getQuerySuggestionsId","setPopularSuggestions","hits","catch","e","handleError","orderOfQueries","error","appbaseSearch","_ref","undefined","queryId","query","_ref$appendToHits","appendToHits","_ref$isSuggestionsQue","isSuggestionsQuery","searchComponentID","_ref$appendToAggs","appendToAggs","_getState2","headers","isAnalyticsEnabled","isPropertyDefined","analytics","analyticsConfig","recordAnalytics","settings","userId","enableQueryRules","customEvents","emptyQuery","searchRelevancy","enableSearchRelevancy","suggestionAnalytics","useCache","queryParams","forEach","component","setLoading","setError","setHeaders","reactiveSearch","res","handleResponse","err","requestStack","executeWatchList","mustExecuteMapQuery","componentType","metaOptions","requestId","_getState3","queryLog","mapData","watchMan","queryListener","lock","dependencyTree","queryList","queryOptions","lockTime","initialQueriesSyncTime","initialTimestamp","Date","getTime","queryLockConfig","componentList","finalQuery","appbaseQuery","watchList","concat","_buildQuery","buildQuery","queryObj","options","isInternalComponent","endsWith","mainComponentProps","isSearchComponent","getRSQuery","extractPropsFromState","currentQuery","oldQuery","dependentQueries","getDependentQueries","queryToLog","reduce","acc","q","execute","type","queryTypes","suggestion","queryType","componentToTypeMap","range","term","includes","_value","rest","compareQueries","isMapComponent","setLastUsedAppbaseQuery","logQuery","existingQuery","bool","must","persistMapQuery","updateMapData","_getState4","combinedLog","logCombinedQuery","executeQueryListener","internalComponent","getInternalComponentID","internalQuery","map","suggestionsComponents","componentTypes","dataSearch","categorySearch","currentTime","setTimeout","finalOrderOfQueries","finalIsSuggestionsQuery","finalSearchComponentID","orderOfQueriesMap","processedQueriesMap","queryExecutionMap","request","id","newQuery","finalCombinedQuery","values","updateStoreConfig","push","updateQueryOptions","_ref2","_ref2$label","label","_ref2$showFilter","showFilter","_ref2$URLParams","URLParams","_ref2$componentType","_ref2$category","category","_ref2$meta","meta","shouldSetInternalValue","queryToDispatch","setValue","dynamicRangeSlider","setInternalValue","getHistogramComponentID","setQuery","newOptions","store","_buildQuery2","match_all","compositeAggregationField","aggregationField","dataField","after","aggregations","after_key","c","deepPaginationCursor","totalResults","data","_getState5","lastUsedAppbaseQuery","queryFromStore","queryItem","finalQueryItem","deepPaginationConfig","cursor","deepPagination","size","sortField","sortBy","reactiveSearchv3","newDataChunk","_id","total","console"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivecore/lib/actions/query.js"],"sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.loadPopularSuggestions=loadPopularSuggestions;exports.executeQuery=executeQuery;exports.setQueryOptions=setQueryOptions;exports.updateQuery=updateQuery;exports.loadMore=loadMore;exports.loadDataToExport=loadDataToExport;var _value2=require('./value');var _utils=require('./utils');var _misc=require('./misc');var _helper=require('../utils/helper');var _maps=require('./maps');var _constants=require('../utils/constants');var _transform=require('../utils/transform');var _transform2=require('../../lib/utils/transform');function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function loadPopularSuggestions(componentId){return function(dispatch,getState){var _getState=getState(),config=_getState.config,appbaseRef=_getState.appbaseRef,props=_getState.props,internalValues=_getState.internalValues;var componentProps=props[componentId]||{};var internalValue=internalValues[componentId];var value=internalValue&&internalValue.value||'';if(componentProps.enablePopularSuggestions){if(config.mongodb){dispatch((0,_misc.setDefaultPopularSuggestions)([],componentId.split('__internal')[0]));return;}var suggQuery=(0,_utils.getSuggestionQuery)(getState,componentId);appbaseRef.getQuerySuggestions(suggQuery).then(function(suggestions){var querySuggestion=suggestions[(0,_utils.getQuerySuggestionsId)(componentId)];if(value){dispatch((0,_misc.setPopularSuggestions)(querySuggestion&&querySuggestion.hits&&querySuggestion.hits.hits,componentId.split('__internal')[0]));}else{dispatch((0,_misc.setDefaultPopularSuggestions)(querySuggestion&&querySuggestion.hits&&querySuggestion.hits.hits,componentId.split('__internal')[0]));}}).catch(function(e){(0,_utils.handleError)({orderOfQueries:[componentId],error:e},getState,dispatch);});}};}function appbaseSearch(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},queryId=_ref.queryId,query=_ref.query,orderOfQueries=_ref.orderOfQueries,_ref$appendToHits=_ref.appendToHits,appendToHits=_ref$appendToHits===undefined?false:_ref$appendToHits,_ref$isSuggestionsQue=_ref.isSuggestionsQuery,isSuggestionsQuery=_ref$isSuggestionsQue===undefined?false:_ref$isSuggestionsQue,searchComponentID=_ref.searchComponentID,_ref$appendToAggs=_ref.appendToAggs,appendToAggs=_ref$appendToAggs===undefined?false:_ref$appendToAggs;return function(dispatch,getState){var _getState2=getState(),appbaseRef=_getState2.appbaseRef,config=_getState2.config,headers=_getState2.headers;var isAnalyticsEnabled=false;if(config){if((0,_utils.isPropertyDefined)(config.analytics)){isAnalyticsEnabled=config.analytics;}else if(config.analyticsConfig){if((0,_utils.isPropertyDefined)(config.analyticsConfig.recordAnalytics)){isAnalyticsEnabled=config.analyticsConfig.recordAnalytics;}else if((0,_utils.isPropertyDefined)(config.analyticsConfig.analytics)){isAnalyticsEnabled=config.analyticsConfig.analytics;}}}var settings={recordAnalytics:isAnalyticsEnabled};if(config.analyticsConfig){settings.userId=(0,_utils.isPropertyDefined)(config.analyticsConfig.userId)?config.analyticsConfig.userId:undefined;settings.enableQueryRules=(0,_utils.isPropertyDefined)(config.analyticsConfig.enableQueryRules)?config.analyticsConfig.enableQueryRules:undefined;settings.customEvents=(0,_utils.isPropertyDefined)(config.analyticsConfig.customEvents)?config.analyticsConfig.customEvents:undefined;settings.emptyQuery=(0,_utils.isPropertyDefined)(config.analyticsConfig.emptyQuery)?config.analyticsConfig.emptyQuery:undefined;var searchRelevancy=config.analyticsConfig.enableSearchRelevancy;settings.enableSearchRelevancy=(0,_utils.isPropertyDefined)(searchRelevancy)?searchRelevancy:undefined;settings.suggestionAnalytics=(0,_utils.isPropertyDefined)(config.analyticsConfig.suggestionAnalytics)?config.analyticsConfig.suggestionAnalytics:undefined;settings.useCache=(0,_utils.isPropertyDefined)(config.analyticsConfig.useCache)?config.analyticsConfig.useCache:undefined;settings.queryParams=(0,_utils.isPropertyDefined)(config.analyticsConfig.queryParams)?config.analyticsConfig.queryParams:undefined;}orderOfQueries.forEach(function(component){dispatch((0,_misc.setLoading)(component,true));dispatch((0,_misc.setError)(component,null));});appbaseRef.setHeaders(_extends({},headers));if(isSuggestionsQuery&&searchComponentID){dispatch(loadPopularSuggestions(searchComponentID));}appbaseRef.reactiveSearch(query,settings,settings.queryParams).then(function(res){(0,_utils.handleResponse)({res:res,orderOfQueries:orderOfQueries,appendToHits:appendToHits,appendToAggs:appendToAggs,query:query,queryId:queryId},getState,dispatch);}).catch(function(err){(0,_utils.handleError)({orderOfQueries:orderOfQueries,error:err,queryId:queryId},getState,dispatch);});};}var requestStack=[];function executeQuery(componentId){var executeWatchList=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var mustExecuteMapQuery=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var componentType=arguments[3];var metaOptions=arguments[4];var requestId=arguments[5];return function(dispatch,getState){var _getState3=getState(),queryLog=_getState3.queryLog,config=_getState3.config,mapData=_getState3.mapData,watchMan=_getState3.watchMan,queryListener=_getState3.queryListener,props=_getState3.props,internalValues=_getState3.internalValues,lock=_getState3.lock,dependencyTree=_getState3.dependencyTree,queryList=_getState3.queryList,queryOptions=_getState3.queryOptions;var lockTime=config.initialQueriesSyncTime||100;var initialTimestamp=config.initialTimestamp;var queryId=requestId||new Date().getTime();if(config.queryLockConfig instanceof Object){lockTime=config.queryLockConfig.lockTime;initialTimestamp=config.queryLockConfig.initialTimestamp;}var componentList=[componentId];var finalQuery=[];var appbaseQuery={};var orderOfQueries=[];if(executeWatchList){var watchList=watchMan[componentId]||[];componentList=[].concat(_toConsumableArray(componentList),_toConsumableArray(watchList));}componentList.forEach(function(component){var _buildQuery=(0,_helper.buildQuery)(component,dependencyTree,queryList,queryOptions),queryObj=_buildQuery.queryObj,options=_buildQuery.options;if(!queryObj&&!options){return;}var value=void 0;var isInternalComponent=componentId.endsWith('__internal');var mainComponentProps=props[componentId];if(isInternalComponent&&mainComponentProps&&(0,_transform.isSearchComponent)(mainComponentProps.componentType)){value=internalValues[componentId]&&internalValues[componentId].value;}var query=(0,_transform.getRSQuery)(component,(0,_transform.extractPropsFromState)(getState(),component,_extends({},value?{value:value}:null,metaOptions?{from:metaOptions.from}:null)));if(query&&!!Object.keys(query).length){var currentQuery=query;var oldQuery=queryLog[component];var componentProps=props[component];var dependentQueries=(0,_transform.getDependentQueries)(getState(),component,orderOfQueries);var queryToLog=_extends(_defineProperty({},component,currentQuery),Object.keys(dependentQueries).reduce(function(acc,q){return _extends({},acc,_defineProperty({},q,_extends({},dependentQueries[q],{execute:false},dependentQueries[q].type===_constants.queryTypes.suggestion?{type:'search'}:{})));},{}));var queryType=_transform.componentToTypeMap[componentProps&&componentProps.componentType];if([_constants.queryTypes.range,_constants.queryTypes.term].includes(queryType)){var _value=currentQuery.value,rest=_objectWithoutProperties(currentQuery,['value']);queryToLog=_extends(_defineProperty({},component,rest),Object.keys(dependentQueries).reduce(function(acc,q){return _extends({},acc,_defineProperty({},q,_extends({},dependentQueries[q],{execute:false},dependentQueries[q].type===_constants.queryTypes.suggestion?{type:'search'}:{})));},{}));}if(mustExecuteMapQuery||!(0,_helper.compareQueries)(queryToLog,oldQuery,false)){orderOfQueries=[].concat(_toConsumableArray(orderOfQueries),[component]);var isMapComponent=Object.keys(mapData).includes(component);if(isMapComponent){dispatch((0,_misc.setLastUsedAppbaseQuery)(_defineProperty({},component,{queryId:queryId})));}dispatch((0,_misc.logQuery)(component,queryToLog));if(isMapComponent&&mapData[component].query){var existingQuery=currentQuery.query;currentQuery.query={bool:{must:[existingQuery,mapData[component].query]}};if(!mapData[component].persistMapQuery){dispatch((0,_maps.updateMapData)(componentId,null,false));}var _getState4=getState(),combinedLog=_getState4.combinedLog;if((0,_helper.compareQueries)(combinedLog[component],currentQuery))return;dispatch((0,_misc.logCombinedQuery)(component,currentQuery));}(0,_utils.executeQueryListener)(queryListener[component],oldQuery,currentQuery);if(query){appbaseQuery=_extends({},appbaseQuery,_defineProperty({},component,query),(0,_transform.getDependentQueries)(getState(),component,orderOfQueries));}if(isMapComponent){var internalComponent=(0,_transform2.getInternalComponentID)(component);var internalQuery=(0,_transform.getRSQuery)(internalComponent,(0,_transform.extractPropsFromState)(getState(),internalComponent,metaOptions?{from:metaOptions.from}:null));if(internalQuery){appbaseQuery[internalComponent]=_extends({},internalQuery,{execute:false});}}}}});finalQuery=Object.keys(appbaseQuery).map(function(component){return appbaseQuery[component];});if(finalQuery.length){var suggestionsComponents=[_constants.componentTypes.dataSearch,_constants.componentTypes.categorySearch];var isInternalComponent=componentId.endsWith('__internal');var isSuggestionsQuery=isInternalComponent&&suggestionsComponents.indexOf(componentType)!==-1;var currentTime=new Date().getTime();if(currentTime-initialTimestamp<lockTime){if(!lock||config.queryLockConfig){setTimeout(function(){var finalOrderOfQueries=[];var finalIsSuggestionsQuery=false;var finalSearchComponentID='';var orderOfQueriesMap={};var processedQueriesMap={};var queryExecutionMap={};requestStack.forEach(function(request){if(!finalIsSuggestionsQuery){finalIsSuggestionsQuery=request.isSuggestionsQuery;}if(!finalSearchComponentID){finalSearchComponentID=request.searchComponentID;}if(Array.isArray(request.query)){request.query.forEach(function(query){if(query.execute){queryExecutionMap[query.id]=query.execute;}var newQuery=query;if(queryExecutionMap[query.id]){newQuery.execute=true;}if(processedQueriesMap[query.id]&&processedQueriesMap[query.id].type===_constants.queryTypes.suggestion&&newQuery.type!==_constants.queryTypes.suggestion){processedQueriesMap[query.id+'__suggestion_type']=_extends({},processedQueriesMap[query.id]);processedQueriesMap[query.id]=_extends({},newQuery,{execute:false});return;}processedQueriesMap[query.id]=newQuery;});}if(Array.isArray(request.orderOfQueries)){request.orderOfQueries.forEach(function(query){if(!orderOfQueriesMap[query.id]){finalOrderOfQueries=[query].concat(_toConsumableArray(finalOrderOfQueries));}else{orderOfQueriesMap[query.id]=true;}});}});var finalCombinedQuery=Object.values(processedQueriesMap);if(finalCombinedQuery.length){dispatch(appbaseSearch({query:finalCombinedQuery,orderOfQueries:finalOrderOfQueries,isSuggestionsQuery:finalIsSuggestionsQuery,searchComponentID:finalSearchComponentID}));}requestStack=[];dispatch((0,_utils.updateStoreConfig)({queryLockConfig:undefined}));},lockTime);}dispatch((0,_utils.updateStoreConfig)({lock:true}));requestStack.push({query:finalQuery,orderOfQueries:orderOfQueries,isSuggestionsQuery:isSuggestionsQuery,searchComponentID:componentId});}else{dispatch(appbaseSearch({queryId:queryId,query:finalQuery,orderOfQueries:orderOfQueries,isSuggestionsQuery:isSuggestionsQuery,searchComponentID:componentId}));}}};}function setQueryOptions(component,queryOptions){var execute=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return function(dispatch){dispatch((0,_misc.updateQueryOptions)(component,queryOptions));if(execute){dispatch(executeQuery(component,true));}};}function updateQuery(_ref2){var componentId=_ref2.componentId,query=_ref2.query,value=_ref2.value,_ref2$label=_ref2.label,label=_ref2$label===undefined?null:_ref2$label,_ref2$showFilter=_ref2.showFilter,showFilter=_ref2$showFilter===undefined?true:_ref2$showFilter,_ref2$URLParams=_ref2.URLParams,URLParams=_ref2$URLParams===undefined?false:_ref2$URLParams,_ref2$componentType=_ref2.componentType,componentType=_ref2$componentType===undefined?null:_ref2$componentType,_ref2$category=_ref2.category,category=_ref2$category===undefined?null:_ref2$category,_ref2$meta=_ref2.meta,meta=_ref2$meta===undefined?{}:_ref2$meta;var execute=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var shouldSetInternalValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return function(dispatch){var queryToDispatch=query;if(query&&query.query){queryToDispatch=query.query;}if(!componentId.endsWith('__internal')){dispatch((0,_value2.setValue)(componentId,value,label,showFilter,URLParams,componentType,category,meta));if(shouldSetInternalValue){if(componentType===_constants.componentTypes.dynamicRangeSlider){dispatch((0,_value2.setInternalValue)((0,_transform.getHistogramComponentID)(componentId),value,componentType,category,meta));}else{dispatch((0,_value2.setInternalValue)(componentId+'__internal',value,componentType,category,meta));}}}else{dispatch((0,_value2.setInternalValue)(componentId,value,componentType,category,meta));}dispatch((0,_misc.setQuery)(componentId,queryToDispatch));if(execute)dispatch(executeQuery(componentId,true,false,componentType));};}function loadMore(component,newOptions){var appendToHits=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var appendToAggs=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;return function(dispatch,getState){var store=getState();var _buildQuery2=(0,_helper.buildQuery)(component,store.dependencyTree,store.queryList,store.queryOptions),queryObj=_buildQuery2.queryObj,options=_buildQuery2.options;var queryLog=store.queryLog;if(!options)options={};options=_extends({},options,newOptions);if(!queryObj||queryObj&&!Object.keys(queryObj).length){queryObj={match_all:{}};}var appbaseQuery={};var componentProps=store.props[component]||{};var compositeAggregationField=componentProps.aggregationField;var queryType=_transform.componentToTypeMap[componentProps.componentType];if(queryType===_constants.queryTypes.term){compositeAggregationField=componentProps.dataField;}var query=(0,_transform.getRSQuery)(component,(0,_transform.extractPropsFromState)(store,component,{from:options.from,after:store.aggregations[component]&&store.aggregations[component][compositeAggregationField]&&store.aggregations[component][compositeAggregationField].after_key||undefined}));appbaseQuery=_extends(_defineProperty({},component,query),(0,_transform.getDependentQueries)(getState(),component,[]));if((0,_helper.compareQueries)(queryLog[component],appbaseQuery))return;dispatch((0,_misc.logQuery)(component,appbaseQuery));var finalQuery=Object.keys(appbaseQuery).map(function(c){return appbaseQuery[c];});dispatch(appbaseSearch({query:finalQuery,orderOfQueries:[component],appendToHits:appendToHits,appendToAggs:appendToAggs}));};}function loadDataToExport(componentId){var deepPaginationCursor=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var totalResults=arguments[2];var data=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];return function(dispatch,getState){var _getState5=getState(),appbaseRef=_getState5.appbaseRef,lastUsedAppbaseQuery=_getState5.lastUsedAppbaseQuery;var queryFromStore=lastUsedAppbaseQuery[componentId];if(queryFromStore){var query=queryFromStore.map(function(queryItem){if(queryItem.id===componentId){var finalQueryItem=_extends({},queryItem,{deepPaginationConfig:{cursor:deepPaginationCursor},deepPagination:true,size:totalResults<1000?totalResults:1000,sortField:'_id',sortBy:'asc'});delete finalQueryItem.from;return finalQueryItem;}return queryItem;});if(totalResults&&Array.isArray(data)&&totalResults<=data.length){return data;}return appbaseRef.reactiveSearchv3(query).then(function(res){var newDataChunk=res[componentId].hits.hits;if(!Array.isArray(newDataChunk)||newDataChunk.length===0){return data;}return dispatch(loadDataToExport(componentId,newDataChunk[newDataChunk.length-1]._id,res[componentId].hits.total.value,[].concat(_toConsumableArray(data),_toConsumableArray(newDataChunk))));}).catch(function(err){console.error('Error fetching data to export! ',err);});}return console.error('Error fetching data to export!');};}"],"mappings":"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"},"metadata":{},"sourceType":"script"}