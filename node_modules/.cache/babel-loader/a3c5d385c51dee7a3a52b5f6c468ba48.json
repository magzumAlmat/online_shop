{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _hotkeysJs = require('hotkeys-js');\n\nvar _hotkeysJs2 = _interopRequireDefault(_hotkeysJs);\n\nvar _propTypes = require('prop-types');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Tags = require('../../styles/Tags');\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _utils = require('../../utils');\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _InputGroup = require('../../styles/InputGroup');\n\nvar _InputGroup2 = _interopRequireDefault(_InputGroup);\n\nvar _InputWrapper = require('../../styles/InputWrapper');\n\nvar _InputWrapper2 = _interopRequireDefault(_InputWrapper);\n\nvar _InputAddon = require('../../styles/InputAddon');\n\nvar _InputAddon2 = _interopRequireDefault(_InputAddon);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\n\nvar DataSearch = function (_Component) {\n  _inherits(DataSearch, _Component);\n\n  function DataSearch(props) {\n    _classCallCheck(this, DataSearch);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var currentValue = props.selectedValue || props.value || props.defaultValue || '';\n\n    if (props.mode === _constants.SEARCH_COMPONENTS_MODES.TAG) {\n      _this.isTagsMode = true;\n      console.warn('Warning(ReactiveSearch): The `categoryField` prop is not supported when `mode` prop is set to `tag`');\n    }\n\n    _this.state = {\n      currentValue: _this.isTagsMode ? '' : currentValue,\n      suggestions: [],\n      selectedTags: _this.isTagsMode && Array.isArray(currentValue) ? currentValue || [] : [],\n      isOpen: false\n    };\n    _this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n    /**\n     * To regulate the query execution based on the input handler,\n     * the component query will only get executed when it sets to `true`.\n     * */\n\n    _this.isPending = false;\n    _this.queryOptions = _this.getBasicQueryOptions(); // Set custom and default queries in store\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n    (0, _helper.updateDefaultQuery)(props.componentId, props, currentValue);\n\n    if (props.highlight) {\n      var queryOptions = DataSearch.highlightQuery(props) || {};\n\n      if (props.customHighlight && typeof props.customHighlight === 'function') {\n        props.setCustomHighlightOptions(props.componentId, props.customHighlight(props));\n      }\n\n      _this.queryOptions = _extends({}, queryOptions, _this.getBasicQueryOptions());\n      props.setQueryOptions(props.componentId, queryOptions);\n    } else {\n      props.setQueryOptions(props.componentId, _this.queryOptions);\n    }\n\n    var hasMounted = false;\n    var cause = null;\n\n    if (_this.isTagsMode) {\n      cause = _causes2.default.SUGGESTION_SELECT;\n    }\n\n    if (currentValue) {\n      if (props.onChange) {\n        props.onChange(currentValue, _this.triggerQuery);\n      }\n\n      _this.setValue(currentValue, true, props, cause, hasMounted);\n    }\n\n    return _this;\n  }\n\n  DataSearch.prototype.componentDidMount = function componentDidMount() {\n    // register hotkeys for listening to focusShortcuts' key presses\n    this.listenForFocusShortcuts();\n    var _props = this.props,\n        enableQuerySuggestions = _props.enableQuerySuggestions,\n        renderQuerySuggestions = _props.renderQuerySuggestions,\n        fetchPopularSuggestions = _props.fetchPopularSuggestions,\n        enableRecentSearches = _props.enableRecentSearches,\n        fetchRecentSearches = _props.fetchRecentSearches,\n        componentId = _props.componentId,\n        aggregationField = _props.aggregationField,\n        distinctField = _props.distinctField,\n        distinctFieldConfig = _props.distinctFieldConfig,\n        index = _props.index,\n        enableAppbase = _props.enableAppbase,\n        enableDefaultSuggestions = _props.enableDefaultSuggestions; // TODO: Remove in 4.0\n\n    if (enableQuerySuggestions !== undefined) {\n      console.warn('Warning(ReactiveSearch): The `enableQuerySuggestions` prop has been marked as deprecated, please use the `enablePopularSuggestions` prop instead.');\n    } // TODO: Remove in 4.0\n\n\n    if (renderQuerySuggestions !== undefined) {\n      console.warn('Warning(ReactiveSearch): The `renderQuerySuggestions` prop has been marked as deprecated, please use the `renderPopularSuggestions` prop instead.');\n    }\n\n    if (enableAppbase && aggregationField) {\n      console.warn('Warning(ReactiveSearch): The `aggregationField` prop has been marked as deprecated, please use the `distinctField` prop instead.');\n    }\n\n    if (!enableAppbase && (distinctField || distinctFieldConfig)) {\n      console.warn('Warning(ReactiveSearch): In order to use the `distinctField` and `distinctFieldConfig` props, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    if (!enableAppbase && index) {\n      console.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    var shouldFetchInitialSuggestions = enableDefaultSuggestions || this.state.currentValue;\n\n    if (shouldFetchInitialSuggestions) {\n      fetchPopularSuggestions(componentId);\n\n      if (enableRecentSearches) {\n        fetchRecentSearches();\n      }\n    }\n  };\n\n  DataSearch.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['highlight', 'dataField', 'highlightField', 'aggregationField'], function () {\n      var queryOptions = DataSearch.highlightQuery(_this2.props) || {};\n\n      if (_this2.props.customHighlight && typeof _this2.props.customHighlight === 'function') {\n        _this2.props.setCustomHighlightOptions(_this2.props.componentId, _this2.props.customHighlight(_this2.props));\n      }\n\n      _this2.queryOptions = _extends({}, queryOptions, _this2.getBasicQueryOptions());\n\n      _this2.props.setQueryOptions(_this2.props.componentId, queryOptions);\n    }); // Treat defaultQuery and customQu ery as reactive props\n\n    var queryValue = this.isTagsMode ? this.state.selectedTags : this.state.currentValue;\n\n    if (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'defaultQuery')) {\n      this.updateDefaultQuery(this.state.currentValue, this.props);\n      this.updateQuery(queryValue, this.props);\n    }\n\n    if (!(0, _utils.isQueryIdentical)(queryValue, this.props, prevProps, 'customQuery')) {\n      this.updateQuery(queryValue, this.props);\n    }\n\n    if (Array.isArray(this.props.suggestions) && this.state.currentValue.trim().length) {\n      // shallow check allows us to set suggestions even if the next set\n      // of suggestions are same as the current one\n      if (this.props.suggestions !== prevProps.suggestions) {\n        if (this.props.onSuggestions) {\n          this.props.onSuggestions(this.props.suggestions);\n        } // eslint-disable-next-line\n\n\n        this.setState({\n          suggestions: this.onSuggestions(this.props.suggestions)\n        });\n      }\n    }\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['fieldWeights', 'fuzziness', 'queryFormat', 'dataField', 'nestedField', 'searchOperators'], function () {\n      _this2.updateQuery(queryValue, _this2.props);\n    });\n\n    if (!(0, _helper.isEqual)(this.props.value, prevProps.value)) {\n      var cause = !this.props.value ? _causes2.default.CLEAR_VALUE : undefined;\n\n      if (this.isTagsMode) {\n        cause = _causes2.default.SUGGESTION_SELECT;\n      }\n\n      if (this.isTagsMode && this.props.value && typeof this.props.value === 'string') {\n        return;\n      }\n\n      this.setValue(this.props.value, true, this.props, cause, true, !this.state.isOpen);\n    } else if ( // since, selectedValue will be updated when currentValue changes,\n    // we must only check for the changes introduced by\n    // clear action from SelectedFilters component in which case,\n    // the currentValue will never match the updated selectedValue\n    !(0, _helper.isEqual)(this.props.selectedValue, prevProps.selectedValue) && !(0, _helper.isEqual)(this.isTagsMode ? this.state.selectedTags : this.state.currentValue, this.props.selectedValue)) {\n      var _props2 = this.props,\n          value = _props2.value,\n          _onChange = _props2.onChange;\n\n      if ((!this.props.selectedValue || (0, _utils.isEmpty)(this.props.selectedValue)) && this.state.currentValue) {\n        // selected value is cleared, call onValueSelected\n        this.onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n      }\n\n      if (value === undefined) {\n        this.setValue(this.props.selectedValue || '', true, this.props, this.isTagsMode && Array.isArray(this.props.selectedValue) ? _causes2.default.CLEAR_VALUE : undefined);\n      } else if (_onChange) {\n        if (this.isTagsMode) {\n          this.state.selectedTags = this.props.selectedValue;\n        } // value prop exists\n\n\n        _onChange(this.props.selectedValue || '', this.triggerQuery);\n      } else {\n        // value prop exists and onChange is not defined:\n        // we need to put the current value back into the store\n        // if the clear action was triggered by interacting with\n        // selected-filters component\n        this.isPending = false;\n        this.setValue(this.isTagsMode ? this.state.selectedTags : this.state.currentValue, true, this.props, undefined, true, false);\n      }\n    }\n  };\n\n  DataSearch.prototype.componentWillUnmount = function componentWillUnmount() {\n    document.removeEventListener('keydown', this.onKeyDown);\n  }; // returns size and aggs property\n\n\n  DataSearch.prototype.shouldMicRender = function shouldMicRender(showVoiceSearch) {\n    // checks for SSR\n    if (typeof window === 'undefined') return false;\n    return showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n  };\n\n  DataSearch.prototype.render = function render() {\n    var _this3 = this;\n\n    var currentValue = this.state.currentValue;\n    var suggestionsList = this.parsedSuggestions;\n    var _props3 = this.props,\n        theme = _props3.theme,\n        themePreset = _props3.themePreset,\n        size = _props3.size,\n        recentSearchesIcon = _props3.recentSearchesIcon,\n        popularSearchesIcon = _props3.popularSearchesIcon,\n        enableDefaultSuggestions = _props3.enableDefaultSuggestions;\n    var hasSuggestions = currentValue ? suggestionsList.length || this.topSuggestions.length : this.defaultSuggestions.length;\n\n    if (enableDefaultSuggestions === false && !currentValue) {\n      hasSuggestions = false;\n    }\n\n    return (0, _core.jsx)(_Container2.default, {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && (0, _core.jsx)(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.props.defaultSuggestions || this.props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n      id: this.props.componentId + '-downshift',\n      onChange: this.onSuggestionSelected,\n      onStateChange: this.handleStateChange,\n      isOpen: this.state.isOpen,\n      itemToString: function itemToString(i) {\n        return i;\n      },\n      render: function render(_ref) {\n        var getRootProps = _ref.getRootProps,\n            getInputProps = _ref.getInputProps,\n            getItemProps = _ref.getItemProps,\n            isOpen = _ref.isOpen,\n            highlightedIndex = _ref.highlightedIndex,\n            setHighlightedIndex = _ref.setHighlightedIndex,\n            rest = _objectWithoutProperties(_ref, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n        var renderSuggestionsDropdown = function renderSuggestionsDropdown() {\n          return (0, _core.jsx)(_react2.default.Fragment, null, _this3.hasCustomRenderer && _this3.getComponent(_extends({\n            getInputProps: getInputProps,\n            getItemProps: getItemProps,\n            isOpen: isOpen,\n            highlightedIndex: highlightedIndex,\n            setHighlightedIndex: setHighlightedIndex\n          }, rest)), isOpen && _this3.renderLoader(), isOpen && _this3.renderError(), !_this3.hasCustomRenderer && isOpen && hasSuggestions ? (0, _core.jsx)('ul', {\n            css: (0, _Input.suggestions)(themePreset, theme),\n            className: (0, _helper.getClassName)(_this3.props.innerClass, 'list')\n          }, suggestionsList.slice(0, size).map(function (item, index) {\n            return (0, _core.jsx)('li', _extends({}, getItemProps({\n              item: item\n            }), {\n              key: index + 1 + '-' + item.value,\n              style: {\n                backgroundColor: _this3.getBackgroundColor(highlightedIndex, index)\n              }\n            }), (0, _core.jsx)(_SuggestionItem2.default, {\n              currentValue: currentValue,\n              suggestion: item\n            }));\n          }), _this3.defaultSuggestions.map(function (sugg, index) {\n            return (0, _core.jsx)('li', _extends({}, getItemProps({\n              item: sugg\n            }), {\n              key: suggestionsList.length + index + 1 + '-' + sugg.value,\n              style: {\n                backgroundColor: _this3.getBackgroundColor(highlightedIndex, suggestionsList.length + index),\n                justifyContent: 'flex-start'\n              }\n            }), (0, _core.jsx)('div', {\n              style: {\n                padding: '0 10px 0 0'\n              }\n            }, sugg.source && sugg.source._recent_search && (0, _core.jsx)(_CustomSvg2.default, {\n              iconId: sugg.label + '-icon',\n              className: (0, _helper.getClassName)(_this3.props.innerClass, 'recent-search-icon') || null,\n              icon: recentSearchesIcon,\n              type: 'recent-search-icon'\n            }), sugg.source && sugg.source._popular_suggestion && (0, _core.jsx)(_CustomSvg2.default, {\n              iconId: sugg.label + '-icon',\n              className: (0, _helper.getClassName)(_this3.props.innerClass, 'popular-search-icon') || null,\n              icon: popularSearchesIcon,\n              type: 'popular-search-icon'\n            })), (0, _core.jsx)(_SuggestionItem2.default, {\n              currentValue: currentValue,\n              suggestion: sugg\n            }));\n          }), (0, _utils.hasPopularSuggestionsRenderer)(_this3.props) ? _this3.getComponent(_extends({\n            getInputProps: getInputProps,\n            getItemProps: getItemProps,\n            isOpen: isOpen,\n            highlightedIndex: highlightedIndex\n          }, rest), true) : _this3.topSuggestions.map(function (sugg, index) {\n            return (0, _core.jsx)('li', _extends({}, getItemProps({\n              item: sugg\n            }), {\n              key: suggestionsList.length + index + 1 + '-' + sugg.value,\n              style: {\n                backgroundColor: _this3.getBackgroundColor(highlightedIndex, suggestionsList.length + index),\n                justifyContent: 'flex-start'\n              }\n            }), (0, _core.jsx)('div', {\n              style: {\n                padding: '0 10px 0 0'\n              }\n            }, (0, _core.jsx)(_CustomSvg2.default, {\n              iconId: sugg.label + '-icon',\n              className: (0, _helper.getClassName)(_this3.props.innerClass, 'popular-search-icon') || null,\n              icon: popularSearchesIcon,\n              type: 'popular-search-icon'\n            })), (0, _core.jsx)(_SuggestionItem2.default, {\n              currentValue: currentValue,\n              suggestion: sugg\n            }));\n          })) : _this3.renderNoSuggestion(suggestionsList));\n        };\n\n        return (0, _core.jsx)('div', getRootProps({\n          css: _Input.suggestionsContainer\n        }, {\n          suppressRefError: true\n        }), (0, _core.jsx)(_InputGroup2.default, null, _this3.renderInputAddonBefore(), (0, _core.jsx)(_InputWrapper2.default, null, (0, _core.jsx)(_Input2.default, _extends({\n          'aria-label': _this3.props.componentId,\n          id: _this3.props.componentId + '-input',\n          showIcon: _this3.props.showIcon,\n          showClear: _this3.props.showClear,\n          iconPosition: _this3.props.iconPosition,\n          ref: function ref(c) {\n            _this3._inputRef = c;\n          }\n        }, getInputProps({\n          className: (0, _helper.getClassName)(_this3.props.innerClass, 'input'),\n          placeholder: _this3.props.placeholder,\n          value: _this3.state.currentValue === null ? '' : _this3.state.currentValue,\n          onChange: _this3.onInputChange,\n          onBlur: _this3.withTriggerQuery(_this3.props.onBlur),\n          onFocus: _this3.handleFocus,\n          onClick: function onClick() {\n            // clear highlighted index\n            setHighlightedIndex(null);\n          },\n          onKeyPress: _this3.withTriggerQuery(_this3.props.onKeyPress),\n          onKeyDown: function onKeyDown(e) {\n            return _this3.handleKeyDown(e, highlightedIndex);\n          },\n          onKeyUp: _this3.withTriggerQuery(_this3.props.onKeyUp),\n          autoFocus: _this3.props.autoFocus\n        }), {\n          themePreset: themePreset,\n          type: _this3.props.type\n        })), _this3.renderIcons(), !_this3.props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))), _this3.renderInputAddonAfter()), _this3.props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest)));\n      }\n    }, this.props.downShiftProps)) : (0, _core.jsx)('div', {\n      css: _Input.suggestionsContainer\n    }, (0, _core.jsx)(_InputGroup2.default, null, this.renderInputAddonBefore(), (0, _core.jsx)(_InputWrapper2.default, null, (0, _core.jsx)(_Input2.default, {\n      'aria-label': this.props.componentId,\n      className: (0, _helper.getClassName)(this.props.innerClass, 'input') || null,\n      placeholder: this.props.placeholder,\n      value: this.state.currentValue ? this.state.currentValue : '',\n      onChange: this.onInputChange,\n      onBlur: this.withTriggerQuery(this.props.onBlur),\n      onFocus: this.withTriggerQuery(this.props.onFocus),\n      onKeyPress: this.withTriggerQuery(this.props.onKeyPress),\n      onKeyDown: this.withTriggerQuery(this.props.onKeyDown),\n      onKeyUp: this.withTriggerQuery(this.props.onKeyUp),\n      autoFocus: this.props.autoFocus,\n      iconPosition: this.props.iconPosition,\n      showIcon: this.props.showIcon,\n      showClear: this.props.showClear,\n      themePreset: themePreset\n    }), this.renderIcons()), this.renderInputAddonAfter())), this.renderTags());\n  };\n\n  _createClass(DataSearch, [{\n    key: 'stats',\n    get: function get() {\n      return (0, _helper.getResultStats)(this.props);\n    }\n  }, {\n    key: 'parsedSuggestions',\n    get: function get() {\n      var suggestionsList = [];\n      var currentValue = this.state.currentValue;\n\n      if (currentValue) {\n        suggestionsList = this.state.suggestions;\n      }\n\n      return (0, _helper.withClickIds)(suggestionsList);\n    }\n  }, {\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _helper.hasCustomRenderer)(this.props);\n    }\n  }, {\n    key: 'topSuggestions',\n    get: function get() {\n      var _props4 = this.props,\n          enableQuerySuggestions = _props4.enableQuerySuggestions,\n          enablePopularSuggestions = _props4.enablePopularSuggestions;\n      var currentValue = this.state.currentValue;\n\n      if (!currentValue) {\n        return [];\n      }\n\n      return enableQuerySuggestions || enablePopularSuggestions ? this.normalizedPopularSuggestions : [];\n    }\n  }, {\n    key: 'normalizedRecentSearches',\n    get: function get() {\n      var recentSearches = this.props.recentSearches;\n      return recentSearches || [];\n    }\n  }, {\n    key: 'normalizedPopularSuggestions',\n    get: function get() {\n      var _props5 = this.props,\n          popularSuggestions = _props5.popularSuggestions,\n          showDistinctSuggestions = _props5.showDistinctSuggestions,\n          defaultPopularSuggestions = _props5.defaultPopularSuggestions;\n      var currentValue = this.state.currentValue;\n      return (0, _helper.getTopSuggestions)( // use default popular suggestions if value is empty\n      currentValue ? popularSuggestions : defaultPopularSuggestions, currentValue, showDistinctSuggestions);\n    }\n  }, {\n    key: 'defaultSuggestions',\n    get: function get() {\n      var _props6 = this.props,\n          enableQuerySuggestions = _props6.enableQuerySuggestions,\n          enablePopularSuggestions = _props6.enablePopularSuggestions,\n          showDistinctSuggestions = _props6.showDistinctSuggestions,\n          defaultPopularSuggestions = _props6.defaultPopularSuggestions,\n          defaultSuggestions = _props6.defaultSuggestions,\n          enableDefaultSuggestions = _props6.enableDefaultSuggestions;\n      var isPopularSuggestionsEnabled = enableQuerySuggestions || enablePopularSuggestions;\n      var currentValue = this.state.currentValue;\n\n      if (currentValue || enableDefaultSuggestions === false) {\n        return [];\n      }\n\n      var customDefaultPopularSuggestions = defaultPopularSuggestions.map(function (suggestion) {\n        return _extends({}, suggestion, {\n          _popular_suggestion: true\n        });\n      });\n      var customNormalizedRecentSearches = this.normalizedRecentSearches.map(function (search) {\n        return _extends({}, search, {\n          _recent_search: true\n        });\n      });\n      var defaultSuggestionsProcessed = isPopularSuggestionsEnabled ? [].concat(customNormalizedRecentSearches, customDefaultPopularSuggestions) : customNormalizedRecentSearches;\n      var suggestionsList = (0, _helper.getTopSuggestions)(defaultSuggestionsProcessed, currentValue, showDistinctSuggestions);\n\n      if (defaultSuggestions && Array.isArray(defaultSuggestions)) {\n        suggestionsList.unshift.apply(suggestionsList, (0, _helper.withClickIds)(defaultSuggestions));\n      }\n\n      return suggestionsList;\n    }\n  }]);\n\n  return DataSearch;\n}(_react.Component);\n\nDataSearch.highlightQuery = function (props) {\n  if (props.customHighlight) {\n    return props.customHighlight(props);\n  }\n\n  if (!props.highlight) {\n    return null;\n  }\n\n  var fields = {};\n  var normalizedDataField = (0, _helper.normalizeDataField)(props.dataField).map(function (dataField) {\n    return dataField.field;\n  });\n  var highlightField = props.highlightField ? props.highlightField : normalizedDataField;\n\n  if (typeof highlightField === 'string') {\n    fields[highlightField] = {};\n  } else if (Array.isArray(highlightField)) {\n    highlightField.forEach(function (item) {\n      fields[item] = {};\n    });\n  }\n\n  return {\n    highlight: _extends({\n      pre_tags: ['<mark>'],\n      post_tags: ['</mark>'],\n      fields: fields\n    }, props.highlightField && {\n      require_field_match: false\n    })\n  };\n};\n\nDataSearch.defaultQuery = function (value, props) {\n  var finalQuery = null;\n\n  if (value) {\n    var fields = (0, _helper.normalizeDataField)(props.dataField, props.fieldWeights);\n\n    if (props.queryString) {\n      finalQuery = {\n        query_string: DataSearch.shouldQuery(value, fields, props)\n      };\n    } else if (props.searchOperators) {\n      finalQuery = {\n        simple_query_string: DataSearch.shouldQuery(value, fields, props)\n      };\n    } else {\n      finalQuery = {\n        bool: {\n          should: DataSearch.shouldQuery(value, fields, props),\n          minimum_should_match: '1'\n        }\n      };\n    }\n  }\n\n  if (value === '') {\n    finalQuery = null;\n  }\n\n  if (finalQuery && props.nestedField) {\n    finalQuery = {\n      nested: {\n        path: props.nestedField,\n        query: finalQuery\n      }\n    };\n  }\n\n  return finalQuery;\n};\n\nDataSearch.shouldQuery = function (value, dataFields, props) {\n  var finalQuery = [];\n  var phrasePrefixFields = [];\n  var fields = dataFields.map(function (dataField) {\n    var queryField = '' + dataField.field + (dataField.weight ? '^' + dataField.weight : '');\n\n    if (!(dataField.field.endsWith('.keyword') || dataField.field.endsWith('.autosuggest') || dataField.field.endsWith('.search'))) {\n      phrasePrefixFields.push(queryField);\n    }\n\n    return queryField;\n  });\n\n  if (props.searchOperators || props.queryString) {\n    return {\n      query: value,\n      fields: fields,\n      default_operator: props.queryFormat\n    };\n  }\n\n  if (props.queryFormat === 'and') {\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'cross_fields',\n        operator: 'and'\n      }\n    });\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'phrase',\n        operator: 'and'\n      }\n    });\n\n    if (phrasePrefixFields.length > 0) {\n      finalQuery.push({\n        multi_match: {\n          query: value,\n          fields: phrasePrefixFields,\n          type: 'phrase_prefix',\n          operator: 'and'\n        }\n      });\n    }\n\n    return finalQuery;\n  }\n\n  finalQuery.push({\n    multi_match: {\n      query: value,\n      fields: fields,\n      type: 'best_fields',\n      operator: 'or',\n      fuzziness: props.fuzziness ? props.fuzziness : 0\n    }\n  });\n  finalQuery.push({\n    multi_match: {\n      query: value,\n      fields: fields,\n      type: 'phrase',\n      operator: 'or'\n    }\n  });\n\n  if (phrasePrefixFields.length > 0) {\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: phrasePrefixFields,\n        type: 'phrase_prefix',\n        operator: 'or'\n      }\n    });\n  }\n\n  return finalQuery;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.getBasicQueryOptions = function () {\n    var aggregationField = _this4.props.aggregationField;\n    var currentValue = _this4.state.currentValue;\n    var queryOptions = (0, _helper.getQueryOptions)(_this4.props);\n\n    if (aggregationField) {\n      queryOptions.aggs = (0, _helper.getCompositeAggsQuery)({\n        value: currentValue,\n        props: _this4.props,\n        showTopHits: true\n      }).aggs;\n    }\n\n    return queryOptions;\n  };\n\n  this.onSuggestions = function (results) {\n    return (0, _helper.handleOnSuggestions)(results, _this4.state.currentValue, _this4.props);\n  };\n\n  this.setValue = function (value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.props;\n    var cause = arguments[3];\n    var hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n    var isTagsMode = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : _this4.isTagsMode;\n\n    var performUpdate = function performUpdate() {\n      if (hasMounted) {\n        if (isTagsMode && (0, _helper.isEqual)(value, _this4.state.selectedTags)) {\n          return;\n        }\n\n        var _props7 = _this4.props,\n            enableRecentSearches = _props7.enableRecentSearches,\n            fetchRecentSearches = _props7.fetchRecentSearches,\n            enableDefaultSuggestions = _props7.enableDefaultSuggestions,\n            resetStore = _props7.resetStore,\n            componentId = _props7.componentId; // Refresh recent searches when value becomes empty,\n        // only when enableDefaultSuggestions is true\n\n        if (!value && enableDefaultSuggestions === false) {\n          resetStore(componentId);\n        } else if (!value && _this4.state.currentValue && enableRecentSearches) {\n          fetchRecentSearches();\n        }\n\n        var newCurrentValue = typeof value === 'string' ? (0, _utils.decodeHtml)(value) : _this4.state.currentValue;\n        var newSelectedTags = null;\n        var selectedTags = _this4.state.selectedTags;\n        var isOpen = _this4.state.isOpen;\n\n        if (toggleIsOpen) {\n          isOpen = !isOpen;\n        }\n\n        if (isTagsMode) {\n          if (Array.isArray(selectedTags) && selectedTags.length) {\n            if (typeof value === 'string') {\n              // check if value already present in selectedTags\n              if (selectedTags.includes(value)) {\n                isOpen = false;\n                newSelectedTags = [].concat(selectedTags);\n              } else {\n                newSelectedTags = value ? [].concat(selectedTags, [value]) : [];\n              }\n            } else if (Array.isArray(value) && !(0, _helper.isEqual)(selectedTags, value)) {\n              if (value.length) {\n                var mergedArray = cause === _causes2.default.CLEAR_VALUE ? value : Array.from(new Set([].concat(selectedTags, value)));\n                newSelectedTags = mergedArray;\n              } else {\n                newSelectedTags = [];\n              }\n            }\n          } else if (value) {\n            newSelectedTags = typeof value !== 'string' ? value : [value];\n          }\n\n          newCurrentValue = '';\n        } else {\n          newCurrentValue = typeof value === 'string' ? (0, _utils.decodeHtml)(value) : _this4.state.currentValue;\n        }\n\n        _this4.setState(_extends({\n          currentValue: newCurrentValue\n        }, !(0, _helper.isEqual)(newSelectedTags, null) ? {\n          selectedTags: newSelectedTags\n        } : {}, {\n          isOpen: isOpen\n        }), function () {\n          var queryHandlerValue = value;\n\n          if (isTagsMode) {\n            queryHandlerValue = Array.isArray(newSelectedTags) && newSelectedTags.length ? newSelectedTags : undefined;\n          }\n\n          if (isDefaultValue) {\n            if (_this4.props.autosuggest) {\n              if (toggleIsOpen) {\n                _this4.setState({\n                  isOpen: false\n                });\n              }\n\n              _this4.updateDefaultQuery(newCurrentValue, props);\n            }\n\n            _this4.isPending = false; // in case of strict selection only SUGGESTION_SELECT should be able\n            // to set the query otherwise the value should reset\n\n            if (props.strictSelection) {\n              if (cause === _causes2.default.SUGGESTION_SELECT || (isTagsMode ? newSelectedTags.length === 0 : value === '')) {\n                _this4.updateQuery(queryHandlerValue, props);\n              } else {\n                _this4.setValue('', true);\n              }\n            } else {\n              _this4.updateQuery(queryHandlerValue, props);\n            }\n          } else {\n            // debounce for handling text while typing\n            _this4.handleTextChange(newCurrentValue);\n          }\n\n          if (props.onValueChange) props.onValueChange(value);\n\n          var suggestionChangeHandler = function suggestionChangeHandler() {\n            // invoke on suggestions\n            if (_this4.props.onSuggestions) {\n              _this4.props.onSuggestions(_this4.props.suggestions);\n            }\n          }; // Set the already fetched suggestions if query is same as used last to fetch the hits\n\n\n          if (value === props.lastUsedQuery) {\n            _this4.setState({\n              suggestions: _this4.onSuggestions(_this4.props.suggestions)\n            }, suggestionChangeHandler);\n          } else if (!value) {\n            // reset suggestions\n            _this4.setState({\n              suggestions: []\n            }, suggestionChangeHandler);\n          }\n        });\n      } else {\n        if (_this4.props.autosuggest) {\n          _this4.updateDefaultQuery(value, props);\n        }\n\n        _this4.updateQuery(value, props);\n\n        if (props.onValueChange) props.onValueChange(value);\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n  };\n\n  this.handleTextChange = function (value) {\n    if (_this4.props.autosuggest) {\n      _this4.updateDefaultQuery(value, _this4.props);\n    } else {\n      _this4.updateQuery(value, _this4.props);\n    }\n  };\n\n  this.updateDefaultQuery = (0, _helper.debounce)(function (value, props) {\n    var defaultQuery = props.defaultQuery,\n        resetStore = props.resetStore,\n        enableDefaultSuggestions = props.enableDefaultSuggestions;\n\n    if (!value && enableDefaultSuggestions === false) {\n      // clear Component data from store\n      resetStore(props.componentId);\n      return;\n    }\n\n    var defaultQueryOptions = void 0;\n    var query = DataSearch.defaultQuery(value, props);\n\n    if (defaultQuery) {\n      var defaultQueryTobeSet = defaultQuery(value, props) || {};\n\n      if (defaultQueryTobeSet.query) {\n        query = defaultQueryTobeSet.query;\n      }\n\n      defaultQueryOptions = (0, _helper.getOptionsFromQuery)(defaultQueryTobeSet); // Update calculated default query in store\n\n      (0, _helper.updateDefaultQuery)(props.componentId, props, value);\n    }\n\n    if (typeof props.setSuggestionsSearchValue === 'function') {\n      props.setSuggestionsSearchValue(value);\n    }\n\n    props.setQueryOptions(_this4.internalComponent, _extends({}, _this4.queryOptions, defaultQueryOptions));\n    props.updateQuery({\n      componentId: _this4.internalComponent,\n      query: query,\n      value: value,\n      componentType: _constants.componentTypes.dataSearch\n    });\n  }, this.props.debounce);\n  this.updateQuery = (0, _helper.debounce)(function (value, props) {\n    var customQuery = props.customQuery,\n        filterLabel = props.filterLabel,\n        showFilter = props.showFilter,\n        URLParams = props.URLParams;\n    var customQueryOptions = void 0;\n    var query = DataSearch.defaultQuery(value, props);\n\n    if (customQuery) {\n      var customQueryTobeSet = customQuery(value, props) || {};\n      var queryTobeSet = customQueryTobeSet.query;\n\n      if (queryTobeSet) {\n        query = queryTobeSet;\n      }\n\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQueryTobeSet);\n      (0, _helper.updateCustomQuery)(props.componentId, props, value);\n    }\n\n    if (!_this4.isPending) {\n      // execute the query on an uncontrolled component\n      // query options should be applied to the source component,\n      // not on internal component, hence using `this.props.componentId` here\n      props.setQueryOptions(props.componentId, _extends({}, _this4.queryOptions, customQueryOptions), false);\n      props.updateQuery({\n        componentId: props.componentId,\n        query: query,\n        value: value,\n        label: filterLabel,\n        showFilter: showFilter,\n        URLParams: URLParams,\n        componentType: _constants.componentTypes.dataSearch\n      });\n    }\n  }, this.props.debounce);\n\n  this.handleFocus = function (event) {\n    _this4.setState({\n      isOpen: true\n    });\n\n    if (_this4.props.onFocus) {\n      _this4.props.onFocus(event, _this4.triggerQuery);\n    }\n  };\n\n  this.clearValue = function () {\n    _this4.isPending = false;\n    var onChange = _this4.props.onChange;\n\n    _this4.setValue('', true);\n\n    if (onChange) {\n      onChange('', _this4.triggerQuery);\n    }\n\n    _this4.onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n  };\n\n  this.handleKeyDown = function (event, highlightedIndex) {\n    var _props8 = _this4.props,\n        value = _props8.value,\n        onChange = _props8.onChange;\n\n    if (value !== undefined && onChange) {\n      _this4.isPending = true;\n    } // if a suggestion was selected, delegate the handling\n    // to suggestion handler\n\n\n    if (event.key === 'Enter' && highlightedIndex === null) {\n      _this4.setValue(event.target.value, true);\n\n      _this4.onValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n    }\n\n    if (_this4.props.onKeyDown) {\n      _this4.props.onKeyDown(event, _this4.triggerQuery);\n    }\n  };\n\n  this.onInputChange = function (e) {\n    var inputValue = e.target.value;\n\n    if (!_this4.state.isOpen && _this4.props.autosuggest) {\n      _this4.setState({\n        isOpen: true\n      });\n    }\n\n    var _props9 = _this4.props,\n        value = _props9.value,\n        onChange = _props9.onChange;\n\n    if (value === undefined) {\n      _this4.setValue(inputValue, false, _this4.props, undefined, true, !_this4.state.isOpen, false);\n    } else if (onChange) {\n      _this4.isPending = true; // handle caret position in controlled components\n\n      (0, _utils.handleCaretPosition)(e);\n      onChange(inputValue, function () {\n        var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n          isOpen: false\n        },\n            isOpen = _ref2.isOpen;\n\n        if (_this4.isTagsMode && _this4.props.autosuggest) {\n          _this4.setState({\n            currentValue: inputValue,\n            isOpen: isOpen\n          }, function () {\n            return _this4.updateDefaultQuery(inputValue, _this4.props);\n          });\n\n          return;\n        }\n\n        _this4.triggerQuery({\n          isOpen: isOpen\n        });\n      }, e);\n    }\n  };\n\n  this.triggerQuery = function () {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref3$isOpen = _ref3.isOpen,\n        isOpen = _ref3$isOpen === undefined ? false : _ref3$isOpen;\n\n    _this4.isPending = false;\n\n    if (_this4.isTagsMode) {\n      _this4.updateQuery(_this4.state.selectedTags, _this4.props);\n\n      return;\n    }\n\n    _this4.setValue(_this4.props.value, !isOpen, _this4.props, undefined, true, isOpen ? !_this4.state.isOpen : _this4.state.isOpen);\n  };\n\n  this.onSuggestionSelected = function (suggestion) {\n    var _props10 = _this4.props,\n        value = _props10.value,\n        onChange = _props10.onChange;\n\n    _this4.setState({\n      isOpen: false\n    });\n\n    if (value === undefined) {\n      if (_this4.isTagsMode && _this4.state.selectedTags.includes(suggestion.value)) {\n        _this4.setState({\n          currentValue: '',\n          isOpen: false\n        });\n\n        return;\n      }\n\n      _this4.setValue(suggestion.value, true, _this4.props, _causes2.default.SUGGESTION_SELECT);\n    } else if (onChange) {\n      _this4.isPending = false;\n      var emitValue = suggestion.value;\n      var selectedTags = _this4.state.selectedTags;\n\n      if (_this4.isTagsMode) {\n        emitValue = Array.isArray(selectedTags) ? [].concat(selectedTags) : [];\n\n        if (selectedTags && selectedTags.includes(suggestion.value)) {\n          // avoid duplicates in tags array\n          _this4.setState({\n            isOpen: false\n          });\n\n          return;\n        }\n\n        emitValue.push(suggestion.value);\n      }\n\n      onChange(emitValue, _this4.triggerQuery);\n    } // Record analytics for selected suggestions\n\n\n    _this4.triggerClickAnalytics(suggestion._click_id); // onValueSelected is user interaction driven:\n    // it should be triggered irrespective of controlled (or)\n    // uncontrolled component behavior\n\n\n    _this4.onValueSelected(suggestion.value, _causes2.default.SUGGESTION_SELECT, suggestion.source);\n  };\n\n  this.onValueSelected = function () {\n    for (var _len = arguments.length, cause = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      cause[_key - 1] = arguments[_key];\n    }\n\n    var currentValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.state.currentValue;\n    var onValueSelected = _this4.props.onValueSelected;\n\n    if (onValueSelected) {\n      onValueSelected.apply(undefined, [currentValue].concat(cause));\n    }\n  };\n\n  this.handleStateChange = function (changes) {\n    var isOpen = changes.isOpen,\n        type = changes.type;\n\n    if (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n      _this4.setState({\n        isOpen: isOpen\n      });\n    }\n  };\n\n  this.getBackgroundColor = function (highlightedIndex, index) {\n    var isDark = _this4.props.themePreset === 'dark';\n\n    if (isDark) {\n      return highlightedIndex === index ? '#555' : '#424242';\n    }\n\n    return highlightedIndex === index ? '#eee' : '#fff';\n  };\n\n  this.handleSearchIconClick = function () {\n    var currentValue = _this4.state.currentValue;\n\n    if (currentValue.trim()) {\n      _this4.isPending = false;\n\n      _this4.setValue(currentValue, true);\n\n      _this4.onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n    }\n  };\n\n  this.handleVoiceResults = function (_ref4) {\n    var results = _ref4.results;\n\n    if (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n      _this4.isPending = false;\n\n      _this4.setValue(results[0][0].transcript.trim(), true);\n    }\n  };\n\n  this.renderInputAddonBefore = function () {\n    var addonBefore = _this4.props.addonBefore;\n\n    if (addonBefore) {\n      return (0, _core.jsx)(_InputAddon2.default, null, addonBefore);\n    }\n\n    return null;\n  };\n\n  this.renderInputAddonAfter = function () {\n    var addonAfter = _this4.props.addonAfter;\n\n    if (addonAfter) {\n      return (0, _core.jsx)(_InputAddon2.default, null, addonAfter);\n    }\n\n    return null;\n  };\n\n  this.renderIcon = function () {\n    if (_this4.props.showIcon) {\n      return _this4.props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  this.renderCancelIcon = function () {\n    if (_this4.props.showClear) {\n      return _this4.props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  this.renderIcons = function () {\n    var _props11 = _this4.props,\n        showIcon = _props11.showIcon,\n        showClear = _props11.showClear,\n        renderMic = _props11.renderMic,\n        getMicInstance = _props11.getMicInstance,\n        showVoiceSearch = _props11.showVoiceSearch,\n        iconPosition = _props11.iconPosition,\n        innerClass = _props11.innerClass;\n    return (0, _core.jsx)('div', null, (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'right',\n      positionType: 'absolute'\n    }, _this4.state.currentValue && showClear && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: _this4.clearValue,\n      showIcon: showIcon,\n      isClearIcon: true\n    }, _this4.renderCancelIcon()), _this4.shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n      getInstance: getMicInstance,\n      render: renderMic,\n      onResult: _this4.handleVoiceResults,\n      className: (0, _helper.getClassName)(innerClass, 'mic') || null\n    }), iconPosition === 'right' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: _this4.handleSearchIconClick\n    }, _this4.renderIcon())), (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'left',\n      positionType: 'absolute'\n    }, iconPosition === 'left' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: _this4.handleSearchIconClick\n    }, _this4.renderIcon())));\n  };\n\n  this.renderNoSuggestion = function () {\n    var finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var _props12 = _this4.props,\n        themePreset = _props12.themePreset,\n        theme = _props12.theme,\n        isLoading = _props12.isLoading,\n        renderNoSuggestion = _props12.renderNoSuggestion,\n        innerClass = _props12.innerClass,\n        error = _props12.error,\n        renderError = _props12.renderError;\n    var _state = _this4.state,\n        isOpen = _state.isOpen,\n        currentValue = _state.currentValue;\n\n    if (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        themePreset: themePreset,\n        theme: theme,\n        innerClassName: 'noSuggestion'\n      }, typeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion);\n    }\n\n    return null;\n  };\n\n  this.renderLoader = function () {\n    var _props13 = _this4.props,\n        loader = _props13.loader,\n        isLoading = _props13.isLoading,\n        themePreset = _props13.themePreset,\n        theme = _props13.theme,\n        innerClass = _props13.innerClass;\n    var currentValue = _this4.state.currentValue;\n\n    if (isLoading && loader && currentValue) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'loader',\n        theme: theme,\n        themePreset: themePreset\n      }, loader);\n    }\n\n    return null;\n  };\n\n  this.renderError = function () {\n    var _props14 = _this4.props,\n        error = _props14.error,\n        renderError = _props14.renderError,\n        themePreset = _props14.themePreset,\n        theme = _props14.theme,\n        isLoading = _props14.isLoading,\n        innerClass = _props14.innerClass;\n    var currentValue = _this4.state.currentValue;\n\n    if (error && renderError && currentValue && !isLoading) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'error',\n        theme: theme,\n        themePreset: themePreset\n      }, (0, _helper.isFunction)(renderError) ? renderError(error) : renderError);\n    }\n\n    return null;\n  };\n\n  this.getComponent = function () {\n    var downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var isPopularSuggestionsRender = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var _props15 = _this4.props,\n        error = _props15.error,\n        isLoading = _props15.isLoading,\n        aggregationData = _props15.aggregationData,\n        promotedResults = _props15.promotedResults,\n        customData = _props15.customData,\n        rawData = _props15.rawData;\n    var currentValue = _this4.state.currentValue;\n    var data = {\n      error: error,\n      loading: isLoading,\n      downshiftProps: downshiftProps,\n      data: _this4.parsedSuggestions,\n      promotedData: promotedResults || [],\n      customData: customData || {},\n      aggregationData: aggregationData || [],\n      rawData: rawData,\n      value: currentValue,\n      triggerClickAnalytics: _this4.triggerClickAnalytics,\n      resultStats: _this4.stats,\n      // TODO: Remove in v4\n      querySuggestions: _this4.normalizedPopularSuggestions,\n      popularSuggestions: _this4.normalizedPopularSuggestions,\n      recentSearches: _this4.normalizedRecentSearches\n    };\n\n    if (isPopularSuggestionsRender) {\n      return (0, _utils.getPopularSuggestionsComponent)({\n        downshiftProps: downshiftProps,\n        data: _this4.normalizedPopularSuggestions,\n        value: currentValue,\n        loading: isLoading,\n        error: error\n      }, _this4.props);\n    }\n\n    return (0, _helper.getComponent)(data, _this4.props);\n  };\n\n  this.triggerClickAnalytics = function (searchPosition, documentId) {\n    var docId = documentId;\n\n    if (!docId) {\n      var hitData = _this4.parsedSuggestions.find(function (hit) {\n        return hit._click_id === searchPosition;\n      });\n\n      if (hitData && hitData.source && hitData.source._id) {\n        docId = hitData.source._id;\n      }\n    }\n\n    _this4.props.triggerAnalytics(searchPosition, docId);\n  };\n\n  this.withTriggerQuery = function (func) {\n    if (func) {\n      return function (e) {\n        return func(e, _this4.triggerQuery);\n      };\n    }\n\n    return undefined;\n  };\n\n  this.focusSearchBox = function (event) {\n    var elt = event.target || event.srcElement;\n    var tagName = elt.tagName;\n\n    if (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n      // already in an input\n      return;\n    }\n\n    if (_this4._inputRef) {\n      _this4._inputRef.focus();\n    }\n  };\n\n  this.listenForFocusShortcuts = function () {\n    var focusShortcuts = _this4.props.focusShortcuts;\n\n    if ((0, _utils.isEmpty)(focusShortcuts)) {\n      return;\n    } // for single press keys (a-z, A-Z) &, hotkeys' combinations such as 'cmd+k', 'ctrl+shft+a', etc\n\n\n    (0, _hotkeysJs2.default)((0, _utils.parseFocusShortcuts)(focusShortcuts).join(','),\n    /* eslint-disable no-shadow */\n    // eslint-disable-next-line no-unused-vars\n    function (event, handler) {\n      // Prevent the default refresh event under WINDOWS system\n      event.preventDefault();\n\n      _this4.focusSearchBox(event);\n    }); // if one of modifier keys are used, they are handled below\n\n    (0, _hotkeysJs2.default)('*', function (event) {\n      var modifierKeys = (0, _utils.extractModifierKeysFromFocusShortcuts)(focusShortcuts);\n      if (modifierKeys.length === 0) return;\n\n      for (var index = 0; index < modifierKeys.length; index += 1) {\n        var element = modifierKeys[index];\n\n        if (_hotkeysJs2.default[element]) {\n          _this4.focusSearchBox(event);\n\n          break;\n        }\n      }\n    });\n  };\n\n  this.clearTag = function (tagValue) {\n    var newSelectedTags = [].concat(_this4.state.selectedTags.filter(function (tag) {\n      return tag !== tagValue;\n    }));\n\n    _this4.setValue(newSelectedTags, true, _this4.props, _causes2.default.CLEAR_VALUE);\n\n    if (_this4.props.value !== undefined && typeof _this4.props.onChange === 'function') {\n      _this4.props.onChange(newSelectedTags, _this4.triggerQuery);\n    }\n  };\n\n  this.clearAllTags = function () {\n    _this4.setState({\n      selectedTags: [],\n      currentValue: '',\n      isOpen: false\n    }, function () {\n      _this4.updateQuery([], _this4.props);\n\n      _this4.updateDefaultQuery('', _this4.props);\n\n      if (_this4.props.value !== undefined && typeof onChange === 'function') {\n        _this4.props.onChange([], _this4.triggerQuery);\n      }\n    });\n  };\n\n  this.renderTag = function (item) {\n    var innerClass = _this4.props.innerClass;\n    return (0, _core.jsx)(_Tags.TagItem, {\n      key: item,\n      className: (0, _helper.getClassName)(innerClass, 'selected-tag') || ''\n    }, (0, _core.jsx)('span', null, item), (0, _core.jsx)('span', {\n      role: 'img',\n      'aria-label': 'delete-tag',\n      className: 'close-icon',\n      onClick: function onClick() {\n        return _this4.clearTag(item);\n      }\n    }, (0, _core.jsx)(_CancelSvg2.default, null)));\n  };\n\n  this.renderTags = function () {\n    var selectedTags = _this4.state.selectedTags;\n\n    if (!Array.isArray(selectedTags)) {\n      return null;\n    }\n\n    var tagsList = [].concat(selectedTags);\n    var shouldRenderClearAllTag = tagsList.length > 1;\n    var _props16 = _this4.props,\n        renderSelectedTags = _props16.renderSelectedTags,\n        innerClass = _props16.innerClass;\n    return renderSelectedTags ? renderSelectedTags({\n      values: selectedTags,\n      handleClear: _this4.clearTag,\n      handleClearAll: _this4.clearAllTags\n    }) : (0, _core.jsx)(_Tags.TagsContainer, null, tagsList.map(function (item) {\n      return _this4.renderTag(item);\n    }), shouldRenderClearAllTag && (0, _core.jsx)(_Tags.TagItem, {\n      'class': (0, _helper.getClassName)(innerClass, 'selected-tag') || ''\n    }, (0, _core.jsx)('span', null, 'Clear All'), (0, _core.jsx)('span', {\n      role: 'img',\n      'aria-label': 'delete-tag',\n      className: 'close-icon',\n      onClick: _this4.clearAllTags\n    }, (0, _core.jsx)(_CancelSvg2.default, null))));\n  };\n};\n\nDataSearch.propTypes = {\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  fetchPopularSuggestions: _types2.default.funcRequired,\n  fetchRecentSearches: _types2.default.funcRequired,\n  recentSearches: _types2.default.suggestions,\n  options: _types2.default.options,\n  selectedValue: _types2.default.selectedValue,\n  suggestions: _types2.default.suggestions,\n  defaultPopularSuggestions: _types2.default.suggestions,\n  rawData: _types2.default.rawData,\n  aggregationData: _types2.default.aggregationData,\n  setCustomQuery: _types2.default.funcRequired,\n  setDefaultQuery: _types2.default.funcRequired,\n  setCustomHighlightOptions: _types2.default.funcRequired,\n  setSuggestionsSearchValue: _types2.default.funcRequired,\n  triggerAnalytics: _types2.default.funcRequired,\n  resetStore: _types2.default.funcRequired,\n  error: _types2.default.title,\n  isLoading: _types2.default.bool,\n  lastUsedQuery: _types2.default.string,\n  time: _types2.default.number,\n  enableAppbase: _types2.default.bool,\n  // component props\n  autoFocus: _types2.default.bool,\n  autosuggest: _types2.default.bool,\n  enableSynonyms: _types2.default.bool,\n  distinctField: _types2.default.string,\n  distinctFieldConfig: _types2.default.componentObject,\n  index: _types2.default.string,\n  // TODO: Remove in v4\n  enableQuerySuggestions: _types2.default.bool,\n  enablePopularSuggestions: _types2.default.bool,\n  enableRecentSearches: _types2.default.bool,\n  queryString: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  clearIcon: _types2.default.children,\n  componentId: _types2.default.stringRequired,\n  customHighlight: _types2.default.func,\n  highlightConfig: _types2.default.componentObject,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  dataField: _types2.default.dataFieldValidator,\n  aggregationField: _types2.default.string,\n  aggregationSize: _types2.default.number,\n  size: _types2.default.number,\n  debounce: _types2.default.number,\n  defaultValue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n  value: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n  defaultSuggestions: _types2.default.suggestions,\n  promotedResults: _types2.default.hits,\n  customData: _types2.default.title,\n  downShiftProps: _types2.default.props,\n  children: _types2.default.func,\n  excludeFields: _types2.default.excludeFields,\n  fieldWeights: _types2.default.fieldWeights,\n  filterLabel: _types2.default.string,\n  fuzziness: _types2.default.fuzziness,\n  highlight: _types2.default.bool,\n  highlightField: _types2.default.stringOrArray,\n  icon: _types2.default.children,\n  iconPosition: _types2.default.iconPosition,\n  innerClass: _types2.default.style,\n  includeFields: _types2.default.includeFields,\n  loader: _types2.default.title,\n  nestedField: _types2.default.string,\n  onError: _types2.default.func,\n  onBlur: _types2.default.func,\n  onFocus: _types2.default.func,\n  onKeyDown: _types2.default.func,\n  onKeyPress: _types2.default.func,\n  onKeyUp: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onSuggestions: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  onValueSelected: _types2.default.func,\n  placeholder: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  popularSuggestions: _types2.default.hits,\n  react: _types2.default.react,\n  render: _types2.default.func,\n  // TODO: Remove in v4\n  renderQuerySuggestions: _types2.default.func,\n  renderPopularSuggestions: _types2.default.func,\n  renderError: _types2.default.title,\n  parseSuggestion: _types2.default.func,\n  renderNoSuggestion: _types2.default.title,\n  showClear: _types2.default.bool,\n  showDistinctSuggestions: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  showIcon: _types2.default.bool,\n  showVoiceSearch: _types2.default.bool,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  theme: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  type: _types2.default.string,\n  URLParams: _types2.default.bool,\n  strictSelection: _types2.default.bool,\n  searchOperators: _types2.default.bool,\n  enablePredictiveSuggestions: _types2.default.bool,\n  recentSearchesIcon: _types2.default.componentObject,\n  popularSearchesIcon: _types2.default.componentObject,\n  // Mic props\n  getMicInstance: _types2.default.func,\n  renderMic: _types2.default.func,\n  //\n  focusShortcuts: _types2.default.focusShortcuts,\n  addonBefore: _types2.default.children,\n  addonAfter: _types2.default.children,\n  expandSuggestionsContainer: _types2.default.bool,\n  enableDefaultSuggestions: _types2.default.bool,\n  endpoint: _types2.default.endpoint,\n  mode: (0, _propTypes.oneOf)(['select', 'tag']),\n  renderSelectedTags: _types2.default.func\n};\nDataSearch.defaultProps = {\n  autosuggest: true,\n  className: null,\n  debounce: 0,\n  downShiftProps: {},\n  enableSynonyms: true,\n  enablePopularSuggestions: false,\n  excludeFields: [],\n  iconPosition: 'left',\n  includeFields: ['*'],\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showFilter: true,\n  showIcon: true,\n  showVoiceSearch: false,\n  style: {},\n  URLParams: false,\n  showClear: false,\n  showDistinctSuggestions: true,\n  strictSelection: false,\n  searchOperators: false,\n  size: 10,\n  enablePredictiveSuggestions: false,\n  recentSearches: [],\n  defaultPopularSuggestions: [],\n  time: 0,\n  focusShortcuts: ['/'],\n  addonBefore: undefined,\n  addonAfter: undefined,\n  expandSuggestionsContainer: true,\n  enableDefaultSuggestions: true,\n  mode: 'select'\n}; // Add componentType for SSR\n\nDataSearch.componentType = _constants.componentTypes.dataSearch;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    suggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n    rawData: state.rawData[props.componentId],\n    aggregationData: state.compositeAggregations[props.componentId],\n    themePreset: state.config.themePreset,\n    isLoading: !!state.isLoading[props.componentId + '_active'],\n    error: state.error[props.componentId],\n    enableAppbase: state.config.enableAppbase,\n    promotedResults: state.promotedResults[props.componentId],\n    customData: state.customData[props.componentId],\n    time: state.hits[props.componentId] && state.hits[props.componentId].time,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    popularSuggestions: state.querySuggestions[props.componentId],\n    defaultPopularSuggestions: state.defaultPopularSuggestions[props.componentId],\n    recentSearches: state.recentSearches.data,\n    lastUsedQuery: state.queryToHits[props.componentId]\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setCustomHighlightOptions: function setCustomHighlightOptions(component, options) {\n      return dispatch((0, _actions.setCustomHighlightOptions)(component, options));\n    },\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    },\n    setSuggestionsSearchValue: function setSuggestionsSearchValue(value) {\n      return dispatch((0, _actions.setSuggestionsSearchValue)(value));\n    },\n    setQueryOptions: function setQueryOptions() {\n      return dispatch(_actions.setQueryOptions.apply(undefined, arguments));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n      return dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n    },\n    fetchRecentSearches: function fetchRecentSearches(queryOptions) {\n      return dispatch((0, _actions.getRecentSearches)(queryOptions));\n    },\n    fetchPopularSuggestions: function fetchPopularSuggestions(component) {\n      return dispatch((0, _actions.loadPopularSuggestions)(component));\n    },\n    resetStore: function resetStore(componentId) {\n      return dispatch((0, _actions.resetStoreForComponent)(componentId));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)(DataSearch, _extends({\n    ref: props.myForwardedRef\n  }, props));\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(_PreferencesConsumer2.default, {\n    userProps: props\n  }, function (preferenceProps) {\n    return (0, _core.jsx)(_ComponentWrapper2.default, _extends({}, preferenceProps, {\n      internalComponent: true,\n      componentType: _constants.componentTypes.dataSearch\n    }), function (componentProps) {\n      return (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n        myForwardedRef: ref\n      }));\n    });\n  });\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DataSearch);\nForwardRefComponent.displayName = 'DataSearch';\nexports.default = ForwardRefComponent;","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_core","require","_react","_react2","_interopRequireDefault","_downshift","_downshift2","_emotionTheming","_actions","_hoistNonReactStatics","_hoistNonReactStatics2","_helper","_transform","_constants","_hotkeysJs","_hotkeysJs2","_propTypes","_types","_types2","_causes","_causes2","_Title","_Title2","_Input","_Input2","_SearchSvg","_SearchSvg2","_CancelSvg","_CancelSvg2","_Container","_Container2","_Tags","_CustomSvg","_CustomSvg2","_utils","_SuggestionItem","_SuggestionItem2","_SuggestionWrapper","_SuggestionWrapper2","_Mic","_Mic2","_PreferencesConsumer","_PreferencesConsumer2","_ComponentWrapper","_ComponentWrapper2","_InputGroup","_InputGroup2","_InputWrapper","_InputWrapper2","_InputAddon","_InputAddon2","_IconGroup","_IconGroup2","_IconWrapper","_IconWrapper2","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","DataSearch","_Component","_this","_initialiseProps","currentValue","selectedValue","defaultValue","mode","SEARCH_COMPONENTS_MODES","TAG","isTagsMode","console","warn","state","suggestions","selectedTags","Array","isArray","isOpen","internalComponent","getInternalComponentID","componentId","isPending","queryOptions","getBasicQueryOptions","updateCustomQuery","updateDefaultQuery","highlight","highlightQuery","customHighlight","setCustomHighlightOptions","setQueryOptions","hasMounted","cause","SUGGESTION_SELECT","onChange","triggerQuery","setValue","componentDidMount","listenForFocusShortcuts","_props","enableQuerySuggestions","renderQuerySuggestions","fetchPopularSuggestions","enableRecentSearches","fetchRecentSearches","aggregationField","distinctField","distinctFieldConfig","index","enableAppbase","enableDefaultSuggestions","undefined","shouldFetchInitialSuggestions","componentDidUpdate","prevProps","_this2","checkSomePropChange","queryValue","isQueryIdentical","updateQuery","trim","onSuggestions","setState","isEqual","CLEAR_VALUE","_props2","_onChange","isEmpty","onValueSelected","componentWillUnmount","document","removeEventListener","onKeyDown","shouldMicRender","showVoiceSearch","window","webkitSpeechRecognition","SpeechRecognition","render","_this3","suggestionsList","parsedSuggestions","_props3","theme","themePreset","size","recentSearchesIcon","popularSearchesIcon","hasSuggestions","topSuggestions","defaultSuggestions","jsx","style","className","title","getClassName","innerClass","autosuggest","id","onSuggestionSelected","onStateChange","handleStateChange","itemToString","_ref","getRootProps","getInputProps","getItemProps","highlightedIndex","setHighlightedIndex","rest","renderSuggestionsDropdown","Fragment","hasCustomRenderer","getComponent","renderLoader","renderError","css","slice","map","item","backgroundColor","getBackgroundColor","suggestion","sugg","justifyContent","padding","_recent_search","iconId","label","icon","type","_popular_suggestion","hasPopularSuggestionsRenderer","renderNoSuggestion","suggestionsContainer","suppressRefError","renderInputAddonBefore","showIcon","showClear","iconPosition","ref","c","_inputRef","placeholder","onInputChange","onBlur","withTriggerQuery","onFocus","handleFocus","onClick","onKeyPress","e","handleKeyDown","onKeyUp","autoFocus","renderIcons","expandSuggestionsContainer","apply","concat","renderInputAddonAfter","downShiftProps","renderTags","get","getResultStats","withClickIds","_props4","enablePopularSuggestions","normalizedPopularSuggestions","recentSearches","_props5","popularSuggestions","showDistinctSuggestions","defaultPopularSuggestions","getTopSuggestions","_props6","isPopularSuggestionsEnabled","customDefaultPopularSuggestions","customNormalizedRecentSearches","normalizedRecentSearches","search","defaultSuggestionsProcessed","unshift","Component","fields","normalizedDataField","normalizeDataField","dataField","field","highlightField","forEach","pre_tags","post_tags","require_field_match","defaultQuery","finalQuery","fieldWeights","queryString","query_string","shouldQuery","searchOperators","simple_query_string","bool","should","minimum_should_match","nestedField","nested","path","query","dataFields","phrasePrefixFields","queryField","weight","endsWith","push","default_operator","queryFormat","multi_match","operator","fuzziness","_this4","getQueryOptions","aggs","getCompositeAggsQuery","showTopHits","results","handleOnSuggestions","isDefaultValue","toggleIsOpen","performUpdate","_props7","resetStore","newCurrentValue","decodeHtml","newSelectedTags","includes","mergedArray","from","Set","queryHandlerValue","strictSelection","handleTextChange","onValueChange","suggestionChangeHandler","lastUsedQuery","checkValueChange","beforeValueChange","debounce","defaultQueryOptions","defaultQueryTobeSet","getOptionsFromQuery","setSuggestionsSearchValue","componentType","componentTypes","dataSearch","customQuery","filterLabel","showFilter","URLParams","customQueryOptions","customQueryTobeSet","queryTobeSet","event","clearValue","_props8","ENTER_PRESS","inputValue","_props9","handleCaretPosition","_ref2","_ref3","_ref3$isOpen","_props10","emitValue","triggerClickAnalytics","_click_id","_len","_key","changes","stateChangeTypes","mouseUp","isDark","handleSearchIconClick","SEARCH_ICON_CLICK","handleVoiceResults","_ref4","isFinal","transcript","addonBefore","addonAfter","renderIcon","renderCancelIcon","clearIcon","_props11","renderMic","getMicInstance","groupPosition","positionType","isClearIcon","getInstance","onResult","finalSuggestionsList","_props12","isLoading","error","_state","innerClassName","_props13","loader","_props14","isFunction","downshiftProps","isPopularSuggestionsRender","_props15","aggregationData","promotedResults","customData","rawData","data","loading","promotedData","resultStats","stats","querySuggestions","getPopularSuggestionsComponent","searchPosition","documentId","docId","hitData","find","hit","_id","triggerAnalytics","func","focusSearchBox","elt","srcElement","tagName","isContentEditable","focus","focusShortcuts","parseFocusShortcuts","join","handler","preventDefault","modifierKeys","extractModifierKeysFromFocusShortcuts","element","clearTag","tagValue","filter","tag","clearAllTags","renderTag","TagItem","role","tagsList","shouldRenderClearAllTag","_props16","renderSelectedTags","values","handleClear","handleClearAll","TagsContainer","propTypes","funcRequired","options","setCustomQuery","setDefaultQuery","string","time","number","enableSynonyms","componentObject","children","stringRequired","highlightConfig","dataFieldValidator","aggregationSize","oneOfType","stringArray","hits","excludeFields","stringOrArray","includeFields","onError","onQueryChange","queryFormatSearch","react","renderPopularSuggestions","parseSuggestion","enablePredictiveSuggestions","endpoint","oneOf","defaultProps","mapStateToProps","selectedValues","compositeAggregations","config","total","hidden","queryToHits","mapDispatchtoProps","dispatch","component","updateQueryObject","recordSuggestionClick","getRecentSearches","loadPopularSuggestions","resetStoreForComponent","ConnectedComponent","connect","withTheme","myForwardedRef","ForwardRefComponent","forwardRef","userProps","preferenceProps","componentProps","displayName"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/search/DataSearch.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _hotkeysJs = require('hotkeys-js');\n\nvar _hotkeysJs2 = _interopRequireDefault(_hotkeysJs);\n\nvar _propTypes = require('prop-types');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Tags = require('../../styles/Tags');\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _utils = require('../../utils');\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _InputGroup = require('../../styles/InputGroup');\n\nvar _InputGroup2 = _interopRequireDefault(_InputGroup);\n\nvar _InputWrapper = require('../../styles/InputWrapper');\n\nvar _InputWrapper2 = _interopRequireDefault(_InputWrapper);\n\nvar _InputAddon = require('../../styles/InputAddon');\n\nvar _InputAddon2 = _interopRequireDefault(_InputAddon);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsxRuntime classic */\n/** @jsx jsx */\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\n\nvar DataSearch = function (_Component) {\n\t_inherits(DataSearch, _Component);\n\n\tfunction DataSearch(props) {\n\t\t_classCallCheck(this, DataSearch);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar currentValue = props.selectedValue || props.value || props.defaultValue || '';\n\t\tif (props.mode === _constants.SEARCH_COMPONENTS_MODES.TAG) {\n\t\t\t_this.isTagsMode = true;\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `categoryField` prop is not supported when `mode` prop is set to `tag`');\n\t\t}\n\t\t_this.state = {\n\t\t\tcurrentValue: _this.isTagsMode ? '' : currentValue,\n\t\t\tsuggestions: [],\n\t\t\tselectedTags: _this.isTagsMode && Array.isArray(currentValue) ? currentValue || [] : [],\n\t\t\tisOpen: false\n\t\t};\n\n\t\t_this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n\t\t/**\n   * To regulate the query execution based on the input handler,\n   * the component query will only get executed when it sets to `true`.\n   * */\n\t\t_this.isPending = false;\n\t\t_this.queryOptions = _this.getBasicQueryOptions();\n\t\t// Set custom and default queries in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, currentValue);\n\t\tif (props.highlight) {\n\t\t\tvar queryOptions = DataSearch.highlightQuery(props) || {};\n\t\t\tif (props.customHighlight && typeof props.customHighlight === 'function') {\n\t\t\t\tprops.setCustomHighlightOptions(props.componentId, props.customHighlight(props));\n\t\t\t}\n\t\t\t_this.queryOptions = _extends({}, queryOptions, _this.getBasicQueryOptions());\n\t\t\tprops.setQueryOptions(props.componentId, queryOptions);\n\t\t} else {\n\t\t\tprops.setQueryOptions(props.componentId, _this.queryOptions);\n\t\t}\n\t\tvar hasMounted = false;\n\t\tvar cause = null;\n\t\tif (_this.isTagsMode) {\n\t\t\tcause = _causes2.default.SUGGESTION_SELECT;\n\t\t}\n\t\tif (currentValue) {\n\t\t\tif (props.onChange) {\n\t\t\t\tprops.onChange(currentValue, _this.triggerQuery);\n\t\t\t}\n\t\t\t_this.setValue(currentValue, true, props, cause, hasMounted);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tDataSearch.prototype.componentDidMount = function componentDidMount() {\n\t\t// register hotkeys for listening to focusShortcuts' key presses\n\t\tthis.listenForFocusShortcuts();\n\t\tvar _props = this.props,\n\t\t    enableQuerySuggestions = _props.enableQuerySuggestions,\n\t\t    renderQuerySuggestions = _props.renderQuerySuggestions,\n\t\t    fetchPopularSuggestions = _props.fetchPopularSuggestions,\n\t\t    enableRecentSearches = _props.enableRecentSearches,\n\t\t    fetchRecentSearches = _props.fetchRecentSearches,\n\t\t    componentId = _props.componentId,\n\t\t    aggregationField = _props.aggregationField,\n\t\t    distinctField = _props.distinctField,\n\t\t    distinctFieldConfig = _props.distinctFieldConfig,\n\t\t    index = _props.index,\n\t\t    enableAppbase = _props.enableAppbase,\n\t\t    enableDefaultSuggestions = _props.enableDefaultSuggestions;\n\n\t\t// TODO: Remove in 4.0\n\n\t\tif (enableQuerySuggestions !== undefined) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `enableQuerySuggestions` prop has been marked as deprecated, please use the `enablePopularSuggestions` prop instead.');\n\t\t}\n\t\t// TODO: Remove in 4.0\n\t\tif (renderQuerySuggestions !== undefined) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `renderQuerySuggestions` prop has been marked as deprecated, please use the `renderPopularSuggestions` prop instead.');\n\t\t}\n\t\tif (enableAppbase && aggregationField) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `aggregationField` prop has been marked as deprecated, please use the `distinctField` prop instead.');\n\t\t}\n\t\tif (!enableAppbase && (distinctField || distinctFieldConfig)) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `distinctField` and `distinctFieldConfig` props, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t\tif (!enableAppbase && index) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t\tvar shouldFetchInitialSuggestions = enableDefaultSuggestions || this.state.currentValue;\n\t\tif (shouldFetchInitialSuggestions) {\n\t\t\tfetchPopularSuggestions(componentId);\n\t\t\tif (enableRecentSearches) {\n\t\t\t\tfetchRecentSearches();\n\t\t\t}\n\t\t}\n\t};\n\n\tDataSearch.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['highlight', 'dataField', 'highlightField', 'aggregationField'], function () {\n\t\t\tvar queryOptions = DataSearch.highlightQuery(_this2.props) || {};\n\t\t\tif (_this2.props.customHighlight && typeof _this2.props.customHighlight === 'function') {\n\t\t\t\t_this2.props.setCustomHighlightOptions(_this2.props.componentId, _this2.props.customHighlight(_this2.props));\n\t\t\t}\n\t\t\t_this2.queryOptions = _extends({}, queryOptions, _this2.getBasicQueryOptions());\n\t\t\t_this2.props.setQueryOptions(_this2.props.componentId, queryOptions);\n\t\t});\n\t\t// Treat defaultQuery and customQu ery as reactive props\n\t\tvar queryValue = this.isTagsMode ? this.state.selectedTags : this.state.currentValue;\n\t\tif (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'defaultQuery')) {\n\t\t\tthis.updateDefaultQuery(this.state.currentValue, this.props);\n\t\t\tthis.updateQuery(queryValue, this.props);\n\t\t}\n\n\t\tif (!(0, _utils.isQueryIdentical)(queryValue, this.props, prevProps, 'customQuery')) {\n\t\t\tthis.updateQuery(queryValue, this.props);\n\t\t}\n\n\t\tif (Array.isArray(this.props.suggestions) && this.state.currentValue.trim().length) {\n\t\t\t// shallow check allows us to set suggestions even if the next set\n\t\t\t// of suggestions are same as the current one\n\t\t\tif (this.props.suggestions !== prevProps.suggestions) {\n\t\t\t\tif (this.props.onSuggestions) {\n\t\t\t\t\tthis.props.onSuggestions(this.props.suggestions);\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tthis.setState({\n\t\t\t\t\tsuggestions: this.onSuggestions(this.props.suggestions)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['fieldWeights', 'fuzziness', 'queryFormat', 'dataField', 'nestedField', 'searchOperators'], function () {\n\t\t\t_this2.updateQuery(queryValue, _this2.props);\n\t\t});\n\n\t\tif (!(0, _helper.isEqual)(this.props.value, prevProps.value)) {\n\t\t\tvar cause = !this.props.value ? _causes2.default.CLEAR_VALUE : undefined;\n\t\t\tif (this.isTagsMode) {\n\t\t\t\tcause = _causes2.default.SUGGESTION_SELECT;\n\t\t\t}\n\t\t\tif (this.isTagsMode && this.props.value && typeof this.props.value === 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setValue(this.props.value, true, this.props, cause, true, !this.state.isOpen);\n\t\t} else if (\n\t\t// since, selectedValue will be updated when currentValue changes,\n\t\t// we must only check for the changes introduced by\n\t\t// clear action from SelectedFilters component in which case,\n\t\t// the currentValue will never match the updated selectedValue\n\t\t!(0, _helper.isEqual)(this.props.selectedValue, prevProps.selectedValue) && !(0, _helper.isEqual)(this.isTagsMode ? this.state.selectedTags : this.state.currentValue, this.props.selectedValue)) {\n\t\t\tvar _props2 = this.props,\n\t\t\t    value = _props2.value,\n\t\t\t    _onChange = _props2.onChange;\n\n\t\t\tif ((!this.props.selectedValue || (0, _utils.isEmpty)(this.props.selectedValue)) && this.state.currentValue) {\n\t\t\t\t// selected value is cleared, call onValueSelected\n\t\t\t\tthis.onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t\t\t}\n\t\t\tif (value === undefined) {\n\t\t\t\tthis.setValue(this.props.selectedValue || '', true, this.props, this.isTagsMode && Array.isArray(this.props.selectedValue) ? _causes2.default.CLEAR_VALUE : undefined);\n\t\t\t} else if (_onChange) {\n\t\t\t\tif (this.isTagsMode) {\n\t\t\t\t\tthis.state.selectedTags = this.props.selectedValue;\n\t\t\t\t}\n\t\t\t\t// value prop exists\n\t\t\t\t_onChange(this.props.selectedValue || '', this.triggerQuery);\n\t\t\t} else {\n\t\t\t\t// value prop exists and onChange is not defined:\n\t\t\t\t// we need to put the current value back into the store\n\t\t\t\t// if the clear action was triggered by interacting with\n\t\t\t\t// selected-filters component\n\t\t\t\tthis.isPending = false;\n\t\t\t\tthis.setValue(this.isTagsMode ? this.state.selectedTags : this.state.currentValue, true, this.props, undefined, true, false);\n\t\t\t}\n\t\t}\n\t};\n\n\tDataSearch.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tdocument.removeEventListener('keydown', this.onKeyDown);\n\t};\n\n\t// returns size and aggs property\n\n\n\tDataSearch.prototype.shouldMicRender = function shouldMicRender(showVoiceSearch) {\n\t\t// checks for SSR\n\t\tif (typeof window === 'undefined') return false;\n\t\treturn showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n\t};\n\n\tDataSearch.prototype.render = function render() {\n\t\tvar _this3 = this;\n\n\t\tvar currentValue = this.state.currentValue;\n\n\t\tvar suggestionsList = this.parsedSuggestions;\n\t\tvar _props3 = this.props,\n\t\t    theme = _props3.theme,\n\t\t    themePreset = _props3.themePreset,\n\t\t    size = _props3.size,\n\t\t    recentSearchesIcon = _props3.recentSearchesIcon,\n\t\t    popularSearchesIcon = _props3.popularSearchesIcon,\n\t\t    enableDefaultSuggestions = _props3.enableDefaultSuggestions;\n\n\t\tvar hasSuggestions = currentValue ? suggestionsList.length || this.topSuggestions.length : this.defaultSuggestions.length;\n\t\tif (enableDefaultSuggestions === false && !currentValue) {\n\t\t\thasSuggestions = false;\n\t\t}\n\t\treturn (0, _core.jsx)(\n\t\t\t_Container2.default,\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && (0, _core.jsx)(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.props.defaultSuggestions || this.props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n\t\t\t\tid: this.props.componentId + '-downshift',\n\t\t\t\tonChange: this.onSuggestionSelected,\n\t\t\t\tonStateChange: this.handleStateChange,\n\t\t\t\tisOpen: this.state.isOpen,\n\t\t\t\titemToString: function itemToString(i) {\n\t\t\t\t\treturn i;\n\t\t\t\t},\n\t\t\t\trender: function render(_ref) {\n\t\t\t\t\tvar getRootProps = _ref.getRootProps,\n\t\t\t\t\t    getInputProps = _ref.getInputProps,\n\t\t\t\t\t    getItemProps = _ref.getItemProps,\n\t\t\t\t\t    isOpen = _ref.isOpen,\n\t\t\t\t\t    highlightedIndex = _ref.highlightedIndex,\n\t\t\t\t\t    setHighlightedIndex = _ref.setHighlightedIndex,\n\t\t\t\t\t    rest = _objectWithoutProperties(_ref, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n\t\t\t\t\tvar renderSuggestionsDropdown = function renderSuggestionsDropdown() {\n\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t_this3.hasCustomRenderer && _this3.getComponent(_extends({\n\t\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\t\thighlightedIndex: highlightedIndex,\n\t\t\t\t\t\t\t\tsetHighlightedIndex: setHighlightedIndex\n\t\t\t\t\t\t\t}, rest)),\n\t\t\t\t\t\t\tisOpen && _this3.renderLoader(),\n\t\t\t\t\t\t\tisOpen && _this3.renderError(),\n\t\t\t\t\t\t\t!_this3.hasCustomRenderer && isOpen && hasSuggestions ? (0, _core.jsx)(\n\t\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcss: (0, _Input.suggestions)(themePreset, theme),\n\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'list')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuggestionsList.slice(0, size).map(function (item, index) {\n\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: item }), {\n\t\t\t\t\t\t\t\t\t\t\tkey: index + 1 + '-' + item.value,\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, index)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\t\tsuggestion: item\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t_this3.defaultSuggestions.map(function (sugg, index) {\n\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: sugg }), {\n\t\t\t\t\t\t\t\t\t\t\tkey: suggestionsList.length + index + 1 + '-' + sugg.value,\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, suggestionsList.length + index),\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t{ style: { padding: '0 10px 0 0' } },\n\t\t\t\t\t\t\t\t\t\t\tsugg.source && sugg.source._recent_search && (0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\t\ticonId: sugg.label + '-icon',\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'recent-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\t\ticon: recentSearchesIcon,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'recent-search-icon'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tsugg.source && sugg.source._popular_suggestion && (0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\t\ticonId: sugg.label + '-icon',\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'popular-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\t\ticon: popularSearchesIcon,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'popular-search-icon'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\t\tsuggestion: sugg\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t(0, _utils.hasPopularSuggestionsRenderer)(_this3.props) ? _this3.getComponent(_extends({\n\t\t\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\t\t\thighlightedIndex: highlightedIndex\n\t\t\t\t\t\t\t\t}, rest), true) : _this3.topSuggestions.map(function (sugg, index) {\n\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: sugg }), {\n\t\t\t\t\t\t\t\t\t\t\tkey: suggestionsList.length + index + 1 + '-' + sugg.value,\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, suggestionsList.length + index),\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t{ style: { padding: '0 10px 0 0' } },\n\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\t\ticonId: sugg.label + '-icon',\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'popular-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\t\ticon: popularSearchesIcon,\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'popular-search-icon'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\t\tsuggestion: sugg\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t) : _this3.renderNoSuggestion(suggestionsList)\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\tgetRootProps({ css: _Input.suggestionsContainer }, { suppressRefError: true }),\n\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t_InputGroup2.default,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t_this3.renderInputAddonBefore(),\n\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t_InputWrapper2.default,\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t(0, _core.jsx)(_Input2.default, _extends({\n\t\t\t\t\t\t\t\t\t'aria-label': _this3.props.componentId,\n\t\t\t\t\t\t\t\t\tid: _this3.props.componentId + '-input',\n\t\t\t\t\t\t\t\t\tshowIcon: _this3.props.showIcon,\n\t\t\t\t\t\t\t\t\tshowClear: _this3.props.showClear,\n\t\t\t\t\t\t\t\t\ticonPosition: _this3.props.iconPosition,\n\t\t\t\t\t\t\t\t\tref: function ref(c) {\n\t\t\t\t\t\t\t\t\t\t_this3._inputRef = c;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, getInputProps({\n\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'input'),\n\t\t\t\t\t\t\t\t\tplaceholder: _this3.props.placeholder,\n\t\t\t\t\t\t\t\t\tvalue: _this3.state.currentValue === null ? '' : _this3.state.currentValue,\n\t\t\t\t\t\t\t\t\tonChange: _this3.onInputChange,\n\t\t\t\t\t\t\t\t\tonBlur: _this3.withTriggerQuery(_this3.props.onBlur),\n\t\t\t\t\t\t\t\t\tonFocus: _this3.handleFocus,\n\t\t\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\t\t\t// clear highlighted index\n\t\t\t\t\t\t\t\t\t\tsetHighlightedIndex(null);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonKeyPress: _this3.withTriggerQuery(_this3.props.onKeyPress),\n\t\t\t\t\t\t\t\t\tonKeyDown: function onKeyDown(e) {\n\t\t\t\t\t\t\t\t\t\treturn _this3.handleKeyDown(e, highlightedIndex);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonKeyUp: _this3.withTriggerQuery(_this3.props.onKeyUp),\n\t\t\t\t\t\t\t\t\tautoFocus: _this3.props.autoFocus\n\t\t\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\t\t\tthemePreset: themePreset,\n\t\t\t\t\t\t\t\t\ttype: _this3.props.type\n\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t_this3.renderIcons(),\n\t\t\t\t\t\t\t\t!_this3.props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t_this3.renderInputAddonAfter()\n\t\t\t\t\t\t),\n\t\t\t\t\t\t_this3.props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}, this.props.downShiftProps)) : (0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{ css: _Input.suggestionsContainer },\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t_InputGroup2.default,\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.renderInputAddonBefore(),\n\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t_InputWrapper2.default,\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t(0, _core.jsx)(_Input2.default, {\n\t\t\t\t\t\t\t'aria-label': this.props.componentId,\n\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'input') || null,\n\t\t\t\t\t\t\tplaceholder: this.props.placeholder,\n\t\t\t\t\t\t\tvalue: this.state.currentValue ? this.state.currentValue : '',\n\t\t\t\t\t\t\tonChange: this.onInputChange,\n\t\t\t\t\t\t\tonBlur: this.withTriggerQuery(this.props.onBlur),\n\t\t\t\t\t\t\tonFocus: this.withTriggerQuery(this.props.onFocus),\n\t\t\t\t\t\t\tonKeyPress: this.withTriggerQuery(this.props.onKeyPress),\n\t\t\t\t\t\t\tonKeyDown: this.withTriggerQuery(this.props.onKeyDown),\n\t\t\t\t\t\t\tonKeyUp: this.withTriggerQuery(this.props.onKeyUp),\n\t\t\t\t\t\t\tautoFocus: this.props.autoFocus,\n\t\t\t\t\t\t\ticonPosition: this.props.iconPosition,\n\t\t\t\t\t\t\tshowIcon: this.props.showIcon,\n\t\t\t\t\t\t\tshowClear: this.props.showClear,\n\t\t\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tthis.renderIcons()\n\t\t\t\t\t),\n\t\t\t\t\tthis.renderInputAddonAfter()\n\t\t\t\t)\n\t\t\t),\n\t\t\tthis.renderTags()\n\t\t);\n\t};\n\n\t_createClass(DataSearch, [{\n\t\tkey: 'stats',\n\t\tget: function get() {\n\t\t\treturn (0, _helper.getResultStats)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'parsedSuggestions',\n\t\tget: function get() {\n\t\t\tvar suggestionsList = [];\n\t\t\tvar currentValue = this.state.currentValue;\n\n\t\t\tif (currentValue) {\n\t\t\t\tsuggestionsList = this.state.suggestions;\n\t\t\t}\n\t\t\treturn (0, _helper.withClickIds)(suggestionsList);\n\t\t}\n\t}, {\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _helper.hasCustomRenderer)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'topSuggestions',\n\t\tget: function get() {\n\t\t\tvar _props4 = this.props,\n\t\t\t    enableQuerySuggestions = _props4.enableQuerySuggestions,\n\t\t\t    enablePopularSuggestions = _props4.enablePopularSuggestions;\n\t\t\tvar currentValue = this.state.currentValue;\n\n\t\t\tif (!currentValue) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn enableQuerySuggestions || enablePopularSuggestions ? this.normalizedPopularSuggestions : [];\n\t\t}\n\t}, {\n\t\tkey: 'normalizedRecentSearches',\n\t\tget: function get() {\n\t\t\tvar recentSearches = this.props.recentSearches;\n\n\t\t\treturn recentSearches || [];\n\t\t}\n\t}, {\n\t\tkey: 'normalizedPopularSuggestions',\n\t\tget: function get() {\n\t\t\tvar _props5 = this.props,\n\t\t\t    popularSuggestions = _props5.popularSuggestions,\n\t\t\t    showDistinctSuggestions = _props5.showDistinctSuggestions,\n\t\t\t    defaultPopularSuggestions = _props5.defaultPopularSuggestions;\n\t\t\tvar currentValue = this.state.currentValue;\n\n\t\t\treturn (0, _helper.getTopSuggestions)(\n\t\t\t// use default popular suggestions if value is empty\n\t\t\tcurrentValue ? popularSuggestions : defaultPopularSuggestions, currentValue, showDistinctSuggestions);\n\t\t}\n\t}, {\n\t\tkey: 'defaultSuggestions',\n\t\tget: function get() {\n\t\t\tvar _props6 = this.props,\n\t\t\t    enableQuerySuggestions = _props6.enableQuerySuggestions,\n\t\t\t    enablePopularSuggestions = _props6.enablePopularSuggestions,\n\t\t\t    showDistinctSuggestions = _props6.showDistinctSuggestions,\n\t\t\t    defaultPopularSuggestions = _props6.defaultPopularSuggestions,\n\t\t\t    defaultSuggestions = _props6.defaultSuggestions,\n\t\t\t    enableDefaultSuggestions = _props6.enableDefaultSuggestions;\n\n\t\t\tvar isPopularSuggestionsEnabled = enableQuerySuggestions || enablePopularSuggestions;\n\t\t\tvar currentValue = this.state.currentValue;\n\n\t\t\tif (currentValue || enableDefaultSuggestions === false) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tvar customDefaultPopularSuggestions = defaultPopularSuggestions.map(function (suggestion) {\n\t\t\t\treturn _extends({}, suggestion, {\n\t\t\t\t\t_popular_suggestion: true\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar customNormalizedRecentSearches = this.normalizedRecentSearches.map(function (search) {\n\t\t\t\treturn _extends({}, search, {\n\t\t\t\t\t_recent_search: true\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar defaultSuggestionsProcessed = isPopularSuggestionsEnabled ? [].concat(customNormalizedRecentSearches, customDefaultPopularSuggestions) : customNormalizedRecentSearches;\n\n\t\t\tvar suggestionsList = (0, _helper.getTopSuggestions)(defaultSuggestionsProcessed, currentValue, showDistinctSuggestions);\n\n\t\t\tif (defaultSuggestions && Array.isArray(defaultSuggestions)) {\n\t\t\t\tsuggestionsList.unshift.apply(suggestionsList, (0, _helper.withClickIds)(defaultSuggestions));\n\t\t\t}\n\t\t\treturn suggestionsList;\n\t\t}\n\t}]);\n\n\treturn DataSearch;\n}(_react.Component);\n\nDataSearch.highlightQuery = function (props) {\n\tif (props.customHighlight) {\n\t\treturn props.customHighlight(props);\n\t}\n\tif (!props.highlight) {\n\t\treturn null;\n\t}\n\tvar fields = {};\n\tvar normalizedDataField = (0, _helper.normalizeDataField)(props.dataField).map(function (dataField) {\n\t\treturn dataField.field;\n\t});\n\tvar highlightField = props.highlightField ? props.highlightField : normalizedDataField;\n\n\tif (typeof highlightField === 'string') {\n\t\tfields[highlightField] = {};\n\t} else if (Array.isArray(highlightField)) {\n\t\thighlightField.forEach(function (item) {\n\t\t\tfields[item] = {};\n\t\t});\n\t}\n\n\treturn {\n\t\thighlight: _extends({\n\t\t\tpre_tags: ['<mark>'],\n\t\t\tpost_tags: ['</mark>'],\n\t\t\tfields: fields\n\t\t}, props.highlightField && { require_field_match: false })\n\t};\n};\n\nDataSearch.defaultQuery = function (value, props) {\n\tvar finalQuery = null;\n\n\tif (value) {\n\t\tvar fields = (0, _helper.normalizeDataField)(props.dataField, props.fieldWeights);\n\n\t\tif (props.queryString) {\n\t\t\tfinalQuery = {\n\t\t\t\tquery_string: DataSearch.shouldQuery(value, fields, props)\n\t\t\t};\n\t\t} else if (props.searchOperators) {\n\t\t\tfinalQuery = {\n\t\t\t\tsimple_query_string: DataSearch.shouldQuery(value, fields, props)\n\t\t\t};\n\t\t} else {\n\t\t\tfinalQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tshould: DataSearch.shouldQuery(value, fields, props),\n\t\t\t\t\tminimum_should_match: '1'\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tif (value === '') {\n\t\tfinalQuery = null;\n\t}\n\n\tif (finalQuery && props.nestedField) {\n\t\tfinalQuery = {\n\t\t\tnested: {\n\t\t\t\tpath: props.nestedField,\n\t\t\t\tquery: finalQuery\n\t\t\t}\n\t\t};\n\t}\n\treturn finalQuery;\n};\n\nDataSearch.shouldQuery = function (value, dataFields, props) {\n\tvar finalQuery = [];\n\tvar phrasePrefixFields = [];\n\tvar fields = dataFields.map(function (dataField) {\n\t\tvar queryField = '' + dataField.field + (dataField.weight ? '^' + dataField.weight : '');\n\t\tif (!(dataField.field.endsWith('.keyword') || dataField.field.endsWith('.autosuggest') || dataField.field.endsWith('.search'))) {\n\t\t\tphrasePrefixFields.push(queryField);\n\t\t}\n\t\treturn queryField;\n\t});\n\tif (props.searchOperators || props.queryString) {\n\t\treturn {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\tdefault_operator: props.queryFormat\n\t\t};\n\t}\n\n\tif (props.queryFormat === 'and') {\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'cross_fields',\n\t\t\t\toperator: 'and'\n\t\t\t}\n\t\t});\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'phrase',\n\t\t\t\toperator: 'and'\n\t\t\t}\n\t\t});\n\t\tif (phrasePrefixFields.length > 0) {\n\t\t\tfinalQuery.push({\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields: phrasePrefixFields,\n\t\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\t\toperator: 'and'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn finalQuery;\n\t}\n\n\tfinalQuery.push({\n\t\tmulti_match: {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\ttype: 'best_fields',\n\t\t\toperator: 'or',\n\t\t\tfuzziness: props.fuzziness ? props.fuzziness : 0\n\t\t}\n\t});\n\n\tfinalQuery.push({\n\t\tmulti_match: {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\ttype: 'phrase',\n\t\t\toperator: 'or'\n\t\t}\n\t});\n\n\tif (phrasePrefixFields.length > 0) {\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: phrasePrefixFields,\n\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\toperator: 'or'\n\t\t\t}\n\t\t});\n\t}\n\n\treturn finalQuery;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this4 = this;\n\n\tthis.getBasicQueryOptions = function () {\n\t\tvar aggregationField = _this4.props.aggregationField;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tvar queryOptions = (0, _helper.getQueryOptions)(_this4.props);\n\t\tif (aggregationField) {\n\t\t\tqueryOptions.aggs = (0, _helper.getCompositeAggsQuery)({\n\t\t\t\tvalue: currentValue,\n\t\t\t\tprops: _this4.props,\n\t\t\t\tshowTopHits: true\n\t\t\t}).aggs;\n\t\t}\n\t\treturn queryOptions;\n\t};\n\n\tthis.onSuggestions = function (results) {\n\t\treturn (0, _helper.handleOnSuggestions)(results, _this4.state.currentValue, _this4.props);\n\t};\n\n\tthis.setValue = function (value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.props;\n\t\tvar cause = arguments[3];\n\t\tvar hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\t\tvar toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\t\tvar isTagsMode = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : _this4.isTagsMode;\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tif (hasMounted) {\n\t\t\t\tif (isTagsMode && (0, _helper.isEqual)(value, _this4.state.selectedTags)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar _props7 = _this4.props,\n\t\t\t\t    enableRecentSearches = _props7.enableRecentSearches,\n\t\t\t\t    fetchRecentSearches = _props7.fetchRecentSearches,\n\t\t\t\t    enableDefaultSuggestions = _props7.enableDefaultSuggestions,\n\t\t\t\t    resetStore = _props7.resetStore,\n\t\t\t\t    componentId = _props7.componentId;\n\t\t\t\t// Refresh recent searches when value becomes empty,\n\t\t\t\t// only when enableDefaultSuggestions is true\n\n\t\t\t\tif (!value && enableDefaultSuggestions === false) {\n\t\t\t\t\tresetStore(componentId);\n\t\t\t\t} else if (!value && _this4.state.currentValue && enableRecentSearches) {\n\t\t\t\t\tfetchRecentSearches();\n\t\t\t\t}\n\t\t\t\tvar newCurrentValue = typeof value === 'string' ? (0, _utils.decodeHtml)(value) : _this4.state.currentValue;\n\t\t\t\tvar newSelectedTags = null;\n\n\t\t\t\tvar selectedTags = _this4.state.selectedTags;\n\n\t\t\t\tvar isOpen = _this4.state.isOpen;\n\t\t\t\tif (toggleIsOpen) {\n\t\t\t\t\tisOpen = !isOpen;\n\t\t\t\t}\n\t\t\t\tif (isTagsMode) {\n\t\t\t\t\tif (Array.isArray(selectedTags) && selectedTags.length) {\n\t\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\t\t// check if value already present in selectedTags\n\t\t\t\t\t\t\tif (selectedTags.includes(value)) {\n\t\t\t\t\t\t\t\tisOpen = false;\n\t\t\t\t\t\t\t\tnewSelectedTags = [].concat(selectedTags);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewSelectedTags = value ? [].concat(selectedTags, [value]) : [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (Array.isArray(value) && !(0, _helper.isEqual)(selectedTags, value)) {\n\t\t\t\t\t\t\tif (value.length) {\n\t\t\t\t\t\t\t\tvar mergedArray = cause === _causes2.default.CLEAR_VALUE ? value : Array.from(new Set([].concat(selectedTags, value)));\n\t\t\t\t\t\t\t\tnewSelectedTags = mergedArray;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewSelectedTags = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (value) {\n\t\t\t\t\t\tnewSelectedTags = typeof value !== 'string' ? value : [value];\n\t\t\t\t\t}\n\t\t\t\t\tnewCurrentValue = '';\n\t\t\t\t} else {\n\t\t\t\t\tnewCurrentValue = typeof value === 'string' ? (0, _utils.decodeHtml)(value) : _this4.state.currentValue;\n\t\t\t\t}\n\t\t\t\t_this4.setState(_extends({\n\t\t\t\t\tcurrentValue: newCurrentValue\n\t\t\t\t}, !(0, _helper.isEqual)(newSelectedTags, null) ? { selectedTags: newSelectedTags } : {}, {\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t}), function () {\n\t\t\t\t\tvar queryHandlerValue = value;\n\t\t\t\t\tif (isTagsMode) {\n\t\t\t\t\t\tqueryHandlerValue = Array.isArray(newSelectedTags) && newSelectedTags.length ? newSelectedTags : undefined;\n\t\t\t\t\t}\n\t\t\t\t\tif (isDefaultValue) {\n\t\t\t\t\t\tif (_this4.props.autosuggest) {\n\t\t\t\t\t\t\tif (toggleIsOpen) {\n\t\t\t\t\t\t\t\t_this4.setState({\n\t\t\t\t\t\t\t\t\tisOpen: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_this4.updateDefaultQuery(newCurrentValue, props);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this4.isPending = false;\n\t\t\t\t\t\t// in case of strict selection only SUGGESTION_SELECT should be able\n\t\t\t\t\t\t// to set the query otherwise the value should reset\n\t\t\t\t\t\tif (props.strictSelection) {\n\t\t\t\t\t\t\tif (cause === _causes2.default.SUGGESTION_SELECT || (isTagsMode ? newSelectedTags.length === 0 : value === '')) {\n\t\t\t\t\t\t\t\t_this4.updateQuery(queryHandlerValue, props);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_this4.setValue('', true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this4.updateQuery(queryHandlerValue, props);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// debounce for handling text while typing\n\t\t\t\t\t\t_this4.handleTextChange(newCurrentValue);\n\t\t\t\t\t}\n\t\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t\t\tvar suggestionChangeHandler = function suggestionChangeHandler() {\n\t\t\t\t\t\t// invoke on suggestions\n\t\t\t\t\t\tif (_this4.props.onSuggestions) {\n\t\t\t\t\t\t\t_this4.props.onSuggestions(_this4.props.suggestions);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t// Set the already fetched suggestions if query is same as used last to fetch the hits\n\t\t\t\t\tif (value === props.lastUsedQuery) {\n\t\t\t\t\t\t_this4.setState({\n\t\t\t\t\t\t\tsuggestions: _this4.onSuggestions(_this4.props.suggestions)\n\t\t\t\t\t\t}, suggestionChangeHandler);\n\t\t\t\t\t} else if (!value) {\n\t\t\t\t\t\t// reset suggestions\n\t\t\t\t\t\t_this4.setState({\n\t\t\t\t\t\t\tsuggestions: []\n\t\t\t\t\t\t}, suggestionChangeHandler);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (_this4.props.autosuggest) {\n\t\t\t\t\t_this4.updateDefaultQuery(value, props);\n\t\t\t\t}\n\t\t\t\t_this4.updateQuery(value, props);\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.handleTextChange = function (value) {\n\t\tif (_this4.props.autosuggest) {\n\t\t\t_this4.updateDefaultQuery(value, _this4.props);\n\t\t} else {\n\t\t\t_this4.updateQuery(value, _this4.props);\n\t\t}\n\t};\n\n\tthis.updateDefaultQuery = (0, _helper.debounce)(function (value, props) {\n\t\tvar defaultQuery = props.defaultQuery,\n\t\t    resetStore = props.resetStore,\n\t\t    enableDefaultSuggestions = props.enableDefaultSuggestions;\n\n\t\tif (!value && enableDefaultSuggestions === false) {\n\t\t\t// clear Component data from store\n\t\t\tresetStore(props.componentId);\n\t\t\treturn;\n\t\t}\n\n\t\tvar defaultQueryOptions = void 0;\n\t\tvar query = DataSearch.defaultQuery(value, props);\n\t\tif (defaultQuery) {\n\t\t\tvar defaultQueryTobeSet = defaultQuery(value, props) || {};\n\t\t\tif (defaultQueryTobeSet.query) {\n\t\t\t\tquery = defaultQueryTobeSet.query;\n\t\t\t}\n\t\t\tdefaultQueryOptions = (0, _helper.getOptionsFromQuery)(defaultQueryTobeSet);\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, value);\n\t\t}\n\t\tif (typeof props.setSuggestionsSearchValue === 'function') {\n\t\t\tprops.setSuggestionsSearchValue(value);\n\t\t}\n\t\tprops.setQueryOptions(_this4.internalComponent, _extends({}, _this4.queryOptions, defaultQueryOptions));\n\t\tprops.updateQuery({\n\t\t\tcomponentId: _this4.internalComponent,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tcomponentType: _constants.componentTypes.dataSearch\n\t\t});\n\t}, this.props.debounce);\n\tthis.updateQuery = (0, _helper.debounce)(function (value, props) {\n\t\tvar customQuery = props.customQuery,\n\t\t    filterLabel = props.filterLabel,\n\t\t    showFilter = props.showFilter,\n\t\t    URLParams = props.URLParams;\n\n\n\t\tvar customQueryOptions = void 0;\n\t\tvar query = DataSearch.defaultQuery(value, props);\n\t\tif (customQuery) {\n\t\t\tvar customQueryTobeSet = customQuery(value, props) || {};\n\t\t\tvar queryTobeSet = customQueryTobeSet.query;\n\t\t\tif (queryTobeSet) {\n\t\t\t\tquery = queryTobeSet;\n\t\t\t}\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQueryTobeSet);\n\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t}\n\t\tif (!_this4.isPending) {\n\t\t\t// execute the query on an uncontrolled component\n\t\t\t// query options should be applied to the source component,\n\t\t\t// not on internal component, hence using `this.props.componentId` here\n\t\t\tprops.setQueryOptions(props.componentId, _extends({}, _this4.queryOptions, customQueryOptions), false);\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tquery: query,\n\t\t\t\tvalue: value,\n\t\t\t\tlabel: filterLabel,\n\t\t\t\tshowFilter: showFilter,\n\t\t\t\tURLParams: URLParams,\n\t\t\t\tcomponentType: _constants.componentTypes.dataSearch\n\t\t\t});\n\t\t}\n\t}, this.props.debounce);\n\n\tthis.handleFocus = function (event) {\n\t\t_this4.setState({\n\t\t\tisOpen: true\n\t\t});\n\t\tif (_this4.props.onFocus) {\n\t\t\t_this4.props.onFocus(event, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.clearValue = function () {\n\t\t_this4.isPending = false;\n\t\tvar onChange = _this4.props.onChange;\n\n\t\t_this4.setValue('', true);\n\t\tif (onChange) {\n\t\t\tonChange('', _this4.triggerQuery);\n\t\t}\n\t\t_this4.onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t};\n\n\tthis.handleKeyDown = function (event, highlightedIndex) {\n\t\tvar _props8 = _this4.props,\n\t\t    value = _props8.value,\n\t\t    onChange = _props8.onChange;\n\n\t\tif (value !== undefined && onChange) {\n\t\t\t_this4.isPending = true;\n\t\t}\n\t\t// if a suggestion was selected, delegate the handling\n\t\t// to suggestion handler\n\t\tif (event.key === 'Enter' && highlightedIndex === null) {\n\t\t\t_this4.setValue(event.target.value, true);\n\n\t\t\t_this4.onValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n\t\t}\n\t\tif (_this4.props.onKeyDown) {\n\t\t\t_this4.props.onKeyDown(event, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.onInputChange = function (e) {\n\t\tvar inputValue = e.target.value;\n\n\t\tif (!_this4.state.isOpen && _this4.props.autosuggest) {\n\t\t\t_this4.setState({\n\t\t\t\tisOpen: true\n\t\t\t});\n\t\t}\n\n\t\tvar _props9 = _this4.props,\n\t\t    value = _props9.value,\n\t\t    onChange = _props9.onChange;\n\n\t\tif (value === undefined) {\n\t\t\t_this4.setValue(inputValue, false, _this4.props, undefined, true, !_this4.state.isOpen, false);\n\t\t} else if (onChange) {\n\t\t\t_this4.isPending = true;\n\t\t\t// handle caret position in controlled components\n\t\t\t(0, _utils.handleCaretPosition)(e);\n\t\t\tonChange(inputValue, function () {\n\t\t\t\tvar _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { isOpen: false },\n\t\t\t\t    isOpen = _ref2.isOpen;\n\n\t\t\t\tif (_this4.isTagsMode && _this4.props.autosuggest) {\n\t\t\t\t\t_this4.setState({ currentValue: inputValue, isOpen: isOpen }, function () {\n\t\t\t\t\t\treturn _this4.updateDefaultQuery(inputValue, _this4.props);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_this4.triggerQuery({ isOpen: isOpen });\n\t\t\t}, e);\n\t\t}\n\t};\n\n\tthis.triggerQuery = function () {\n\t\tvar _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t    _ref3$isOpen = _ref3.isOpen,\n\t\t    isOpen = _ref3$isOpen === undefined ? false : _ref3$isOpen;\n\n\t\t_this4.isPending = false;\n\t\tif (_this4.isTagsMode) {\n\t\t\t_this4.updateQuery(_this4.state.selectedTags, _this4.props);\n\t\t\treturn;\n\t\t}\n\t\t_this4.setValue(_this4.props.value, !isOpen, _this4.props, undefined, true, isOpen ? !_this4.state.isOpen : _this4.state.isOpen);\n\t};\n\n\tthis.onSuggestionSelected = function (suggestion) {\n\t\tvar _props10 = _this4.props,\n\t\t    value = _props10.value,\n\t\t    onChange = _props10.onChange;\n\n\t\t_this4.setState({\n\t\t\tisOpen: false\n\t\t});\n\t\tif (value === undefined) {\n\t\t\tif (_this4.isTagsMode && _this4.state.selectedTags.includes(suggestion.value)) {\n\t\t\t\t_this4.setState({ currentValue: '', isOpen: false });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_this4.setValue(suggestion.value, true, _this4.props, _causes2.default.SUGGESTION_SELECT);\n\t\t} else if (onChange) {\n\t\t\t_this4.isPending = false;\n\t\t\tvar emitValue = suggestion.value;\n\t\t\tvar selectedTags = _this4.state.selectedTags;\n\n\t\t\tif (_this4.isTagsMode) {\n\t\t\t\temitValue = Array.isArray(selectedTags) ? [].concat(selectedTags) : [];\n\t\t\t\tif (selectedTags && selectedTags.includes(suggestion.value)) {\n\t\t\t\t\t// avoid duplicates in tags array\n\t\t\t\t\t_this4.setState({\n\t\t\t\t\t\tisOpen: false\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\temitValue.push(suggestion.value);\n\t\t\t}\n\t\t\tonChange(emitValue, _this4.triggerQuery);\n\t\t}\n\t\t// Record analytics for selected suggestions\n\t\t_this4.triggerClickAnalytics(suggestion._click_id);\n\t\t// onValueSelected is user interaction driven:\n\t\t// it should be triggered irrespective of controlled (or)\n\t\t// uncontrolled component behavior\n\t\t_this4.onValueSelected(suggestion.value, _causes2.default.SUGGESTION_SELECT, suggestion.source);\n\t};\n\n\tthis.onValueSelected = function () {\n\t\tfor (var _len = arguments.length, cause = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\tcause[_key - 1] = arguments[_key];\n\t\t}\n\n\t\tvar currentValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.state.currentValue;\n\t\tvar onValueSelected = _this4.props.onValueSelected;\n\n\t\tif (onValueSelected) {\n\t\t\tonValueSelected.apply(undefined, [currentValue].concat(cause));\n\t\t}\n\t};\n\n\tthis.handleStateChange = function (changes) {\n\t\tvar isOpen = changes.isOpen,\n\t\t    type = changes.type;\n\n\t\tif (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n\t\t\t_this4.setState({\n\t\t\t\tisOpen: isOpen\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.getBackgroundColor = function (highlightedIndex, index) {\n\t\tvar isDark = _this4.props.themePreset === 'dark';\n\t\tif (isDark) {\n\t\t\treturn highlightedIndex === index ? '#555' : '#424242';\n\t\t}\n\t\treturn highlightedIndex === index ? '#eee' : '#fff';\n\t};\n\n\tthis.handleSearchIconClick = function () {\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (currentValue.trim()) {\n\t\t\t_this4.isPending = false;\n\t\t\t_this4.setValue(currentValue, true);\n\t\t\t_this4.onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n\t\t}\n\t};\n\n\tthis.handleVoiceResults = function (_ref4) {\n\t\tvar results = _ref4.results;\n\n\t\tif (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n\t\t\t_this4.isPending = false;\n\t\t\t_this4.setValue(results[0][0].transcript.trim(), true);\n\t\t}\n\t};\n\n\tthis.renderInputAddonBefore = function () {\n\t\tvar addonBefore = _this4.props.addonBefore;\n\n\t\tif (addonBefore) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_InputAddon2.default,\n\t\t\t\tnull,\n\t\t\t\taddonBefore\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tthis.renderInputAddonAfter = function () {\n\t\tvar addonAfter = _this4.props.addonAfter;\n\n\t\tif (addonAfter) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_InputAddon2.default,\n\t\t\t\tnull,\n\t\t\t\taddonAfter\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tthis.renderIcon = function () {\n\t\tif (_this4.props.showIcon) {\n\t\t\treturn _this4.props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderCancelIcon = function () {\n\t\tif (_this4.props.showClear) {\n\t\t\treturn _this4.props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderIcons = function () {\n\t\tvar _props11 = _this4.props,\n\t\t    showIcon = _props11.showIcon,\n\t\t    showClear = _props11.showClear,\n\t\t    renderMic = _props11.renderMic,\n\t\t    getMicInstance = _props11.getMicInstance,\n\t\t    showVoiceSearch = _props11.showVoiceSearch,\n\t\t    iconPosition = _props11.iconPosition,\n\t\t    innerClass = _props11.innerClass;\n\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'right', positionType: 'absolute' },\n\t\t\t\t_this4.state.currentValue && showClear && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: _this4.clearValue, showIcon: showIcon, isClearIcon: true },\n\t\t\t\t\t_this4.renderCancelIcon()\n\t\t\t\t),\n\t\t\t\t_this4.shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n\t\t\t\t\tgetInstance: getMicInstance,\n\t\t\t\t\trender: renderMic,\n\t\t\t\t\tonResult: _this4.handleVoiceResults,\n\t\t\t\t\tclassName: (0, _helper.getClassName)(innerClass, 'mic') || null\n\t\t\t\t}),\n\t\t\t\ticonPosition === 'right' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: _this4.handleSearchIconClick },\n\t\t\t\t\t_this4.renderIcon()\n\t\t\t\t)\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'left', positionType: 'absolute' },\n\t\t\t\ticonPosition === 'left' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: _this4.handleSearchIconClick },\n\t\t\t\t\t_this4.renderIcon()\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\tthis.renderNoSuggestion = function () {\n\t\tvar finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\tvar _props12 = _this4.props,\n\t\t    themePreset = _props12.themePreset,\n\t\t    theme = _props12.theme,\n\t\t    isLoading = _props12.isLoading,\n\t\t    renderNoSuggestion = _props12.renderNoSuggestion,\n\t\t    innerClass = _props12.innerClass,\n\t\t    error = _props12.error,\n\t\t    renderError = _props12.renderError;\n\t\tvar _state = _this4.state,\n\t\t    isOpen = _state.isOpen,\n\t\t    currentValue = _state.currentValue;\n\n\t\tif (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tthemePreset: themePreset,\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tinnerClassName: 'noSuggestion'\n\t\t\t\t},\n\t\t\t\ttypeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderLoader = function () {\n\t\tvar _props13 = _this4.props,\n\t\t    loader = _props13.loader,\n\t\t    isLoading = _props13.isLoading,\n\t\t    themePreset = _props13.themePreset,\n\t\t    theme = _props13.theme,\n\t\t    innerClass = _props13.innerClass;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (isLoading && loader && currentValue) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'loader',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\tloader\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderError = function () {\n\t\tvar _props14 = _this4.props,\n\t\t    error = _props14.error,\n\t\t    renderError = _props14.renderError,\n\t\t    themePreset = _props14.themePreset,\n\t\t    theme = _props14.theme,\n\t\t    isLoading = _props14.isLoading,\n\t\t    innerClass = _props14.innerClass;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (error && renderError && currentValue && !isLoading) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'error',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\t(0, _helper.isFunction)(renderError) ? renderError(error) : renderError\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.getComponent = function () {\n\t\tvar downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\tvar isPopularSuggestionsRender = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar _props15 = _this4.props,\n\t\t    error = _props15.error,\n\t\t    isLoading = _props15.isLoading,\n\t\t    aggregationData = _props15.aggregationData,\n\t\t    promotedResults = _props15.promotedResults,\n\t\t    customData = _props15.customData,\n\t\t    rawData = _props15.rawData;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tvar data = {\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tdownshiftProps: downshiftProps,\n\t\t\tdata: _this4.parsedSuggestions,\n\t\t\tpromotedData: promotedResults || [],\n\t\t\tcustomData: customData || {},\n\t\t\taggregationData: aggregationData || [],\n\t\t\trawData: rawData,\n\t\t\tvalue: currentValue,\n\t\t\ttriggerClickAnalytics: _this4.triggerClickAnalytics,\n\t\t\tresultStats: _this4.stats,\n\t\t\t// TODO: Remove in v4\n\t\t\tquerySuggestions: _this4.normalizedPopularSuggestions,\n\t\t\tpopularSuggestions: _this4.normalizedPopularSuggestions,\n\t\t\trecentSearches: _this4.normalizedRecentSearches\n\t\t};\n\t\tif (isPopularSuggestionsRender) {\n\t\t\treturn (0, _utils.getPopularSuggestionsComponent)({\n\t\t\t\tdownshiftProps: downshiftProps,\n\t\t\t\tdata: _this4.normalizedPopularSuggestions,\n\t\t\t\tvalue: currentValue,\n\t\t\t\tloading: isLoading,\n\t\t\t\terror: error\n\t\t\t}, _this4.props);\n\t\t}\n\t\treturn (0, _helper.getComponent)(data, _this4.props);\n\t};\n\n\tthis.triggerClickAnalytics = function (searchPosition, documentId) {\n\t\tvar docId = documentId;\n\t\tif (!docId) {\n\t\t\tvar hitData = _this4.parsedSuggestions.find(function (hit) {\n\t\t\t\treturn hit._click_id === searchPosition;\n\t\t\t});\n\t\t\tif (hitData && hitData.source && hitData.source._id) {\n\t\t\t\tdocId = hitData.source._id;\n\t\t\t}\n\t\t}\n\t\t_this4.props.triggerAnalytics(searchPosition, docId);\n\t};\n\n\tthis.withTriggerQuery = function (func) {\n\t\tif (func) {\n\t\t\treturn function (e) {\n\t\t\t\treturn func(e, _this4.triggerQuery);\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t};\n\n\tthis.focusSearchBox = function (event) {\n\t\tvar elt = event.target || event.srcElement;\n\t\tvar tagName = elt.tagName;\n\t\tif (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n\t\t\t// already in an input\n\t\t\treturn;\n\t\t}\n\n\t\tif (_this4._inputRef) {\n\t\t\t_this4._inputRef.focus();\n\t\t}\n\t};\n\n\tthis.listenForFocusShortcuts = function () {\n\t\tvar focusShortcuts = _this4.props.focusShortcuts;\n\n\t\tif ((0, _utils.isEmpty)(focusShortcuts)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// for single press keys (a-z, A-Z) &, hotkeys' combinations such as 'cmd+k', 'ctrl+shft+a', etc\n\t\t(0, _hotkeysJs2.default)((0, _utils.parseFocusShortcuts)(focusShortcuts).join(','),\n\t\t/* eslint-disable no-shadow */\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tfunction (event, handler) {\n\t\t\t// Prevent the default refresh event under WINDOWS system\n\t\t\tevent.preventDefault();\n\t\t\t_this4.focusSearchBox(event);\n\t\t});\n\n\t\t// if one of modifier keys are used, they are handled below\n\t\t(0, _hotkeysJs2.default)('*', function (event) {\n\t\t\tvar modifierKeys = (0, _utils.extractModifierKeysFromFocusShortcuts)(focusShortcuts);\n\n\t\t\tif (modifierKeys.length === 0) return;\n\n\t\t\tfor (var index = 0; index < modifierKeys.length; index += 1) {\n\t\t\t\tvar element = modifierKeys[index];\n\t\t\t\tif (_hotkeysJs2.default[element]) {\n\t\t\t\t\t_this4.focusSearchBox(event);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.clearTag = function (tagValue) {\n\t\tvar newSelectedTags = [].concat(_this4.state.selectedTags.filter(function (tag) {\n\t\t\treturn tag !== tagValue;\n\t\t}));\n\t\t_this4.setValue(newSelectedTags, true, _this4.props, _causes2.default.CLEAR_VALUE);\n\t\tif (_this4.props.value !== undefined && typeof _this4.props.onChange === 'function') {\n\t\t\t_this4.props.onChange(newSelectedTags, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.clearAllTags = function () {\n\t\t_this4.setState({ selectedTags: [], currentValue: '', isOpen: false }, function () {\n\t\t\t_this4.updateQuery([], _this4.props);\n\t\t\t_this4.updateDefaultQuery('', _this4.props);\n\t\t\tif (_this4.props.value !== undefined && typeof onChange === 'function') {\n\t\t\t\t_this4.props.onChange([], _this4.triggerQuery);\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.renderTag = function (item) {\n\t\tvar innerClass = _this4.props.innerClass;\n\n\n\t\treturn (0, _core.jsx)(\n\t\t\t_Tags.TagItem,\n\t\t\t{ key: item, className: (0, _helper.getClassName)(innerClass, 'selected-tag') || '' },\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'span',\n\t\t\t\tnull,\n\t\t\t\titem\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'span',\n\t\t\t\t{\n\t\t\t\t\trole: 'img',\n\t\t\t\t\t'aria-label': 'delete-tag',\n\t\t\t\t\tclassName: 'close-icon',\n\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\treturn _this4.clearTag(item);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(0, _core.jsx)(_CancelSvg2.default, null)\n\t\t\t)\n\t\t);\n\t};\n\n\tthis.renderTags = function () {\n\t\tvar selectedTags = _this4.state.selectedTags;\n\n\t\tif (!Array.isArray(selectedTags)) {\n\t\t\treturn null;\n\t\t}\n\t\tvar tagsList = [].concat(selectedTags);\n\t\tvar shouldRenderClearAllTag = tagsList.length > 1;\n\t\tvar _props16 = _this4.props,\n\t\t    renderSelectedTags = _props16.renderSelectedTags,\n\t\t    innerClass = _props16.innerClass;\n\n\n\t\treturn renderSelectedTags ? renderSelectedTags({\n\t\t\tvalues: selectedTags,\n\t\t\thandleClear: _this4.clearTag,\n\t\t\thandleClearAll: _this4.clearAllTags\n\t\t}) : (0, _core.jsx)(\n\t\t\t_Tags.TagsContainer,\n\t\t\tnull,\n\t\t\ttagsList.map(function (item) {\n\t\t\t\treturn _this4.renderTag(item);\n\t\t\t}),\n\t\t\tshouldRenderClearAllTag && (0, _core.jsx)(\n\t\t\t\t_Tags.TagItem,\n\t\t\t\t{ 'class': (0, _helper.getClassName)(innerClass, 'selected-tag') || '' },\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t'span',\n\t\t\t\t\tnull,\n\t\t\t\t\t'Clear All'\n\t\t\t\t),\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t'span',\n\t\t\t\t\t{\n\t\t\t\t\t\trole: 'img',\n\t\t\t\t\t\t'aria-label': 'delete-tag',\n\t\t\t\t\t\tclassName: 'close-icon',\n\t\t\t\t\t\tonClick: _this4.clearAllTags\n\t\t\t\t\t},\n\t\t\t\t\t(0, _core.jsx)(_CancelSvg2.default, null)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n};\n\nDataSearch.propTypes = {\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\tfetchPopularSuggestions: _types2.default.funcRequired,\n\tfetchRecentSearches: _types2.default.funcRequired,\n\trecentSearches: _types2.default.suggestions,\n\toptions: _types2.default.options,\n\tselectedValue: _types2.default.selectedValue,\n\tsuggestions: _types2.default.suggestions,\n\tdefaultPopularSuggestions: _types2.default.suggestions,\n\trawData: _types2.default.rawData,\n\taggregationData: _types2.default.aggregationData,\n\tsetCustomQuery: _types2.default.funcRequired,\n\tsetDefaultQuery: _types2.default.funcRequired,\n\tsetCustomHighlightOptions: _types2.default.funcRequired,\n\tsetSuggestionsSearchValue: _types2.default.funcRequired,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\tresetStore: _types2.default.funcRequired,\n\terror: _types2.default.title,\n\tisLoading: _types2.default.bool,\n\tlastUsedQuery: _types2.default.string,\n\ttime: _types2.default.number,\n\tenableAppbase: _types2.default.bool,\n\t// component props\n\tautoFocus: _types2.default.bool,\n\tautosuggest: _types2.default.bool,\n\tenableSynonyms: _types2.default.bool,\n\tdistinctField: _types2.default.string,\n\tdistinctFieldConfig: _types2.default.componentObject,\n\tindex: _types2.default.string,\n\t// TODO: Remove in v4\n\tenableQuerySuggestions: _types2.default.bool,\n\tenablePopularSuggestions: _types2.default.bool,\n\tenableRecentSearches: _types2.default.bool,\n\tqueryString: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tclearIcon: _types2.default.children,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomHighlight: _types2.default.func,\n\thighlightConfig: _types2.default.componentObject,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdataField: _types2.default.dataFieldValidator,\n\taggregationField: _types2.default.string,\n\taggregationSize: _types2.default.number,\n\tsize: _types2.default.number,\n\tdebounce: _types2.default.number,\n\tdefaultValue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n\tvalue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n\tdefaultSuggestions: _types2.default.suggestions,\n\tpromotedResults: _types2.default.hits,\n\tcustomData: _types2.default.title,\n\tdownShiftProps: _types2.default.props,\n\tchildren: _types2.default.func,\n\texcludeFields: _types2.default.excludeFields,\n\tfieldWeights: _types2.default.fieldWeights,\n\tfilterLabel: _types2.default.string,\n\tfuzziness: _types2.default.fuzziness,\n\thighlight: _types2.default.bool,\n\thighlightField: _types2.default.stringOrArray,\n\ticon: _types2.default.children,\n\ticonPosition: _types2.default.iconPosition,\n\tinnerClass: _types2.default.style,\n\tincludeFields: _types2.default.includeFields,\n\tloader: _types2.default.title,\n\tnestedField: _types2.default.string,\n\tonError: _types2.default.func,\n\tonBlur: _types2.default.func,\n\tonFocus: _types2.default.func,\n\tonKeyDown: _types2.default.func,\n\tonKeyPress: _types2.default.func,\n\tonKeyUp: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonSuggestions: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tonValueSelected: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\tpopularSuggestions: _types2.default.hits,\n\treact: _types2.default.react,\n\trender: _types2.default.func,\n\t// TODO: Remove in v4\n\trenderQuerySuggestions: _types2.default.func,\n\trenderPopularSuggestions: _types2.default.func,\n\trenderError: _types2.default.title,\n\tparseSuggestion: _types2.default.func,\n\trenderNoSuggestion: _types2.default.title,\n\tshowClear: _types2.default.bool,\n\tshowDistinctSuggestions: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tshowIcon: _types2.default.bool,\n\tshowVoiceSearch: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\ttheme: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\ttype: _types2.default.string,\n\tURLParams: _types2.default.bool,\n\tstrictSelection: _types2.default.bool,\n\tsearchOperators: _types2.default.bool,\n\tenablePredictiveSuggestions: _types2.default.bool,\n\trecentSearchesIcon: _types2.default.componentObject,\n\tpopularSearchesIcon: _types2.default.componentObject,\n\t// Mic props\n\tgetMicInstance: _types2.default.func,\n\trenderMic: _types2.default.func,\n\t//\n\tfocusShortcuts: _types2.default.focusShortcuts,\n\taddonBefore: _types2.default.children,\n\taddonAfter: _types2.default.children,\n\texpandSuggestionsContainer: _types2.default.bool,\n\tenableDefaultSuggestions: _types2.default.bool,\n\tendpoint: _types2.default.endpoint,\n\tmode: (0, _propTypes.oneOf)(['select', 'tag']),\n\trenderSelectedTags: _types2.default.func\n};\n\nDataSearch.defaultProps = {\n\tautosuggest: true,\n\tclassName: null,\n\tdebounce: 0,\n\tdownShiftProps: {},\n\tenableSynonyms: true,\n\tenablePopularSuggestions: false,\n\texcludeFields: [],\n\ticonPosition: 'left',\n\tincludeFields: ['*'],\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowFilter: true,\n\tshowIcon: true,\n\tshowVoiceSearch: false,\n\tstyle: {},\n\tURLParams: false,\n\tshowClear: false,\n\tshowDistinctSuggestions: true,\n\tstrictSelection: false,\n\tsearchOperators: false,\n\tsize: 10,\n\tenablePredictiveSuggestions: false,\n\trecentSearches: [],\n\tdefaultPopularSuggestions: [],\n\ttime: 0,\n\tfocusShortcuts: ['/'],\n\taddonBefore: undefined,\n\taddonAfter: undefined,\n\texpandSuggestionsContainer: true,\n\tenableDefaultSuggestions: true,\n\tmode: 'select'\n};\n\n// Add componentType for SSR\nDataSearch.componentType = _constants.componentTypes.dataSearch;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tsuggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\t\trawData: state.rawData[props.componentId],\n\t\taggregationData: state.compositeAggregations[props.componentId],\n\t\tthemePreset: state.config.themePreset,\n\t\tisLoading: !!state.isLoading[props.componentId + '_active'],\n\t\terror: state.error[props.componentId],\n\t\tenableAppbase: state.config.enableAppbase,\n\t\tpromotedResults: state.promotedResults[props.componentId],\n\t\tcustomData: state.customData[props.componentId],\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tpopularSuggestions: state.querySuggestions[props.componentId],\n\t\tdefaultPopularSuggestions: state.defaultPopularSuggestions[props.componentId],\n\t\trecentSearches: state.recentSearches.data,\n\t\tlastUsedQuery: state.queryToHits[props.componentId]\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetCustomHighlightOptions: function setCustomHighlightOptions(component, options) {\n\t\t\treturn dispatch((0, _actions.setCustomHighlightOptions)(component, options));\n\t\t},\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t},\n\t\tsetSuggestionsSearchValue: function setSuggestionsSearchValue(value) {\n\t\t\treturn dispatch((0, _actions.setSuggestionsSearchValue)(value));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions() {\n\t\t\treturn dispatch(_actions.setQueryOptions.apply(undefined, arguments));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n\t\t\treturn dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n\t\t},\n\t\tfetchRecentSearches: function fetchRecentSearches(queryOptions) {\n\t\t\treturn dispatch((0, _actions.getRecentSearches)(queryOptions));\n\t\t},\n\t\tfetchPopularSuggestions: function fetchPopularSuggestions(component) {\n\t\t\treturn dispatch((0, _actions.loadPopularSuggestions)(component));\n\t\t},\n\t\tresetStore: function resetStore(componentId) {\n\t\t\treturn dispatch((0, _actions.resetStoreForComponent)(componentId));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(DataSearch, _extends({ ref: props.myForwardedRef }, props));\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(\n\t\t_PreferencesConsumer2.default,\n\t\t{ userProps: props },\n\t\tfunction (preferenceProps) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_ComponentWrapper2.default,\n\t\t\t\t_extends({}, preferenceProps, {\n\t\t\t\t\tinternalComponent: true,\n\t\t\t\t\tcomponentType: _constants.componentTypes.dataSearch\n\t\t\t\t}),\n\t\t\t\tfunction (componentProps) {\n\t\t\t\t\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n\t\t\t\t\t\tmyForwardedRef: ref\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DataSearch);\n\nForwardRefComponent.displayName = 'DataSearch';\nexports.default = ForwardRefComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}