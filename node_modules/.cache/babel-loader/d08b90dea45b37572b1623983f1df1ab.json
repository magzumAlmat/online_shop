{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\n\nvar _core = require('@emotion/core');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _suggestions = require('@appbaseio/reactivecore/lib/utils/suggestions');\n\nvar _query = require('@appbaseio/reactivecore/lib/actions/query');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _PreferencesConsumer = require('../../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _Container = require('../../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _utils = require('../../../utils');\n\nvar _Input = require('../../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Title = require('../../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _HierarchicalMenuComponent = require('./HierarchicalMenuComponent');\n\nvar _HierarchicalMenuComponent2 = _interopRequireDefault(_HierarchicalMenuComponent);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar useConstructor = function useConstructor() {\n  var callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n  var _useState = (0, _react.useState)(false),\n      hasBeenCalled = _useState[0],\n      setHasBeenCalled = _useState[1];\n\n  if (hasBeenCalled) return;\n  callBack();\n  setHasBeenCalled(true);\n};\n\nvar transformValueIntoLocalState = function transformValueIntoLocalState(valueArray) {\n  var valueToSet = {};\n\n  if (valueArray.length) {\n    var newSelectedValues = {};\n    valueArray.forEach(function (valueItem) {\n      (0, _helper.setDeep)(newSelectedValues, valueItem.split(' > '), !(0, _helper.recLookup)(newSelectedValues, valueItem.split(' > '), _constants.TREELIST_VALUES_PATH_SEPARATOR), true);\n    });\n    valueToSet = newSelectedValues;\n  }\n\n  return valueToSet;\n};\n\nvar TreeList = function TreeList(props) {\n  var showCount = props.showCount,\n      mode = props.mode,\n      showLine = props.showLine,\n      renderItem = props.renderItem,\n      showSearch = props.showSearch,\n      placeholder = props.placeholder,\n      componentId = props.componentId,\n      themePreset = props.themePreset,\n      innerClass = props.innerClass,\n      className = props.className,\n      title = props.title,\n      style = props.style,\n      rawData = props.rawData,\n      error = props.error,\n      isLoading = props.isLoading,\n      showCheckbox = props.showCheckbox,\n      showRadio = props.showRadio,\n      dataField = props.dataField,\n      sortBy = props.sortBy,\n      renderError = props.renderError,\n      renderNoResults = props.renderNoResults,\n      loader = props.loader,\n      aggregationData = props.aggregationData,\n      showSwitcherIcon = props.showSwitcherIcon,\n      switcherIcon = props.switcherIcon;\n  var hasMounted = (0, _react.useRef)();\n\n  var _useState2 = (0, _react.useState)(''),\n      searchTerm = _useState2[0],\n      setSearchTerm = _useState2[1];\n\n  var _useState3 = (0, _react.useState)({}),\n      selectedValues = _useState3[0],\n      setSelectedValues = _useState3[1];\n\n  var filterDataBasedOnSearchTerm = function filterDataBasedOnSearchTerm(listArray, parentPath) {\n    if (!(listArray && Array.isArray(listArray) && listArray.length)) {\n      return null;\n    }\n\n    var result = [];\n    listArray.forEach(function (ele) {\n      var isLeafItem = !ele.list;\n      var newParentPath = ele.key;\n\n      if (parentPath) {\n        newParentPath = parentPath + '.' + ele.key;\n      }\n\n      var keyHasSearchTerm = (0, _suggestions.replaceDiacritics)(ele.key).toLowerCase().includes((0, _suggestions.replaceDiacritics)(searchTerm).toLowerCase()) || (0, _helper.recLookup)(selectedValues, newParentPath, _constants.TREELIST_VALUES_PATH_SEPARATOR);\n\n      if (isLeafItem && keyHasSearchTerm) {\n        result.push(_extends({}, ele, {\n          initiallyExpanded: keyHasSearchTerm\n        }));\n      } else if (!isLeafItem) {\n        var filteredChildrenItems = filterDataBasedOnSearchTerm(ele.list, newParentPath);\n\n        if (keyHasSearchTerm || !!filteredChildrenItems.length) {\n          result.push(_extends({}, ele, {\n            initiallyExpanded: keyHasSearchTerm || !!filteredChildrenItems.length,\n            list: filteredChildrenItems\n          }));\n        }\n      }\n    });\n    return result;\n  };\n\n  var getTransformedData = (0, _react.useMemo)(function () {\n    var transformedData = (0, _helper.transformRawTreeListData)(aggregationData, dataField);\n    var filteredData = [];\n\n    if (showSearch && searchTerm) {\n      filteredData = filterDataBasedOnSearchTerm(transformedData, '');\n    }\n\n    return filteredData.length ? filteredData : transformedData;\n  }, [aggregationData, dataField, searchTerm, showSearch]);\n\n  var generateQueryOptions = function generateQueryOptions() {\n    var queryOptions = (0, _helper.getQueryOptions)(props);\n    var valueArray = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues);\n    return (0, _helper.getAggsQuery)(valueArray, queryOptions, props);\n  };\n\n  var updateQueryOptions = function updateQueryOptions() {\n    // for a new query due to other changes don't append after to get fresh results\n    var queryOptions = generateQueryOptions(props, {}, (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues));\n\n    if (props.defaultQuery) {\n      // eslint-disable-next-line no-use-before-define\n      updateDefaultQuery(queryOptions);\n    } else {\n      props.setQueryOptions((0, _transform.getInternalComponentID)(componentId), queryOptions);\n    }\n  };\n\n  var getDefaultQuery = function getDefaultQuery(value) {\n    var query = null;\n    var type = 'term';\n    var booleanAggregator = props.queryFormat === 'or' ? 'should' : 'must';\n\n    if (!Array.isArray(value) || value.length === 0) {\n      return null;\n    }\n\n    if (value) {\n      var _bool; // adds a sub-query with must as an array of objects for each term/value\n\n\n      var queryArray = value.map(function (item) {\n        return {\n          bool: {\n            must: item.split(' > ').map(function (subItem, i) {\n              var _type, _ref;\n\n              return _ref = {}, _ref[type] = (_type = {}, _type[props.dataField[i]] = subItem, _type), _ref;\n            })\n          }\n        };\n      });\n      var listQuery = {\n        bool: (_bool = {}, _bool[booleanAggregator] = queryArray, _bool)\n      };\n      query = value.length ? listQuery : null;\n    }\n\n    if (query && props.nestedField) {\n      return {\n        nested: {\n          path: props.nestedField,\n          query: query\n        }\n      };\n    }\n\n    return query;\n  };\n\n  var updateQuery = function updateQuery(value) {\n    var customQuery = props.customQuery;\n    var query = getDefaultQuery(value);\n    var customQueryOptions = void 0;\n\n    if (customQuery) {\n      var _ref2 = customQuery(value, props) || {};\n\n      query = _ref2.query;\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n      (0, _helper.updateCustomQuery)(props.componentId, props, value);\n    }\n\n    props.setQueryOptions(props.componentId, _extends({}, generateQueryOptions(), customQueryOptions));\n    props.updateQuery({\n      componentId: props.componentId,\n      query: query,\n      value: value,\n      label: props.filterLabel,\n      showFilter: props.showFilter,\n      URLParams: props.URLParams,\n      componentType: _constants.componentTypes.treeList\n    });\n  };\n\n  function updateDefaultQuery(queryOptions) {\n    var value = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues); // Update default query for RS API\n\n    (0, _helper.updateDefaultQuery)(componentId, props, value);\n    (0, _helper.updateInternalQuery)((0, _transform.getInternalComponentID)(componentId), queryOptions, value, props, generateQueryOptions(), null);\n  }\n\n  var setValue = function setValue(value) {\n    var hasMountedParam = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : hasMounted.current;\n    var finalValues = Array.isArray(value) === false ? (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(value) : value;\n\n    var performUpdate = function performUpdate() {\n      var handleUpdates = function handleUpdates() {\n        updateQuery(finalValues);\n        if (props.onValueChange) props.onValueChange(finalValues);\n      };\n\n      if (hasMountedParam) {\n        setSelectedValues(Array.isArray(value) ? transformValueIntoLocalState(value) : value);\n        handleUpdates();\n      } else {\n        handleUpdates();\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, finalValues, props.beforeValueChange, performUpdate);\n  };\n\n  useConstructor(function () {\n    hasMounted.current = false;\n    var defaultValue = props.defaultValue || props.value;\n    var currentValueArray = props.selectedValue || defaultValue || []; // update local state for selected values\n\n    if (currentValueArray.length) {\n      var newSelectedValues = transformValueIntoLocalState(currentValueArray);\n      setValue(newSelectedValues, true);\n    } // Set custom and default queries in store\n\n\n    (0, _helper.updateCustomQuery)(componentId, props, currentValueArray);\n    (0, _helper.updateDefaultQuery)(componentId, props, currentValueArray);\n    updateQueryOptions();\n  });\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      updateDefaultQuery();\n      updateQuery([]);\n    }\n  }, [props.defaultQuery]);\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      var valueArray = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues) || [];\n      updateQuery(valueArray);\n    }\n  }, [props.customQuery]);\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      updateQueryOptions();\n    }\n  }, [sortBy]);\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      var valueArray = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues) || [];\n      updateQueryOptions();\n      updateQuery(valueArray);\n    }\n  }, [dataField]);\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      if (props.value !== undefined) {\n        setValue(props.value);\n      }\n    }\n  }, [props.value]);\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      if (!(0, _helper.isEqual)((0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues), props.selectedValue)) {\n        var value = props.value,\n            onChange = props.onChange;\n        var valueToSet = [];\n\n        if (Array.isArray(props.selectedValue) && props.selectedValue.length) {\n          valueToSet = props.selectedValue;\n        }\n\n        if (value === undefined) {\n          setValue(valueToSet);\n        } else if (onChange && !(0, _helper.isEqual)(value, valueToSet)) {\n          onChange(valueToSet);\n        }\n      }\n    }\n  }, [props.selectedValue]);\n  (0, _react.useEffect)(function () {\n    hasMounted.current = true;\n  }, []);\n\n  var handleInputChange = function handleInputChange(e) {\n    var value = e.target.value;\n    setSearchTerm(value);\n  };\n\n  var renderSearch = function renderSearch() {\n    if (showSearch) {\n      return (0, _core.jsx)(_Input2.default, {\n        className: (0, _helper.getClassName)(innerClass, 'input') || null,\n        onChange: handleInputChange,\n        value: searchTerm,\n        placeholder: placeholder || 'Search',\n        style: {\n          margin: '0 0 8px'\n        },\n        'aria-label': componentId + '-search',\n        themePreset: themePreset\n      });\n    }\n\n    return null;\n  };\n\n  var sanitizeObject = function sanitizeObject(obj) {\n    return JSON.parse(JSON.stringify(obj, function (key, value) {\n      return (// eslint-disable-next-line eqeqeq\n        value === null || value == {} || value === false ? undefined : value\n      );\n    }));\n  };\n\n  var handleListItemClick = function handleListItemClick(key, parentPath) {\n    var path = key;\n\n    if (parentPath) {\n      path = '' + parentPath + _constants.TREELIST_VALUES_PATH_SEPARATOR + key;\n    }\n\n    var newSelectedValues = _extends({}, selectedValues);\n\n    if (mode === 'single') {\n      newSelectedValues = {};\n      (0, _helper.setDeep)(newSelectedValues, path.split(_constants.TREELIST_VALUES_PATH_SEPARATOR), true, true);\n    } else {\n      var newValue = !(0, _helper.recLookup)(newSelectedValues, path, _constants.TREELIST_VALUES_PATH_SEPARATOR);\n      (0, _helper.setDeep)(newSelectedValues, path.split(_constants.TREELIST_VALUES_PATH_SEPARATOR), newValue, true);\n    }\n\n    newSelectedValues = sanitizeObject(_extends({}, newSelectedValues));\n\n    if (props.value === undefined) {\n      setValue(newSelectedValues);\n    } else if (props.onChange) {\n      var valueToSet = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(newSelectedValues);\n      props.onChange(valueToSet);\n    }\n  };\n\n  var renderIcon = function renderIcon(isLeafNode) {\n    var showIcon = props.showIcon,\n        showLeafIcon = props.showLeafIcon,\n        icon = props.icon,\n        leafIcon = props.leafIcon;\n\n    if (isLeafNode) {\n      if (!showLeafIcon) return null;\n\n      if (leafIcon) {\n        return leafIcon;\n      }\n\n      return (0, _core.jsx)('span', {\n        role: 'img',\n        'aria-label': 'file',\n        className: '--leaf-icon'\n      }, (0, _core.jsx)('svg', {\n        viewBox: '64 64 896 896',\n        focusable: 'false',\n        'data-icon': 'file',\n        width: '1em',\n        height: '1em',\n        fill: 'currentColor',\n        'aria-hidden': 'true'\n      }, (0, _core.jsx)('path', {\n        d: 'M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z'\n      })));\n    }\n\n    if (!showIcon) return null;\n\n    if (icon) {\n      return icon;\n    }\n\n    return (0, _core.jsx)('span', {\n      role: 'img',\n      'aria-label': 'folder-open',\n      className: '--folder-icon'\n    }, (0, _core.jsx)('svg', {\n      viewBox: '64 64 896 896',\n      focusable: 'false',\n      'data-icon': 'folder-open',\n      width: '1em',\n      height: '1em',\n      fill: 'currentColor',\n      'aria-hidden': 'true'\n    }, (0, _core.jsx)('path', {\n      d: 'M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z'\n    })));\n  };\n\n  var getComponent = function getComponent() {\n    var data = {\n      data: getTransformedData,\n      rawData: rawData,\n      error: error,\n      handleClick: handleListItemClick,\n      value: selectedValues,\n      loading: isLoading\n    };\n    return (0, _helper.getComponent)(data, props);\n  };\n\n  if (isLoading) {\n    return loader || null;\n  }\n\n  if (renderError && error) {\n    return (0, _helper.isFunction)(renderError) ? renderError(error) : renderError;\n  }\n\n  if (!getTransformedData || getTransformedData.length === 0) {\n    return renderNoResults ? renderNoResults() : null;\n  }\n\n  return (0, _core.jsx)(_Container2.default, {\n    style: style,\n    className: className\n  }, props.title && (0, _core.jsx)(_Title2.default, {\n    className: (0, _helper.getClassName)(innerClass, 'title') || null\n  }, title), renderSearch(), (0, _helper.hasCustomRenderer)(props) ? getComponent() : (0, _core.jsx)(_HierarchicalMenuComponent2.default, {\n    key: 'initial-node',\n    listArray: getTransformedData,\n    parentPath: '',\n    isExpanded: true,\n    listItemProps: {\n      mode: mode,\n      selectedValues: selectedValues,\n      searchTerm: searchTerm,\n      showLine: showLine,\n      renderItem: renderItem,\n      handleListItemClick: handleListItemClick,\n      showCheckbox: showCheckbox,\n      innerClass: innerClass,\n      showRadio: showRadio,\n      renderIcon: renderIcon,\n      showCount: showCount,\n      showSwitcherIcon: showSwitcherIcon,\n      switcherIcon: switcherIcon\n    }\n  }));\n};\n\nTreeList.propTypes = {\n  selectedValue: _types2.default.selectedValue,\n  error: _types2.default.title,\n  rawData: _types2.default.rawData,\n  aggregationData: _types2.default.rawData,\n  themePreset: _types2.default.themePreset,\n  updateQuery: _types2.default.funcRequired,\n  setQueryOptions: _types2.default.funcRequired,\n  // component props\n  componentId: _types2.default.string.isRequired,\n  className: _types2.default.string,\n  style: _types2.default.style,\n  showRadio: _types2.default.bool,\n  showCheckbox: _types2.default.bool,\n  mode: _propTypes2.default.oneOf(['single', 'multiple']),\n  showCount: _types2.default.bool,\n  showSearch: _types2.default.bool,\n  showIcon: _types2.default.bool,\n  icon: _types2.default.children,\n  showLeafIcon: _types2.default.bool,\n  leafIcon: _types2.default.children,\n  showLine: _types2.default.bool,\n  switcherIcon: _types2.default.func,\n  render: _types2.default.func,\n  renderItem: _types2.default.func,\n  innerClass: _types2.default.style,\n  placeholder: _types2.default.string,\n  title: _types2.default.title,\n  isLoading: _types2.default.bool,\n  dataField: _types2.default.stringArray.isRequired,\n  onQueryChange: _types2.default.func,\n  defaultValue: _types2.default.stringArray,\n  value: _types2.default.stringArray,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  index: _types2.default.string,\n  showFilter: _types2.default.bool,\n  URLParams: _types2.default.bool,\n  filterLabel: _types2.default.string,\n  onChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  beforeValueChange: _types2.default.func,\n  sortBy: _types2.default.sortByWithCount,\n  onError: _types2.default.func,\n  showSwitcherIcon: _types2.default.bool,\n  renderError: _types2.default.title,\n  renderNoResults: _types2.default.func,\n  loader: _types2.default.title,\n  aggergationSize: _types2.default.number,\n  endpoint: _types2.default.endpoint,\n  queryFormat: _types2.default.queryFormatSearch,\n  size: _types2.default.number,\n  nestedField: _types2.default.string\n};\nTreeList.defaultProps = {\n  className: null,\n  showSwitcherIcon: true,\n  style: null,\n  showRadio: false,\n  showCheckbox: false,\n  mode: 'multiple',\n  showCount: false,\n  showSearch: false,\n  showIcon: false,\n  showLeafIcon: false,\n  showLine: false,\n  URLParams: false,\n  sortBy: 'count',\n  queryFormat: 'or',\n  size: 100\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    rawData: state.rawData[props.componentId] || {},\n    aggregationData: props.nestedField && state.aggregations[props.componentId] ? state.aggregations[props.componentId].reactivesearch_nested : state.aggregations[props.componentId] || {},\n    themePreset: state.config.themePreset,\n    error: state.error[props.componentId],\n    isLoading: state.isLoading[props.componentId]\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setQueryOptions: function setQueryOptions(component, props) {\n      return dispatch((0, _query.setQueryOptions)(component, props));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _query.updateQuery)(updateQueryObject));\n    }\n  };\n}; // Add componentType for SSR\n\n\nTreeList.componentType = _constants.componentTypes.treeList;\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)(TreeList, _extends({\n    ref: props.myForwardedRef\n  }, props));\n}));\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(_PreferencesConsumer2.default, {\n    userProps: props\n  }, function (preferenceProps) {\n    return (0, _core.jsx)(_ComponentWrapper2.default, _extends({}, preferenceProps, {\n      internalComponent: true,\n      componentType: _constants.componentTypes.treeList,\n      mode: preferenceProps.testMode ? 'test' : ''\n    }), function (componentProps) {\n      return (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n        myForwardedRef: ref\n      }));\n    });\n  });\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, TreeList);\nForwardRefComponent.displayName = 'TreeList';\nexports.default = ForwardRefComponent;","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_core","require","_constants","_emotionTheming","_propTypes","_propTypes2","_interopRequireDefault","_hoistNonReactStatics","_hoistNonReactStatics2","_react","_react2","_types","_types2","_helper","_suggestions","_query","_transform","_PreferencesConsumer","_PreferencesConsumer2","_ComponentWrapper","_ComponentWrapper2","_Container","_Container2","_utils","_Input","_Input2","_Title","_Title2","_HierarchicalMenuComponent","_HierarchicalMenuComponent2","obj","default","useConstructor","callBack","undefined","_useState","useState","hasBeenCalled","setHasBeenCalled","transformValueIntoLocalState","valueArray","valueToSet","newSelectedValues","forEach","valueItem","setDeep","split","recLookup","TREELIST_VALUES_PATH_SEPARATOR","TreeList","props","showCount","mode","showLine","renderItem","showSearch","placeholder","componentId","themePreset","innerClass","className","title","style","rawData","error","isLoading","showCheckbox","showRadio","dataField","sortBy","renderError","renderNoResults","loader","aggregationData","showSwitcherIcon","switcherIcon","hasMounted","useRef","_useState2","searchTerm","setSearchTerm","_useState3","selectedValues","setSelectedValues","filterDataBasedOnSearchTerm","listArray","parentPath","Array","isArray","result","ele","isLeafItem","list","newParentPath","keyHasSearchTerm","replaceDiacritics","toLowerCase","includes","push","initiallyExpanded","filteredChildrenItems","getTransformedData","useMemo","transformedData","transformRawTreeListData","filteredData","generateQueryOptions","queryOptions","getQueryOptions","transformTreeListLocalStateIntoQueryComptaibleFormat","getAggsQuery","updateQueryOptions","defaultQuery","updateDefaultQuery","setQueryOptions","getInternalComponentID","getDefaultQuery","value","query","type","booleanAggregator","queryFormat","_bool","queryArray","map","item","bool","must","subItem","_type","_ref","listQuery","nestedField","nested","path","updateQuery","customQuery","customQueryOptions","_ref2","getOptionsFromQuery","updateCustomQuery","label","filterLabel","showFilter","URLParams","componentType","componentTypes","treeList","updateInternalQuery","setValue","hasMountedParam","current","finalValues","performUpdate","handleUpdates","onValueChange","checkValueChange","beforeValueChange","defaultValue","currentValueArray","selectedValue","useEffect","isEqual","onChange","handleInputChange","e","renderSearch","jsx","getClassName","margin","sanitizeObject","JSON","parse","stringify","handleListItemClick","newValue","renderIcon","isLeafNode","showIcon","showLeafIcon","icon","leafIcon","role","viewBox","focusable","width","height","fill","d","getComponent","data","handleClick","loading","isFunction","hasCustomRenderer","isExpanded","listItemProps","propTypes","funcRequired","string","isRequired","oneOf","children","func","render","stringArray","onQueryChange","index","sortByWithCount","onError","aggergationSize","number","endpoint","queryFormatSearch","size","defaultProps","mapStateToProps","state","aggregations","reactivesearch_nested","config","mapDispatchtoProps","dispatch","component","updateQueryObject","ConnectedComponent","connect","withTheme","ref","myForwardedRef","ForwardRefComponent","forwardRef","userProps","preferenceProps","internalComponent","testMode","componentProps","displayName"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/list/TreeList/index.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /** @jsxRuntime classic */\n/** @jsx jsx */\n\n\nvar _core = require('@emotion/core');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _suggestions = require('@appbaseio/reactivecore/lib/utils/suggestions');\n\nvar _query = require('@appbaseio/reactivecore/lib/actions/query');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _PreferencesConsumer = require('../../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _Container = require('../../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _utils = require('../../../utils');\n\nvar _Input = require('../../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Title = require('../../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _HierarchicalMenuComponent = require('./HierarchicalMenuComponent');\n\nvar _HierarchicalMenuComponent2 = _interopRequireDefault(_HierarchicalMenuComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar useConstructor = function useConstructor() {\n\tvar callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n\tvar _useState = (0, _react.useState)(false),\n\t    hasBeenCalled = _useState[0],\n\t    setHasBeenCalled = _useState[1];\n\n\tif (hasBeenCalled) return;\n\tcallBack();\n\tsetHasBeenCalled(true);\n};\n\nvar transformValueIntoLocalState = function transformValueIntoLocalState(valueArray) {\n\tvar valueToSet = {};\n\tif (valueArray.length) {\n\t\tvar newSelectedValues = {};\n\t\tvalueArray.forEach(function (valueItem) {\n\t\t\t(0, _helper.setDeep)(newSelectedValues, valueItem.split(' > '), !(0, _helper.recLookup)(newSelectedValues, valueItem.split(' > '), _constants.TREELIST_VALUES_PATH_SEPARATOR), true);\n\t\t});\n\t\tvalueToSet = newSelectedValues;\n\t}\n\treturn valueToSet;\n};\n\nvar TreeList = function TreeList(props) {\n\tvar showCount = props.showCount,\n\t    mode = props.mode,\n\t    showLine = props.showLine,\n\t    renderItem = props.renderItem,\n\t    showSearch = props.showSearch,\n\t    placeholder = props.placeholder,\n\t    componentId = props.componentId,\n\t    themePreset = props.themePreset,\n\t    innerClass = props.innerClass,\n\t    className = props.className,\n\t    title = props.title,\n\t    style = props.style,\n\t    rawData = props.rawData,\n\t    error = props.error,\n\t    isLoading = props.isLoading,\n\t    showCheckbox = props.showCheckbox,\n\t    showRadio = props.showRadio,\n\t    dataField = props.dataField,\n\t    sortBy = props.sortBy,\n\t    renderError = props.renderError,\n\t    renderNoResults = props.renderNoResults,\n\t    loader = props.loader,\n\t    aggregationData = props.aggregationData,\n\t    showSwitcherIcon = props.showSwitcherIcon,\n\t    switcherIcon = props.switcherIcon;\n\n\tvar hasMounted = (0, _react.useRef)();\n\n\tvar _useState2 = (0, _react.useState)(''),\n\t    searchTerm = _useState2[0],\n\t    setSearchTerm = _useState2[1];\n\n\tvar _useState3 = (0, _react.useState)({}),\n\t    selectedValues = _useState3[0],\n\t    setSelectedValues = _useState3[1];\n\n\tvar filterDataBasedOnSearchTerm = function filterDataBasedOnSearchTerm(listArray, parentPath) {\n\t\tif (!(listArray && Array.isArray(listArray) && listArray.length)) {\n\t\t\treturn null;\n\t\t}\n\t\tvar result = [];\n\t\tlistArray.forEach(function (ele) {\n\t\t\tvar isLeafItem = !ele.list;\n\t\t\tvar newParentPath = ele.key;\n\t\t\tif (parentPath) {\n\t\t\t\tnewParentPath = parentPath + '.' + ele.key;\n\t\t\t}\n\t\t\tvar keyHasSearchTerm = (0, _suggestions.replaceDiacritics)(ele.key).toLowerCase().includes((0, _suggestions.replaceDiacritics)(searchTerm).toLowerCase()) || (0, _helper.recLookup)(selectedValues, newParentPath, _constants.TREELIST_VALUES_PATH_SEPARATOR);\n\n\t\t\tif (isLeafItem && keyHasSearchTerm) {\n\t\t\t\tresult.push(_extends({}, ele, {\n\t\t\t\t\tinitiallyExpanded: keyHasSearchTerm\n\t\t\t\t}));\n\t\t\t} else if (!isLeafItem) {\n\t\t\t\tvar filteredChildrenItems = filterDataBasedOnSearchTerm(ele.list, newParentPath);\n\t\t\t\tif (keyHasSearchTerm || !!filteredChildrenItems.length) {\n\t\t\t\t\tresult.push(_extends({}, ele, {\n\t\t\t\t\t\tinitiallyExpanded: keyHasSearchTerm || !!filteredChildrenItems.length,\n\t\t\t\t\t\tlist: filteredChildrenItems\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t};\n\n\tvar getTransformedData = (0, _react.useMemo)(function () {\n\t\tvar transformedData = (0, _helper.transformRawTreeListData)(aggregationData, dataField);\n\t\tvar filteredData = [];\n\t\tif (showSearch && searchTerm) {\n\t\t\tfilteredData = filterDataBasedOnSearchTerm(transformedData, '');\n\t\t}\n\t\treturn filteredData.length ? filteredData : transformedData;\n\t}, [aggregationData, dataField, searchTerm, showSearch]);\n\tvar generateQueryOptions = function generateQueryOptions() {\n\t\tvar queryOptions = (0, _helper.getQueryOptions)(props);\n\t\tvar valueArray = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues);\n\t\treturn (0, _helper.getAggsQuery)(valueArray, queryOptions, props);\n\t};\n\n\tvar updateQueryOptions = function updateQueryOptions() {\n\t\t// for a new query due to other changes don't append after to get fresh results\n\t\tvar queryOptions = generateQueryOptions(props, {}, (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues));\n\t\tif (props.defaultQuery) {\n\t\t\t// eslint-disable-next-line no-use-before-define\n\t\t\tupdateDefaultQuery(queryOptions);\n\t\t} else {\n\t\t\tprops.setQueryOptions((0, _transform.getInternalComponentID)(componentId), queryOptions);\n\t\t}\n\t};\n\n\tvar getDefaultQuery = function getDefaultQuery(value) {\n\t\tvar query = null;\n\t\tvar type = 'term';\n\t\tvar booleanAggregator = props.queryFormat === 'or' ? 'should' : 'must';\n\n\t\tif (!Array.isArray(value) || value.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvar _bool;\n\n\t\t\t// adds a sub-query with must as an array of objects for each term/value\n\t\t\tvar queryArray = value.map(function (item) {\n\t\t\t\treturn {\n\t\t\t\t\tbool: {\n\t\t\t\t\t\tmust: item.split(' > ').map(function (subItem, i) {\n\t\t\t\t\t\t\tvar _type, _ref;\n\n\t\t\t\t\t\t\treturn _ref = {}, _ref[type] = (_type = {}, _type[props.dataField[i]] = subItem, _type), _ref;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\tvar listQuery = {\n\t\t\t\tbool: (_bool = {}, _bool[booleanAggregator] = queryArray, _bool)\n\t\t\t};\n\n\t\t\tquery = value.length ? listQuery : null;\n\t\t}\n\n\t\tif (query && props.nestedField) {\n\t\t\treturn {\n\t\t\t\tnested: {\n\t\t\t\t\tpath: props.nestedField,\n\t\t\t\t\tquery: query\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\treturn query;\n\t};\n\n\tvar updateQuery = function updateQuery(value) {\n\t\tvar customQuery = props.customQuery;\n\n\t\tvar query = getDefaultQuery(value);\n\t\tvar customQueryOptions = void 0;\n\t\tif (customQuery) {\n\t\t\tvar _ref2 = customQuery(value, props) || {};\n\n\t\t\tquery = _ref2.query;\n\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t}\n\t\tprops.setQueryOptions(props.componentId, _extends({}, generateQueryOptions(), customQueryOptions));\n\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: props.showFilter,\n\t\t\tURLParams: props.URLParams,\n\t\t\tcomponentType: _constants.componentTypes.treeList\n\t\t});\n\t};\n\n\tfunction updateDefaultQuery(queryOptions) {\n\t\tvar value = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues);\n\t\t// Update default query for RS API\n\t\t(0, _helper.updateDefaultQuery)(componentId, props, value);\n\t\t(0, _helper.updateInternalQuery)((0, _transform.getInternalComponentID)(componentId), queryOptions, value, props, generateQueryOptions(), null);\n\t}\n\n\tvar setValue = function setValue(value) {\n\t\tvar hasMountedParam = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : hasMounted.current;\n\n\t\tvar finalValues = Array.isArray(value) === false ? (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(value) : value;\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tvar handleUpdates = function handleUpdates() {\n\t\t\t\tupdateQuery(finalValues);\n\t\t\t\tif (props.onValueChange) props.onValueChange(finalValues);\n\t\t\t};\n\n\t\t\tif (hasMountedParam) {\n\t\t\t\tsetSelectedValues(Array.isArray(value) ? transformValueIntoLocalState(value) : value);\n\t\t\t\thandleUpdates();\n\t\t\t} else {\n\t\t\t\thandleUpdates();\n\t\t\t}\n\t\t};\n\n\t\t(0, _helper.checkValueChange)(props.componentId, finalValues, props.beforeValueChange, performUpdate);\n\t};\n\n\tuseConstructor(function () {\n\t\thasMounted.current = false;\n\t\tvar defaultValue = props.defaultValue || props.value;\n\t\tvar currentValueArray = props.selectedValue || defaultValue || [];\n\t\t// update local state for selected values\n\t\tif (currentValueArray.length) {\n\t\t\tvar newSelectedValues = transformValueIntoLocalState(currentValueArray);\n\t\t\tsetValue(newSelectedValues, true);\n\t\t}\n\t\t// Set custom and default queries in store\n\t\t(0, _helper.updateCustomQuery)(componentId, props, currentValueArray);\n\t\t(0, _helper.updateDefaultQuery)(componentId, props, currentValueArray);\n\n\t\tupdateQueryOptions();\n\t});\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tupdateDefaultQuery();\n\t\t\tupdateQuery([]);\n\t\t}\n\t}, [props.defaultQuery]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tvar valueArray = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues) || [];\n\t\t\tupdateQuery(valueArray);\n\t\t}\n\t}, [props.customQuery]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tupdateQueryOptions();\n\t\t}\n\t}, [sortBy]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tvar valueArray = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues) || [];\n\t\t\tupdateQueryOptions();\n\t\t\tupdateQuery(valueArray);\n\t\t}\n\t}, [dataField]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tif (props.value !== undefined) {\n\t\t\t\tsetValue(props.value);\n\t\t\t}\n\t\t}\n\t}, [props.value]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tif (!(0, _helper.isEqual)((0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(selectedValues), props.selectedValue)) {\n\t\t\t\tvar value = props.value,\n\t\t\t\t    onChange = props.onChange;\n\n\t\t\t\tvar valueToSet = [];\n\t\t\t\tif (Array.isArray(props.selectedValue) && props.selectedValue.length) {\n\t\t\t\t\tvalueToSet = props.selectedValue;\n\t\t\t\t}\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\tsetValue(valueToSet);\n\t\t\t\t} else if (onChange && !(0, _helper.isEqual)(value, valueToSet)) {\n\t\t\t\t\tonChange(valueToSet);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [props.selectedValue]);\n\n\t(0, _react.useEffect)(function () {\n\t\thasMounted.current = true;\n\t}, []);\n\n\tvar handleInputChange = function handleInputChange(e) {\n\t\tvar value = e.target.value;\n\n\t\tsetSearchTerm(value);\n\t};\n\tvar renderSearch = function renderSearch() {\n\t\tif (showSearch) {\n\t\t\treturn (0, _core.jsx)(_Input2.default, {\n\t\t\t\tclassName: (0, _helper.getClassName)(innerClass, 'input') || null,\n\t\t\t\tonChange: handleInputChange,\n\t\t\t\tvalue: searchTerm,\n\t\t\t\tplaceholder: placeholder || 'Search',\n\t\t\t\tstyle: {\n\t\t\t\t\tmargin: '0 0 8px'\n\t\t\t\t},\n\t\t\t\t'aria-label': componentId + '-search',\n\t\t\t\tthemePreset: themePreset\n\t\t\t});\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar sanitizeObject = function sanitizeObject(obj) {\n\t\treturn JSON.parse(JSON.stringify(obj, function (key, value) {\n\t\t\treturn (\n\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\tvalue === null || value == {} || value === false ? undefined : value\n\t\t\t);\n\t\t}));\n\t};\n\n\tvar handleListItemClick = function handleListItemClick(key, parentPath) {\n\t\tvar path = key;\n\t\tif (parentPath) {\n\t\t\tpath = '' + parentPath + _constants.TREELIST_VALUES_PATH_SEPARATOR + key;\n\t\t}\n\t\tvar newSelectedValues = _extends({}, selectedValues);\n\t\tif (mode === 'single') {\n\t\t\tnewSelectedValues = {};\n\t\t\t(0, _helper.setDeep)(newSelectedValues, path.split(_constants.TREELIST_VALUES_PATH_SEPARATOR), true, true);\n\t\t} else {\n\t\t\tvar newValue = !(0, _helper.recLookup)(newSelectedValues, path, _constants.TREELIST_VALUES_PATH_SEPARATOR);\n\n\t\t\t(0, _helper.setDeep)(newSelectedValues, path.split(_constants.TREELIST_VALUES_PATH_SEPARATOR), newValue, true);\n\t\t}\n\t\tnewSelectedValues = sanitizeObject(_extends({}, newSelectedValues));\n\t\tif (props.value === undefined) {\n\t\t\tsetValue(newSelectedValues);\n\t\t} else if (props.onChange) {\n\t\t\tvar valueToSet = (0, _helper.transformTreeListLocalStateIntoQueryComptaibleFormat)(newSelectedValues);\n\n\t\t\tprops.onChange(valueToSet);\n\t\t}\n\t};\n\n\tvar renderIcon = function renderIcon(isLeafNode) {\n\t\tvar showIcon = props.showIcon,\n\t\t    showLeafIcon = props.showLeafIcon,\n\t\t    icon = props.icon,\n\t\t    leafIcon = props.leafIcon;\n\n\n\t\tif (isLeafNode) {\n\t\t\tif (!showLeafIcon) return null;\n\n\t\t\tif (leafIcon) {\n\t\t\t\treturn leafIcon;\n\t\t\t}\n\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t'span',\n\t\t\t\t{ role: 'img', 'aria-label': 'file', className: '--leaf-icon' },\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t'svg',\n\t\t\t\t\t{\n\t\t\t\t\t\tviewBox: '64 64 896 896',\n\t\t\t\t\t\tfocusable: 'false',\n\t\t\t\t\t\t'data-icon': 'file',\n\t\t\t\t\t\twidth: '1em',\n\t\t\t\t\t\theight: '1em',\n\t\t\t\t\t\tfill: 'currentColor',\n\t\t\t\t\t\t'aria-hidden': 'true'\n\t\t\t\t\t},\n\t\t\t\t\t(0, _core.jsx)('path', { d: 'M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z' })\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif (!showIcon) return null;\n\n\t\tif (icon) {\n\t\t\treturn icon;\n\t\t}\n\t\treturn (0, _core.jsx)(\n\t\t\t'span',\n\t\t\t{ role: 'img', 'aria-label': 'folder-open', className: '--folder-icon' },\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'svg',\n\t\t\t\t{\n\t\t\t\t\tviewBox: '64 64 896 896',\n\t\t\t\t\tfocusable: 'false',\n\t\t\t\t\t'data-icon': 'folder-open',\n\t\t\t\t\twidth: '1em',\n\t\t\t\t\theight: '1em',\n\t\t\t\t\tfill: 'currentColor',\n\t\t\t\t\t'aria-hidden': 'true'\n\t\t\t\t},\n\t\t\t\t(0, _core.jsx)('path', { d: 'M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z' })\n\t\t\t)\n\t\t);\n\t};\n\n\tvar getComponent = function getComponent() {\n\t\tvar data = {\n\t\t\tdata: getTransformedData,\n\t\t\trawData: rawData,\n\t\t\terror: error,\n\t\t\thandleClick: handleListItemClick,\n\t\t\tvalue: selectedValues,\n\t\t\tloading: isLoading\n\t\t};\n\t\treturn (0, _helper.getComponent)(data, props);\n\t};\n\n\tif (isLoading) {\n\t\treturn loader || null;\n\t}\n\n\tif (renderError && error) {\n\t\treturn (0, _helper.isFunction)(renderError) ? renderError(error) : renderError;\n\t}\n\n\tif (!getTransformedData || getTransformedData.length === 0) {\n\t\treturn renderNoResults ? renderNoResults() : null;\n\t}\n\treturn (0, _core.jsx)(\n\t\t_Container2.default,\n\t\t{ style: style, className: className },\n\t\tprops.title && (0, _core.jsx)(\n\t\t\t_Title2.default,\n\t\t\t{ className: (0, _helper.getClassName)(innerClass, 'title') || null },\n\t\t\ttitle\n\t\t),\n\t\trenderSearch(),\n\t\t(0, _helper.hasCustomRenderer)(props) ? getComponent() : (0, _core.jsx)(_HierarchicalMenuComponent2.default, {\n\t\t\tkey: 'initial-node',\n\t\t\tlistArray: getTransformedData,\n\t\t\tparentPath: '',\n\t\t\tisExpanded: true,\n\t\t\tlistItemProps: {\n\t\t\t\tmode: mode,\n\t\t\t\tselectedValues: selectedValues,\n\t\t\t\tsearchTerm: searchTerm,\n\t\t\t\tshowLine: showLine,\n\t\t\t\trenderItem: renderItem,\n\t\t\t\thandleListItemClick: handleListItemClick,\n\t\t\t\tshowCheckbox: showCheckbox,\n\t\t\t\tinnerClass: innerClass,\n\t\t\t\tshowRadio: showRadio,\n\t\t\t\trenderIcon: renderIcon,\n\t\t\t\tshowCount: showCount,\n\t\t\t\tshowSwitcherIcon: showSwitcherIcon,\n\t\t\t\tswitcherIcon: switcherIcon\n\t\t\t}\n\t\t})\n\t);\n};\nTreeList.propTypes = {\n\tselectedValue: _types2.default.selectedValue,\n\terror: _types2.default.title,\n\trawData: _types2.default.rawData,\n\taggregationData: _types2.default.rawData,\n\tthemePreset: _types2.default.themePreset,\n\tupdateQuery: _types2.default.funcRequired,\n\tsetQueryOptions: _types2.default.funcRequired,\n\t// component props\n\tcomponentId: _types2.default.string.isRequired,\n\tclassName: _types2.default.string,\n\tstyle: _types2.default.style,\n\tshowRadio: _types2.default.bool,\n\tshowCheckbox: _types2.default.bool,\n\tmode: _propTypes2.default.oneOf(['single', 'multiple']),\n\tshowCount: _types2.default.bool,\n\tshowSearch: _types2.default.bool,\n\tshowIcon: _types2.default.bool,\n\ticon: _types2.default.children,\n\tshowLeafIcon: _types2.default.bool,\n\tleafIcon: _types2.default.children,\n\tshowLine: _types2.default.bool,\n\tswitcherIcon: _types2.default.func,\n\trender: _types2.default.func,\n\trenderItem: _types2.default.func,\n\tinnerClass: _types2.default.style,\n\tplaceholder: _types2.default.string,\n\ttitle: _types2.default.title,\n\tisLoading: _types2.default.bool,\n\tdataField: _types2.default.stringArray.isRequired,\n\tonQueryChange: _types2.default.func,\n\tdefaultValue: _types2.default.stringArray,\n\tvalue: _types2.default.stringArray,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tindex: _types2.default.string,\n\tshowFilter: _types2.default.bool,\n\tURLParams: _types2.default.bool,\n\tfilterLabel: _types2.default.string,\n\tonChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tbeforeValueChange: _types2.default.func,\n\tsortBy: _types2.default.sortByWithCount,\n\tonError: _types2.default.func,\n\tshowSwitcherIcon: _types2.default.bool,\n\trenderError: _types2.default.title,\n\trenderNoResults: _types2.default.func,\n\tloader: _types2.default.title,\n\taggergationSize: _types2.default.number,\n\tendpoint: _types2.default.endpoint,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\tsize: _types2.default.number,\n\tnestedField: _types2.default.string\n};\n\nTreeList.defaultProps = {\n\tclassName: null,\n\tshowSwitcherIcon: true,\n\tstyle: null,\n\tshowRadio: false,\n\tshowCheckbox: false,\n\tmode: 'multiple',\n\tshowCount: false,\n\tshowSearch: false,\n\tshowIcon: false,\n\tshowLeafIcon: false,\n\tshowLine: false,\n\tURLParams: false,\n\tsortBy: 'count',\n\tqueryFormat: 'or',\n\tsize: 100\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\trawData: state.rawData[props.componentId] || {},\n\t\taggregationData: props.nestedField && state.aggregations[props.componentId] ? state.aggregations[props.componentId].reactivesearch_nested : state.aggregations[props.componentId] || {},\n\t\tthemePreset: state.config.themePreset,\n\t\terror: state.error[props.componentId],\n\t\tisLoading: state.isLoading[props.componentId]\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetQueryOptions: function setQueryOptions(component, props) {\n\t\t\treturn dispatch((0, _query.setQueryOptions)(component, props));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _query.updateQuery)(updateQueryObject));\n\t\t}\n\t};\n};\n\n// Add componentType for SSR\nTreeList.componentType = _constants.componentTypes.treeList;\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(TreeList, _extends({ ref: props.myForwardedRef }, props));\n}));\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(\n\t\t_PreferencesConsumer2.default,\n\t\t{ userProps: props },\n\t\tfunction (preferenceProps) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_ComponentWrapper2.default,\n\t\t\t\t_extends({}, preferenceProps, {\n\t\t\t\t\tinternalComponent: true,\n\t\t\t\t\tcomponentType: _constants.componentTypes.treeList,\n\t\t\t\t\tmode: preferenceProps.testMode ? 'test' : ''\n\t\t\t\t}),\n\t\t\t\tfunction (componentProps) {\n\t\t\t\t\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n\t\t\t\t\t\tmyForwardedRef: ref\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, TreeList);\n\nForwardRefComponent.displayName = 'TreeList';\nexports.default = ForwardRefComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}