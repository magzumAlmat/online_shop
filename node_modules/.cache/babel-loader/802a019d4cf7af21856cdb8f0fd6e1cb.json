{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _dayjs = require('dayjs');\n\nvar _dayjs2 = _interopRequireDefault(_dayjs);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _DayPickerInput = require('react-day-picker/DayPickerInput');\n\nvar _DayPickerInput2 = _interopRequireDefault(_DayPickerInput);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _DateContainer = require('../../styles/DateContainer');\n\nvar _DateContainer2 = _interopRequireDefault(_DateContainer);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _utils = require('../../utils');\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DateRange = function (_Component) {\n  _inherits(DateRange, _Component);\n\n  function DateRange(props) {\n    _classCallCheck(this, DateRange);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var currentDate = props.defaultValue || props.value || null;\n\n    if (props.selectedValue) {\n      if (Array.isArray(props.selectedValue)) {\n        currentDate = {\n          start: (0, _dayjs2.default)(new Date(props.selectedValue[0])).toISOString(),\n          end: (0, _dayjs2.default)(new Date(props.selectedValue[1])).toISOString()\n        };\n      } else {\n        var _props$selectedValue = props.selectedValue,\n            start = _props$selectedValue.start,\n            end = _props$selectedValue.end;\n        currentDate = {\n          start: (0, _dayjs2.default)(new Date(start)).toISOString(),\n          end: (0, _dayjs2.default)(new Date(end)).toISOString()\n        };\n      }\n    }\n\n    _this.state = {\n      currentDate: currentDate,\n      dateHovered: null,\n      startKey: 'on-start',\n      endKey: 'on-end'\n    };\n    var hasMounted = false; // Set custom query in store\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, _this.state.currentDate);\n\n    if (currentDate) {\n      _this.handleDateChange(currentDate, false, props, hasMounted);\n    }\n\n    return _this;\n  }\n\n  DateRange.prototype.componentDidMount = function componentDidMount() {\n    var _props = this.props,\n        enableAppbase = _props.enableAppbase,\n        index = _props.index;\n\n    if (!enableAppbase && index) {\n      console.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n  };\n\n  DateRange.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    if (!(0, _helper.isEqual)(JSON.stringify(this.props.value), JSON.stringify(prevProps.value))) {\n      this.handleDateChange(this.props.value, false, this.props);\n    } else {\n      var currentDate = this.state.currentDate;\n      var _props2 = this.props,\n          selectedValue = _props2.selectedValue,\n          value = _props2.value,\n          onChange = _props2.onChange; // comparing array format of selectedValue with object form of the state if not null\n\n      var formattedSelectedValue = Array.isArray(selectedValue) && selectedValue.length ? [this.formatInputDate(selectedValue[0]), this.formatInputDate(selectedValue[1])] : [];\n\n      if (!(0, _helper.isEqual)(currentDate ? [this.formatInputDate(currentDate.start), this.formatInputDate(currentDate.end)] // prettier-ignore\n      : null, formattedSelectedValue) && !(0, _helper.isEqual)(prevProps.selectedValue, selectedValue)) {\n        var modDate = selectedValue ? {\n          start: this.props.selectedValue[0] || '',\n          end: this.props.selectedValue[1] || '' // prettier-ignore\n\n        } : {\n          start: '',\n          end: ''\n        };\n\n        if ((value === undefined || value && value.start === '' && value.end === '') && !onChange) {\n          this.handleDateChange(modDate, true, this.props);\n        } else if (onChange) {\n          onChange(modDate);\n        }\n      }\n    }\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField', 'aggregationSize'], function () {\n      return _this2.updateQuery(_this2.state.currentDate ? {\n        // we need the date in correct queryFormat\n        start: (0, _helper.formatDate)(_this2.state.currentDate.start, _this2.props),\n        end: (0, _helper.formatDate)(_this2.state.currentDate.end, _this2.props) // prettier-ignore\n\n      } : _this2.state.currentDate, _this2.props);\n    });\n  };\n\n  DateRange.prototype.render = function render() {\n    var _state = this.state,\n        currentDate = _state.currentDate,\n        dateHovered = _state.dateHovered;\n    var start = currentDate ? (0, _helper.unwrapToNativeDate)(currentDate.start) : '';\n    var end = currentDate ? (0, _helper.unwrapToNativeDate)(currentDate.end) : '';\n    var endDay = currentDate ? dateHovered : '';\n    var selectedDays = [start, {\n      from: start,\n      to: endDay\n    }];\n    var modifiers = {\n      start: start,\n      end: endDay\n    };\n    return _react2.default.createElement(_DateContainer2.default, {\n      range: true,\n      style: this.props.style,\n      className: this.props.className,\n      showBorder: !this.props.showClear\n    }, this.props.title && _react2.default.createElement(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), _react2.default.createElement(_Flex2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'input-container') || null\n    }, _react2.default.createElement(_Flex2.default, {\n      flex: 2,\n      showBorder: this.props.showClear,\n      iconPosition: 'right',\n      style: {\n        background: this.props.theme.colors.backgroundColor || 'transparent'\n      }\n    }, _react2.default.createElement(_DayPickerInput2.default, _extends({\n      ref: this.getStartDateRef,\n      showOverlay: this.props.focused,\n      formatDate: this.formatInputDate,\n      value: start,\n      key: this.state.startKey,\n      placeholder: this.props.placeholder.start,\n      dayPickerProps: {\n        numberOfMonths: this.props.numberOfMonths,\n        initialMonth: this.props.initialMonth,\n        disabledDays: {\n          after: end || ''\n        },\n        selectedDays: selectedDays,\n        modifiers: modifiers\n      },\n      inputProps: {\n        'aria-label': this.props.componentId + '-start-input'\n      },\n      onDayChange: this.handleStartDate,\n      classNames: {\n        container: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n        overlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n        overlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n      }\n    }, this.props.dayPickerInputProps)), this.props.showClear && this.state.currentDate && this.state.currentDate.start && _react2.default.createElement(_CancelSvg2.default, {\n      onClick: this.clearDayPickerStart\n    })), _react2.default.createElement(_Flex2.default, {\n      justifyContent: 'center',\n      alignItems: 'center',\n      basis: '20px'\n    }, '-'), _react2.default.createElement(_Flex2.default, {\n      flex: 2,\n      showBorder: this.props.showClear,\n      iconPosition: 'right',\n      style: {\n        background: this.props.theme.colors.backgroundColor || 'transparent'\n      }\n    }, _react2.default.createElement(_DayPickerInput2.default, _extends({\n      ref: this.getEndDateRef,\n      showOverlay: this.props.focused,\n      formatDate: this.formatInputDate,\n      value: end,\n      key: this.state.endKey,\n      placeholder: this.props.placeholder.end,\n      dayPickerProps: {\n        numberOfMonths: this.props.numberOfMonths,\n        initialMonth: this.props.initialMonth,\n        onDayMouseEnter: this.handleDayMouseEnter,\n        disabledDays: {\n          before: start || ''\n        },\n        selectedDays: selectedDays,\n        modifiers: modifiers\n      },\n      inputProps: {\n        'aria-label': this.props.componentId + '-end-input'\n      },\n      onDayChange: this.handleEndDate,\n      classNames: {\n        container: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n        overlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n        overlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n      }\n    }, this.props.dayPickerInputProps)), this.props.showClear && this.state.currentDate && this.state.currentDate.end && _react2.default.createElement(_CancelSvg2.default, {\n      onClick: this.clearDayPickerEnd\n    }))));\n  };\n\n  return DateRange;\n}(_react.Component);\n\nDateRange.defaultQuery = function (value, props) {\n  var query = null;\n\n  if (value) {\n    if (Array.isArray(props.dataField) && props.dataField.length === 2) {\n      var _range, _range2;\n\n      query = {\n        bool: {\n          must: [{\n            range: (_range = {}, _range[props.dataField[0]] = {\n              lte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.start)), props)\n            }, _range)\n          }, {\n            range: (_range2 = {}, _range2[props.dataField[1]] = {\n              gte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.end)), props)\n            }, _range2)\n          }]\n        }\n      };\n    } else if (Array.isArray(props.dataField)) {\n      var _range3;\n\n      query = {\n        range: (_range3 = {}, _range3[props.dataField[0]] = {\n          gte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.start)), props),\n          lte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.end)), props)\n        }, _range3)\n      };\n    } else {\n      var _range4;\n\n      query = {\n        range: (_range4 = {}, _range4[props.dataField] = {\n          gte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.start)), props),\n          lte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.end)), props)\n        }, _range4)\n      };\n    }\n  }\n\n  if (query && props.nestedField) {\n    return {\n      nested: {\n        path: props.nestedField,\n        query: query\n      }\n    };\n  }\n\n  return query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.formatInputDate = function (date) {\n    var dayjsDate = (0, _dayjs2.default)(new Date(date));\n    return dayjsDate.isValid() ? dayjsDate.format('YYYY-MM-DD') : '';\n  };\n\n  this.getEndDateRef = function (ref) {\n    _this3.endDateRef = ref;\n  };\n\n  this.getStartDateRef = function (ref) {\n    _this3.startDateRef = ref;\n  };\n\n  this.clearDayPickerStart = function () {\n    if (_this3.state.currentDate && _this3.state.currentDate.start !== '') {\n      var _props3 = _this3.props,\n          value = _props3.value,\n          onChange = _props3.onChange;\n\n      if (value === undefined && !onChange) {\n        _this3.handleStartDate('', false); // resets the day picker component\n\n      } else if (onChange) {\n        onChange({\n          start: '',\n          end: _this3.state.currentDate.end\n        });\n      } else {\n        // Since value prop is defined and onChange is not define\n        // we keep the same date as in store\n        _this3.setState({\n          currentDate: _this3.state.currentDate\n        });\n      }\n    }\n  };\n\n  this.clearDayPickerEnd = function () {\n    if (_this3.state.currentDate && _this3.state.currentDate.end !== '') {\n      _this3.handleEndDate(''); // resets the day picker component\n\n\n      var _props4 = _this3.props,\n          value = _props4.value,\n          onChange = _props4.onChange;\n\n      if (value === undefined && !onChange) {\n        _this3.handleEndDate('', false); // resets the day picker component\n\n      } else if (onChange) {\n        onChange({\n          start: _this3.state.currentDate.start,\n          end: ''\n        });\n      } else {\n        // Since value prop is defined and onChange is not define\n        // we keep the same date as in store\n        _this3.setState({\n          currentDate: _this3.state.currentDate\n        });\n      }\n    }\n  };\n\n  this.handleStartDate = function (date) {\n    var autoFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var currentDate = _this3.state.currentDate;\n    var end = currentDate ? currentDate.end : '';\n    var _props5 = _this3.props,\n        value = _props5.value,\n        onChange = _props5.onChange;\n\n    if ((value === undefined || value && value.start === '') && !onChange) {\n      if (_this3.startDateRef.getInput().value.length === 10) {\n        _this3.handleDateChange({\n          start: date,\n          end: end\n        });\n\n        _this3.setState(function (state) {\n          return {\n            startKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n          };\n        }); // focus the end date DayPicker if its empty\n\n\n        if (_this3.props.autoFocusEnd && autoFocus) {\n          _this3.endDateRef.getInput().focus();\n        }\n      }\n    } else if (onChange) {\n      if (_this3.startDateRef.getInput().value.length === 10) {\n        onChange({\n          start: date,\n          end: end\n        }); // focus the end date DayPicker if its empty\n\n        if (_this3.props.autoFocusEnd && autoFocus) {\n          _this3.endDateRef.getInput().focus();\n        } // this will trigger a remount on the date component\n        // since DayPickerInput doesn't respect the controlled behavior setting on its own\n\n\n        _this3.setState(function (state) {\n          return {\n            startKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n          };\n        });\n      }\n    } else {\n      // this will trigger a remount on the date component\n      // since DayPickerInput doesn't respect the controlled behavior setting on its own\n      _this3.setState(function (state) {\n        return {\n          startKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n        };\n      });\n    }\n  };\n\n  this.handleEndDate = function (selectedDay) {\n    var currentDate = _this3.state.currentDate;\n    var _props6 = _this3.props,\n        value = _props6.value,\n        onChange = _props6.onChange;\n    var start = currentDate ? currentDate.start : '';\n\n    if ((value === undefined || value && value.end === '') && !onChange) {\n      if (_this3.endDateRef.getInput().value.length === 10) {\n        _this3.handleDayMouseEnter(selectedDay);\n\n        _this3.handleDateChange({\n          start: currentDate ? currentDate.start : '',\n          end: selectedDay\n        });\n\n        _this3.setState(function (state) {\n          return {\n            endKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n          };\n        });\n      }\n    } else if (onChange) {\n      if (_this3.endDateRef.getInput().value.length === 10) {\n        onChange({\n          start: start,\n          end: selectedDay\n        });\n      } // this will trigger a remount on the date component\n      // since DayPickerInput doesn't respect the controlled behavior setting on its own\n\n\n      _this3.setState(function (state) {\n        return {\n          endKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n        };\n      });\n    } else {\n      // this will trigger a remount on the date component\n      // since DayPickerInput doesn't respect the controlled behavior setting on its own\n      _this3.setState(function (state) {\n        return {\n          endKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n        };\n      });\n    }\n  };\n\n  this.handleDayMouseEnter = function (day) {\n    _this3.setState({\n      dateHovered: day\n    });\n  };\n\n  this.handleDateChange = function (currentDate) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this3.props;\n    var hasMounted = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var value = null; // modCurrentDate would check if the currentValue passed is\n    // in correct format or not\n    // when setting value from outside this component\n    // the selectedvalue passed was in a different format and\n    // thus breaking the code\n\n    var modCurrentDate = currentDate;\n\n    if (typeof currentDate.start === 'string' || typeof currentDate.end === 'string') {\n      modCurrentDate = {\n        start: currentDate.start ? (0, _dayjs2.default)(new Date(currentDate.start)).toISOString() : '',\n        end: currentDate.end ? (0, _dayjs2.default)(new Date(currentDate.end)).toISOString() : ''\n      };\n    }\n\n    if (modCurrentDate && !(modCurrentDate.start === '' && modCurrentDate.end === '')) {\n      value = {\n        start: _this3.formatInputDate(modCurrentDate.start),\n        end: _this3.formatInputDate(modCurrentDate.end)\n      }; // prettier-ignore\n    }\n\n    var performUpdate = function performUpdate() {\n      var handleUpdates = function handleUpdates() {\n        _this3.updateQuery(value, props);\n\n        if (props.onValueChange) props.onValueChange(value);\n      };\n\n      if (hasMounted) {\n        _this3.setState({\n          currentDate: modCurrentDate\n        }, handleUpdates);\n      } else {\n        handleUpdates();\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n  };\n\n  this.updateQuery = function (value, props) {\n    if (!value || value && value.start.length && value.end.length) {\n      var customQuery = props.customQuery;\n      var query = DateRange.defaultQuery(value, props);\n      var customQueryOptions = void 0;\n\n      if (customQuery) {\n        var customQueryObject = customQuery(value, props);\n        query = customQueryObject && customQueryObject.query;\n        customQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n        (0, _helper.updateCustomQuery)(props.componentId, props, value);\n      }\n\n      props.setQueryOptions(props.componentId, customQueryOptions, false);\n      props.updateQuery({\n        componentId: props.componentId,\n        query: query,\n        value: value ? [value.start, value.end] : null,\n        showFilter: props.showFilter,\n        label: props.filterLabel,\n        URLParams: props.URLParams,\n        componentType: _constants.componentTypes.dateRange\n      });\n    }\n  };\n};\n\nDateRange.propTypes = {\n  updateQuery: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  setQueryOptions: _types2.default.funcRequired,\n  setCustomQuery: _types2.default.funcRequired,\n  enableAppbase: _types2.default.bool,\n  // component props\n  autoFocusEnd: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  dataField: _types2.default.dataFieldArray,\n  dayPickerInputProps: _types2.default.props,\n  defaultValue: _types2.default.dateObject,\n  value: _types2.default.dateObject,\n  filterLabel: _types2.default.string,\n  focused: _types2.default.bool,\n  initialMonth: _types2.default.dateObject,\n  innerClass: _types2.default.style,\n  numberOfMonths: _types2.default.number,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  placeholder: _types2.default.rangeLabels,\n  nestedField: _types2.default.string,\n  queryFormat: _types2.default.queryFormatDate,\n  parseDate: _types2.default.func,\n  react: _types2.default.react,\n  showClear: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  style: _types2.default.style,\n  theme: _types2.default.style,\n  title: _types2.default.string,\n  index: _types2.default.string,\n  endpoint: _types2.default.endpoint\n};\nDateRange.defaultProps = {\n  autoFocusEnd: true,\n  numberOfMonths: 2,\n  placeholder: {\n    start: 'Start date',\n    end: 'End date'\n  },\n  showClear: true,\n  showFilter: true,\n  queryFormat: 'epoch_millis'\n}; // Add componentType for SSR\n\nDateRange.componentType = _constants.componentTypes.dateRange;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null,\n    enableAppbase: state.config.enableAppbase\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    setQueryOptions: function setQueryOptions() {\n      return dispatch(_actions.setQueryOptions.apply(undefined, arguments));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return _react2.default.createElement(DateRange, _extends({\n    ref: props.myForwardedRef\n  }, props));\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return _react2.default.createElement(_PreferencesConsumer2.default, {\n    userProps: props\n  }, function (preferenceProps) {\n    return _react2.default.createElement(_ComponentWrapper2.default, _extends({}, preferenceProps, {\n      internalComponent: true,\n      componentType: _constants.componentTypes.dateRange\n    }), function (componentProps) {\n      return _react2.default.createElement(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n        myForwardedRef: ref\n      }));\n    });\n  });\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DateRange);\nForwardRefComponent.displayName = 'DateRange';\nexports.default = ForwardRefComponent;","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","require","_react2","_interopRequireDefault","_actions","_hoistNonReactStatics","_hoistNonReactStatics2","_helper","_types","_types2","_dayjs","_dayjs2","_constants","_DayPickerInput","_DayPickerInput2","_emotionTheming","_DateContainer","_DateContainer2","_Title","_Title2","_Flex","_Flex2","_utils","_CancelSvg","_CancelSvg2","_PreferencesConsumer","_PreferencesConsumer2","_ComponentWrapper","_ComponentWrapper2","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","DateRange","_Component","props","_this","_initialiseProps","currentDate","defaultValue","selectedValue","Array","isArray","start","Date","toISOString","end","_props$selectedValue","state","dateHovered","startKey","endKey","hasMounted","updateCustomQuery","componentId","handleDateChange","componentDidMount","_props","enableAppbase","index","console","warn","componentDidUpdate","prevProps","_this2","isEqual","JSON","stringify","_props2","onChange","formattedSelectedValue","formatInputDate","modDate","undefined","checkSomePropChange","updateQuery","formatDate","render","_state","unwrapToNativeDate","endDay","selectedDays","from","to","modifiers","createElement","range","style","className","showBorder","showClear","title","getClassName","innerClass","flex","iconPosition","background","theme","colors","backgroundColor","ref","getStartDateRef","showOverlay","focused","placeholder","dayPickerProps","numberOfMonths","initialMonth","disabledDays","after","inputProps","onDayChange","handleStartDate","classNames","container","overlayWrapper","overlay","dayPickerInputProps","onClick","clearDayPickerStart","justifyContent","alignItems","basis","getEndDateRef","onDayMouseEnter","handleDayMouseEnter","before","handleEndDate","clearDayPickerEnd","Component","defaultQuery","query","dataField","_range","_range2","bool","must","lte","gte","_range3","_range4","nestedField","nested","path","_this3","date","dayjsDate","isValid","format","endDateRef","startDateRef","_props3","setState","_props4","autoFocus","_props5","getInput","autoFocusEnd","focus","selectedDay","_props6","day","isDefaultValue","modCurrentDate","performUpdate","handleUpdates","onValueChange","checkValueChange","beforeValueChange","customQuery","customQueryOptions","customQueryObject","getOptionsFromQuery","setQueryOptions","showFilter","label","filterLabel","URLParams","componentType","componentTypes","dateRange","propTypes","funcRequired","setCustomQuery","func","string","stringRequired","dataFieldArray","dateObject","number","onQueryChange","rangeLabels","queryFormat","queryFormatDate","parseDate","react","endpoint","defaultProps","mapStateToProps","selectedValues","config","mapDispatchtoProps","dispatch","component","updateQueryObject","apply","ConnectedComponent","connect","withTheme","myForwardedRef","ForwardRefComponent","forwardRef","userProps","preferenceProps","internalComponent","componentProps","displayName"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/date/DateRange.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _dayjs = require('dayjs');\n\nvar _dayjs2 = _interopRequireDefault(_dayjs);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _DayPickerInput = require('react-day-picker/DayPickerInput');\n\nvar _DayPickerInput2 = _interopRequireDefault(_DayPickerInput);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _DateContainer = require('../../styles/DateContainer');\n\nvar _DateContainer2 = _interopRequireDefault(_DateContainer);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _utils = require('../../utils');\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DateRange = function (_Component) {\n\t_inherits(DateRange, _Component);\n\n\tfunction DateRange(props) {\n\t\t_classCallCheck(this, DateRange);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar currentDate = props.defaultValue || props.value || null;\n\t\tif (props.selectedValue) {\n\t\t\tif (Array.isArray(props.selectedValue)) {\n\t\t\t\tcurrentDate = {\n\t\t\t\t\tstart: (0, _dayjs2.default)(new Date(props.selectedValue[0])).toISOString(),\n\t\t\t\t\tend: (0, _dayjs2.default)(new Date(props.selectedValue[1])).toISOString()\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tvar _props$selectedValue = props.selectedValue,\n\t\t\t\t    start = _props$selectedValue.start,\n\t\t\t\t    end = _props$selectedValue.end;\n\n\t\t\t\tcurrentDate = {\n\t\t\t\t\tstart: (0, _dayjs2.default)(new Date(start)).toISOString(),\n\t\t\t\t\tend: (0, _dayjs2.default)(new Date(end)).toISOString()\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t_this.state = {\n\t\t\tcurrentDate: currentDate,\n\t\t\tdateHovered: null,\n\t\t\tstartKey: 'on-start',\n\t\t\tendKey: 'on-end'\n\t\t};\n\t\tvar hasMounted = false;\n\n\t\t// Set custom query in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, _this.state.currentDate);\n\n\t\tif (currentDate) {\n\t\t\t_this.handleDateChange(currentDate, false, props, hasMounted);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tDateRange.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _props = this.props,\n\t\t    enableAppbase = _props.enableAppbase,\n\t\t    index = _props.index;\n\n\t\tif (!enableAppbase && index) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t};\n\n\tDateRange.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\tif (!(0, _helper.isEqual)(JSON.stringify(this.props.value), JSON.stringify(prevProps.value))) {\n\t\t\tthis.handleDateChange(this.props.value, false, this.props);\n\t\t} else {\n\t\t\tvar currentDate = this.state.currentDate;\n\t\t\tvar _props2 = this.props,\n\t\t\t    selectedValue = _props2.selectedValue,\n\t\t\t    value = _props2.value,\n\t\t\t    onChange = _props2.onChange;\n\t\t\t// comparing array format of selectedValue with object form of the state if not null\n\n\t\t\tvar formattedSelectedValue = Array.isArray(selectedValue) && selectedValue.length ? [this.formatInputDate(selectedValue[0]), this.formatInputDate(selectedValue[1])] : [];\n\t\t\tif (!(0, _helper.isEqual)(currentDate ? [this.formatInputDate(currentDate.start), this.formatInputDate(currentDate.end)] // prettier-ignore\n\t\t\t: null, formattedSelectedValue) && !(0, _helper.isEqual)(prevProps.selectedValue, selectedValue)) {\n\t\t\t\tvar modDate = selectedValue ? {\n\t\t\t\t\tstart: this.props.selectedValue[0] || '',\n\t\t\t\t\tend: this.props.selectedValue[1] || '' // prettier-ignore\n\t\t\t\t} : { start: '', end: '' };\n\t\t\t\tif ((value === undefined || value && value.start === '' && value.end === '') && !onChange) {\n\t\t\t\t\tthis.handleDateChange(modDate, true, this.props);\n\t\t\t\t} else if (onChange) {\n\t\t\t\t\tonChange(modDate);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField', 'aggregationSize'], function () {\n\t\t\treturn _this2.updateQuery(_this2.state.currentDate ? {\n\t\t\t\t// we need the date in correct queryFormat\n\t\t\t\tstart: (0, _helper.formatDate)(_this2.state.currentDate.start, _this2.props),\n\t\t\t\tend: (0, _helper.formatDate)(_this2.state.currentDate.end, _this2.props) // prettier-ignore\n\t\t\t} : _this2.state.currentDate, _this2.props);\n\t\t});\n\t};\n\n\tDateRange.prototype.render = function render() {\n\t\tvar _state = this.state,\n\t\t    currentDate = _state.currentDate,\n\t\t    dateHovered = _state.dateHovered;\n\n\t\tvar start = currentDate ? (0, _helper.unwrapToNativeDate)(currentDate.start) : '';\n\t\tvar end = currentDate ? (0, _helper.unwrapToNativeDate)(currentDate.end) : '';\n\t\tvar endDay = currentDate ? dateHovered : '';\n\t\tvar selectedDays = [start, { from: start, to: endDay }];\n\t\tvar modifiers = { start: start, end: endDay };\n\n\t\treturn _react2.default.createElement(\n\t\t\t_DateContainer2.default,\n\t\t\t{\n\t\t\t\trange: true,\n\t\t\t\tstyle: this.props.style,\n\t\t\t\tclassName: this.props.className,\n\t\t\t\tshowBorder: !this.props.showClear\n\t\t\t},\n\t\t\tthis.props.title && _react2.default.createElement(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\t_react2.default.createElement(\n\t\t\t\t_Flex2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'input-container') || null },\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\tflex: 2,\n\t\t\t\t\t\tshowBorder: this.props.showClear,\n\t\t\t\t\t\ticonPosition: 'right',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackground: this.props.theme.colors.backgroundColor || 'transparent'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_react2.default.createElement(_DayPickerInput2.default, _extends({\n\t\t\t\t\t\tref: this.getStartDateRef,\n\t\t\t\t\t\tshowOverlay: this.props.focused,\n\t\t\t\t\t\tformatDate: this.formatInputDate,\n\t\t\t\t\t\tvalue: start,\n\t\t\t\t\t\tkey: this.state.startKey,\n\t\t\t\t\t\tplaceholder: this.props.placeholder.start,\n\t\t\t\t\t\tdayPickerProps: {\n\t\t\t\t\t\t\tnumberOfMonths: this.props.numberOfMonths,\n\t\t\t\t\t\t\tinitialMonth: this.props.initialMonth,\n\t\t\t\t\t\t\tdisabledDays: {\n\t\t\t\t\t\t\t\tafter: end || ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tselectedDays: selectedDays,\n\t\t\t\t\t\t\tmodifiers: modifiers\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\t'aria-label': this.props.componentId + '-start-input'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDayChange: this.handleStartDate,\n\t\t\t\t\t\tclassNames: {\n\t\t\t\t\t\t\tcontainer: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n\t\t\t\t\t\t\toverlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n\t\t\t\t\t\t\toverlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this.props.dayPickerInputProps)),\n\t\t\t\t\tthis.props.showClear && this.state.currentDate && this.state.currentDate.start && _react2.default.createElement(_CancelSvg2.default, { onClick: this.clearDayPickerStart })\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{ justifyContent: 'center', alignItems: 'center', basis: '20px' },\n\t\t\t\t\t'-'\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\tflex: 2,\n\t\t\t\t\t\tshowBorder: this.props.showClear,\n\t\t\t\t\t\ticonPosition: 'right',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackground: this.props.theme.colors.backgroundColor || 'transparent'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_react2.default.createElement(_DayPickerInput2.default, _extends({\n\t\t\t\t\t\tref: this.getEndDateRef,\n\t\t\t\t\t\tshowOverlay: this.props.focused,\n\t\t\t\t\t\tformatDate: this.formatInputDate,\n\t\t\t\t\t\tvalue: end,\n\t\t\t\t\t\tkey: this.state.endKey,\n\t\t\t\t\t\tplaceholder: this.props.placeholder.end,\n\t\t\t\t\t\tdayPickerProps: {\n\t\t\t\t\t\t\tnumberOfMonths: this.props.numberOfMonths,\n\t\t\t\t\t\t\tinitialMonth: this.props.initialMonth,\n\t\t\t\t\t\t\tonDayMouseEnter: this.handleDayMouseEnter,\n\t\t\t\t\t\t\tdisabledDays: {\n\t\t\t\t\t\t\t\tbefore: start || ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tselectedDays: selectedDays,\n\t\t\t\t\t\t\tmodifiers: modifiers\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\t'aria-label': this.props.componentId + '-end-input'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDayChange: this.handleEndDate,\n\t\t\t\t\t\tclassNames: {\n\t\t\t\t\t\t\tcontainer: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n\t\t\t\t\t\t\toverlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n\t\t\t\t\t\t\toverlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this.props.dayPickerInputProps)),\n\t\t\t\t\tthis.props.showClear && this.state.currentDate && this.state.currentDate.end && _react2.default.createElement(_CancelSvg2.default, { onClick: this.clearDayPickerEnd })\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\treturn DateRange;\n}(_react.Component);\n\nDateRange.defaultQuery = function (value, props) {\n\tvar query = null;\n\tif (value) {\n\t\tif (Array.isArray(props.dataField) && props.dataField.length === 2) {\n\t\t\tvar _range, _range2;\n\n\t\t\tquery = {\n\t\t\t\tbool: {\n\t\t\t\t\tmust: [{\n\t\t\t\t\t\trange: (_range = {}, _range[props.dataField[0]] = {\n\t\t\t\t\t\t\tlte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.start)), props)\n\t\t\t\t\t\t}, _range)\n\t\t\t\t\t}, {\n\t\t\t\t\t\trange: (_range2 = {}, _range2[props.dataField[1]] = {\n\t\t\t\t\t\t\tgte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.end)), props)\n\t\t\t\t\t\t}, _range2)\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t};\n\t\t} else if (Array.isArray(props.dataField)) {\n\t\t\tvar _range3;\n\n\t\t\tquery = {\n\t\t\t\trange: (_range3 = {}, _range3[props.dataField[0]] = {\n\t\t\t\t\tgte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.start)), props),\n\t\t\t\t\tlte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.end)), props)\n\t\t\t\t}, _range3)\n\t\t\t};\n\t\t} else {\n\t\t\tvar _range4;\n\n\t\t\tquery = {\n\t\t\t\trange: (_range4 = {}, _range4[props.dataField] = {\n\t\t\t\t\tgte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.start)), props),\n\t\t\t\t\tlte: (0, _helper.formatDate)((0, _dayjs2.default)(new Date(value.end)), props)\n\t\t\t\t}, _range4)\n\t\t\t};\n\t\t}\n\t}\n\n\tif (query && props.nestedField) {\n\t\treturn {\n\t\t\tnested: {\n\t\t\t\tpath: props.nestedField,\n\t\t\t\tquery: query\n\t\t\t}\n\t\t};\n\t}\n\n\treturn query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this3 = this;\n\n\tthis.formatInputDate = function (date) {\n\t\tvar dayjsDate = (0, _dayjs2.default)(new Date(date));\n\t\treturn dayjsDate.isValid() ? dayjsDate.format('YYYY-MM-DD') : '';\n\t};\n\n\tthis.getEndDateRef = function (ref) {\n\t\t_this3.endDateRef = ref;\n\t};\n\n\tthis.getStartDateRef = function (ref) {\n\t\t_this3.startDateRef = ref;\n\t};\n\n\tthis.clearDayPickerStart = function () {\n\t\tif (_this3.state.currentDate && _this3.state.currentDate.start !== '') {\n\t\t\tvar _props3 = _this3.props,\n\t\t\t    value = _props3.value,\n\t\t\t    onChange = _props3.onChange;\n\n\n\t\t\tif (value === undefined && !onChange) {\n\t\t\t\t_this3.handleStartDate('', false); // resets the day picker component\n\t\t\t} else if (onChange) {\n\t\t\t\tonChange({ start: '', end: _this3.state.currentDate.end });\n\t\t\t} else {\n\t\t\t\t// Since value prop is defined and onChange is not define\n\t\t\t\t// we keep the same date as in store\n\t\t\t\t_this3.setState({\n\t\t\t\t\tcurrentDate: _this3.state.currentDate\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.clearDayPickerEnd = function () {\n\t\tif (_this3.state.currentDate && _this3.state.currentDate.end !== '') {\n\t\t\t_this3.handleEndDate(''); // resets the day picker component\n\t\t\tvar _props4 = _this3.props,\n\t\t\t    value = _props4.value,\n\t\t\t    onChange = _props4.onChange;\n\n\n\t\t\tif (value === undefined && !onChange) {\n\t\t\t\t_this3.handleEndDate('', false); // resets the day picker component\n\t\t\t} else if (onChange) {\n\t\t\t\tonChange({ start: _this3.state.currentDate.start, end: '' });\n\t\t\t} else {\n\t\t\t\t// Since value prop is defined and onChange is not define\n\t\t\t\t// we keep the same date as in store\n\t\t\t\t_this3.setState({\n\t\t\t\t\tcurrentDate: _this3.state.currentDate\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.handleStartDate = function (date) {\n\t\tvar autoFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\tvar currentDate = _this3.state.currentDate;\n\n\t\tvar end = currentDate ? currentDate.end : '';\n\t\tvar _props5 = _this3.props,\n\t\t    value = _props5.value,\n\t\t    onChange = _props5.onChange;\n\n\t\tif ((value === undefined || value && value.start === '') && !onChange) {\n\t\t\tif (_this3.startDateRef.getInput().value.length === 10) {\n\t\t\t\t_this3.handleDateChange({\n\t\t\t\t\tstart: date,\n\t\t\t\t\tend: end\n\t\t\t\t});\n\t\t\t\t_this3.setState(function (state) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstartKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\t// focus the end date DayPicker if its empty\n\t\t\t\tif (_this3.props.autoFocusEnd && autoFocus) {\n\t\t\t\t\t_this3.endDateRef.getInput().focus();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (onChange) {\n\t\t\tif (_this3.startDateRef.getInput().value.length === 10) {\n\t\t\t\tonChange({\n\t\t\t\t\tstart: date,\n\t\t\t\t\tend: end\n\t\t\t\t});\n\t\t\t\t// focus the end date DayPicker if its empty\n\t\t\t\tif (_this3.props.autoFocusEnd && autoFocus) {\n\t\t\t\t\t_this3.endDateRef.getInput().focus();\n\t\t\t\t}\n\t\t\t\t// this will trigger a remount on the date component\n\t\t\t\t// since DayPickerInput doesn't respect the controlled behavior setting on its own\n\t\t\t\t_this3.setState(function (state) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstartKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t// this will trigger a remount on the date component\n\t\t\t// since DayPickerInput doesn't respect the controlled behavior setting on its own\n\t\t\t_this3.setState(function (state) {\n\t\t\t\treturn {\n\t\t\t\t\tstartKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleEndDate = function (selectedDay) {\n\t\tvar currentDate = _this3.state.currentDate;\n\t\tvar _props6 = _this3.props,\n\t\t    value = _props6.value,\n\t\t    onChange = _props6.onChange;\n\n\t\tvar start = currentDate ? currentDate.start : '';\n\n\t\tif ((value === undefined || value && value.end === '') && !onChange) {\n\t\t\tif (_this3.endDateRef.getInput().value.length === 10) {\n\t\t\t\t_this3.handleDayMouseEnter(selectedDay);\n\t\t\t\t_this3.handleDateChange({\n\t\t\t\t\tstart: currentDate ? currentDate.start : '',\n\t\t\t\t\tend: selectedDay\n\t\t\t\t});\n\t\t\t\t_this3.setState(function (state) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tendKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (onChange) {\n\t\t\tif (_this3.endDateRef.getInput().value.length === 10) {\n\t\t\t\tonChange({\n\t\t\t\t\tstart: start,\n\t\t\t\t\tend: selectedDay\n\t\t\t\t});\n\t\t\t}\n\t\t\t// this will trigger a remount on the date component\n\t\t\t// since DayPickerInput doesn't respect the controlled behavior setting on its own\n\t\t\t_this3.setState(function (state) {\n\t\t\t\treturn {\n\t\t\t\t\tendKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\t// this will trigger a remount on the date component\n\t\t\t// since DayPickerInput doesn't respect the controlled behavior setting on its own\n\t\t\t_this3.setState(function (state) {\n\t\t\t\treturn {\n\t\t\t\t\tendKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleDayMouseEnter = function (day) {\n\t\t_this3.setState({\n\t\t\tdateHovered: day\n\t\t});\n\t};\n\n\tthis.handleDateChange = function (currentDate) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this3.props;\n\t\tvar hasMounted = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n\t\tvar value = null;\n\t\t// modCurrentDate would check if the currentValue passed is\n\t\t// in correct format or not\n\t\t// when setting value from outside this component\n\t\t// the selectedvalue passed was in a different format and\n\t\t// thus breaking the code\n\t\tvar modCurrentDate = currentDate;\n\t\tif (typeof currentDate.start === 'string' || typeof currentDate.end === 'string') {\n\t\t\tmodCurrentDate = {\n\t\t\t\tstart: currentDate.start ? (0, _dayjs2.default)(new Date(currentDate.start)).toISOString() : '',\n\t\t\t\tend: currentDate.end ? (0, _dayjs2.default)(new Date(currentDate.end)).toISOString() : ''\n\t\t\t};\n\t\t}\n\t\tif (modCurrentDate && !(modCurrentDate.start === '' && modCurrentDate.end === '')) {\n\t\t\tvalue = {\n\t\t\t\tstart: _this3.formatInputDate(modCurrentDate.start),\n\t\t\t\tend: _this3.formatInputDate(modCurrentDate.end)\n\t\t\t}; // prettier-ignore\n\t\t}\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tvar handleUpdates = function handleUpdates() {\n\t\t\t\t_this3.updateQuery(value, props);\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t};\n\n\t\t\tif (hasMounted) {\n\t\t\t\t_this3.setState({\n\t\t\t\t\tcurrentDate: modCurrentDate\n\t\t\t\t}, handleUpdates);\n\t\t\t} else {\n\t\t\t\thandleUpdates();\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tif (!value || value && value.start.length && value.end.length) {\n\t\t\tvar customQuery = props.customQuery;\n\n\t\t\tvar query = DateRange.defaultQuery(value, props);\n\t\t\tvar customQueryOptions = void 0;\n\t\t\tif (customQuery) {\n\t\t\t\tvar customQueryObject = customQuery(value, props);\n\t\t\t\tquery = customQueryObject && customQueryObject.query;\n\t\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n\t\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t\t}\n\t\t\tprops.setQueryOptions(props.componentId, customQueryOptions, false);\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tquery: query,\n\t\t\t\tvalue: value ? [value.start, value.end] : null,\n\t\t\t\tshowFilter: props.showFilter,\n\t\t\t\tlabel: props.filterLabel,\n\t\t\t\tURLParams: props.URLParams,\n\t\t\t\tcomponentType: _constants.componentTypes.dateRange\n\t\t\t});\n\t\t}\n\t};\n};\n\nDateRange.propTypes = {\n\tupdateQuery: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tsetCustomQuery: _types2.default.funcRequired,\n\tenableAppbase: _types2.default.bool,\n\t// component props\n\tautoFocusEnd: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tdataField: _types2.default.dataFieldArray,\n\tdayPickerInputProps: _types2.default.props,\n\tdefaultValue: _types2.default.dateObject,\n\tvalue: _types2.default.dateObject,\n\tfilterLabel: _types2.default.string,\n\tfocused: _types2.default.bool,\n\tinitialMonth: _types2.default.dateObject,\n\tinnerClass: _types2.default.style,\n\tnumberOfMonths: _types2.default.number,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tplaceholder: _types2.default.rangeLabels,\n\tnestedField: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatDate,\n\tparseDate: _types2.default.func,\n\treact: _types2.default.react,\n\tshowClear: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttheme: _types2.default.style,\n\ttitle: _types2.default.string,\n\tindex: _types2.default.string,\n\tendpoint: _types2.default.endpoint\n};\n\nDateRange.defaultProps = {\n\tautoFocusEnd: true,\n\tnumberOfMonths: 2,\n\tplaceholder: {\n\t\tstart: 'Start date',\n\t\tend: 'End date'\n\t},\n\tshowClear: true,\n\tshowFilter: true,\n\tqueryFormat: 'epoch_millis'\n};\n\n// Add componentType for SSR\nDateRange.componentType = _constants.componentTypes.dateRange;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null,\n\t\tenableAppbase: state.config.enableAppbase\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions() {\n\t\t\treturn dispatch(_actions.setQueryOptions.apply(undefined, arguments));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn _react2.default.createElement(DateRange, _extends({ ref: props.myForwardedRef }, props));\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn _react2.default.createElement(\n\t\t_PreferencesConsumer2.default,\n\t\t{ userProps: props },\n\t\tfunction (preferenceProps) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_ComponentWrapper2.default,\n\t\t\t\t_extends({}, preferenceProps, {\n\t\t\t\t\tinternalComponent: true,\n\t\t\t\t\tcomponentType: _constants.componentTypes.dateRange\n\t\t\t\t}),\n\t\t\t\tfunction (componentProps) {\n\t\t\t\t\treturn _react2.default.createElement(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n\t\t\t\t\t\tmyForwardedRef: ref\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DateRange);\n\nForwardRefComponent.displayName = 'DateRange';\nexports.default = ForwardRefComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}