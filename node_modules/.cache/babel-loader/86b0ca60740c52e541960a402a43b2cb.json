{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\n\nvar _core = require('@emotion/core');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _propTypes = require('prop-types');\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hotkeysJs = require('hotkeys-js');\n\nvar _hotkeysJs2 = _interopRequireDefault(_hotkeysJs);\n\nvar _xss = require('xss');\n\nvar _xss2 = _interopRequireDefault(_xss);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _InputGroup = require('../../styles/InputGroup');\n\nvar _InputGroup2 = _interopRequireDefault(_InputGroup);\n\nvar _InputWrapper = require('../../styles/InputWrapper');\n\nvar _InputWrapper2 = _interopRequireDefault(_InputWrapper);\n\nvar _InputAddon = require('../../styles/InputAddon');\n\nvar _InputAddon2 = _interopRequireDefault(_InputAddon);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _Tags = require('../../styles/Tags');\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Button = require('../../styles/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _utils = require('../../utils');\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _AutofillSvg = require('../shared/AutofillSvg');\n\nvar _AutofillSvg2 = _interopRequireDefault(_AutofillSvg);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _AutoSuggestFooterContainer = require('../../styles/AutoSuggestFooterContainer');\n\nvar _AutoSuggestFooterContainer2 = _interopRequireDefault(_AutoSuggestFooterContainer);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar useConstructor = function useConstructor() {\n  var callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n  var _useState = (0, _react.useState)(false),\n      hasBeenCalled = _useState[0],\n      setHasBeenCalled = _useState[1];\n\n  if (hasBeenCalled) return;\n  callBack();\n  setHasBeenCalled(true);\n};\n\nvar SearchBox = function SearchBox(props) {\n  var selectedValue = props.selectedValue,\n      selectedCategory = props.selectedCategory,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      componentId = props.componentId,\n      rawData = props.rawData,\n      aggregationData = props.aggregationData,\n      isLoading = props.isLoading,\n      error = props.error,\n      onData = props.onData,\n      onChange = props.onChange,\n      focusShortcuts = props.focusShortcuts,\n      defaultQuery = props.defaultQuery,\n      filterLabel = props.filterLabel,\n      showFilter = props.showFilter,\n      URLParams = props.URLParams,\n      customQuery = props.customQuery,\n      customEvents = props.customEvents,\n      showSuggestionsFooter = props.showSuggestionsFooter,\n      renderSuggestionsFooter = props.renderSuggestionsFooter;\n  var internalComponent = (0, _transform.getInternalComponentID)(componentId);\n\n  var _useState2 = (0, _react.useState)(''),\n      currentValue = _useState2[0],\n      setCurrentValue = _useState2[1]; // eslint-disable-next-line prefer-const\n\n\n  var _useState3 = (0, _react.useState)([]),\n      selectedTags = _useState3[0],\n      setSelectedTags = _useState3[1];\n\n  var _useState4 = (0, _react.useState)(props.isOpen),\n      isOpen = _useState4[0],\n      setIsOpen = _useState4[1];\n\n  var _inputRef = (0, _react.useRef)(null);\n\n  var isTagsMode = (0, _react.useRef)(false);\n\n  var stats = function stats() {\n    return (0, _helper.getResultStats)(props);\n  };\n\n  var parsedSuggestions = function parsedSuggestions() {\n    var suggestionsArray = [];\n\n    if (Array.isArray(props.suggestions) && props.suggestions.length) {\n      suggestionsArray = [].concat((0, _helper.withClickIds)(props.suggestions));\n    }\n\n    var sectionsAccumulated = [];\n    var sectionisedSuggestions = suggestionsArray.reduce(function (acc, d, currentIndex) {\n      if (sectionsAccumulated.includes(d.sectionId)) return acc;\n\n      if (d.sectionId) {\n        acc[currentIndex] = suggestionsArray.filter(function (g) {\n          return g.sectionId === d.sectionId;\n        });\n        sectionsAccumulated.push(d.sectionId);\n      } else {\n        acc[currentIndex] = d;\n      }\n\n      return acc;\n    }, {});\n    return Object.values(sectionisedSuggestions);\n  };\n\n  var focusSearchBox = function focusSearchBox(event) {\n    var elt = event.target || event.srcElement;\n    var tagName = elt.tagName;\n\n    if (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n      // already in an input\n      return;\n    }\n\n    if (_inputRef.current) {\n      _inputRef.current.focus();\n    }\n  };\n\n  var listenForFocusShortcuts = function listenForFocusShortcuts() {\n    if ((0, _utils.isEmpty)(focusShortcuts)) {\n      return;\n    } // for single press keys (a-z, A-Z) &, hotkeys' combinations such as 'cmd+k', 'ctrl+shft+a', etc\n\n\n    (0, _hotkeysJs2.default)((0, _utils.parseFocusShortcuts)(focusShortcuts).join(','),\n    /* eslint-disable no-shadow */\n    // eslint-disable-next-line no-unused-vars\n    function (event, handler) {\n      // Prevent the default refresh event under WINDOWS system\n      event.preventDefault();\n      focusSearchBox(event);\n    }); // if one of modifier keys are used, they are handled below\n\n    (0, _hotkeysJs2.default)('*', function (event) {\n      var modifierKeys = (0, _utils.extractModifierKeysFromFocusShortcuts)(focusShortcuts);\n      if (modifierKeys.length === 0) return;\n\n      for (var index = 0; index < modifierKeys.length; index += 1) {\n        var element = modifierKeys[index];\n\n        if (_hotkeysJs2.default[element]) {\n          focusSearchBox(event);\n          break;\n        }\n      }\n    });\n  };\n\n  var triggerClickAnalytics = function triggerClickAnalytics(searchPosition, documentId) {\n    var docId = documentId;\n\n    if (!docId) {\n      var hitData = parsedSuggestions().find(function (hit) {\n        return hit._click_id === searchPosition;\n      });\n\n      if (hitData && hitData.source && hitData.source._id) {\n        docId = hitData.source._id;\n      }\n    }\n\n    props.triggerAnalytics(searchPosition, docId);\n  };\n\n  var searchBoxDefaultQuery = function searchBoxDefaultQuery(value, props) {\n    return {\n      query: {\n        queryFormat: props.queryFormat,\n        dataField: props.dataField,\n        value: value,\n        nestedField: props.nestedField,\n        queryString: props.queryString,\n        searchOperators: props.searchOperators\n      }\n    };\n  }; // fires query to fetch suggestion\n\n\n  var triggerDefaultQuery = function triggerDefaultQuery(paramValue) {\n    if (!props.autosuggest) {\n      return;\n    }\n\n    var value = typeof paramValue !== 'string' ? currentValue : paramValue;\n    var query = searchBoxDefaultQuery(value, props);\n\n    if (defaultQuery) {\n      var defaultQueryTobeSet = defaultQuery(value, props) || {};\n\n      if (defaultQueryTobeSet.query) {\n        query = defaultQueryTobeSet.query;\n      } // Update calculated default query in store\n\n\n      (0, _helper.updateDefaultQuery)(componentId, props, value);\n    }\n\n    props.updateQuery({\n      componentId: internalComponent,\n      query: query,\n      value: value,\n      componentType: _constants.componentTypes.searchBox\n    });\n  }; // fires query to fetch results(dependent components are affected here)\n\n\n  var triggerCustomQuery = function triggerCustomQuery(paramValue) {\n    var categoryValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    var value = typeof paramValue !== 'string' ? currentValue : paramValue;\n\n    if (isTagsMode.current) {\n      value = paramValue;\n    }\n\n    var query = searchBoxDefaultQuery('' + value + (!isTagsMode.current && categoryValue ? ' in ' + categoryValue : ''), props);\n\n    if (customQuery) {\n      var customQueryTobeSet = customQuery(value, props) || {};\n      var queryTobeSet = customQueryTobeSet.query;\n\n      if (queryTobeSet) {\n        query = queryTobeSet;\n      }\n\n      (0, _helper.updateCustomQuery)(componentId, props, value);\n    }\n\n    props.updateQuery(_extends({\n      componentId: componentId,\n      value: value,\n      query: query,\n      label: filterLabel,\n      showFilter: showFilter,\n      URLParams: URLParams,\n      componentType: _constants.componentTypes.searchBox\n    }, !isTagsMode.current ? {\n      category: categoryValue\n    } : {}));\n  };\n\n  var triggerQuery = function triggerQuery() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$isOpen = _ref.isOpen,\n        isOpen = _ref$isOpen === undefined ? undefined : _ref$isOpen,\n        _ref$customQuery = _ref.customQuery,\n        customQuery = _ref$customQuery === undefined ? false : _ref$customQuery,\n        _ref$defaultQuery = _ref.defaultQuery,\n        defaultQuery = _ref$defaultQuery === undefined ? false : _ref$defaultQuery,\n        _ref$value = _ref.value,\n        value = _ref$value === undefined ? undefined : _ref$value,\n        _ref$categoryValue = _ref.categoryValue,\n        categoryValue = _ref$categoryValue === undefined ? undefined : _ref$categoryValue;\n\n    if (typeof isOpen === 'boolean') {\n      setIsOpen(isOpen);\n    }\n\n    if (customQuery) {\n      triggerCustomQuery(value, categoryValue);\n    }\n\n    if (defaultQuery) {\n      triggerDefaultQuery(value);\n    }\n  };\n\n  var onValueSelected = function onValueSelected() {\n    var valueSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : currentValue;\n    var cause = arguments[1];\n    var suggestion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var onValueSelected = props.onValueSelected;\n\n    if (onValueSelected) {\n      onValueSelected(valueSelected, cause, suggestion);\n    }\n  };\n\n  var handleTextChange = (0, _react.useRef)((0, _helper.debounce)(function () {\n    var valueParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n    var cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    var enterButton = props.enterButton;\n\n    if (cause === _causes2.default.CLEAR_VALUE) {\n      triggerCustomQuery(valueParam);\n      triggerDefaultQuery(valueParam);\n    } else if (props.autosuggest) {\n      triggerDefaultQuery(valueParam);\n    } else if (value === undefined && !onChange && !enterButton) {\n      triggerCustomQuery(valueParam);\n    }\n  }, props.debounce));\n\n  var setValue = function setValue(value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var setValueProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : props;\n    var cause = arguments[3];\n    var hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n    var categoryValue = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : undefined;\n\n    var performUpdate = function performUpdate() {\n      if (isTagsMode.current && (0, _helper.isEqual)(value, selectedTags)) {\n        return;\n      }\n\n      var newSelectedTags = [];\n      var newCurrentValue = (0, _utils.decodeHtml)(value);\n\n      if (hasMounted) {\n        if (isTagsMode.current && cause === _causes2.default.SUGGESTION_SELECT) {\n          if (Array.isArray(selectedTags) && selectedTags.length) {\n            // check if value already present in selectedTags\n            if (typeof value === 'string' && selectedTags.includes(value)) {\n              setIsOpen(false);\n              return;\n            }\n\n            if (typeof value === 'string' && !!value) {\n              newSelectedTags = [].concat(selectedTags, [value]);\n            } else if (Array.isArray(value) && !(0, _helper.isEqual)(selectedTags, value)) {\n              var mergedArray = Array.from(new Set([].concat(selectedTags, value)));\n              newSelectedTags = mergedArray;\n            }\n          } else if (value) {\n            newSelectedTags = typeof value !== 'string' ? value : [].concat(value);\n          }\n\n          newCurrentValue = '';\n          setSelectedTags(newSelectedTags);\n        } else {\n          newCurrentValue = (0, _utils.decodeHtml)(value);\n        }\n\n        if (toggleIsOpen) setIsOpen(!isOpen);\n        setCurrentValue(newCurrentValue);\n        var queryHandlerValue = value;\n\n        if (isTagsMode.current && cause === _causes2.default.SUGGESTION_SELECT) {\n          queryHandlerValue = Array.isArray(newSelectedTags) && newSelectedTags.length ? newSelectedTags : undefined;\n        }\n\n        if (isDefaultValue) {\n          if (props.autosuggest) {\n            triggerQuery(_extends({}, toggleIsOpen && {\n              isOpen: !isOpen\n            }, {\n              defaultQuery: false,\n              value: value\n            }));\n            triggerDefaultQuery(newCurrentValue);\n          } // in case of strict selection only SUGGESTION_SELECT should be able\n          // to set the query otherwise the value should reset\n\n\n          if (setValueProps.strictSelection) {\n            if (cause === _causes2.default.SUGGESTION_SELECT || (isTagsMode.current ? newSelectedTags.length === 0 : value === '')) {\n              triggerCustomQuery(queryHandlerValue, isTagsMode.current ? undefined : categoryValue);\n            } else {\n              setValue('', true);\n            }\n          } else if (props.value === undefined || cause === _causes2.default.SUGGESTION_SELECT || cause === _causes2.default.CLEAR_VALUE || cause === _causes2.default.ENTER_PRESS || cause === _causes2.default.SEARCH_ICON_CLICK) {\n            triggerCustomQuery(queryHandlerValue, isTagsMode.current ? undefined : categoryValue);\n          }\n        } else {\n          // debounce for handling text while typing\n          handleTextChange.current(value, cause);\n        }\n\n        if (setValueProps.onValueChange) setValueProps.onValueChange(value);\n      } else {\n        triggerQuery({\n          defaultQuery: props.autosuggest,\n          customQuery: true,\n          value: value,\n          categoryValue: isTagsMode.current ? undefined : categoryValue\n        });\n        if (setValueProps.onValueChange) setValueProps.onValueChange(value);\n      }\n    };\n\n    (0, _helper.checkValueChange)(setValueProps.componentId, value, setValueProps.beforeValueChange, performUpdate);\n  };\n\n  var withTriggerQuery = function withTriggerQuery(func) {\n    if (func) {\n      return function (e) {\n        return func(e, function () {\n          var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            isOpen: false\n          },\n              isOpen = _ref2.isOpen;\n\n          return setValue(props.value, !isOpen, props);\n        });\n      };\n    }\n\n    return undefined;\n  };\n\n  var handleFeaturedSuggestionClicked = function handleFeaturedSuggestionClicked(suggestion) {\n    try {\n      if (suggestion.action === _helper.featuredSuggestionsActionTypes.NAVIGATE) {\n        var _JSON$parse = JSON.parse(suggestion.subAction),\n            _JSON$parse$target = _JSON$parse.target,\n            target = _JSON$parse$target === undefined ? '_self' : _JSON$parse$target,\n            _JSON$parse$link = _JSON$parse.link,\n            link = _JSON$parse$link === undefined ? '/' : _JSON$parse$link;\n\n        if (typeof window !== 'undefined') {\n          window.open(link, target);\n        }\n      }\n\n      if (suggestion.action === _helper.featuredSuggestionsActionTypes.FUNCTION) {\n        // eslint-disable-next-line no-new-func\n        var func = new Function('return ' + suggestion.subAction)();\n        func(suggestion, currentValue, customEvents);\n      }\n\n      if (suggestion.action === _helper.featuredSuggestionsActionTypes.SELECT) {\n        setValue(suggestion.value, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : _causes2.default.ENTER_PRESS);\n        onValueSelected(suggestion.value, _causes2.default.SUGGESTION_SELECT);\n      } // blur is important to close the dropdown\n      // on selecting one of featured suggestions\n      // else Downshift probably is focusing the dropdown\n      // and not letting it close\n\n\n      _inputRef.current.blur();\n    } catch (e) {\n      console.error('Error: There was an error parsing the subAction for the featured suggestion with label, \"' + suggestion.label + '\"', e);\n    }\n  };\n\n  var onSuggestionSelected = function onSuggestionSelected(suggestion) {\n    setIsOpen(false); // handle featured suggestions click event\n\n    if (suggestion._suggestion_type === _helper.suggestionTypes.Featured) {\n      handleFeaturedSuggestionClicked(suggestion);\n      return;\n    }\n\n    var suggestionValue = suggestion.value;\n\n    if (value === undefined) {\n      setValue(suggestionValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n    } else if (onChange) {\n      var emitValue = suggestionValue;\n\n      if (isTagsMode.current) {\n        emitValue = Array.isArray(selectedTags) ? [].concat(selectedTags) : [];\n\n        if (selectedTags && selectedTags.includes(suggestionValue)) {\n          // avoid duplicates in tags array\n          setIsOpen(false);\n          return;\n        }\n\n        emitValue.push(suggestionValue);\n      }\n\n      setValue(emitValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n      onChange(emitValue, function () {\n        return triggerQuery(_extends({\n          customQuery: true,\n          value: emitValue,\n          isOpen: false\n        }, !isTagsMode.current && {\n          categoryValue: suggestion._category\n        }));\n      });\n    } // Record analytics for selected suggestions\n\n\n    triggerClickAnalytics(suggestion._click_id); // onValueSelected is user interaction driven:\n    // it should be triggered irrespective of controlled (or)\n    // uncontrolled component behavior\n\n    onValueSelected(suggestionValue, _causes2.default.SUGGESTION_SELECT, suggestion);\n  };\n\n  var onInputChange = function onInputChange(e) {\n    var inputValue = e.target.value;\n\n    if (!isOpen && props.autosuggest) {\n      setIsOpen(true);\n    }\n\n    if (value === undefined) {\n      setValue(inputValue, false, props, inputValue === '' ? _causes2.default.CLEAR_VALUE : undefined, true, false);\n    } else if (onChange) {\n      // handle caret position in controlled components\n      (0, _utils.handleCaretPosition)(e);\n      onChange(inputValue, function () {\n        var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref3.isOpen;\n\n        triggerQuery({\n          customQuery: true,\n          value: inputValue,\n          isOpen: isOpen\n        });\n      }, e);\n    }\n  };\n\n  var enterButtonOnClick = function enterButtonOnClick() {\n    return triggerQuery({\n      isOpen: false,\n      value: currentValue,\n      customQuery: true\n    });\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var highlightedIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; // if a suggestion was selected, delegate the handling\n    // to suggestion handler\n\n    if (event.key === 'Enter') {\n      if (props.autosuggest === false) {\n        enterButtonOnClick();\n      } else if (highlightedIndex === null) {\n        setValue(event.target.value, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : _causes2.default.ENTER_PRESS);\n        onValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n      }\n    }\n\n    if (props.onKeyDown) {\n      props.onKeyDown(event, undefined.triggerQuery);\n    }\n  };\n\n  var clearValue = function clearValue() {\n    setValue('', false, props, _causes2.default.CLEAR_VALUE, true, false);\n\n    if (onChange) {\n      onChange('', function () {\n        var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref4.isOpen;\n\n        return triggerQuery({\n          customQuery: true,\n          value: '',\n          isOpen: isOpen\n        });\n      });\n    }\n\n    onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n  };\n\n  var shouldMicRender = function shouldMicRender(showVoiceSearch) {\n    // checks for SSR\n    if (typeof window === 'undefined') return false;\n    return showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n  };\n\n  var handleStateChange = function handleStateChange(changes, stateAndHelpers) {\n    var isOpen = changes.isOpen,\n        type = changes.type;\n    var selectedItem = stateAndHelpers.selectedItem;\n\n    if (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n      setIsOpen(isOpen);\n    } // allow invoking click event repeatedly on featured suggestions\n\n\n    if (!changes.selectedItem && (type === _downshift2.default.stateChangeTypes.clickItem || type === _downshift2.default.stateChangeTypes.keyDownEnter) && selectedItem && selectedItem._suggestion_type === _helper.suggestionTypes.Featured) {\n      onSuggestionSelected(selectedItem);\n    }\n  };\n\n  var handleSearchIconClick = function handleSearchIconClick() {\n    if (currentValue.trim()) {\n      setValue(currentValue, true, props, _causes2.default.SEARCH_ICON_CLICK);\n      onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n    }\n  };\n\n  var handleVoiceResults = function handleVoiceResults(_ref5) {\n    var results = _ref5.results;\n\n    if (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n      setValue(results[0][0].transcript.trim(), true, props, undefined, true, isOpen);\n    }\n  };\n\n  var renderNoSuggestion = function renderNoSuggestion() {\n    var finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var themePreset = props.themePreset,\n        theme = props.theme,\n        isLoading = props.isLoading,\n        renderNoSuggestion = props.renderNoSuggestion,\n        innerClass = props.innerClass,\n        error = props.error,\n        renderError = props.renderError;\n\n    if (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        themePreset: themePreset,\n        theme: theme,\n        innerClassName: 'noSuggestion'\n      }, typeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion);\n    }\n\n    return null;\n  };\n\n  var renderLoader = function renderLoader() {\n    var loader = props.loader,\n        isLoading = props.isLoading,\n        themePreset = props.themePreset,\n        theme = props.theme,\n        innerClass = props.innerClass;\n\n    if (isLoading && loader && currentValue) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'loader',\n        theme: theme,\n        themePreset: themePreset\n      }, loader);\n    }\n\n    return null;\n  };\n\n  var renderError = function renderError() {\n    var error = props.error,\n        renderError = props.renderError,\n        themePreset = props.themePreset,\n        theme = props.theme,\n        isLoading = props.isLoading,\n        innerClass = props.innerClass;\n\n    if (error && renderError && currentValue && !isLoading) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'error',\n        theme: theme,\n        themePreset: themePreset\n      }, (0, _helper.isFunction)(renderError) ? renderError(error) : renderError);\n    }\n\n    return null;\n  };\n\n  var handleFocus = function handleFocus(event) {\n    if (props.autosuggest) {\n      setIsOpen(true);\n    }\n\n    if (props.onFocus) {\n      props.onFocus(event, triggerQuery);\n    }\n  };\n\n  var getComponent = function getComponent() {\n    var downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var error = props.error,\n        isLoading = props.isLoading,\n        rawData = props.rawData;\n    var data = {\n      error: error,\n      loading: isLoading,\n      downshiftProps: downshiftProps,\n      data: props.suggestions,\n      value: currentValue,\n      triggerClickAnalytics: triggerClickAnalytics,\n      resultStats: stats(),\n      rawData: rawData\n    };\n    return (0, _helper.getComponent)(data, props);\n  };\n\n  var renderInputAddonBefore = function renderInputAddonBefore() {\n    var addonBefore = props.addonBefore,\n        expandSuggestionsContainer = props.expandSuggestionsContainer;\n\n    if (addonBefore) {\n      return (0, _core.jsx)(_InputAddon2.default, {\n        isOpen: isOpen,\n        expandSuggestionsContainer: expandSuggestionsContainer\n      }, addonBefore);\n    }\n\n    return null;\n  };\n\n  var renderInputAddonAfter = function renderInputAddonAfter() {\n    var addonAfter = props.addonAfter,\n        expandSuggestionsContainer = props.expandSuggestionsContainer;\n\n    if (addonAfter) {\n      return (0, _core.jsx)(_InputAddon2.default, {\n        isOpen: isOpen,\n        expandSuggestionsContainer: expandSuggestionsContainer\n      }, addonAfter);\n    }\n\n    return null;\n  };\n\n  var renderEnterButtonElement = function renderEnterButtonElement() {\n    var enterButton = props.enterButton,\n        renderEnterButton = props.renderEnterButton,\n        innerClass = props.innerClass;\n\n    if (enterButton) {\n      var getEnterButtonMarkup = function getEnterButtonMarkup() {\n        if (typeof renderEnterButton === 'function') {\n          return renderEnterButton(enterButtonOnClick);\n        }\n\n        return (0, _core.jsx)(_Button2.default, {\n          className: 'enter-btn ' + (0, _helper.getClassName)(innerClass, 'enter-button'),\n          primary: true,\n          onClick: enterButtonOnClick\n        }, 'Search');\n      };\n\n      return (0, _core.jsx)('div', {\n        className: 'enter-button-wrapper'\n      }, getEnterButtonMarkup());\n    }\n\n    return null;\n  };\n\n  var renderIcon = function renderIcon() {\n    if (props.showIcon) {\n      if (props.icon) {\n        return props.icon;\n      }\n\n      if (props.iconURL) {\n        return (0, _core.jsx)('img', {\n          style: {\n            maxHeight: '25px'\n          },\n          src: (0, _xss2.default)(props.iconURL),\n          alt: 'search-icon'\n        });\n      }\n\n      return (0, _core.jsx)(_SearchSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  var renderCancelIcon = function renderCancelIcon() {\n    if (props.showClear) {\n      return props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  var renderShortcut = function renderShortcut() {\n    if (props.focusShortcuts && props.focusShortcuts.length) {\n      var shortcut = props.focusShortcuts[0];\n      shortcut = shortcut.toLowerCase();\n      shortcut = shortcut.replace('shift', '⬆️');\n      shortcut = shortcut.replace('command', 'cmd');\n      shortcut = shortcut.replace('control', 'ctrl');\n      shortcut = shortcut.replace('option', 'alt');\n      return shortcut.toUpperCase();\n    }\n\n    return '/';\n  };\n\n  var renderIcons = function renderIcons() {\n    var showIcon = props.showIcon,\n        showClear = props.showClear,\n        renderMic = props.renderMic,\n        getMicInstance = props.getMicInstance,\n        showVoiceSearch = props.showVoiceSearch,\n        iconPosition = props.iconPosition,\n        innerClass = props.innerClass,\n        showFocusShortcutsIcon = props.showFocusShortcutsIcon;\n    return (0, _core.jsx)('div', null, (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'right',\n      positionType: 'absolute'\n    }, currentValue && showClear && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: clearValue,\n      showIcon: showIcon,\n      isClearIcon: true\n    }, renderCancelIcon()), showFocusShortcutsIcon && (0, _core.jsx)(_IconWrapper.ButtonIconWrapper, {\n      onClick: function onClick(e) {\n        return focusSearchBox(e);\n      }\n    }, renderShortcut()), shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n      getInstance: getMicInstance,\n      render: renderMic,\n      onResult: handleVoiceResults,\n      className: (0, _helper.getClassName)(innerClass, 'mic') || null\n    }), iconPosition === 'right' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: handleSearchIconClick\n    }, renderIcon())), (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'left',\n      positionType: 'absolute'\n    }, iconPosition === 'left' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: handleSearchIconClick\n    }, renderIcon())));\n  };\n\n  var SuggestionsFooter = function SuggestionsFooter() {\n    return typeof renderSuggestionsFooter === 'function' ? renderSuggestionsFooter() : (0, _core.jsx)(_AutoSuggestFooterContainer2.default, null, (0, _core.jsx)('div', null, '\\u2191\\u2193 Navigate'), (0, _core.jsx)('div', null, '\\u21A9 Go'));\n  };\n\n  var onAutofillClick = function onAutofillClick(suggestion) {\n    var value = suggestion.value;\n    setIsOpen(true);\n    setCurrentValue((0, _utils.decodeHtml)(value));\n    triggerDefaultQuery(value);\n  };\n\n  var hasMounted = (0, _react.useRef)();\n  useConstructor(function () {\n    var mode = props.mode;\n\n    if (mode === _constants.SEARCH_COMPONENTS_MODES.TAG) {\n      isTagsMode.current = true;\n    }\n\n    if (isTagsMode.current) {\n      console.warn('Warning(ReactiveSearch): The `categoryField` prop is not supported when `mode` prop is set to `tag`');\n    }\n\n    var currentLocalValue = selectedValue || value || defaultValue || '';\n    hasMounted.current = false;\n\n    if (currentLocalValue) {\n      if (props.onChange) {\n        props.onChange(currentLocalValue, function () {\n          var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n              isOpen = _ref6.isOpen;\n\n          return triggerQuery({\n            customQuery: true,\n            value: currentLocalValue,\n            isOpen: isOpen\n          });\n        });\n      }\n    }\n\n    setCurrentValue(isTagsMode.current ? '' : (0, _utils.decodeHtml)(currentLocalValue));\n\n    if (isTagsMode.current && Array.isArray(currentLocalValue)) {\n      setSelectedTags(currentLocalValue);\n    } // Set custom and default queries in store\n\n\n    triggerCustomQuery(currentLocalValue, selectedCategory);\n    triggerDefaultQuery(currentLocalValue);\n  });\n\n  var clearTag = function clearTag(tagValue) {\n    var newSelectedTags = [].concat(selectedTags.filter(function (tag) {\n      return tag !== tagValue;\n    }));\n    setSelectedTags(newSelectedTags);\n    setCurrentValue('');\n    triggerCustomQuery(newSelectedTags);\n\n    if (props.value !== undefined && typeof onChange === 'function') {\n      onChange(newSelectedTags, function () {\n        var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref7.isOpen;\n\n        return triggerQuery({\n          customQuery: true,\n          value: newSelectedTags,\n          isOpen: isOpen\n        });\n      });\n    }\n  };\n\n  var clearAllTags = function clearAllTags() {\n    setSelectedTags([]);\n    setValue('', true, props, _causes2.default.SUGGESTION_SELECT, hasMounted.current, false);\n\n    if (props.value !== undefined && typeof onChange === 'function') {\n      onChange([], function () {\n        var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref8.isOpen;\n\n        return triggerQuery({\n          customQuery: true,\n          value: [],\n          isOpen: isOpen\n        });\n      });\n    }\n  };\n\n  var renderTag = function renderTag(item) {\n    var innerClass = props.innerClass;\n    return (0, _core.jsx)(_Tags.TagItem, {\n      key: item,\n      className: (0, _helper.getClassName)(innerClass, 'selected-tag') || ''\n    }, (0, _core.jsx)('span', null, item), (0, _core.jsx)('span', {\n      role: 'img',\n      'aria-label': 'delete-tag',\n      className: 'close-icon',\n      onClick: function onClick() {\n        return clearTag(item);\n      }\n    }, (0, _core.jsx)(_CancelSvg2.default, null)));\n  };\n\n  var renderTags = function renderTags() {\n    if (!Array.isArray(selectedTags)) {\n      return null;\n    }\n\n    var tagsList = [].concat(selectedTags);\n    var shouldRenderClearAllTag = tagsList.length > 1;\n    var renderSelectedTags = props.renderSelectedTags,\n        innerClass = props.innerClass;\n    return renderSelectedTags ? renderSelectedTags({\n      values: selectedTags,\n      handleClear: clearTag,\n      handleClearAll: clearAllTags\n    }) : (0, _core.jsx)(_Tags.TagsContainer, null, tagsList.map(function (item) {\n      return renderTag(item);\n    }), shouldRenderClearAllTag && (0, _core.jsx)(_Tags.TagItem, {\n      'class': (0, _helper.getClassName)(innerClass, 'selected-tag') || ''\n    }, (0, _core.jsx)('span', null, 'Clear All'), (0, _core.jsx)('span', {\n      role: 'img',\n      'aria-label': 'delete-tag',\n      className: 'close-icon',\n      onClick: clearAllTags\n    }, (0, _core.jsx)(_CancelSvg2.default, null)), ' '));\n  };\n\n  (0, _react.useEffect)(function () {\n    if (onData) {\n      onData({\n        data: parsedSuggestions(),\n        rawData: rawData,\n        aggregationData: aggregationData,\n        loading: isLoading,\n        error: error\n      });\n    }\n  }, [rawData, aggregationData, isLoading, error]);\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      if (value !== undefined && !(0, _helper.isEqual)(value, isTagsMode.current ? selectedTags : currentValue)) {\n        var cause = !value ? _causes2.default.CLEAR_VALUE : undefined;\n\n        if (isTagsMode.current) {\n          cause = _causes2.default.SUGGESTION_SELECT;\n        }\n\n        if (isTagsMode.current && typeof value === 'string') {\n          setValue(value, false, props, undefined, true, false);\n          setCurrentValue(value);\n          triggerDefaultQuery();\n          return;\n        }\n\n        setValue(value, !isOpen && props.autosuggest && !props.strictSelection, props, cause, undefined, false);\n      }\n    }\n  }, [value]);\n  (0, _react.useEffect)(function () {\n    if ( // since, selectedValue will be updated when currentValue changes,\n    // we must only check for the changes introduced by\n    // clear action from SelectedFilters component in which case,\n    // the currentValue will never match the updated selectedValue\n    // currentValue !== props.defaultValue &&\n    hasMounted.current && !(0, _helper.isEqual)(isTagsMode.current ? selectedTags : currentValue, selectedValue) && !(typeof currentValue !== 'string' && !selectedValue)) {\n      if (!selectedValue && currentValue) {\n        // selected value is cleared, call onValueSelected\n        onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n      }\n\n      if (isTagsMode.current && Array.isArray(selectedValue)) {\n        selectedTags = []; // reset\n      }\n\n      if (value === undefined) {\n        setValue(!selectedValue || (0, _utils.isEmpty)(selectedValue) ? '' : selectedValue, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : undefined, hasMounted.current, false);\n      } else if (onChange) {\n        if (!(0, _helper.isEqual)(value, selectedValue) && !(0, _helper.isEqual)(selectedValue, isTagsMode.current ? selectedTags : currentValue)) {\n          if (isTagsMode.current && typeof selectedValue !== 'string') {\n            setSelectedTags(selectedValue);\n          } // value prop exists\n\n\n          onChange(selectedValue || (isTagsMode.current ? [] : ''), function () {\n            var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                isOpen = _ref9.isOpen;\n\n            return triggerQuery({\n              customQuery: true,\n              value: selectedValue || '',\n              isOpen: isOpen\n            });\n          });\n        }\n      } else {\n        // value prop exists and onChange is not defined:\n        // we need to put the current value back into the store\n        // if the clear action was triggered by interacting with\n        // selected-filters component\n        setValue(isTagsMode.current ? selectedTags : currentValue, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : undefined, true, false);\n      }\n    }\n  }, [selectedValue]);\n  (0, _react.useEffect)(function () {\n    hasMounted.current = true; // register hotkeys for listening to focusShortcuts' key presses\n\n    listenForFocusShortcuts();\n  }, []);\n\n  var hasSuggestions = function hasSuggestions() {\n    return Array.isArray(parsedSuggestions()) && parsedSuggestions().length;\n  };\n\n  return (0, _core.jsx)(_Container2.default, {\n    style: props.style,\n    className: props.className\n  }, props.title && (0, _core.jsx)(_Title2.default, {\n    className: (0, _helper.getClassName)(props.innerClass, 'title') || null\n  }, props.title), props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n    id: props.componentId + '-downshift',\n    onChange: onSuggestionSelected,\n    onStateChange: handleStateChange,\n    isOpen: isOpen,\n    itemToString: function itemToString(i) {\n      return i;\n    },\n    render: function render(_ref10) {\n      var getRootProps = _ref10.getRootProps,\n          getInputProps = _ref10.getInputProps,\n          getItemProps = _ref10.getItemProps,\n          isOpen = _ref10.isOpen,\n          highlightedIndex = _ref10.highlightedIndex,\n          setHighlightedIndex = _ref10.setHighlightedIndex,\n          rest = _objectWithoutProperties(_ref10, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n      var renderSuggestionsDropdown = function renderSuggestionsDropdown() {\n        var getIcon = function getIcon(iconType, item) {\n          switch (iconType) {\n            case _helper.suggestionTypes.Recent:\n              return props.recentSearchesIcon;\n\n            case _helper.suggestionTypes.Popular:\n              return props.popularSearchesIcon;\n\n            case _helper.suggestionTypes.Featured:\n              if (item.icon) {\n                return (0, _core.jsx)('div', {\n                  style: {\n                    display: 'flex'\n                  },\n                  dangerouslySetInnerHTML: {\n                    __html: (0, _xss2.default)(item.icon)\n                  }\n                });\n              }\n\n              return (0, _core.jsx)('img', {\n                style: {\n                  maxHeight: '25px'\n                },\n                src: (0, _xss2.default)(item.iconURL),\n                alt: item.value\n              });\n\n            default:\n              return null;\n          }\n        }; // action icon is dispkayed on right of the suggestion item\n\n\n        var getActionIcon = function getActionIcon(item) {\n          if (item._suggestion_type === _helper.suggestionTypes.Featured) {\n            if (item.action === _helper.featuredSuggestionsActionTypes.FUNCTION) {\n              return (0, _core.jsx)(_AutofillSvg2.default, {\n                style: {\n                  transform: 'rotate(135deg)',\n                  pointerEvents: 'none'\n                }\n              });\n            }\n\n            return null;\n          } else if (!item._category) {\n            /* 👇 avoid showing autofill for category suggestions👇 */\n            return (0, _core.jsx)(_AutofillSvg2.default, {\n              onClick: function onClick(e) {\n                e.stopPropagation();\n                onAutofillClick(item);\n              }\n            });\n          }\n\n          return null;\n        };\n\n        var indexOffset = 0;\n        return (0, _core.jsx)(_react2.default.Fragment, null, (0, _helper.hasCustomRenderer)(props) && getComponent(_extends({\n          getInputProps: getInputProps,\n          getItemProps: getItemProps,\n          isOpen: isOpen,\n          highlightedIndex: highlightedIndex,\n          setHighlightedIndex: setHighlightedIndex\n        }, rest)), isOpen && renderLoader(), isOpen && renderError(), !(0, _helper.hasCustomRenderer)(props) && isOpen && hasSuggestions() ? (0, _core.jsx)('ul', {\n          css: (0, _Input.searchboxSuggestions)(props.themePreset, props.theme),\n          className: '' + (0, _helper.getClassName)(props.innerClass, 'list')\n        }, parsedSuggestions().map(function (item, itemIndex) {\n          var index = indexOffset + itemIndex;\n\n          if (Array.isArray(item)) {\n            var sectionHtml = (0, _xss2.default)(item[0].sectionLabel);\n            indexOffset += item.length - 1;\n            return (0, _core.jsx)('div', {\n              className: 'section-container',\n              key: '' + item[0].sectionId\n            }, sectionHtml && (0, _core.jsx)('div', {\n              className: 'section-header ' + (0, _helper.getClassName)(props.innerClass, 'section-label'),\n              dangerouslySetInnerHTML: {\n                __html: sectionHtml\n              }\n            }), (0, _core.jsx)('ul', {\n              className: 'section-list'\n            }, item.map(function (sectionItem, sectionIndex) {\n              return (0, _core.jsx)('li', _extends({}, getItemProps({\n                item: sectionItem\n              }), {\n                key: sectionItem.sectionId + sectionIndex + '-' + sectionItem.value,\n                style: {\n                  justifyContent: 'flex-start',\n                  alignItems: 'center'\n                },\n                className: '' + (highlightedIndex === index + sectionIndex ? 'active-li-item ' + (0, _helper.getClassName)(props.innerClass, 'active-suggestion-item') : 'li-item ' + (0, _helper.getClassName)(props.innerClass, 'suggestion-item'))\n              }), props.renderItem ? props.renderItem(sectionItem) : (0, _core.jsx)(_react2.default.Fragment, null, (0, _core.jsx)('div', {\n                style: {\n                  padding: '0 10px 0 0',\n                  display: 'flex'\n                }\n              }, (0, _core.jsx)(_CustomSvg2.default, {\n                iconId: sectionIndex + index + 1 + '-' + sectionItem.value + '-icon',\n                className: (0, _helper.getClassName)(props.innerClass, sectionItem._suggestion_type + '-search-icon') || null,\n                icon: getIcon(sectionItem._suggestion_type, sectionItem),\n                type: sectionItem._suggestion_type + '-search-icon'\n              })), (0, _core.jsx)('div', {\n                className: 'trim'\n              }, (0, _core.jsx)(_Flex2.default, {\n                direction: 'column'\n              }, sectionItem.label && (0, _core.jsx)('div', {\n                className: 'section-list-item__label',\n                dangerouslySetInnerHTML: {\n                  __html: (0, _xss2.default)(sectionItem.label)\n                }\n              }), sectionItem.description && (0, _core.jsx)('div', {\n                className: 'section-list-item__description',\n                dangerouslySetInnerHTML: {\n                  __html: (0, _xss2.default)(sectionItem.description)\n                }\n              }))), getActionIcon(sectionItem)));\n            })));\n          }\n\n          return (0, _core.jsx)('li', _extends({}, getItemProps({\n            item: item\n          }), {\n            key: index + 1 + '-' + item.value,\n            style: {\n              justifyContent: 'flex-start',\n              alignItems: 'center'\n            },\n            className: '' + (highlightedIndex === index ? 'active-li-item ' + (0, _helper.getClassName)(props.innerClass, 'active-suggestion-item') : 'li-item ' + (0, _helper.getClassName)(props.innerClass, 'suggestion-item'))\n          }), props.renderItem ? props.renderItem(item) : (0, _core.jsx)(_react2.default.Fragment, null, (0, _core.jsx)('div', {\n            style: {\n              padding: '0 10px 0 0',\n              display: 'flex'\n            }\n          }, (0, _core.jsx)(_CustomSvg2.default, {\n            iconId: index + 1 + '-' + item.value + '-icon',\n            className: (0, _helper.getClassName)(props.innerClass, item._suggestion_type + '-search-icon') || null,\n            icon: getIcon(item._suggestion_type, item),\n            type: item._suggestion_type + '-search-icon'\n          })), (0, _core.jsx)(_SuggestionItem2.default, {\n            currentValue: currentValue || '',\n            suggestion: item\n          }), getActionIcon(item)));\n        }), showSuggestionsFooter ? (0, _core.jsx)(SuggestionsFooter, null) : null) : renderNoSuggestion(parsedSuggestions()));\n      };\n\n      return (0, _core.jsx)('div', getRootProps({\n        css: _Input.suggestionsContainer\n      }, {\n        suppressRefError: true\n      }), (0, _core.jsx)(_InputGroup2.default, {\n        isOpen: isOpen\n      }, renderInputAddonBefore(), (0, _core.jsx)(_InputWrapper2.default, null, (0, _core.jsx)(_Input2.default, _extends({\n        'aria-label': props.componentId,\n        id: props.componentId + '-input',\n        showIcon: props.showIcon,\n        showClear: props.showClear,\n        iconPosition: props.iconPosition,\n        ref: _inputRef\n      }, getInputProps({\n        className: (0, _helper.getClassName)(props.innerClass, 'input'),\n        placeholder: props.placeholder,\n        value: currentValue === null ? '' : currentValue,\n        onChange: onInputChange,\n        onBlur: withTriggerQuery(props.onBlur),\n        onFocus: handleFocus,\n        onClick: function onClick() {\n          // clear highlighted index\n          setHighlightedIndex(null);\n        },\n        onKeyPress: withTriggerQuery(props.onKeyPress),\n        onKeyDown: function onKeyDown(e) {\n          return handleKeyDown(e, highlightedIndex);\n        },\n        onKeyUp: withTriggerQuery(props.onKeyUp),\n        autoFocus: props.autoFocus\n      }), {\n        themePreset: props.themePreset,\n        type: props.type,\n        searchBox: true // a prop specific to Input styled-component\n        ,\n        isOpen: isOpen // is dropdown open or not\n\n      })), renderIcons(), !props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))), renderInputAddonAfter(), renderEnterButtonElement()), props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest)), renderTags());\n    }\n  }, props.downShiftProps)) : (0, _core.jsx)('div', {\n    css: _Input.suggestionsContainer\n  }, (0, _core.jsx)(_InputGroup2.default, {\n    isOpen: false\n  }, renderInputAddonBefore(), (0, _core.jsx)(_InputWrapper2.default, null, (0, _core.jsx)(_Input2.default, {\n    'aria-label': props.componentId,\n    className: (0, _helper.getClassName)(props.innerClass, 'input') || null,\n    placeholder: props.placeholder,\n    value: currentValue || '',\n    onChange: onInputChange,\n    onBlur: withTriggerQuery(props.onBlur),\n    onFocus: withTriggerQuery(props.onFocus),\n    onKeyPress: withTriggerQuery(props.onKeyPress),\n    onKeyDown: handleKeyDown,\n    onKeyUp: withTriggerQuery(props.onKeyUp),\n    autoFocus: props.autoFocus,\n    iconPosition: props.iconPosition,\n    showIcon: props.showIcon,\n    showClear: props.showClear,\n    themePreset: props.themePreset,\n    searchBox: true // a prop specific to Input styled-component\n    ,\n    isOpen: false // is dropdown open or not\n    ,\n    type: props.type\n  }), renderIcons()), renderInputAddonAfter(), renderEnterButtonElement())));\n};\n\nSearchBox.propTypes = {\n  updateQuery: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  selectedCategory: _types2.default.string,\n  suggestions: _types2.default.suggestions,\n  triggerAnalytics: _types2.default.funcRequired,\n  error: _types2.default.title,\n  isLoading: _types2.default.bool,\n  time: _types2.default.number,\n  rawData: _types2.default.rawData,\n  aggregationData: _types2.default.aggregationData,\n  // component props\n  autoFocus: _types2.default.bool,\n  autosuggest: _types2.default.bool,\n  enableSynonyms: _types2.default.bool,\n  distinctField: _types2.default.string,\n  distinctFieldConfig: _types2.default.componentObject,\n  index: _types2.default.string,\n  enablePopularSuggestions: _types2.default.bool,\n  enableRecentSuggestions: _types2.default.bool,\n  queryString: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  clearIcon: _types2.default.children,\n  componentId: _types2.default.stringRequired,\n  customHighlight: _types2.default.func,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  dataField: _types2.default.dataFieldValidator,\n  aggregationField: _types2.default.string,\n  aggregationSize: _types2.default.number,\n  size: _types2.default.number,\n  debounce: _types2.default.number,\n  defaultValue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n  value: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n  customData: _types2.default.title,\n  downShiftProps: _types2.default.props,\n  children: _types2.default.func,\n  excludeFields: _types2.default.excludeFields,\n  fieldWeights: _types2.default.fieldWeights,\n  filterLabel: _types2.default.string,\n  fuzziness: _types2.default.fuzziness,\n  highlight: _types2.default.bool,\n  highlightField: _types2.default.stringOrArray,\n  icon: _types2.default.children,\n  iconURL: _types2.default.string,\n  iconPosition: _types2.default.iconPosition,\n  innerClass: _types2.default.style,\n  includeFields: _types2.default.includeFields,\n  loader: _types2.default.title,\n  nestedField: _types2.default.string,\n  onError: _types2.default.func,\n  onBlur: _types2.default.func,\n  onFocus: _types2.default.func,\n  onKeyDown: _types2.default.func,\n  onKeyPress: _types2.default.func,\n  onKeyUp: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  onValueSelected: _types2.default.func,\n  placeholder: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  react: _types2.default.react,\n  render: _types2.default.func,\n  renderError: _types2.default.title,\n  renderNoSuggestion: _types2.default.title,\n  showClear: _types2.default.bool,\n  showDistinctSuggestions: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  showIcon: _types2.default.bool,\n  showVoiceSearch: _types2.default.bool,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  theme: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  type: _types2.default.string,\n  URLParams: _types2.default.bool,\n  strictSelection: _types2.default.bool,\n  searchOperators: _types2.default.bool,\n  enablePredictiveSuggestions: _types2.default.bool,\n  recentSearchesIcon: _types2.default.componentObject,\n  popularSearchesIcon: _types2.default.componentObject,\n  // Mic props\n  getMicInstance: _types2.default.func,\n  renderMic: _types2.default.func,\n  //\n  focusShortcuts: _types2.default.focusShortcuts,\n  showFocusShortcutsIcon: _types2.default.bool,\n  addonBefore: _types2.default.children,\n  addonAfter: _types2.default.children,\n  expandSuggestionsContainer: _types2.default.bool,\n  popularSuggestionsConfig: _types2.default.componentObject,\n  recentSuggestionsConfig: _types2.default.componentObject,\n  showSuggestionsFooter: _types2.default.bool,\n  renderSuggestionsFooter: _types2.default.func,\n  applyStopwords: _types2.default.bool,\n  customStopwords: _types2.default.stringArray,\n  onData: _types2.default.func,\n  renderItem: _types2.default.func,\n  isOpen: _types2.default.bool,\n  enableIndexSuggestions: _types2.default.bool,\n  enableFeaturedSuggestions: _types2.default.bool,\n  featuredSuggestionsConfig: _types2.default.componentObject,\n  indexSuggestionsConfig: _types2.default.componentObject,\n  enterButton: _types2.default.bool,\n  renderEnterButton: _types2.default.func,\n  customEvents: _types2.default.componentObject,\n  searchboxId: _types2.default.string,\n  endpoint: _types2.default.endpoint,\n  mode: (0, _propTypes.oneOf)(['select', 'tag']),\n  highlightConfig: _types2.default.componentObject,\n  renderSelectedTags: _types2.default.func\n};\nSearchBox.defaultProps = {\n  autosuggest: true,\n  className: null,\n  debounce: 100,\n  downShiftProps: {},\n  enableSynonyms: true,\n  enablePopularSuggestions: false,\n  excludeFields: [],\n  iconPosition: 'left',\n  includeFields: ['*'],\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showFilter: true,\n  showIcon: true,\n  showFocusShortcutsIcon: true,\n  showVoiceSearch: false,\n  style: {},\n  URLParams: false,\n  showClear: false,\n  showDistinctSuggestions: true,\n  showSuggestionsFooter: true,\n  strictSelection: false,\n  searchOperators: false,\n  size: 10,\n  time: 0,\n  focusShortcuts: ['/'],\n  addonBefore: undefined,\n  addonAfter: undefined,\n  expandSuggestionsContainer: true,\n  suggestions: [],\n  isOpen: false,\n  enterButton: false,\n  type: 'search',\n  mode: 'select'\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    selectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n    suggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n    rawData: state.rawData[props.componentId],\n    aggregationData: state.compositeAggregations[props.componentId],\n    themePreset: state.config.themePreset,\n    isLoading: !!state.isLoading[props.componentId + '_active'],\n    error: state.error[props.componentId],\n    time: state.hits[props.componentId] && state.hits[props.componentId].time,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    customEvents: state.config.analyticsConfig ? state.config.analyticsConfig.customEvents : {}\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n      return dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n    },\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    }\n  };\n}; // Add componentType for SSR\n\n\nSearchBox.componentType = _constants.componentTypes.searchBox;\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)(SearchBox, _extends({\n    ref: props.myForwardedRef\n  }, props));\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(_PreferencesConsumer2.default, {\n    userProps: props\n  }, function (preferenceProps) {\n    return (0, _core.jsx)(_ComponentWrapper2.default, _extends({}, preferenceProps, {\n      internalComponent: true,\n      componentType: _constants.componentTypes.searchBox,\n      mode: preferenceProps.testMode ? 'test' : ''\n    }), function (componentProps) {\n      return (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n        myForwardedRef: ref\n      }));\n    });\n  });\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, SearchBox);\nForwardRefComponent.displayName = 'SearchBox';\nexports.default = ForwardRefComponent;","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_core","require","_constants","_transform","_emotionTheming","_propTypes","_causes","_causes2","_interopRequireDefault","_helper","_downshift","_downshift2","_hoistNonReactStatics","_hoistNonReactStatics2","_react","_react2","_types","_types2","_actions","_hotkeysJs","_hotkeysJs2","_xss","_xss2","_PreferencesConsumer","_PreferencesConsumer2","_ComponentWrapper","_ComponentWrapper2","_InputGroup","_InputGroup2","_InputWrapper","_InputWrapper2","_InputAddon","_InputAddon2","_IconGroup","_IconGroup2","_IconWrapper","_IconWrapper2","_SearchSvg","_SearchSvg2","_Tags","_Container","_Container2","_Title","_Title2","_Input","_Input2","_Button","_Button2","_SuggestionItem","_SuggestionItem2","_utils","_Mic","_Mic2","_CancelSvg","_CancelSvg2","_CustomSvg","_CustomSvg2","_SuggestionWrapper","_SuggestionWrapper2","_AutofillSvg","_AutofillSvg2","_Flex","_Flex2","_AutoSuggestFooterContainer","_AutoSuggestFooterContainer2","obj","default","_objectWithoutProperties","keys","indexOf","useConstructor","callBack","undefined","_useState","useState","hasBeenCalled","setHasBeenCalled","SearchBox","props","selectedValue","selectedCategory","value","defaultValue","componentId","rawData","aggregationData","isLoading","error","onData","onChange","focusShortcuts","defaultQuery","filterLabel","showFilter","URLParams","customQuery","customEvents","showSuggestionsFooter","renderSuggestionsFooter","internalComponent","getInternalComponentID","_useState2","currentValue","setCurrentValue","_useState3","selectedTags","setSelectedTags","_useState4","isOpen","setIsOpen","_inputRef","useRef","isTagsMode","stats","getResultStats","parsedSuggestions","suggestionsArray","Array","isArray","suggestions","concat","withClickIds","sectionsAccumulated","sectionisedSuggestions","reduce","acc","d","currentIndex","includes","sectionId","filter","g","push","values","focusSearchBox","event","elt","srcElement","tagName","isContentEditable","current","focus","listenForFocusShortcuts","isEmpty","parseFocusShortcuts","join","handler","preventDefault","modifierKeys","extractModifierKeysFromFocusShortcuts","index","element","triggerClickAnalytics","searchPosition","documentId","docId","hitData","find","hit","_click_id","_id","triggerAnalytics","searchBoxDefaultQuery","query","queryFormat","dataField","nestedField","queryString","searchOperators","triggerDefaultQuery","paramValue","autosuggest","defaultQueryTobeSet","updateDefaultQuery","updateQuery","componentType","componentTypes","searchBox","triggerCustomQuery","categoryValue","customQueryTobeSet","queryTobeSet","updateCustomQuery","label","category","triggerQuery","_ref","_ref$isOpen","_ref$customQuery","_ref$defaultQuery","_ref$value","_ref$categoryValue","onValueSelected","valueSelected","cause","suggestion","handleTextChange","debounce","valueParam","enterButton","CLEAR_VALUE","setValue","isDefaultValue","setValueProps","hasMounted","toggleIsOpen","performUpdate","isEqual","newSelectedTags","newCurrentValue","decodeHtml","SUGGESTION_SELECT","mergedArray","from","Set","queryHandlerValue","strictSelection","ENTER_PRESS","SEARCH_ICON_CLICK","onValueChange","checkValueChange","beforeValueChange","withTriggerQuery","func","e","_ref2","handleFeaturedSuggestionClicked","action","featuredSuggestionsActionTypes","NAVIGATE","_JSON$parse","JSON","parse","subAction","_JSON$parse$target","_JSON$parse$link","link","window","open","FUNCTION","Function","SELECT","blur","console","onSuggestionSelected","_suggestion_type","suggestionTypes","Featured","suggestionValue","_category","emitValue","onInputChange","inputValue","handleCaretPosition","_ref3","enterButtonOnClick","handleKeyDown","highlightedIndex","onKeyDown","clearValue","_ref4","shouldMicRender","showVoiceSearch","webkitSpeechRecognition","SpeechRecognition","handleStateChange","changes","stateAndHelpers","type","selectedItem","stateChangeTypes","mouseUp","clickItem","keyDownEnter","handleSearchIconClick","trim","handleVoiceResults","_ref5","results","isFinal","transcript","renderNoSuggestion","finalSuggestionsList","themePreset","theme","innerClass","renderError","jsx","innerClassName","renderLoader","loader","isFunction","handleFocus","onFocus","getComponent","downshiftProps","data","loading","resultStats","renderInputAddonBefore","addonBefore","expandSuggestionsContainer","renderInputAddonAfter","addonAfter","renderEnterButtonElement","renderEnterButton","getEnterButtonMarkup","className","getClassName","primary","onClick","renderIcon","showIcon","icon","iconURL","style","maxHeight","src","alt","renderCancelIcon","showClear","clearIcon","renderShortcut","shortcut","toLowerCase","replace","toUpperCase","renderIcons","renderMic","getMicInstance","iconPosition","showFocusShortcutsIcon","groupPosition","positionType","isClearIcon","ButtonIconWrapper","getInstance","render","onResult","SuggestionsFooter","onAutofillClick","mode","SEARCH_COMPONENTS_MODES","TAG","warn","currentLocalValue","_ref6","clearTag","tagValue","tag","_ref7","clearAllTags","_ref8","renderTag","item","TagItem","role","renderTags","tagsList","shouldRenderClearAllTag","renderSelectedTags","handleClear","handleClearAll","TagsContainer","map","useEffect","_ref9","hasSuggestions","title","id","onStateChange","itemToString","_ref10","getRootProps","getInputProps","getItemProps","setHighlightedIndex","rest","renderSuggestionsDropdown","getIcon","iconType","Recent","recentSearchesIcon","Popular","popularSearchesIcon","display","dangerouslySetInnerHTML","__html","getActionIcon","transform","pointerEvents","stopPropagation","indexOffset","Fragment","hasCustomRenderer","css","searchboxSuggestions","itemIndex","sectionHtml","sectionLabel","sectionItem","sectionIndex","justifyContent","alignItems","renderItem","padding","iconId","direction","description","suggestionsContainer","suppressRefError","ref","placeholder","onBlur","onKeyPress","onKeyUp","autoFocus","apply","downShiftProps","propTypes","funcRequired","string","bool","time","number","enableSynonyms","distinctField","distinctFieldConfig","componentObject","enablePopularSuggestions","enableRecentSuggestions","children","stringRequired","customHighlight","dataFieldValidator","aggregationField","aggregationSize","size","oneOfType","stringArray","customData","excludeFields","fieldWeights","fuzziness","highlight","highlightField","stringOrArray","includeFields","onError","onQueryChange","queryFormatSearch","react","showDistinctSuggestions","enablePredictiveSuggestions","popularSuggestionsConfig","recentSuggestionsConfig","applyStopwords","customStopwords","enableIndexSuggestions","enableFeaturedSuggestions","featuredSuggestionsConfig","indexSuggestionsConfig","searchboxId","endpoint","oneOf","highlightConfig","defaultProps","mapStateToProps","state","selectedValues","hits","compositeAggregations","config","total","hidden","analyticsConfig","mapDispatchtoProps","dispatch","updateQueryObject","recordSuggestionClick","setCustomQuery","component","setDefaultQuery","ConnectedComponent","connect","withTheme","myForwardedRef","ForwardRefComponent","forwardRef","userProps","preferenceProps","testMode","componentProps","displayName"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/search/SearchBox.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /** @jsxRuntime classic */\n/** @jsx jsx */\n\n\nvar _core = require('@emotion/core');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _propTypes = require('prop-types');\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hotkeysJs = require('hotkeys-js');\n\nvar _hotkeysJs2 = _interopRequireDefault(_hotkeysJs);\n\nvar _xss = require('xss');\n\nvar _xss2 = _interopRequireDefault(_xss);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _InputGroup = require('../../styles/InputGroup');\n\nvar _InputGroup2 = _interopRequireDefault(_InputGroup);\n\nvar _InputWrapper = require('../../styles/InputWrapper');\n\nvar _InputWrapper2 = _interopRequireDefault(_InputWrapper);\n\nvar _InputAddon = require('../../styles/InputAddon');\n\nvar _InputAddon2 = _interopRequireDefault(_InputAddon);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _Tags = require('../../styles/Tags');\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Button = require('../../styles/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _utils = require('../../utils');\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _AutofillSvg = require('../shared/AutofillSvg');\n\nvar _AutofillSvg2 = _interopRequireDefault(_AutofillSvg);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _AutoSuggestFooterContainer = require('../../styles/AutoSuggestFooterContainer');\n\nvar _AutoSuggestFooterContainer2 = _interopRequireDefault(_AutoSuggestFooterContainer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar useConstructor = function useConstructor() {\n\tvar callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n\tvar _useState = (0, _react.useState)(false),\n\t    hasBeenCalled = _useState[0],\n\t    setHasBeenCalled = _useState[1];\n\n\tif (hasBeenCalled) return;\n\tcallBack();\n\tsetHasBeenCalled(true);\n};\n\nvar SearchBox = function SearchBox(props) {\n\tvar selectedValue = props.selectedValue,\n\t    selectedCategory = props.selectedCategory,\n\t    value = props.value,\n\t    defaultValue = props.defaultValue,\n\t    componentId = props.componentId,\n\t    rawData = props.rawData,\n\t    aggregationData = props.aggregationData,\n\t    isLoading = props.isLoading,\n\t    error = props.error,\n\t    onData = props.onData,\n\t    onChange = props.onChange,\n\t    focusShortcuts = props.focusShortcuts,\n\t    defaultQuery = props.defaultQuery,\n\t    filterLabel = props.filterLabel,\n\t    showFilter = props.showFilter,\n\t    URLParams = props.URLParams,\n\t    customQuery = props.customQuery,\n\t    customEvents = props.customEvents,\n\t    showSuggestionsFooter = props.showSuggestionsFooter,\n\t    renderSuggestionsFooter = props.renderSuggestionsFooter;\n\n\n\tvar internalComponent = (0, _transform.getInternalComponentID)(componentId);\n\n\tvar _useState2 = (0, _react.useState)(''),\n\t    currentValue = _useState2[0],\n\t    setCurrentValue = _useState2[1];\n\t// eslint-disable-next-line prefer-const\n\n\n\tvar _useState3 = (0, _react.useState)([]),\n\t    selectedTags = _useState3[0],\n\t    setSelectedTags = _useState3[1];\n\n\tvar _useState4 = (0, _react.useState)(props.isOpen),\n\t    isOpen = _useState4[0],\n\t    setIsOpen = _useState4[1];\n\n\tvar _inputRef = (0, _react.useRef)(null);\n\tvar isTagsMode = (0, _react.useRef)(false);\n\tvar stats = function stats() {\n\t\treturn (0, _helper.getResultStats)(props);\n\t};\n\n\tvar parsedSuggestions = function parsedSuggestions() {\n\t\tvar suggestionsArray = [];\n\t\tif (Array.isArray(props.suggestions) && props.suggestions.length) {\n\t\t\tsuggestionsArray = [].concat((0, _helper.withClickIds)(props.suggestions));\n\t\t}\n\n\t\tvar sectionsAccumulated = [];\n\t\tvar sectionisedSuggestions = suggestionsArray.reduce(function (acc, d, currentIndex) {\n\t\t\tif (sectionsAccumulated.includes(d.sectionId)) return acc;\n\t\t\tif (d.sectionId) {\n\t\t\t\tacc[currentIndex] = suggestionsArray.filter(function (g) {\n\t\t\t\t\treturn g.sectionId === d.sectionId;\n\t\t\t\t});\n\t\t\t\tsectionsAccumulated.push(d.sectionId);\n\t\t\t} else {\n\t\t\t\tacc[currentIndex] = d;\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, {});\n\t\treturn Object.values(sectionisedSuggestions);\n\t};\n\tvar focusSearchBox = function focusSearchBox(event) {\n\t\tvar elt = event.target || event.srcElement;\n\t\tvar tagName = elt.tagName;\n\t\tif (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n\t\t\t// already in an input\n\t\t\treturn;\n\t\t}\n\n\t\tif (_inputRef.current) {\n\t\t\t_inputRef.current.focus();\n\t\t}\n\t};\n\tvar listenForFocusShortcuts = function listenForFocusShortcuts() {\n\t\tif ((0, _utils.isEmpty)(focusShortcuts)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// for single press keys (a-z, A-Z) &, hotkeys' combinations such as 'cmd+k', 'ctrl+shft+a', etc\n\t\t(0, _hotkeysJs2.default)((0, _utils.parseFocusShortcuts)(focusShortcuts).join(','),\n\t\t/* eslint-disable no-shadow */\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tfunction (event, handler) {\n\t\t\t// Prevent the default refresh event under WINDOWS system\n\t\t\tevent.preventDefault();\n\t\t\tfocusSearchBox(event);\n\t\t});\n\n\t\t// if one of modifier keys are used, they are handled below\n\t\t(0, _hotkeysJs2.default)('*', function (event) {\n\t\t\tvar modifierKeys = (0, _utils.extractModifierKeysFromFocusShortcuts)(focusShortcuts);\n\n\t\t\tif (modifierKeys.length === 0) return;\n\n\t\t\tfor (var index = 0; index < modifierKeys.length; index += 1) {\n\t\t\t\tvar element = modifierKeys[index];\n\t\t\t\tif (_hotkeysJs2.default[element]) {\n\t\t\t\t\tfocusSearchBox(event);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\tvar triggerClickAnalytics = function triggerClickAnalytics(searchPosition, documentId) {\n\t\tvar docId = documentId;\n\t\tif (!docId) {\n\t\t\tvar hitData = parsedSuggestions().find(function (hit) {\n\t\t\t\treturn hit._click_id === searchPosition;\n\t\t\t});\n\t\t\tif (hitData && hitData.source && hitData.source._id) {\n\t\t\t\tdocId = hitData.source._id;\n\t\t\t}\n\t\t}\n\t\tprops.triggerAnalytics(searchPosition, docId);\n\t};\n\n\tvar searchBoxDefaultQuery = function searchBoxDefaultQuery(value, props) {\n\t\treturn {\n\t\t\tquery: {\n\t\t\t\tqueryFormat: props.queryFormat,\n\t\t\t\tdataField: props.dataField,\n\t\t\t\tvalue: value,\n\t\t\t\tnestedField: props.nestedField,\n\t\t\t\tqueryString: props.queryString,\n\t\t\t\tsearchOperators: props.searchOperators\n\t\t\t}\n\t\t};\n\t};\n\t// fires query to fetch suggestion\n\tvar triggerDefaultQuery = function triggerDefaultQuery(paramValue) {\n\t\tif (!props.autosuggest) {\n\t\t\treturn;\n\t\t}\n\t\tvar value = typeof paramValue !== 'string' ? currentValue : paramValue;\n\t\tvar query = searchBoxDefaultQuery(value, props);\n\t\tif (defaultQuery) {\n\t\t\tvar defaultQueryTobeSet = defaultQuery(value, props) || {};\n\t\t\tif (defaultQueryTobeSet.query) {\n\t\t\t\tquery = defaultQueryTobeSet.query;\n\t\t\t}\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(componentId, props, value);\n\t\t}\n\t\tprops.updateQuery({\n\t\t\tcomponentId: internalComponent,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tcomponentType: _constants.componentTypes.searchBox\n\t\t});\n\t};\n\n\t// fires query to fetch results(dependent components are affected here)\n\tvar triggerCustomQuery = function triggerCustomQuery(paramValue) {\n\t\tvar categoryValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tvar value = typeof paramValue !== 'string' ? currentValue : paramValue;\n\t\tif (isTagsMode.current) {\n\t\t\tvalue = paramValue;\n\t\t}\n\t\tvar query = searchBoxDefaultQuery('' + value + (!isTagsMode.current && categoryValue ? ' in ' + categoryValue : ''), props);\n\t\tif (customQuery) {\n\t\t\tvar customQueryTobeSet = customQuery(value, props) || {};\n\t\t\tvar queryTobeSet = customQueryTobeSet.query;\n\t\t\tif (queryTobeSet) {\n\t\t\t\tquery = queryTobeSet;\n\t\t\t}\n\t\t\t(0, _helper.updateCustomQuery)(componentId, props, value);\n\t\t}\n\t\tprops.updateQuery(_extends({\n\t\t\tcomponentId: componentId,\n\t\t\tvalue: value,\n\t\t\tquery: query,\n\t\t\tlabel: filterLabel,\n\t\t\tshowFilter: showFilter,\n\t\t\tURLParams: URLParams,\n\t\t\tcomponentType: _constants.componentTypes.searchBox\n\t\t}, !isTagsMode.current ? { category: categoryValue } : {}));\n\t};\n\n\tvar triggerQuery = function triggerQuery() {\n\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t    _ref$isOpen = _ref.isOpen,\n\t\t    isOpen = _ref$isOpen === undefined ? undefined : _ref$isOpen,\n\t\t    _ref$customQuery = _ref.customQuery,\n\t\t    customQuery = _ref$customQuery === undefined ? false : _ref$customQuery,\n\t\t    _ref$defaultQuery = _ref.defaultQuery,\n\t\t    defaultQuery = _ref$defaultQuery === undefined ? false : _ref$defaultQuery,\n\t\t    _ref$value = _ref.value,\n\t\t    value = _ref$value === undefined ? undefined : _ref$value,\n\t\t    _ref$categoryValue = _ref.categoryValue,\n\t\t    categoryValue = _ref$categoryValue === undefined ? undefined : _ref$categoryValue;\n\n\t\tif (typeof isOpen === 'boolean') {\n\t\t\tsetIsOpen(isOpen);\n\t\t}\n\n\t\tif (customQuery) {\n\t\t\ttriggerCustomQuery(value, categoryValue);\n\t\t}\n\t\tif (defaultQuery) {\n\t\t\ttriggerDefaultQuery(value);\n\t\t}\n\t};\n\n\tvar onValueSelected = function onValueSelected() {\n\t\tvar valueSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : currentValue;\n\t\tvar cause = arguments[1];\n\t\tvar suggestion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\t\tvar onValueSelected = props.onValueSelected;\n\n\t\tif (onValueSelected) {\n\t\t\tonValueSelected(valueSelected, cause, suggestion);\n\t\t}\n\t};\n\tvar handleTextChange = (0, _react.useRef)((0, _helper.debounce)(function () {\n\t\tvar valueParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\t\tvar cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\t\tvar enterButton = props.enterButton;\n\n\t\tif (cause === _causes2.default.CLEAR_VALUE) {\n\t\t\ttriggerCustomQuery(valueParam);\n\t\t\ttriggerDefaultQuery(valueParam);\n\t\t} else if (props.autosuggest) {\n\t\t\ttriggerDefaultQuery(valueParam);\n\t\t} else if (value === undefined && !onChange && !enterButton) {\n\t\t\ttriggerCustomQuery(valueParam);\n\t\t}\n\t}, props.debounce));\n\n\tvar setValue = function setValue(value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar setValueProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : props;\n\t\tvar cause = arguments[3];\n\t\tvar hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\t\tvar toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\t\tvar categoryValue = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : undefined;\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tif (isTagsMode.current && (0, _helper.isEqual)(value, selectedTags)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar newSelectedTags = [];\n\t\t\tvar newCurrentValue = (0, _utils.decodeHtml)(value);\n\t\t\tif (hasMounted) {\n\t\t\t\tif (isTagsMode.current && cause === _causes2.default.SUGGESTION_SELECT) {\n\t\t\t\t\tif (Array.isArray(selectedTags) && selectedTags.length) {\n\t\t\t\t\t\t// check if value already present in selectedTags\n\t\t\t\t\t\tif (typeof value === 'string' && selectedTags.includes(value)) {\n\t\t\t\t\t\t\tsetIsOpen(false);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof value === 'string' && !!value) {\n\t\t\t\t\t\t\tnewSelectedTags = [].concat(selectedTags, [value]);\n\t\t\t\t\t\t} else if (Array.isArray(value) && !(0, _helper.isEqual)(selectedTags, value)) {\n\t\t\t\t\t\t\tvar mergedArray = Array.from(new Set([].concat(selectedTags, value)));\n\t\t\t\t\t\t\tnewSelectedTags = mergedArray;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (value) {\n\t\t\t\t\t\tnewSelectedTags = typeof value !== 'string' ? value : [].concat(value);\n\t\t\t\t\t}\n\t\t\t\t\tnewCurrentValue = '';\n\t\t\t\t\tsetSelectedTags(newSelectedTags);\n\t\t\t\t} else {\n\t\t\t\t\tnewCurrentValue = (0, _utils.decodeHtml)(value);\n\t\t\t\t}\n\n\t\t\t\tif (toggleIsOpen) setIsOpen(!isOpen);\n\t\t\t\tsetCurrentValue(newCurrentValue);\n\n\t\t\t\tvar queryHandlerValue = value;\n\t\t\t\tif (isTagsMode.current && cause === _causes2.default.SUGGESTION_SELECT) {\n\t\t\t\t\tqueryHandlerValue = Array.isArray(newSelectedTags) && newSelectedTags.length ? newSelectedTags : undefined;\n\t\t\t\t}\n\n\t\t\t\tif (isDefaultValue) {\n\t\t\t\t\tif (props.autosuggest) {\n\t\t\t\t\t\ttriggerQuery(_extends({}, toggleIsOpen && { isOpen: !isOpen }, {\n\t\t\t\t\t\t\tdefaultQuery: false,\n\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\ttriggerDefaultQuery(newCurrentValue);\n\t\t\t\t\t}\n\t\t\t\t\t// in case of strict selection only SUGGESTION_SELECT should be able\n\t\t\t\t\t// to set the query otherwise the value should reset\n\t\t\t\t\tif (setValueProps.strictSelection) {\n\t\t\t\t\t\tif (cause === _causes2.default.SUGGESTION_SELECT || (isTagsMode.current ? newSelectedTags.length === 0 : value === '')) {\n\t\t\t\t\t\t\ttriggerCustomQuery(queryHandlerValue, isTagsMode.current ? undefined : categoryValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetValue('', true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (props.value === undefined || cause === _causes2.default.SUGGESTION_SELECT || cause === _causes2.default.CLEAR_VALUE || cause === _causes2.default.ENTER_PRESS || cause === _causes2.default.SEARCH_ICON_CLICK) {\n\t\t\t\t\t\ttriggerCustomQuery(queryHandlerValue, isTagsMode.current ? undefined : categoryValue);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// debounce for handling text while typing\n\t\t\t\t\thandleTextChange.current(value, cause);\n\t\t\t\t}\n\t\t\t\tif (setValueProps.onValueChange) setValueProps.onValueChange(value);\n\t\t\t} else {\n\t\t\t\ttriggerQuery({\n\t\t\t\t\tdefaultQuery: props.autosuggest,\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: value,\n\t\t\t\t\tcategoryValue: isTagsMode.current ? undefined : categoryValue\n\t\t\t\t});\n\t\t\t\tif (setValueProps.onValueChange) setValueProps.onValueChange(value);\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(setValueProps.componentId, value, setValueProps.beforeValueChange, performUpdate);\n\t};\n\tvar withTriggerQuery = function withTriggerQuery(func) {\n\t\tif (func) {\n\t\t\treturn function (e) {\n\t\t\t\treturn func(e, function () {\n\t\t\t\t\tvar _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { isOpen: false },\n\t\t\t\t\t    isOpen = _ref2.isOpen;\n\n\t\t\t\t\treturn setValue(props.value, !isOpen, props);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t};\n\n\tvar handleFeaturedSuggestionClicked = function handleFeaturedSuggestionClicked(suggestion) {\n\t\ttry {\n\t\t\tif (suggestion.action === _helper.featuredSuggestionsActionTypes.NAVIGATE) {\n\t\t\t\tvar _JSON$parse = JSON.parse(suggestion.subAction),\n\t\t\t\t    _JSON$parse$target = _JSON$parse.target,\n\t\t\t\t    target = _JSON$parse$target === undefined ? '_self' : _JSON$parse$target,\n\t\t\t\t    _JSON$parse$link = _JSON$parse.link,\n\t\t\t\t    link = _JSON$parse$link === undefined ? '/' : _JSON$parse$link;\n\n\t\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t\twindow.open(link, target);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (suggestion.action === _helper.featuredSuggestionsActionTypes.FUNCTION) {\n\t\t\t\t// eslint-disable-next-line no-new-func\n\t\t\t\tvar func = new Function('return ' + suggestion.subAction)();\n\t\t\t\tfunc(suggestion, currentValue, customEvents);\n\t\t\t}\n\t\t\tif (suggestion.action === _helper.featuredSuggestionsActionTypes.SELECT) {\n\t\t\t\tsetValue(suggestion.value, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : _causes2.default.ENTER_PRESS);\n\t\t\t\tonValueSelected(suggestion.value, _causes2.default.SUGGESTION_SELECT);\n\t\t\t}\n\t\t\t// blur is important to close the dropdown\n\t\t\t// on selecting one of featured suggestions\n\t\t\t// else Downshift probably is focusing the dropdown\n\t\t\t// and not letting it close\n\t\t\t_inputRef.current.blur();\n\t\t} catch (e) {\n\t\t\tconsole.error('Error: There was an error parsing the subAction for the featured suggestion with label, \"' + suggestion.label + '\"', e);\n\t\t}\n\t};\n\n\tvar onSuggestionSelected = function onSuggestionSelected(suggestion) {\n\t\tsetIsOpen(false);\n\t\t// handle featured suggestions click event\n\t\tif (suggestion._suggestion_type === _helper.suggestionTypes.Featured) {\n\t\t\thandleFeaturedSuggestionClicked(suggestion);\n\t\t\treturn;\n\t\t}\n\n\t\tvar suggestionValue = suggestion.value;\n\n\t\tif (value === undefined) {\n\t\t\tsetValue(suggestionValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n\t\t} else if (onChange) {\n\t\t\tvar emitValue = suggestionValue;\n\t\t\tif (isTagsMode.current) {\n\t\t\t\temitValue = Array.isArray(selectedTags) ? [].concat(selectedTags) : [];\n\t\t\t\tif (selectedTags && selectedTags.includes(suggestionValue)) {\n\t\t\t\t\t// avoid duplicates in tags array\n\t\t\t\t\tsetIsOpen(false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\temitValue.push(suggestionValue);\n\t\t\t}\n\t\t\tsetValue(emitValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n\t\t\tonChange(emitValue, function () {\n\t\t\t\treturn triggerQuery(_extends({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: emitValue,\n\t\t\t\t\tisOpen: false\n\t\t\t\t}, !isTagsMode.current && { categoryValue: suggestion._category }));\n\t\t\t});\n\t\t}\n\t\t// Record analytics for selected suggestions\n\t\ttriggerClickAnalytics(suggestion._click_id);\n\t\t// onValueSelected is user interaction driven:\n\t\t// it should be triggered irrespective of controlled (or)\n\t\t// uncontrolled component behavior\n\t\tonValueSelected(suggestionValue, _causes2.default.SUGGESTION_SELECT, suggestion);\n\t};\n\n\tvar onInputChange = function onInputChange(e) {\n\t\tvar inputValue = e.target.value;\n\n\t\tif (!isOpen && props.autosuggest) {\n\t\t\tsetIsOpen(true);\n\t\t}\n\t\tif (value === undefined) {\n\t\t\tsetValue(inputValue, false, props, inputValue === '' ? _causes2.default.CLEAR_VALUE : undefined, true, false);\n\t\t} else if (onChange) {\n\t\t\t// handle caret position in controlled components\n\t\t\t(0, _utils.handleCaretPosition)(e);\n\n\t\t\tonChange(inputValue, function () {\n\t\t\t\tvar _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref3.isOpen;\n\n\t\t\t\ttriggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: inputValue,\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t}, e);\n\t\t}\n\t};\n\tvar enterButtonOnClick = function enterButtonOnClick() {\n\t\treturn triggerQuery({ isOpen: false, value: currentValue, customQuery: true });\n\t};\n\n\tvar handleKeyDown = function handleKeyDown(event) {\n\t\tvar highlightedIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\t\t// if a suggestion was selected, delegate the handling\n\t\t// to suggestion handler\n\t\tif (event.key === 'Enter') {\n\t\t\tif (props.autosuggest === false) {\n\t\t\t\tenterButtonOnClick();\n\t\t\t} else if (highlightedIndex === null) {\n\t\t\t\tsetValue(event.target.value, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : _causes2.default.ENTER_PRESS);\n\t\t\t\tonValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n\t\t\t}\n\t\t}\n\n\t\tif (props.onKeyDown) {\n\t\t\tprops.onKeyDown(event, undefined.triggerQuery);\n\t\t}\n\t};\n\n\tvar clearValue = function clearValue() {\n\t\tsetValue('', false, props, _causes2.default.CLEAR_VALUE, true, false);\n\t\tif (onChange) {\n\t\t\tonChange('', function () {\n\t\t\t\tvar _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref4.isOpen;\n\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tonValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t};\n\n\tvar shouldMicRender = function shouldMicRender(showVoiceSearch) {\n\t\t// checks for SSR\n\t\tif (typeof window === 'undefined') return false;\n\t\treturn showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n\t};\n\n\tvar handleStateChange = function handleStateChange(changes, stateAndHelpers) {\n\t\tvar isOpen = changes.isOpen,\n\t\t    type = changes.type;\n\t\tvar selectedItem = stateAndHelpers.selectedItem;\n\n\t\tif (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n\t\t\tsetIsOpen(isOpen);\n\t\t}\n\n\t\t// allow invoking click event repeatedly on featured suggestions\n\t\tif (!changes.selectedItem && (type === _downshift2.default.stateChangeTypes.clickItem || type === _downshift2.default.stateChangeTypes.keyDownEnter) && selectedItem && selectedItem._suggestion_type === _helper.suggestionTypes.Featured) {\n\t\t\tonSuggestionSelected(selectedItem);\n\t\t}\n\t};\n\n\tvar handleSearchIconClick = function handleSearchIconClick() {\n\t\tif (currentValue.trim()) {\n\t\t\tsetValue(currentValue, true, props, _causes2.default.SEARCH_ICON_CLICK);\n\t\t\tonValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n\t\t}\n\t};\n\n\tvar handleVoiceResults = function handleVoiceResults(_ref5) {\n\t\tvar results = _ref5.results;\n\n\t\tif (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n\t\t\tsetValue(results[0][0].transcript.trim(), true, props, undefined, true, isOpen);\n\t\t}\n\t};\n\n\tvar renderNoSuggestion = function renderNoSuggestion() {\n\t\tvar finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\tvar themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    isLoading = props.isLoading,\n\t\t    renderNoSuggestion = props.renderNoSuggestion,\n\t\t    innerClass = props.innerClass,\n\t\t    error = props.error,\n\t\t    renderError = props.renderError;\n\n\t\tif (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tthemePreset: themePreset,\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tinnerClassName: 'noSuggestion'\n\t\t\t\t},\n\t\t\t\ttypeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderLoader = function renderLoader() {\n\t\tvar loader = props.loader,\n\t\t    isLoading = props.isLoading,\n\t\t    themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    innerClass = props.innerClass;\n\n\t\tif (isLoading && loader && currentValue) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'loader',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\tloader\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderError = function renderError() {\n\t\tvar error = props.error,\n\t\t    renderError = props.renderError,\n\t\t    themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    isLoading = props.isLoading,\n\t\t    innerClass = props.innerClass;\n\n\t\tif (error && renderError && currentValue && !isLoading) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'error',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\t(0, _helper.isFunction)(renderError) ? renderError(error) : renderError\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\tvar handleFocus = function handleFocus(event) {\n\t\tif (props.autosuggest) {\n\t\t\tsetIsOpen(true);\n\t\t}\n\t\tif (props.onFocus) {\n\t\t\tprops.onFocus(event, triggerQuery);\n\t\t}\n\t};\n\n\tvar getComponent = function getComponent() {\n\t\tvar downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\tvar error = props.error,\n\t\t    isLoading = props.isLoading,\n\t\t    rawData = props.rawData;\n\n\n\t\tvar data = {\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tdownshiftProps: downshiftProps,\n\t\t\tdata: props.suggestions,\n\t\t\tvalue: currentValue,\n\t\t\ttriggerClickAnalytics: triggerClickAnalytics,\n\t\t\tresultStats: stats(),\n\t\t\trawData: rawData\n\t\t};\n\t\treturn (0, _helper.getComponent)(data, props);\n\t};\n\tvar renderInputAddonBefore = function renderInputAddonBefore() {\n\t\tvar addonBefore = props.addonBefore,\n\t\t    expandSuggestionsContainer = props.expandSuggestionsContainer;\n\n\t\tif (addonBefore) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_InputAddon2.default,\n\t\t\t\t{ isOpen: isOpen, expandSuggestionsContainer: expandSuggestionsContainer },\n\t\t\t\taddonBefore\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\tvar renderInputAddonAfter = function renderInputAddonAfter() {\n\t\tvar addonAfter = props.addonAfter,\n\t\t    expandSuggestionsContainer = props.expandSuggestionsContainer;\n\n\t\tif (addonAfter) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_InputAddon2.default,\n\t\t\t\t{ isOpen: isOpen, expandSuggestionsContainer: expandSuggestionsContainer },\n\t\t\t\taddonAfter\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tvar renderEnterButtonElement = function renderEnterButtonElement() {\n\t\tvar enterButton = props.enterButton,\n\t\t    renderEnterButton = props.renderEnterButton,\n\t\t    innerClass = props.innerClass;\n\n\n\t\tif (enterButton) {\n\t\t\tvar getEnterButtonMarkup = function getEnterButtonMarkup() {\n\t\t\t\tif (typeof renderEnterButton === 'function') {\n\t\t\t\t\treturn renderEnterButton(enterButtonOnClick);\n\t\t\t\t}\n\n\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t_Button2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: 'enter-btn ' + (0, _helper.getClassName)(innerClass, 'enter-button'),\n\t\t\t\t\t\tprimary: true,\n\t\t\t\t\t\tonClick: enterButtonOnClick\n\t\t\t\t\t},\n\t\t\t\t\t'Search'\n\t\t\t\t);\n\t\t\t};\n\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'enter-button-wrapper' },\n\t\t\t\tgetEnterButtonMarkup()\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tvar renderIcon = function renderIcon() {\n\t\tif (props.showIcon) {\n\t\t\tif (props.icon) {\n\t\t\t\treturn props.icon;\n\t\t\t}\n\t\t\tif (props.iconURL) {\n\t\t\t\treturn (0, _core.jsx)('img', {\n\t\t\t\t\tstyle: { maxHeight: '25px' },\n\t\t\t\t\tsrc: (0, _xss2.default)(props.iconURL),\n\t\t\t\t\talt: 'search-icon'\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn (0, _core.jsx)(_SearchSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderCancelIcon = function renderCancelIcon() {\n\t\tif (props.showClear) {\n\t\t\treturn props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\tvar renderShortcut = function renderShortcut() {\n\t\tif (props.focusShortcuts && props.focusShortcuts.length) {\n\t\t\tvar shortcut = props.focusShortcuts[0];\n\t\t\tshortcut = shortcut.toLowerCase();\n\t\t\tshortcut = shortcut.replace('shift', '⬆️');\n\t\t\tshortcut = shortcut.replace('command', 'cmd');\n\t\t\tshortcut = shortcut.replace('control', 'ctrl');\n\t\t\tshortcut = shortcut.replace('option', 'alt');\n\t\t\treturn shortcut.toUpperCase();\n\t\t}\n\t\treturn '/';\n\t};\n\n\tvar renderIcons = function renderIcons() {\n\t\tvar showIcon = props.showIcon,\n\t\t    showClear = props.showClear,\n\t\t    renderMic = props.renderMic,\n\t\t    getMicInstance = props.getMicInstance,\n\t\t    showVoiceSearch = props.showVoiceSearch,\n\t\t    iconPosition = props.iconPosition,\n\t\t    innerClass = props.innerClass,\n\t\t    showFocusShortcutsIcon = props.showFocusShortcutsIcon;\n\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'right', positionType: 'absolute' },\n\t\t\t\tcurrentValue && showClear && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: clearValue, showIcon: showIcon, isClearIcon: true },\n\t\t\t\t\trenderCancelIcon()\n\t\t\t\t),\n\t\t\t\tshowFocusShortcutsIcon && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper.ButtonIconWrapper,\n\t\t\t\t\t{ onClick: function onClick(e) {\n\t\t\t\t\t\t\treturn focusSearchBox(e);\n\t\t\t\t\t\t} },\n\t\t\t\t\trenderShortcut()\n\t\t\t\t),\n\t\t\t\tshouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n\t\t\t\t\tgetInstance: getMicInstance,\n\t\t\t\t\trender: renderMic,\n\t\t\t\t\tonResult: handleVoiceResults,\n\t\t\t\t\tclassName: (0, _helper.getClassName)(innerClass, 'mic') || null\n\t\t\t\t}),\n\t\t\t\ticonPosition === 'right' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: handleSearchIconClick },\n\t\t\t\t\trenderIcon()\n\t\t\t\t)\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'left', positionType: 'absolute' },\n\t\t\t\ticonPosition === 'left' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: handleSearchIconClick },\n\t\t\t\t\trenderIcon()\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\tvar SuggestionsFooter = function SuggestionsFooter() {\n\t\treturn typeof renderSuggestionsFooter === 'function' ? renderSuggestionsFooter() : (0, _core.jsx)(\n\t\t\t_AutoSuggestFooterContainer2.default,\n\t\t\tnull,\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\tnull,\n\t\t\t\t'\\u2191\\u2193 Navigate'\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\tnull,\n\t\t\t\t'\\u21A9 Go'\n\t\t\t)\n\t\t);\n\t};\n\n\tvar onAutofillClick = function onAutofillClick(suggestion) {\n\t\tvar value = suggestion.value;\n\n\t\tsetIsOpen(true);\n\t\tsetCurrentValue((0, _utils.decodeHtml)(value));\n\t\ttriggerDefaultQuery(value);\n\t};\n\n\tvar hasMounted = (0, _react.useRef)();\n\tuseConstructor(function () {\n\t\tvar mode = props.mode;\n\n\t\tif (mode === _constants.SEARCH_COMPONENTS_MODES.TAG) {\n\t\t\tisTagsMode.current = true;\n\t\t}\n\n\t\tif (isTagsMode.current) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `categoryField` prop is not supported when `mode` prop is set to `tag`');\n\t\t}\n\t\tvar currentLocalValue = selectedValue || value || defaultValue || '';\n\n\t\thasMounted.current = false;\n\t\tif (currentLocalValue) {\n\t\t\tif (props.onChange) {\n\t\t\t\tprops.onChange(currentLocalValue, function () {\n\t\t\t\t\tvar _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t\t    isOpen = _ref6.isOpen;\n\n\t\t\t\t\treturn triggerQuery({\n\t\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\t\tvalue: currentLocalValue,\n\t\t\t\t\t\tisOpen: isOpen\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tsetCurrentValue(isTagsMode.current ? '' : (0, _utils.decodeHtml)(currentLocalValue));\n\t\tif (isTagsMode.current && Array.isArray(currentLocalValue)) {\n\t\t\tsetSelectedTags(currentLocalValue);\n\t\t}\n\t\t// Set custom and default queries in store\n\t\ttriggerCustomQuery(currentLocalValue, selectedCategory);\n\n\t\ttriggerDefaultQuery(currentLocalValue);\n\t});\n\tvar clearTag = function clearTag(tagValue) {\n\t\tvar newSelectedTags = [].concat(selectedTags.filter(function (tag) {\n\t\t\treturn tag !== tagValue;\n\t\t}));\n\t\tsetSelectedTags(newSelectedTags);\n\t\tsetCurrentValue('');\n\t\ttriggerCustomQuery(newSelectedTags);\n\n\t\tif (props.value !== undefined && typeof onChange === 'function') {\n\t\t\tonChange(newSelectedTags, function () {\n\t\t\t\tvar _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref7.isOpen;\n\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: newSelectedTags,\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\tvar clearAllTags = function clearAllTags() {\n\t\tsetSelectedTags([]);\n\n\t\tsetValue('', true, props, _causes2.default.SUGGESTION_SELECT, hasMounted.current, false);\n\t\tif (props.value !== undefined && typeof onChange === 'function') {\n\t\t\tonChange([], function () {\n\t\t\t\tvar _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref8.isOpen;\n\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: [],\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\tvar renderTag = function renderTag(item) {\n\t\tvar innerClass = props.innerClass;\n\n\n\t\treturn (0, _core.jsx)(\n\t\t\t_Tags.TagItem,\n\t\t\t{ key: item, className: (0, _helper.getClassName)(innerClass, 'selected-tag') || '' },\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'span',\n\t\t\t\tnull,\n\t\t\t\titem\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'span',\n\t\t\t\t{\n\t\t\t\t\trole: 'img',\n\t\t\t\t\t'aria-label': 'delete-tag',\n\t\t\t\t\tclassName: 'close-icon',\n\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\treturn clearTag(item);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(0, _core.jsx)(_CancelSvg2.default, null)\n\t\t\t)\n\t\t);\n\t};\n\n\tvar renderTags = function renderTags() {\n\t\tif (!Array.isArray(selectedTags)) {\n\t\t\treturn null;\n\t\t}\n\t\tvar tagsList = [].concat(selectedTags);\n\t\tvar shouldRenderClearAllTag = tagsList.length > 1;\n\t\tvar renderSelectedTags = props.renderSelectedTags,\n\t\t    innerClass = props.innerClass;\n\n\n\t\treturn renderSelectedTags ? renderSelectedTags({\n\t\t\tvalues: selectedTags,\n\t\t\thandleClear: clearTag,\n\t\t\thandleClearAll: clearAllTags\n\t\t}) : (0, _core.jsx)(\n\t\t\t_Tags.TagsContainer,\n\t\t\tnull,\n\t\t\ttagsList.map(function (item) {\n\t\t\t\treturn renderTag(item);\n\t\t\t}),\n\t\t\tshouldRenderClearAllTag && (0, _core.jsx)(\n\t\t\t\t_Tags.TagItem,\n\t\t\t\t{ 'class': (0, _helper.getClassName)(innerClass, 'selected-tag') || '' },\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t'span',\n\t\t\t\t\tnull,\n\t\t\t\t\t'Clear All'\n\t\t\t\t),\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t'span',\n\t\t\t\t\t{\n\t\t\t\t\t\trole: 'img',\n\t\t\t\t\t\t'aria-label': 'delete-tag',\n\t\t\t\t\t\tclassName: 'close-icon',\n\t\t\t\t\t\tonClick: clearAllTags\n\t\t\t\t\t},\n\t\t\t\t\t(0, _core.jsx)(_CancelSvg2.default, null)\n\t\t\t\t),\n\t\t\t\t' '\n\t\t\t)\n\t\t);\n\t};\n\t(0, _react.useEffect)(function () {\n\t\tif (onData) {\n\t\t\tonData({\n\t\t\t\tdata: parsedSuggestions(),\n\t\t\t\trawData: rawData,\n\t\t\t\taggregationData: aggregationData,\n\t\t\t\tloading: isLoading,\n\t\t\t\terror: error\n\t\t\t});\n\t\t}\n\t}, [rawData, aggregationData, isLoading, error]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tif (value !== undefined && !(0, _helper.isEqual)(value, isTagsMode.current ? selectedTags : currentValue)) {\n\t\t\t\tvar cause = !value ? _causes2.default.CLEAR_VALUE : undefined;\n\t\t\t\tif (isTagsMode.current) {\n\t\t\t\t\tcause = _causes2.default.SUGGESTION_SELECT;\n\t\t\t\t}\n\n\t\t\t\tif (isTagsMode.current && typeof value === 'string') {\n\t\t\t\t\tsetValue(value, false, props, undefined, true, false);\n\t\t\t\t\tsetCurrentValue(value);\n\t\t\t\t\ttriggerDefaultQuery();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetValue(value, !isOpen && props.autosuggest && !props.strictSelection, props, cause, undefined, false);\n\t\t\t}\n\t\t}\n\t}, [value]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (\n\t\t// since, selectedValue will be updated when currentValue changes,\n\t\t// we must only check for the changes introduced by\n\t\t// clear action from SelectedFilters component in which case,\n\t\t// the currentValue will never match the updated selectedValue\n\t\t// currentValue !== props.defaultValue &&\n\t\thasMounted.current && !(0, _helper.isEqual)(isTagsMode.current ? selectedTags : currentValue, selectedValue) && !(typeof currentValue !== 'string' && !selectedValue)) {\n\t\t\tif (!selectedValue && currentValue) {\n\t\t\t\t// selected value is cleared, call onValueSelected\n\t\t\t\tonValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t\t\t}\n\t\t\tif (isTagsMode.current && Array.isArray(selectedValue)) {\n\t\t\t\tselectedTags = []; // reset\n\t\t\t}\n\t\t\tif (value === undefined) {\n\t\t\t\tsetValue(!selectedValue || (0, _utils.isEmpty)(selectedValue) ? '' : selectedValue, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : undefined, hasMounted.current, false);\n\t\t\t} else if (onChange) {\n\t\t\t\tif (!(0, _helper.isEqual)(value, selectedValue) && !(0, _helper.isEqual)(selectedValue, isTagsMode.current ? selectedTags : currentValue)) {\n\t\t\t\t\tif (isTagsMode.current && typeof selectedValue !== 'string') {\n\t\t\t\t\t\tsetSelectedTags(selectedValue);\n\t\t\t\t\t}\n\t\t\t\t\t// value prop exists\n\t\t\t\t\tonChange(selectedValue || (isTagsMode.current ? [] : ''), function () {\n\t\t\t\t\t\tvar _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t\t\t    isOpen = _ref9.isOpen;\n\n\t\t\t\t\t\treturn triggerQuery({\n\t\t\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\t\t\tvalue: selectedValue || '',\n\t\t\t\t\t\t\tisOpen: isOpen\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// value prop exists and onChange is not defined:\n\t\t\t\t// we need to put the current value back into the store\n\t\t\t\t// if the clear action was triggered by interacting with\n\t\t\t\t// selected-filters component\n\n\t\t\t\tsetValue(isTagsMode.current ? selectedTags : currentValue, true, props, isTagsMode.current ? _causes2.default.SUGGESTION_SELECT : undefined, true, false);\n\t\t\t}\n\t\t}\n\t}, [selectedValue]);\n\n\t(0, _react.useEffect)(function () {\n\t\thasMounted.current = true;\n\t\t// register hotkeys for listening to focusShortcuts' key presses\n\t\tlistenForFocusShortcuts();\n\t}, []);\n\n\tvar hasSuggestions = function hasSuggestions() {\n\t\treturn Array.isArray(parsedSuggestions()) && parsedSuggestions().length;\n\t};\n\treturn (0, _core.jsx)(\n\t\t_Container2.default,\n\t\t{ style: props.style, className: props.className },\n\t\tprops.title && (0, _core.jsx)(\n\t\t\t_Title2.default,\n\t\t\t{ className: (0, _helper.getClassName)(props.innerClass, 'title') || null },\n\t\t\tprops.title\n\t\t),\n\t\tprops.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n\t\t\tid: props.componentId + '-downshift',\n\t\t\tonChange: onSuggestionSelected,\n\t\t\tonStateChange: handleStateChange,\n\t\t\tisOpen: isOpen,\n\t\t\titemToString: function itemToString(i) {\n\t\t\t\treturn i;\n\t\t\t},\n\t\t\trender: function render(_ref10) {\n\t\t\t\tvar getRootProps = _ref10.getRootProps,\n\t\t\t\t    getInputProps = _ref10.getInputProps,\n\t\t\t\t    getItemProps = _ref10.getItemProps,\n\t\t\t\t    isOpen = _ref10.isOpen,\n\t\t\t\t    highlightedIndex = _ref10.highlightedIndex,\n\t\t\t\t    setHighlightedIndex = _ref10.setHighlightedIndex,\n\t\t\t\t    rest = _objectWithoutProperties(_ref10, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n\t\t\t\tvar renderSuggestionsDropdown = function renderSuggestionsDropdown() {\n\t\t\t\t\tvar getIcon = function getIcon(iconType, item) {\n\t\t\t\t\t\tswitch (iconType) {\n\t\t\t\t\t\t\tcase _helper.suggestionTypes.Recent:\n\t\t\t\t\t\t\t\treturn props.recentSearchesIcon;\n\t\t\t\t\t\t\tcase _helper.suggestionTypes.Popular:\n\t\t\t\t\t\t\t\treturn props.popularSearchesIcon;\n\t\t\t\t\t\t\tcase _helper.suggestionTypes.Featured:\n\t\t\t\t\t\t\t\tif (item.icon) {\n\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)('div', {\n\t\t\t\t\t\t\t\t\t\tstyle: { display: 'flex' },\n\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t\t\t\t\t__html: (0, _xss2.default)(item.icon)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)('img', {\n\t\t\t\t\t\t\t\t\tstyle: { maxHeight: '25px' },\n\t\t\t\t\t\t\t\t\tsrc: (0, _xss2.default)(item.iconURL),\n\t\t\t\t\t\t\t\t\talt: item.value\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// action icon is dispkayed on right of the suggestion item\n\t\t\t\t\tvar getActionIcon = function getActionIcon(item) {\n\t\t\t\t\t\tif (item._suggestion_type === _helper.suggestionTypes.Featured) {\n\t\t\t\t\t\t\tif (item.action === _helper.featuredSuggestionsActionTypes.FUNCTION) {\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(_AutofillSvg2.default, {\n\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\ttransform: 'rotate(135deg)',\n\t\t\t\t\t\t\t\t\t\tpointerEvents: 'none'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t} else if (!item._category) {\n\t\t\t\t\t\t\t/* 👇 avoid showing autofill for category suggestions👇 */\n\n\t\t\t\t\t\t\treturn (0, _core.jsx)(_AutofillSvg2.default, {\n\t\t\t\t\t\t\t\tonClick: function onClick(e) {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tonAutofillClick(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t};\n\n\t\t\t\t\tvar indexOffset = 0;\n\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t(0, _helper.hasCustomRenderer)(props) && getComponent(_extends({\n\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\thighlightedIndex: highlightedIndex,\n\t\t\t\t\t\t\tsetHighlightedIndex: setHighlightedIndex\n\t\t\t\t\t\t}, rest)),\n\t\t\t\t\t\tisOpen && renderLoader(),\n\t\t\t\t\t\tisOpen && renderError(),\n\t\t\t\t\t\t!(0, _helper.hasCustomRenderer)(props) && isOpen && hasSuggestions() ? (0, _core.jsx)(\n\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcss: (0, _Input.searchboxSuggestions)(props.themePreset, props.theme),\n\t\t\t\t\t\t\t\tclassName: '' + (0, _helper.getClassName)(props.innerClass, 'list')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tparsedSuggestions().map(function (item, itemIndex) {\n\t\t\t\t\t\t\t\tvar index = indexOffset + itemIndex;\n\t\t\t\t\t\t\t\tif (Array.isArray(item)) {\n\t\t\t\t\t\t\t\t\tvar sectionHtml = (0, _xss2.default)(item[0].sectionLabel);\n\t\t\t\t\t\t\t\t\tindexOffset += item.length - 1;\n\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'section-container',\n\t\t\t\t\t\t\t\t\t\t\tkey: '' + item[0].sectionId\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tsectionHtml && (0, _core.jsx)('div', {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'section-header ' + (0, _helper.getClassName)(props.innerClass, 'section-label'),\n\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t\t\t\t\t\t__html: sectionHtml\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t\t\t\t\t{ className: 'section-list' },\n\t\t\t\t\t\t\t\t\t\t\titem.map(function (sectionItem, sectionIndex) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem: sectionItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: sectionItem.sectionId + sectionIndex + '-' + sectionItem.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: '' + (highlightedIndex === index + sectionIndex ? 'active-li-item ' + (0, _helper.getClassName)(props.innerClass, 'active-suggestion-item') : 'li-item ' + (0, _helper.getClassName)(props.innerClass, 'suggestion-item'))\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t\tprops.renderItem ? props.renderItem(sectionItem) : (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0 10px 0 0',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonId: sectionIndex + index + 1 + '-' + sectionItem.value + '-icon',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, sectionItem._suggestion_type + '-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: getIcon(sectionItem._suggestion_type, sectionItem),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: sectionItem._suggestion_type + '-search-icon'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ className: 'trim' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ direction: 'column' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionItem.label && (0, _core.jsx)('div', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'section-list-item__label',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t__html: (0, _xss2.default)(sectionItem.label)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionItem.description && (0, _core.jsx)('div', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'section-list-item__description',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t__html: (0, _xss2.default)(sectionItem.description)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetActionIcon(sectionItem)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: item }), {\n\t\t\t\t\t\t\t\t\t\tkey: index + 1 + '-' + item.value,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tclassName: '' + (highlightedIndex === index ? 'active-li-item ' + (0, _helper.getClassName)(props.innerClass, 'active-suggestion-item') : 'li-item ' + (0, _helper.getClassName)(props.innerClass, 'suggestion-item'))\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tprops.renderItem ? props.renderItem(item) : (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0 10px 0 0',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\t\ticonId: index + 1 + '-' + item.value + '-icon',\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, item._suggestion_type + '-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\t\ticon: getIcon(item._suggestion_type, item),\n\t\t\t\t\t\t\t\t\t\t\t\ttype: item._suggestion_type + '-search-icon'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue || '',\n\t\t\t\t\t\t\t\t\t\t\tsuggestion: item\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tgetActionIcon(item)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tshowSuggestionsFooter ? (0, _core.jsx)(SuggestionsFooter, null) : null\n\t\t\t\t\t\t) : renderNoSuggestion(parsedSuggestions())\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t'div',\n\t\t\t\t\tgetRootProps({ css: _Input.suggestionsContainer }, { suppressRefError: true }),\n\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t_InputGroup2.default,\n\t\t\t\t\t\t{ isOpen: isOpen },\n\t\t\t\t\t\trenderInputAddonBefore(),\n\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t_InputWrapper2.default,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t(0, _core.jsx)(_Input2.default, _extends({\n\t\t\t\t\t\t\t\t'aria-label': props.componentId,\n\t\t\t\t\t\t\t\tid: props.componentId + '-input',\n\t\t\t\t\t\t\t\tshowIcon: props.showIcon,\n\t\t\t\t\t\t\t\tshowClear: props.showClear,\n\t\t\t\t\t\t\t\ticonPosition: props.iconPosition,\n\t\t\t\t\t\t\t\tref: _inputRef\n\t\t\t\t\t\t\t}, getInputProps({\n\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, 'input'),\n\t\t\t\t\t\t\t\tplaceholder: props.placeholder,\n\t\t\t\t\t\t\t\tvalue: currentValue === null ? '' : currentValue,\n\t\t\t\t\t\t\t\tonChange: onInputChange,\n\t\t\t\t\t\t\t\tonBlur: withTriggerQuery(props.onBlur),\n\t\t\t\t\t\t\t\tonFocus: handleFocus,\n\t\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\t\t// clear highlighted index\n\t\t\t\t\t\t\t\t\tsetHighlightedIndex(null);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonKeyPress: withTriggerQuery(props.onKeyPress),\n\t\t\t\t\t\t\t\tonKeyDown: function onKeyDown(e) {\n\t\t\t\t\t\t\t\t\treturn handleKeyDown(e, highlightedIndex);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonKeyUp: withTriggerQuery(props.onKeyUp),\n\t\t\t\t\t\t\t\tautoFocus: props.autoFocus\n\t\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\t\tthemePreset: props.themePreset,\n\t\t\t\t\t\t\t\ttype: props.type,\n\t\t\t\t\t\t\t\tsearchBox: true // a prop specific to Input styled-component\n\t\t\t\t\t\t\t\t, isOpen: isOpen // is dropdown open or not\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\trenderIcons(),\n\t\t\t\t\t\t\t!props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderInputAddonAfter(),\n\t\t\t\t\t\trenderEnterButtonElement()\n\t\t\t\t\t),\n\t\t\t\t\tprops.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest)),\n\t\t\t\t\trenderTags()\n\t\t\t\t);\n\t\t\t}\n\t\t}, props.downShiftProps)) : (0, _core.jsx)(\n\t\t\t'div',\n\t\t\t{ css: _Input.suggestionsContainer },\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_InputGroup2.default,\n\t\t\t\t{ isOpen: false },\n\t\t\t\trenderInputAddonBefore(),\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t_InputWrapper2.default,\n\t\t\t\t\tnull,\n\t\t\t\t\t(0, _core.jsx)(_Input2.default, {\n\t\t\t\t\t\t'aria-label': props.componentId,\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, 'input') || null,\n\t\t\t\t\t\tplaceholder: props.placeholder,\n\t\t\t\t\t\tvalue: currentValue || '',\n\t\t\t\t\t\tonChange: onInputChange,\n\t\t\t\t\t\tonBlur: withTriggerQuery(props.onBlur),\n\t\t\t\t\t\tonFocus: withTriggerQuery(props.onFocus),\n\t\t\t\t\t\tonKeyPress: withTriggerQuery(props.onKeyPress),\n\t\t\t\t\t\tonKeyDown: handleKeyDown,\n\t\t\t\t\t\tonKeyUp: withTriggerQuery(props.onKeyUp),\n\t\t\t\t\t\tautoFocus: props.autoFocus,\n\t\t\t\t\t\ticonPosition: props.iconPosition,\n\t\t\t\t\t\tshowIcon: props.showIcon,\n\t\t\t\t\t\tshowClear: props.showClear,\n\t\t\t\t\t\tthemePreset: props.themePreset,\n\t\t\t\t\t\tsearchBox: true // a prop specific to Input styled-component\n\t\t\t\t\t\t, isOpen: false // is dropdown open or not\n\t\t\t\t\t\t, type: props.type\n\t\t\t\t\t}),\n\t\t\t\t\trenderIcons()\n\t\t\t\t),\n\t\t\t\trenderInputAddonAfter(),\n\t\t\t\trenderEnterButtonElement()\n\t\t\t)\n\t\t)\n\t);\n};\nSearchBox.propTypes = {\n\tupdateQuery: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\tselectedCategory: _types2.default.string,\n\tsuggestions: _types2.default.suggestions,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\terror: _types2.default.title,\n\tisLoading: _types2.default.bool,\n\ttime: _types2.default.number,\n\trawData: _types2.default.rawData,\n\taggregationData: _types2.default.aggregationData,\n\t// component props\n\tautoFocus: _types2.default.bool,\n\tautosuggest: _types2.default.bool,\n\tenableSynonyms: _types2.default.bool,\n\tdistinctField: _types2.default.string,\n\tdistinctFieldConfig: _types2.default.componentObject,\n\tindex: _types2.default.string,\n\tenablePopularSuggestions: _types2.default.bool,\n\tenableRecentSuggestions: _types2.default.bool,\n\tqueryString: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tclearIcon: _types2.default.children,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomHighlight: _types2.default.func,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdataField: _types2.default.dataFieldValidator,\n\taggregationField: _types2.default.string,\n\taggregationSize: _types2.default.number,\n\tsize: _types2.default.number,\n\tdebounce: _types2.default.number,\n\tdefaultValue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n\tvalue: (0, _propTypes.oneOfType)([_types2.default.string, _types2.default.stringArray]),\n\tcustomData: _types2.default.title,\n\tdownShiftProps: _types2.default.props,\n\tchildren: _types2.default.func,\n\texcludeFields: _types2.default.excludeFields,\n\tfieldWeights: _types2.default.fieldWeights,\n\tfilterLabel: _types2.default.string,\n\tfuzziness: _types2.default.fuzziness,\n\thighlight: _types2.default.bool,\n\thighlightField: _types2.default.stringOrArray,\n\ticon: _types2.default.children,\n\ticonURL: _types2.default.string,\n\ticonPosition: _types2.default.iconPosition,\n\tinnerClass: _types2.default.style,\n\tincludeFields: _types2.default.includeFields,\n\tloader: _types2.default.title,\n\tnestedField: _types2.default.string,\n\tonError: _types2.default.func,\n\tonBlur: _types2.default.func,\n\tonFocus: _types2.default.func,\n\tonKeyDown: _types2.default.func,\n\tonKeyPress: _types2.default.func,\n\tonKeyUp: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tonValueSelected: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\treact: _types2.default.react,\n\trender: _types2.default.func,\n\trenderError: _types2.default.title,\n\trenderNoSuggestion: _types2.default.title,\n\tshowClear: _types2.default.bool,\n\tshowDistinctSuggestions: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tshowIcon: _types2.default.bool,\n\tshowVoiceSearch: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\ttheme: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\ttype: _types2.default.string,\n\tURLParams: _types2.default.bool,\n\tstrictSelection: _types2.default.bool,\n\tsearchOperators: _types2.default.bool,\n\tenablePredictiveSuggestions: _types2.default.bool,\n\trecentSearchesIcon: _types2.default.componentObject,\n\tpopularSearchesIcon: _types2.default.componentObject,\n\t// Mic props\n\tgetMicInstance: _types2.default.func,\n\trenderMic: _types2.default.func,\n\t//\n\tfocusShortcuts: _types2.default.focusShortcuts,\n\tshowFocusShortcutsIcon: _types2.default.bool,\n\taddonBefore: _types2.default.children,\n\taddonAfter: _types2.default.children,\n\texpandSuggestionsContainer: _types2.default.bool,\n\tpopularSuggestionsConfig: _types2.default.componentObject,\n\trecentSuggestionsConfig: _types2.default.componentObject,\n\tshowSuggestionsFooter: _types2.default.bool,\n\trenderSuggestionsFooter: _types2.default.func,\n\tapplyStopwords: _types2.default.bool,\n\tcustomStopwords: _types2.default.stringArray,\n\tonData: _types2.default.func,\n\trenderItem: _types2.default.func,\n\tisOpen: _types2.default.bool,\n\tenableIndexSuggestions: _types2.default.bool,\n\tenableFeaturedSuggestions: _types2.default.bool,\n\tfeaturedSuggestionsConfig: _types2.default.componentObject,\n\tindexSuggestionsConfig: _types2.default.componentObject,\n\tenterButton: _types2.default.bool,\n\trenderEnterButton: _types2.default.func,\n\tcustomEvents: _types2.default.componentObject,\n\tsearchboxId: _types2.default.string,\n\tendpoint: _types2.default.endpoint,\n\tmode: (0, _propTypes.oneOf)(['select', 'tag']),\n\thighlightConfig: _types2.default.componentObject,\n\trenderSelectedTags: _types2.default.func\n};\n\nSearchBox.defaultProps = {\n\tautosuggest: true,\n\tclassName: null,\n\tdebounce: 100,\n\tdownShiftProps: {},\n\tenableSynonyms: true,\n\tenablePopularSuggestions: false,\n\texcludeFields: [],\n\ticonPosition: 'left',\n\tincludeFields: ['*'],\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowFilter: true,\n\tshowIcon: true,\n\tshowFocusShortcutsIcon: true,\n\tshowVoiceSearch: false,\n\tstyle: {},\n\tURLParams: false,\n\tshowClear: false,\n\tshowDistinctSuggestions: true,\n\tshowSuggestionsFooter: true,\n\tstrictSelection: false,\n\tsearchOperators: false,\n\tsize: 10,\n\ttime: 0,\n\tfocusShortcuts: ['/'],\n\taddonBefore: undefined,\n\taddonAfter: undefined,\n\texpandSuggestionsContainer: true,\n\tsuggestions: [],\n\tisOpen: false,\n\tenterButton: false,\n\ttype: 'search',\n\tmode: 'select'\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tselectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n\t\tsuggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\t\trawData: state.rawData[props.componentId],\n\t\taggregationData: state.compositeAggregations[props.componentId],\n\t\tthemePreset: state.config.themePreset,\n\t\tisLoading: !!state.isLoading[props.componentId + '_active'],\n\t\terror: state.error[props.componentId],\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tcustomEvents: state.config.analyticsConfig ? state.config.analyticsConfig.customEvents : {}\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n\t\t\treturn dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n\t\t},\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t}\n\t};\n};\n\n// Add componentType for SSR\nSearchBox.componentType = _constants.componentTypes.searchBox;\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(SearchBox, _extends({ ref: props.myForwardedRef }, props));\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(\n\t\t_PreferencesConsumer2.default,\n\t\t{ userProps: props },\n\t\tfunction (preferenceProps) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_ComponentWrapper2.default,\n\t\t\t\t_extends({}, preferenceProps, {\n\t\t\t\t\tinternalComponent: true,\n\t\t\t\t\tcomponentType: _constants.componentTypes.searchBox,\n\t\t\t\t\tmode: preferenceProps.testMode ? 'test' : ''\n\t\t\t\t}),\n\t\t\t\tfunction (componentProps) {\n\t\t\t\t\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n\t\t\t\t\t\tmyForwardedRef: ref\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, SearchBox);\n\nForwardRefComponent.displayName = 'SearchBox';\nexports.default = ForwardRefComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}