{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _propTypes = require('prop-types');\n\nvar _utils = require('../../utils');\n/**\n * PreferencesConsumer reads the preferences from SearchPreferencesContext\n * and set the props from preferences to the component\n *\n */\n\n\nvar deepValue = function deepValue(o, p) {\n  return p.split('.').reduce(function (a, v) {\n    return a ? a[v] : null;\n  }, o);\n};\n\nvar PreferencesConsumer = function PreferencesConsumer(_ref) {\n  var children = _ref.children,\n      userProps = _ref.userProps;\n  var context = (0, _react.useContext)(_utils.SearchPreferencesContext);\n\n  if (!userProps || !userProps.componentId) {\n    throw Error('ReactiveSearch: componentId is required');\n  }\n\n  var componentId = userProps.componentId;\n  var preferencesPath = userProps.preferencesPath;\n  var preferences = void 0;\n\n  if (context) {\n    if (preferencesPath) {\n      // read preferences from path\n      preferences = deepValue(context, preferencesPath);\n    } else {\n      preferences = deepValue(context, ['componentSettings', componentId].join('.')); // read preferences from componentSettings\n    }\n  } // Retrieve component specific preferences\n\n\n  var componentProps = userProps;\n\n  if (preferences) {\n    if (preferences.rsConfig) {\n      componentProps = _extends({}, preferences.rsConfig, componentProps);\n    } else {\n      componentProps = _extends({}, preferences, componentProps);\n    }\n\n    if (preferences.enabled !== undefined && !preferences.enabled) {\n      return null;\n    }\n  } // Parse component props\n\n\n  Object.keys(componentProps).forEach(function (p) {\n    if (typeof componentProps[p] === 'string') {\n      if (['defaultQuery', 'customQuery', 'setOption'].includes(p)) {\n        // eslint-disable-next-line\n        componentProps[p] = eval(componentProps[p]);\n      }\n    }\n  });\n  return children(componentProps);\n};\n\nPreferencesConsumer.propTypes = {\n  userProps: (0, _propTypes.shape)({})\n};\nexports.default = PreferencesConsumer;","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","require","_propTypes","_utils","deepValue","o","p","split","reduce","a","v","PreferencesConsumer","_ref","children","userProps","context","useContext","SearchPreferencesContext","componentId","Error","preferencesPath","preferences","join","componentProps","rsConfig","enabled","undefined","keys","forEach","includes","eval","propTypes","shape","default"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/basic/PreferencesConsumer.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _propTypes = require('prop-types');\n\nvar _utils = require('../../utils');\n\n/**\n * PreferencesConsumer reads the preferences from SearchPreferencesContext\n * and set the props from preferences to the component\n *\n */\nvar deepValue = function deepValue(o, p) {\n\treturn p.split('.').reduce(function (a, v) {\n\t\treturn a ? a[v] : null;\n\t}, o);\n};\n\nvar PreferencesConsumer = function PreferencesConsumer(_ref) {\n\tvar children = _ref.children,\n\t    userProps = _ref.userProps;\n\n\tvar context = (0, _react.useContext)(_utils.SearchPreferencesContext);\n\tif (!userProps || !userProps.componentId) {\n\t\tthrow Error('ReactiveSearch: componentId is required');\n\t}\n\tvar componentId = userProps.componentId;\n\tvar preferencesPath = userProps.preferencesPath;\n\tvar preferences = void 0;\n\tif (context) {\n\t\tif (preferencesPath) {\n\t\t\t// read preferences from path\n\t\t\tpreferences = deepValue(context, preferencesPath);\n\t\t} else {\n\t\t\tpreferences = deepValue(context, ['componentSettings', componentId].join('.'));\n\t\t\t// read preferences from componentSettings\n\t\t}\n\t}\n\t// Retrieve component specific preferences\n\tvar componentProps = userProps;\n\tif (preferences) {\n\t\tif (preferences.rsConfig) {\n\t\t\tcomponentProps = _extends({}, preferences.rsConfig, componentProps);\n\t\t} else {\n\t\t\tcomponentProps = _extends({}, preferences, componentProps);\n\t\t}\n\t\tif (preferences.enabled !== undefined && !preferences.enabled) {\n\t\t\treturn null;\n\t\t}\n\t}\n\t// Parse component props\n\tObject.keys(componentProps).forEach(function (p) {\n\t\tif (typeof componentProps[p] === 'string') {\n\t\t\tif (['defaultQuery', 'customQuery', 'setOption'].includes(p)) {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tcomponentProps[p] = eval(componentProps[p]);\n\t\t\t}\n\t\t}\n\t});\n\treturn children(componentProps);\n};\n\nPreferencesConsumer.propTypes = {\n\tuserProps: (0, _propTypes.shape)({})\n};\n\nexports.default = PreferencesConsumer;"],"mappings":"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"},"metadata":{},"sourceType":"script"}