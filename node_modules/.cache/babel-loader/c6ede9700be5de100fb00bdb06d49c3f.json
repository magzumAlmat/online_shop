{"ast":null,"code":"/**\n * Simple HTML Parser\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\nvar _ = require(\"./util\");\n/**\n * get tag name\n *\n * @param {String} html e.g. '<a hef=\"#\">'\n * @return {String}\n */\n\n\nfunction getTagName(html) {\n  var i = _.spaceIndex(html);\n\n  var tagName;\n\n  if (i === -1) {\n    tagName = html.slice(1, -1);\n  } else {\n    tagName = html.slice(1, i + 1);\n  }\n\n  tagName = _.trim(tagName).toLowerCase();\n  if (tagName.slice(0, 1) === \"/\") tagName = tagName.slice(1);\n  if (tagName.slice(-1) === \"/\") tagName = tagName.slice(0, -1);\n  return tagName;\n}\n/**\n * is close tag?\n *\n * @param {String} html 如：'<a hef=\"#\">'\n * @return {Boolean}\n */\n\n\nfunction isClosing(html) {\n  return html.slice(0, 2) === \"</\";\n}\n/**\n * parse input html and returns processed html\n *\n * @param {String} html\n * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)\n * @param {Function} escapeHtml\n * @return {String}\n */\n\n\nfunction parseTag(html, onTag, escapeHtml) {\n  \"use strict\";\n\n  var rethtml = \"\";\n  var lastPos = 0;\n  var tagStart = false;\n  var quoteStart = false;\n  var currentPos = 0;\n  var len = html.length;\n  var currentTagName = \"\";\n  var currentHtml = \"\";\n\n  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {\n    var c = html.charAt(currentPos);\n\n    if (tagStart === false) {\n      if (c === \"<\") {\n        tagStart = currentPos;\n        continue;\n      }\n    } else {\n      if (quoteStart === false) {\n        if (c === \"<\") {\n          rethtml += escapeHtml(html.slice(lastPos, currentPos));\n          tagStart = currentPos;\n          lastPos = currentPos;\n          continue;\n        }\n\n        if (c === \">\" || currentPos === len - 1) {\n          rethtml += escapeHtml(html.slice(lastPos, tagStart));\n          currentHtml = html.slice(tagStart, currentPos + 1);\n          currentTagName = getTagName(currentHtml);\n          rethtml += onTag(tagStart, rethtml.length, currentTagName, currentHtml, isClosing(currentHtml));\n          lastPos = currentPos + 1;\n          tagStart = false;\n          continue;\n        }\n\n        if (c === '\"' || c === \"'\") {\n          var i = 1;\n          var ic = html.charAt(currentPos - i);\n\n          while (ic.trim() === \"\" || ic === \"=\") {\n            if (ic === \"=\") {\n              quoteStart = c;\n              continue chariterator;\n            }\n\n            ic = html.charAt(currentPos - ++i);\n          }\n        }\n      } else {\n        if (c === quoteStart) {\n          quoteStart = false;\n          continue;\n        }\n      }\n    }\n  }\n\n  if (lastPos < len) {\n    rethtml += escapeHtml(html.substr(lastPos));\n  }\n\n  return rethtml;\n}\n\nvar REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9\\\\_:.-]/gim;\n/**\n * parse input attributes and returns processed attributes\n *\n * @param {String} html e.g. `href=\"#\" target=\"_blank\"`\n * @param {Function} onAttr e.g. `function (name, value)`\n * @return {String}\n */\n\nfunction parseAttr(html, onAttr) {\n  \"use strict\";\n\n  var lastPos = 0;\n  var lastMarkPos = 0;\n  var retAttrs = [];\n  var tmpName = false;\n  var len = html.length;\n\n  function addAttr(name, value) {\n    name = _.trim(name);\n    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, \"\").toLowerCase();\n    if (name.length < 1) return;\n    var ret = onAttr(name, value || \"\");\n    if (ret) retAttrs.push(ret);\n  } // 逐个分析字符\n\n\n  for (var i = 0; i < len; i++) {\n    var c = html.charAt(i);\n    var v, j;\n\n    if (tmpName === false && c === \"=\") {\n      tmpName = html.slice(lastPos, i);\n      lastPos = i + 1;\n      lastMarkPos = html.charAt(lastPos) === '\"' || html.charAt(lastPos) === \"'\" ? lastPos : findNextQuotationMark(html, i + 1);\n      continue;\n    }\n\n    if (tmpName !== false) {\n      if (i === lastMarkPos) {\n        j = html.indexOf(c, i + 1);\n\n        if (j === -1) {\n          break;\n        } else {\n          v = _.trim(html.slice(lastMarkPos + 1, j));\n          addAttr(tmpName, v);\n          tmpName = false;\n          i = j;\n          lastPos = i + 1;\n          continue;\n        }\n      }\n    }\n\n    if (/\\s|\\n|\\t/.test(c)) {\n      html = html.replace(/\\s|\\n|\\t/g, \" \");\n\n      if (tmpName === false) {\n        j = findNextEqual(html, i);\n\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          addAttr(v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          i = j - 1;\n          continue;\n        }\n      } else {\n        j = findBeforeEqual(html, i - 1);\n\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          v = stripQuoteWrap(v);\n          addAttr(tmpName, v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          continue;\n        }\n      }\n    }\n  }\n\n  if (lastPos < html.length) {\n    if (tmpName === false) {\n      addAttr(html.slice(lastPos));\n    } else {\n      addAttr(tmpName, stripQuoteWrap(_.trim(html.slice(lastPos))));\n    }\n  }\n\n  return _.trim(retAttrs.join(\" \"));\n}\n\nfunction findNextEqual(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction findNextQuotationMark(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"'\" || c === '\"') return i;\n    return -1;\n  }\n}\n\nfunction findBeforeEqual(str, i) {\n  for (; i > 0; i--) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction isQuoteWrapString(text) {\n  if (text[0] === '\"' && text[text.length - 1] === '\"' || text[0] === \"'\" && text[text.length - 1] === \"'\") {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction stripQuoteWrap(text) {\n  if (isQuoteWrapString(text)) {\n    return text.substr(1, text.length - 2);\n  } else {\n    return text;\n  }\n}\n\nexports.parseTag = parseTag;\nexports.parseAttr = parseAttr;","map":{"version":3,"names":["_","require","getTagName","html","i","spaceIndex","tagName","slice","trim","toLowerCase","isClosing","parseTag","onTag","escapeHtml","rethtml","lastPos","tagStart","quoteStart","currentPos","len","length","currentTagName","currentHtml","chariterator","c","charAt","ic","substr","REGEXP_ILLEGAL_ATTR_NAME","parseAttr","onAttr","lastMarkPos","retAttrs","tmpName","addAttr","name","value","replace","ret","push","v","j","findNextQuotationMark","indexOf","test","findNextEqual","findBeforeEqual","stripQuoteWrap","join","str","isQuoteWrapString","text","exports"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/xss/lib/parser.js"],"sourcesContent":["/**\n * Simple HTML Parser\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar _ = require(\"./util\");\n\n/**\n * get tag name\n *\n * @param {String} html e.g. '<a hef=\"#\">'\n * @return {String}\n */\nfunction getTagName(html) {\n  var i = _.spaceIndex(html);\n  var tagName;\n  if (i === -1) {\n    tagName = html.slice(1, -1);\n  } else {\n    tagName = html.slice(1, i + 1);\n  }\n  tagName = _.trim(tagName).toLowerCase();\n  if (tagName.slice(0, 1) === \"/\") tagName = tagName.slice(1);\n  if (tagName.slice(-1) === \"/\") tagName = tagName.slice(0, -1);\n  return tagName;\n}\n\n/**\n * is close tag?\n *\n * @param {String} html 如：'<a hef=\"#\">'\n * @return {Boolean}\n */\nfunction isClosing(html) {\n  return html.slice(0, 2) === \"</\";\n}\n\n/**\n * parse input html and returns processed html\n *\n * @param {String} html\n * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)\n * @param {Function} escapeHtml\n * @return {String}\n */\nfunction parseTag(html, onTag, escapeHtml) {\n  \"use strict\";\n\n  var rethtml = \"\";\n  var lastPos = 0;\n  var tagStart = false;\n  var quoteStart = false;\n  var currentPos = 0;\n  var len = html.length;\n  var currentTagName = \"\";\n  var currentHtml = \"\";\n\n  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {\n    var c = html.charAt(currentPos);\n    if (tagStart === false) {\n      if (c === \"<\") {\n        tagStart = currentPos;\n        continue;\n      }\n    } else {\n      if (quoteStart === false) {\n        if (c === \"<\") {\n          rethtml += escapeHtml(html.slice(lastPos, currentPos));\n          tagStart = currentPos;\n          lastPos = currentPos;\n          continue;\n        }\n        if (c === \">\" || currentPos === len - 1) {\n          rethtml += escapeHtml(html.slice(lastPos, tagStart));\n          currentHtml = html.slice(tagStart, currentPos + 1);\n          currentTagName = getTagName(currentHtml);\n          rethtml += onTag(\n            tagStart,\n            rethtml.length,\n            currentTagName,\n            currentHtml,\n            isClosing(currentHtml)\n          );\n          lastPos = currentPos + 1;\n          tagStart = false;\n          continue;\n        }\n        if (c === '\"' || c === \"'\") {\n          var i = 1;\n          var ic = html.charAt(currentPos - i);\n\n          while (ic.trim() === \"\" || ic === \"=\") {\n            if (ic === \"=\") {\n              quoteStart = c;\n              continue chariterator;\n            }\n            ic = html.charAt(currentPos - ++i);\n          }\n        }\n      } else {\n        if (c === quoteStart) {\n          quoteStart = false;\n          continue;\n        }\n      }\n    }\n  }\n  if (lastPos < len) {\n    rethtml += escapeHtml(html.substr(lastPos));\n  }\n\n  return rethtml;\n}\n\nvar REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9\\\\_:.-]/gim;\n\n/**\n * parse input attributes and returns processed attributes\n *\n * @param {String} html e.g. `href=\"#\" target=\"_blank\"`\n * @param {Function} onAttr e.g. `function (name, value)`\n * @return {String}\n */\nfunction parseAttr(html, onAttr) {\n  \"use strict\";\n\n  var lastPos = 0;\n  var lastMarkPos = 0;\n  var retAttrs = [];\n  var tmpName = false;\n  var len = html.length;\n\n  function addAttr(name, value) {\n    name = _.trim(name);\n    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, \"\").toLowerCase();\n    if (name.length < 1) return;\n    var ret = onAttr(name, value || \"\");\n    if (ret) retAttrs.push(ret);\n  }\n\n  // 逐个分析字符\n  for (var i = 0; i < len; i++) {\n    var c = html.charAt(i);\n    var v, j;\n    if (tmpName === false && c === \"=\") {\n      tmpName = html.slice(lastPos, i);\n      lastPos = i + 1;\n      lastMarkPos = html.charAt(lastPos) === '\"' || html.charAt(lastPos) === \"'\" ? lastPos : findNextQuotationMark(html, i + 1);\n      continue;\n    }\n    if (tmpName !== false) {\n      if (\n        i === lastMarkPos\n      ) {\n        j = html.indexOf(c, i + 1);\n        if (j === -1) {\n          break;\n        } else {\n          v = _.trim(html.slice(lastMarkPos + 1, j));\n          addAttr(tmpName, v);\n          tmpName = false;\n          i = j;\n          lastPos = i + 1;\n          continue;\n        }\n      }\n    }\n    if (/\\s|\\n|\\t/.test(c)) {\n      html = html.replace(/\\s|\\n|\\t/g, \" \");\n      if (tmpName === false) {\n        j = findNextEqual(html, i);\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          addAttr(v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          i = j - 1;\n          continue;\n        }\n      } else {\n        j = findBeforeEqual(html, i - 1);\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          v = stripQuoteWrap(v);\n          addAttr(tmpName, v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          continue;\n        }\n      }\n    }\n  }\n\n  if (lastPos < html.length) {\n    if (tmpName === false) {\n      addAttr(html.slice(lastPos));\n    } else {\n      addAttr(tmpName, stripQuoteWrap(_.trim(html.slice(lastPos))));\n    }\n  }\n\n  return _.trim(retAttrs.join(\" \"));\n}\n\nfunction findNextEqual(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction findNextQuotationMark(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"'\" || c === '\"') return i;\n    return -1;\n  }\n}\n\nfunction findBeforeEqual(str, i) {\n  for (; i > 0; i--) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction isQuoteWrapString(text) {\n  if (\n    (text[0] === '\"' && text[text.length - 1] === '\"') ||\n    (text[0] === \"'\" && text[text.length - 1] === \"'\")\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction stripQuoteWrap(text) {\n  if (isQuoteWrapString(text)) {\n    return text.substr(1, text.length - 2);\n  } else {\n    return text;\n  }\n}\n\nexports.parseTag = parseTag;\nexports.parseAttr = parseAttr;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}