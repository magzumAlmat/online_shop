{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amagzum\\\\Downloads\\\\22082021\\\\\\u0420\\u0410\\u0431\\u043E\\u0447\\u0438\\u0439 \\u043F\\u0440\\u043E\\u0442\\u043E\\u0442\\u0438\\u043F\\\\marioplan-master\\\\src\\\\components\\\\layout\\\\CreateOrder.js\";\nimport React, { Component } from 'react';\nimport Cart from '../cart/Cart';\nimport TotalAmount from '../cart/TotalAmount';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport { connect } from 'react-redux';\nimport { showCart, addItem } from '../../store/actions/cartActions';\nimport CartItem from '../cart/CartItem';\nimport uuid from 'uuid';\nimport { Table } from 'reactstrap';\nimport { Media } from 'reactstrap';\nimport { Alert } from 'reactstrap';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { doc, getDoc } from \"firebase/firestore\";\nimport firebase from 'firebase/app';\nimport 'firebase/firestore'; // import firebase  from '..//../config/fbConfig';\n\nimport { createOrderAction } from '../../store/actions/createOrderAction';\nimport { useState } from \"react\";\nimport CustomSelect from '../projects/SelectPayOption';\nimport { ContactSupportOutlined } from '@material-ui/icons';\nimport { CardImg } from 'reactstrap';\n\nclass CreateOrder extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectOptions: [],\n      order: [{}],\n      pay: '',\n      name: '',\n      phone: '',\n      adress: '',\n      comment: '',\n      totalPr: this.props.location.params.totalPrice\n    };\n  }\n\n  render() {\n    console.log('THIS PROPS ', this.props);\n    const options = [{\n      label: 'Перевести Курьеру',\n      value: 'transfer'\n    }, {\n      label: 'Оплатить Курьеру наличными',\n      value: 'cash'\n    }];\n    const cartItems = this.props.location.params.cartItems;\n    console.log('cartItems ', cartItems);\n\n    const handleChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    const handleSubmit = e => {\n      e.preventDefault();\n      this.state.order = cartItems;\n      console.log('cartItems from createORDER', cartItems);\n      console.log(typeof cartItems.qty, typeof cartItems.price);\n      console.log(this.props.location.params, '---this is cartItems qty');\n      console.log('this.state.order.ord', this.state.order);\n      this.state.order.total = this.props.location.params.totalPrice;\n      this.state.order.payOption = this.state.pay;\n      this.state.order.clientName = this.state.name;\n      this.state.order.clientPhone = this.state.phone;\n      this.state.order.clientAddress = this.state.adress;\n      this.state.order.clientComment = this.state.comment;\n      this.state.order.ostalosTovara = Number(cartItems.Qty) - Number(this.state.qty);\n      this.props.createOrderAction(this.state);\n      alert('Ваш заказ успешно добавлен! Скоро с вами свяжется оператор.'); //console.log('totalAmount',this.props.location.params.totalPrice)\n\n      this.props.history.push('/showorders');\n      console.log(this.props, '---PROPS');\n      this.props.location.params.cartItems = []; //обнулил корзину\n\n      this.render();\n    };\n\n    const onChangeInput = (value, e) => {\n      // console.log(e.target.Category)\n      // const setCategory=e.target.value.toString()\n      this.state.pay = value; // console.log('Value of Category',typeof(valueString))\n      // console.log('Category=',this.props.Category)\n\n      this.state.selectOptions = this.state.pay.value;\n      console.log('PAY OPTION', this.state.selectOptions); // this.setState({selectOptions: options})\n      // console.log('this is selected options',this.state.selectOptions)\n      // this.setState({\n      //     [e.target.id]: e.target.valueString\n      // })\n    }; //  const orderNow=(e)=>{\n    //     e.preventDefault()\n    //     this.state.order.ord=cartItems\n    //     this.state.order.total=this.props.location.params.totalPrice\n    //     this.state.order.payOptions=this.state.pay\n    //     this.state.order.clientName=this.state.name\n    //     this.state.order.clientPhone=this.state.phone\n    //     this.state.order.clientAddress=this.state.adress\n    //     this.state.order.clientComment=this.state.comment\n    //     createOrderAction(this.state)\n    //     alert('Ваш заказ успешно добавлен! Скоро с вами свяжется оператор.',)\n    //     console.log('state from create ORDER',this.state)\n    //         //console.log('totalAmount',this.props.location.params.totalPrice)\n    //     this.props.history.push('/products');\n    //         // console.log('Create oRDER присваение ордера',this.state.ord)\n    //         //this.props.createOrderAction(this.state.ord)\n    //         }\n\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, cartItems.length === 0 ? React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"\\u041D\\u0435\\u0447\\u0435\\u0433\\u043E \\u043E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0430\\u0442\\u044C \", React.createElement(\"i\", {\n      className: \"far fa-frown\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Table, {\n      striped: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"\\u0426\\u0435\\u043D\\u0430\"))), cartItems.map(item => //    { totalPr=(Number(item.price)*Number(item.qty))},\n    React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      key: uuid(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(CardImg, {\n      top: true,\n      style: {\n        'width': '2rem',\n        'margin-top': '1rem'\n      },\n      className: \"mr-3 \",\n      src: item.url,\n      alt: \"Generic placeholder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, item.name)))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, item.qty), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, item.total))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      variant: 'dark',\n      className: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"\\u0418\\u0422\\u041E\\u0413\\u041E :   \", this.props.location.params.totalPrice, \" T\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }))), React.createElement(\"form\", {\n      className: \"white\",\n      onSubmit: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"\\u041A\\u0430\\u043A \\u043C\\u044B \\u043C\\u043E\\u0436\\u0435\\u043C \\u043A \\u0432\\u0430\\u043C \\u043E\\u0431\\u0440\\u0430\\u0449\\u0430\\u0442\\u044C\\u0441\\u044F?\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"name\",\n      onChange: handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"phone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"\\u0412\\u0430\\u0448 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"phone\",\n      onChange: handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"adress\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"adress\",\n      onChange: handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"comment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043A \\u0437\\u0430\\u043A\\u0430\\u0437\\u0443\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"comment\",\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      htmlFor: \"pay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043F \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B\"), React.createElement(CustomSelect, {\n      options: options,\n      onChange: onChangeInput,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn pink lighten-1 z-depth-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"Create order\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.firebase.auth\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    createOrderAction: Order => dispatch(createOrderAction(Order))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateOrder);","map":{"version":3,"sources":["C:\\Users\\amagzum\\Downloads\\22082021\\РАбочий прототип\\marioplan-master\\src\\components\\layout\\CreateOrder.js"],"names":["React","Component","Cart","TotalAmount","Scrollbars","connect","showCart","addItem","CartItem","uuid","Table","Media","Alert","firestoreConnect","doc","getDoc","firebase","createOrderAction","useState","CustomSelect","ContactSupportOutlined","CardImg","CreateOrder","state","selectOptions","order","pay","name","phone","adress","comment","totalPr","props","location","params","totalPrice","render","console","log","options","label","value","cartItems","handleChange","e","setState","target","id","handleSubmit","preventDefault","qty","price","total","payOption","clientName","clientPhone","clientAddress","clientComment","ostalosTovara","Number","Qty","alert","history","push","onChangeInput","length","map","item","url","mapStateToProps","auth","mapDispatchToProps","dispatch","Order"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Cart from '../cart/Cart'\r\nimport TotalAmount from '../cart/TotalAmount'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\nimport { connect } from 'react-redux';\r\nimport { showCart, addItem } from '../../store/actions/cartActions';\r\nimport CartItem from '../cart/CartItem';\r\nimport uuid from 'uuid';\r\n\r\nimport {Table} from 'reactstrap'\r\nimport {Media} from 'reactstrap'\r\nimport {Alert} from 'reactstrap'\r\n\r\nimport { firestoreConnect } from 'react-redux-firebase';\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\n// import firebase  from '..//../config/fbConfig';\r\nimport { createOrderAction } from '../../store/actions/createOrderAction';\r\nimport { useState } from \"react\";\r\nimport CustomSelect from '../projects/SelectPayOption';\r\nimport { ContactSupportOutlined } from '@material-ui/icons';\r\nimport { CardImg } from 'reactstrap';\r\nclass CreateOrder extends Component {\r\n\r\n    \r\n    state = {\r\n        selectOptions: [],\r\n        order: [{}],\r\n        pay:'',\r\n        name:'',\r\n        phone:'',\r\n        adress:'',\r\n        comment:'',\r\n        totalPr:this.props.location.params.totalPrice\r\n    }\r\n    \r\n    render() {\r\n        console.log('THIS PROPS ',this.props)\r\n        const options = [\r\n            { label: 'Перевести Курьеру', value: 'transfer' },\r\n            { label: 'Оплатить Курьеру наличными', value: 'cash' },\r\n        ]\r\n\r\n          \r\n          const {cartItems}=this.props.location.params;\r\n          console.log('cartItems ',cartItems)\r\n         \r\n          const  handleChange = (e) => {\r\n                \r\n                this.setState({\r\n                    [e.target.id]: e.target.value\r\n                })\r\n            }\r\n\r\n            const handleSubmit = (e) => {\r\n                \r\n                e.preventDefault()\r\n                this.state.order=cartItems\r\n                console.log('cartItems from createORDER',cartItems)\r\n                console.log(typeof cartItems.qty, typeof cartItems.price)\r\n                console.log(this.props.location.params,'---this is cartItems qty')\r\n                console.log('this.state.order.ord',this.state.order)\r\n               \r\n                this.state.order.total=this.props.location.params.totalPrice\r\n                this.state.order.payOption=this.state.pay\r\n                this.state.order.clientName=this.state.name\r\n                this.state.order.clientPhone=this.state.phone\r\n                this.state.order.clientAddress=this.state.adress\r\n                this.state.order.clientComment=this.state.comment\r\n                                \r\n                this.state.order.ostalosTovara=Number(cartItems.Qty)-Number(this.state.qty)\r\n                this.props.createOrderAction(this.state)\r\n                alert('Ваш заказ успешно добавлен! Скоро с вами свяжется оператор.')\r\n                    //console.log('totalAmount',this.props.location.params.totalPrice)\r\n                this.props.history.push('/showorders');\r\n                 \r\n                 console.log(this.props,'---PROPS')\r\n                 this.props.location.params.cartItems=[]//обнулил корзину\r\n                 this.render()\r\n                \r\n            }\r\n    \r\n           const onChangeInput=(value,e)=> {\r\n            // console.log(e.target.Category)\r\n            // const setCategory=e.target.value.toString()\r\n            this.state.pay=value\r\n            // console.log('Value of Category',typeof(valueString))\r\n            // console.log('Category=',this.props.Category)\r\n            this.state.selectOptions=this.state.pay.value\r\n    \r\n            console.log('PAY OPTION',this.state.selectOptions)\r\n            // this.setState({selectOptions: options})\r\n            // console.log('this is selected options',this.state.selectOptions)\r\n            // this.setState({\r\n            //     [e.target.id]: e.target.valueString\r\n            // })\r\n            \r\n            \r\n         }\r\n        //  const orderNow=(e)=>{\r\n                \r\n        //     e.preventDefault()\r\n            \r\n        //     this.state.order.ord=cartItems\r\n        //     this.state.order.total=this.props.location.params.totalPrice\r\n        //     this.state.order.payOptions=this.state.pay\r\n        //     this.state.order.clientName=this.state.name\r\n        //     this.state.order.clientPhone=this.state.phone\r\n        //     this.state.order.clientAddress=this.state.adress\r\n        //     this.state.order.clientComment=this.state.comment\r\n        //     createOrderAction(this.state)\r\n        //     alert('Ваш заказ успешно добавлен! Скоро с вами свяжется оператор.',)\r\n        //     console.log('state from create ORDER',this.state)\r\n        //         //console.log('totalAmount',this.props.location.params.totalPrice)\r\n        //     this.props.history.push('/products');\r\n\r\n        //         // console.log('Create oRDER присваение ордера',this.state.ord)\r\n\r\n             \r\n        //         //this.props.createOrderAction(this.state.ord)\r\n                \r\n        //         }\r\n       \r\n\r\n        return (\r\n            <div className='container'>\r\n             <div className=\"items\">\r\n              {cartItems.length === 0 ? (\r\n                <h3>\r\n                 Нечего отображать <i className=\"far fa-frown\" />\r\n                </h3>\r\n              ) : (\r\n                <div>\r\n                    <Table striped  hover>\r\n                            <thead>\r\n                                <tr>\r\n                                \r\n                                <th>Продукт</th>\r\n                              \r\n                                <th>Количество</th>\r\n                                <th>Цена</th>\r\n                               \r\n                                </tr>\r\n                            </thead>\r\n                        {cartItems.map(item => (\r\n                        //    { totalPr=(Number(item.price)*Number(item.qty))},\r\n                            <tbody>\r\n                                <tr key={uuid()}>\r\n                                \r\n                                <td><div>\r\n                                <CardImg top\r\n                                            style={{'width':'2rem','margin-top':'1rem'}}\r\n                                                className=\"mr-3 \"\r\n                                                src={item.url}\r\n                                                alt=\"Generic placeholder\"\r\n                                            \r\n                                            />\r\n                                        {/* <img\r\n                                            width={64}\r\n                                            height={64}\r\n                                            className=\"mr-3\"\r\n                                            src={item.url}\r\n                                            alt=\"Generic placeholder\"\r\n                                        /> */}\r\n                                        <div>\r\n                                            <h5>{item.name}</h5>\r\n                                           \r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                                \r\n                               \r\n                                <td>{item.qty}</td>\r\n                                <td>{item.total}</td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                           \r\n                          \r\n                         \r\n                  ))} \r\n                 \r\n                </Table>\r\n                <div>\r\n                        <Alert  variant={'dark'} className=\"price\">\r\n                        ИТОГО :\t  {this.props.location.params.totalPrice} T\r\n                        </Alert>\r\n                </div>\r\n                <div >\r\n                    \r\n                 \r\n\r\n                </div> \r\n                </div>\r\n              )}\r\n          \r\n            </div>\r\n            \r\n            <form className=\"white\" onSubmit={handleSubmit}>\r\n\r\n            <div className=\"input-field\">\r\n                <label htmlFor=\"name\">Как мы можем к вам обращаться?</label>\r\n                <input type=\"text\" id=\"name\" onChange={handleChange} required={true} />\r\n            </div>\r\n            <div className=\"input-field\">\r\n                <label htmlFor=\"phone\">Ваш телефон</label>\r\n                <input type=\"text\" id=\"phone\" onChange={handleChange} required={true}/>\r\n            </div>\r\n            <div className=\"input-field\">\r\n                <label htmlFor=\"adress\">Адрес доставки</label>\r\n                <input type=\"text\" id=\"adress\" onChange={handleChange} required={true}/>\r\n            </div>\r\n            <div className=\"input-field\">\r\n                <label htmlFor=\"comment\">Комментарий к заказу</label>\r\n                <input type=\"text\" id=\"comment\" onChange={handleChange} />\r\n            </div>\r\n            \r\n            <label htmlFor=\"pay\" >Выберите тип оплаты</label>\r\n            <CustomSelect options={options}  onChange={onChangeInput} required={true}/> \r\n\r\n            <div className=\"input-field\">\r\n                        <button className=\"btn pink lighten-1 z-depth-0\">Create order</button>\r\n                    </div> \r\n            </form>\r\n\r\n\r\n\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n        auth: state.firebase.auth\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return{\r\n        createOrderAction: (Order) => dispatch(createOrderAction(Order))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateOrder);"]},"metadata":{},"sourceType":"module"}