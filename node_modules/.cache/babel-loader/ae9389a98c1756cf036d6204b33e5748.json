{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _dayjs = require('dayjs');\n\nvar _dayjs2 = _interopRequireDefault(_dayjs);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _DayPickerInput = require('react-day-picker/DayPickerInput');\n\nvar _DayPickerInput2 = _interopRequireDefault(_DayPickerInput);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _dateFormats = require('@appbaseio/reactivecore/lib/utils/dateFormats');\n\nvar _dateFormats2 = _interopRequireDefault(_dateFormats);\n\nvar _DateContainer = require('../../styles/DateContainer');\n\nvar _DateContainer2 = _interopRequireDefault(_DateContainer);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _utils = require('../../utils');\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DateRange = function (_Component) {\n  _inherits(DateRange, _Component);\n\n  function DateRange(props) {\n    _classCallCheck(this, DateRange);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var currentDate = props.defaultValue || props.value || null;\n\n    if (props.selectedValue) {\n      if (Array.isArray(props.selectedValue)) {\n        currentDate = {\n          start: (0, _dayjs2.default)(new Date(props.selectedValue[0])).toISOString(),\n          end: (0, _dayjs2.default)(new Date(props.selectedValue[1])).toISOString()\n        };\n      } else {\n        var _props$selectedValue = props.selectedValue,\n            start = _props$selectedValue.start,\n            end = _props$selectedValue.end;\n        currentDate = {\n          start: (0, _dayjs2.default)(new Date(start)).toISOString(),\n          end: (0, _dayjs2.default)(new Date(end)).toISOString()\n        };\n      }\n    }\n\n    _this.state = {\n      currentDate: currentDate,\n      dateHovered: null,\n      startKey: 'on-start',\n      endKey: 'on-end'\n    };\n    var hasMounted = false; // Set custom query in store\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, _this.state.currentDate);\n\n    if (currentDate) {\n      _this.handleDateChange(currentDate, false, props, hasMounted);\n    }\n\n    return _this;\n  }\n\n  DateRange.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    if (!(0, _helper.isEqual)(JSON.stringify(this.props.value), JSON.stringify(prevProps.value))) {\n      this.handleDateChange(this.props.value, false, this.props);\n    } else {\n      var currentDate = this.state.currentDate;\n      var _props = this.props,\n          selectedValue = _props.selectedValue,\n          value = _props.value,\n          onChange = _props.onChange; // comparing array format of selectedValue with object form of the state if not null\n\n      var formattedSelectedValue = Array.isArray(selectedValue) && selectedValue.length ? [this.formatInputDate(selectedValue[0]), this.formatInputDate(selectedValue[1])] : [];\n\n      if (!(0, _helper.isEqual)(currentDate ? [this.formatInputDate(currentDate.start), this.formatInputDate(currentDate.end)] // prettier-ignore\n      : null, formattedSelectedValue) && !(0, _helper.isEqual)(prevProps.selectedValue, selectedValue)) {\n        var modDate = selectedValue ? {\n          start: this.props.selectedValue[0] || '',\n          end: this.props.selectedValue[1] || '' // prettier-ignore\n\n        } : {\n          start: '',\n          end: ''\n        };\n\n        if ((value === undefined || value && value.start === '' && value.end === '') && !onChange) {\n          this.handleDateChange(modDate, true, this.props);\n        } else if (onChange) {\n          onChange(modDate);\n        }\n      }\n    }\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField', 'aggregationSize'], function () {\n      return _this2.updateQuery(_this2.state.currentDate ? {\n        // we need the date in correct queryFormat\n        start: (0, _helper.formatDate)(_this2.state.currentDate.start, _this2.props),\n        end: (0, _helper.formatDate)(_this2.state.currentDate.end, _this2.props) // prettier-ignore\n\n      } : _this2.state.currentDate, _this2.props);\n    });\n  };\n\n  DateRange.prototype.render = function render() {\n    var _state = this.state,\n        currentDate = _state.currentDate,\n        dateHovered = _state.dateHovered;\n    var start = currentDate ? (0, _helper.unwrapToNativeDate)(currentDate.start) : '';\n    var end = currentDate ? (0, _helper.unwrapToNativeDate)(currentDate.end) : '';\n    var endDay = currentDate ? dateHovered : '';\n    var selectedDays = [start, {\n      from: start,\n      to: endDay\n    }];\n    var modifiers = {\n      start: start,\n      end: endDay\n    };\n    return _react2.default.createElement(_DateContainer2.default, {\n      range: true,\n      style: this.props.style,\n      className: this.props.className,\n      showBorder: !this.props.showClear\n    }, this.props.title && _react2.default.createElement(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), _react2.default.createElement(_Flex2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'input-container') || null\n    }, _react2.default.createElement(_Flex2.default, {\n      flex: 2,\n      showBorder: this.props.showClear,\n      iconPosition: 'right',\n      style: {\n        background: this.props.theme.colors.backgroundColor || 'transparent'\n      }\n    }, _react2.default.createElement(_DayPickerInput2.default, _extends({\n      ref: this.getStartDateRef,\n      showOverlay: this.props.focused,\n      formatDate: this.formatInputDate,\n      value: start,\n      key: this.state.startKey,\n      placeholder: this.props.placeholder.start,\n      dayPickerProps: {\n        numberOfMonths: this.props.numberOfMonths,\n        initialMonth: this.props.initialMonth,\n        disabledDays: {\n          after: end || ''\n        },\n        selectedDays: selectedDays,\n        modifiers: modifiers\n      },\n      inputProps: {\n        'aria-label': this.props.componentId + '-start-input'\n      },\n      onDayChange: this.handleStartDate,\n      classNames: {\n        container: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n        overlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n        overlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n      }\n    }, this.props.dayPickerInputProps)), this.props.showClear && this.state.currentDate && this.state.currentDate.start && _react2.default.createElement(_CancelSvg2.default, {\n      onClick: this.clearDayPickerStart\n    })), _react2.default.createElement(_Flex2.default, {\n      justifyContent: 'center',\n      alignItems: 'center',\n      basis: '20px'\n    }, '-'), _react2.default.createElement(_Flex2.default, {\n      flex: 2,\n      showBorder: this.props.showClear,\n      iconPosition: 'right',\n      style: {\n        background: this.props.theme.colors.backgroundColor || 'transparent'\n      }\n    }, _react2.default.createElement(_DayPickerInput2.default, _extends({\n      ref: this.getEndDateRef,\n      showOverlay: this.props.focused,\n      formatDate: this.formatInputDate,\n      value: end,\n      key: this.state.endKey,\n      placeholder: this.props.placeholder.end,\n      dayPickerProps: {\n        numberOfMonths: this.props.numberOfMonths,\n        initialMonth: this.props.initialMonth,\n        onDayMouseEnter: this.handleDayMouseEnter,\n        disabledDays: {\n          before: start || ''\n        },\n        selectedDays: selectedDays,\n        modifiers: modifiers\n      },\n      inputProps: {\n        'aria-label': this.props.componentId + '-end-input'\n      },\n      onDayChange: this.handleEndDate,\n      classNames: {\n        container: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n        overlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n        overlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n      }\n    }, this.props.dayPickerInputProps)), this.props.showClear && this.state.currentDate && this.state.currentDate.end && _react2.default.createElement(_CancelSvg2.default, {\n      onClick: this.clearDayPickerEnd\n    }))));\n  };\n\n  return DateRange;\n}(_react.Component);\n\nDateRange.defaultQuery = function (value, props) {\n  return {\n    query: {\n      queryFormat: props.queryFormat,\n      dataField: props.dataField,\n      value: value,\n      nestedField: props.nestedField\n    }\n  };\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.formatInputDate = function (date) {\n    var dayjsDate = (0, _dayjs2.default)(new Date(date));\n    return dayjsDate.isValid() ? dayjsDate.format('YYYY-MM-DD') : '';\n  };\n\n  this.getEndDateRef = function (ref) {\n    _this3.endDateRef = ref;\n  };\n\n  this.getStartDateRef = function (ref) {\n    _this3.startDateRef = ref;\n  };\n\n  this.clearDayPickerStart = function () {\n    if (_this3.state.currentDate && _this3.state.currentDate.start !== '') {\n      var _props2 = _this3.props,\n          value = _props2.value,\n          onChange = _props2.onChange;\n\n      if (value === undefined && !onChange) {\n        _this3.handleStartDate('', false); // resets the day picker component\n\n      } else if (onChange) {\n        onChange({\n          start: '',\n          end: _this3.state.currentDate.end\n        });\n      } else {\n        // Since value prop is defined and onChange is not define\n        // we keep the same date as in store\n        _this3.setState({\n          currentDate: _this3.state.currentDate\n        });\n      }\n    }\n  };\n\n  this.clearDayPickerEnd = function () {\n    if (_this3.state.currentDate && _this3.state.currentDate.end !== '') {\n      _this3.handleEndDate(''); // resets the day picker component\n\n\n      var _props3 = _this3.props,\n          value = _props3.value,\n          onChange = _props3.onChange;\n\n      if (value === undefined && !onChange) {\n        _this3.handleEndDate('', false); // resets the day picker component\n\n      } else if (onChange) {\n        onChange({\n          start: _this3.state.currentDate.start,\n          end: ''\n        });\n      } else {\n        // Since value prop is defined and onChange is not define\n        // we keep the same date as in store\n        _this3.setState({\n          currentDate: _this3.state.currentDate\n        });\n      }\n    }\n  };\n\n  this.handleStartDate = function (date) {\n    var autoFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var currentDate = _this3.state.currentDate;\n    var end = currentDate ? currentDate.end : '';\n    var _props4 = _this3.props,\n        value = _props4.value,\n        onChange = _props4.onChange;\n\n    if ((value === undefined || value && value.start === '') && !onChange) {\n      if (_this3.startDateRef.getInput().value.length === 10) {\n        _this3.handleDateChange({\n          start: date,\n          end: end\n        });\n\n        _this3.setState(function (state) {\n          return {\n            startKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n          };\n        }); // focus the end date DayPicker if its empty\n\n\n        if (_this3.props.autoFocusEnd && autoFocus) {\n          _this3.endDateRef.getInput().focus();\n        }\n      }\n    } else if (onChange) {\n      if (_this3.startDateRef.getInput().value.length === 10) {\n        onChange({\n          start: date,\n          end: end\n        }); // focus the end date DayPicker if its empty\n\n        if (_this3.props.autoFocusEnd && autoFocus) {\n          _this3.endDateRef.getInput().focus();\n        } // this will trigger a remount on the date component\n        // since DayPickerInput doesn't respect the controlled behavior setting on its own\n\n\n        _this3.setState(function (state) {\n          return {\n            startKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n          };\n        });\n      }\n    } else {\n      // this will trigger a remount on the date component\n      // since DayPickerInput doesn't respect the controlled behavior setting on its own\n      _this3.setState(function (state) {\n        return {\n          startKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n        };\n      });\n    }\n  };\n\n  this.handleEndDate = function (selectedDay) {\n    var currentDate = _this3.state.currentDate;\n    var _props5 = _this3.props,\n        value = _props5.value,\n        onChange = _props5.onChange;\n    var start = currentDate ? currentDate.start : '';\n\n    if ((value === undefined || value && value.end === '') && !onChange) {\n      if (_this3.endDateRef.getInput().value.length === 10) {\n        _this3.handleDayMouseEnter(selectedDay);\n\n        _this3.handleDateChange({\n          start: currentDate ? currentDate.start : '',\n          end: selectedDay\n        });\n\n        _this3.setState(function (state) {\n          return {\n            endKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n          };\n        });\n      }\n    } else if (onChange) {\n      if (_this3.endDateRef.getInput().value.length === 10) {\n        onChange({\n          start: start,\n          end: selectedDay\n        });\n      } // this will trigger a remount on the date component\n      // since DayPickerInput doesn't respect the controlled behavior setting on its own\n\n\n      _this3.setState(function (state) {\n        return {\n          endKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n        };\n      });\n    } else {\n      // this will trigger a remount on the date component\n      // since DayPickerInput doesn't respect the controlled behavior setting on its own\n      _this3.setState(function (state) {\n        return {\n          endKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n        };\n      });\n    }\n  };\n\n  this.handleDayMouseEnter = function (day) {\n    _this3.setState({\n      dateHovered: day\n    });\n  };\n\n  this.handleDateChange = function (currentDate) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this3.props;\n    var hasMounted = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var value = null; // modCurrentDate would check if the currentValue passed is\n    // in correct format or not\n    // when setting value from outside this component\n    // the selectedvalue passed was in a different format and\n    // thus breaking the code\n\n    var modCurrentDate = currentDate;\n\n    if (typeof currentDate.start === 'string' || typeof currentDate.end === 'string') {\n      modCurrentDate = {\n        start: currentDate.start ? (0, _dayjs2.default)(new Date(currentDate.start)).toISOString() : '',\n        end: currentDate.end ? (0, _dayjs2.default)(new Date(currentDate.end)).toISOString() : ''\n      };\n    }\n\n    if (modCurrentDate && !(modCurrentDate.start === '' && modCurrentDate.end === '')) {\n      value = {\n        start: _this3.formatInputDate(modCurrentDate.start),\n        end: _this3.formatInputDate(modCurrentDate.end)\n      }; // prettier-ignore\n    }\n\n    var performUpdate = function performUpdate() {\n      var handleUpdates = function handleUpdates() {\n        _this3.updateQuery(value, props);\n\n        if (props.onValueChange) props.onValueChange(value);\n      };\n\n      if (hasMounted) {\n        _this3.setState({\n          currentDate: modCurrentDate\n        }, handleUpdates);\n      } else {\n        handleUpdates();\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n  };\n\n  this.updateQuery = function (value, props) {\n    if (!value || value && value.start.length && value.end.length) {\n      var customQuery = props.customQuery;\n      var query = DateRange.defaultQuery(value, props);\n      var customQueryOptions = void 0;\n\n      if (customQuery) {\n        var customQueryObject = customQuery(value, props);\n        query = customQueryObject && customQueryObject.query;\n        customQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n        (0, _helper.updateCustomQuery)(props.componentId, props, value);\n      }\n\n      props.setQueryOptions(props.componentId, customQueryOptions, false);\n      props.updateQuery({\n        componentId: props.componentId,\n        query: query,\n        value: value ? [value.start, value.end] : null,\n        showFilter: props.showFilter,\n        label: props.filterLabel,\n        URLParams: props.URLParams,\n        componentType: _constants.componentTypes.dateRange\n      });\n    }\n  };\n};\n\nDateRange.propTypes = {\n  updateQuery: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  setQueryOptions: _types2.default.funcRequired,\n  setCustomQuery: _types2.default.funcRequired,\n  // component props\n  autoFocusEnd: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  dataField: _types2.default.dataFieldArray,\n  dayPickerInputProps: _types2.default.props,\n  defaultValue: _types2.default.dateObject,\n  value: _types2.default.dateObject,\n  filterLabel: _types2.default.string,\n  focused: _types2.default.bool,\n  initialMonth: _types2.default.dateObject,\n  innerClass: _types2.default.style,\n  numberOfMonths: _types2.default.number,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  placeholder: _types2.default.rangeLabels,\n  nestedField: _types2.default.string,\n  queryFormat: _types2.default.queryFormatDate,\n  parseDate: _types2.default.func,\n  react: _types2.default.react,\n  showClear: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  style: _types2.default.style,\n  theme: _types2.default.style,\n  title: _types2.default.string,\n  index: _types2.default.string,\n  endpoint: _types2.default.endpoint\n};\nDateRange.defaultProps = {\n  autoFocusEnd: true,\n  numberOfMonths: 2,\n  placeholder: {\n    start: 'Start date',\n    end: 'End date'\n  },\n  showClear: true,\n  showFilter: true,\n  queryFormat: 'epoch_millis'\n}; // Add componentType for SSR\n\nDateRange.componentType = _constants.componentTypes.dateRange;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    setQueryOptions: function setQueryOptions() {\n      return dispatch(_actions.setQueryOptions.apply(undefined, arguments));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return _react2.default.createElement(DateRange, _extends({\n    ref: props.myForwardedRef\n  }, props));\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return _react2.default.createElement(_PreferencesConsumer2.default, {\n    userProps: _extends({}, props, !props.queryFormat ? {\n      queryFormat: _dateFormats2.default.epoch_millis\n    } : {})\n  }, function (preferenceProps) {\n    return _react2.default.createElement(_ComponentWrapper2.default, _extends({}, preferenceProps, {\n      internalComponent: true,\n      componentType: _constants.componentTypes.dateRange\n    }), function (componentProps) {\n      return _react2.default.createElement(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n        myForwardedRef: ref\n      }));\n    });\n  });\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DateRange);\nForwardRefComponent.displayName = 'DateRange';\nexports.default = ForwardRefComponent;","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","require","_react2","_interopRequireDefault","_actions","_hoistNonReactStatics","_hoistNonReactStatics2","_helper","_types","_types2","_dayjs","_dayjs2","_constants","_DayPickerInput","_DayPickerInput2","_emotionTheming","_dateFormats","_dateFormats2","_DateContainer","_DateContainer2","_Title","_Title2","_Flex","_Flex2","_utils","_CancelSvg","_CancelSvg2","_PreferencesConsumer","_PreferencesConsumer2","_ComponentWrapper","_ComponentWrapper2","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","DateRange","_Component","props","_this","_initialiseProps","currentDate","defaultValue","selectedValue","Array","isArray","start","Date","toISOString","end","_props$selectedValue","state","dateHovered","startKey","endKey","hasMounted","updateCustomQuery","componentId","handleDateChange","componentDidUpdate","prevProps","_this2","isEqual","JSON","stringify","_props","onChange","formattedSelectedValue","formatInputDate","modDate","undefined","checkSomePropChange","updateQuery","formatDate","render","_state","unwrapToNativeDate","endDay","selectedDays","from","to","modifiers","createElement","range","style","className","showBorder","showClear","title","getClassName","innerClass","flex","iconPosition","background","theme","colors","backgroundColor","ref","getStartDateRef","showOverlay","focused","placeholder","dayPickerProps","numberOfMonths","initialMonth","disabledDays","after","inputProps","onDayChange","handleStartDate","classNames","container","overlayWrapper","overlay","dayPickerInputProps","onClick","clearDayPickerStart","justifyContent","alignItems","basis","getEndDateRef","onDayMouseEnter","handleDayMouseEnter","before","handleEndDate","clearDayPickerEnd","Component","defaultQuery","query","queryFormat","dataField","nestedField","_this3","date","dayjsDate","isValid","format","endDateRef","startDateRef","_props2","setState","_props3","autoFocus","_props4","getInput","autoFocusEnd","focus","selectedDay","_props5","day","isDefaultValue","modCurrentDate","performUpdate","handleUpdates","onValueChange","checkValueChange","beforeValueChange","customQuery","customQueryOptions","customQueryObject","getOptionsFromQuery","setQueryOptions","showFilter","label","filterLabel","URLParams","componentType","componentTypes","dateRange","propTypes","funcRequired","setCustomQuery","bool","func","string","stringRequired","dataFieldArray","dateObject","number","onQueryChange","rangeLabels","queryFormatDate","parseDate","react","index","endpoint","defaultProps","mapStateToProps","selectedValues","mapDispatchtoProps","dispatch","component","updateQueryObject","apply","ConnectedComponent","connect","withTheme","myForwardedRef","ForwardRefComponent","forwardRef","userProps","epoch_millis","preferenceProps","internalComponent","componentProps","displayName"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/date/DateRange.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _dayjs = require('dayjs');\n\nvar _dayjs2 = _interopRequireDefault(_dayjs);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _DayPickerInput = require('react-day-picker/DayPickerInput');\n\nvar _DayPickerInput2 = _interopRequireDefault(_DayPickerInput);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _dateFormats = require('@appbaseio/reactivecore/lib/utils/dateFormats');\n\nvar _dateFormats2 = _interopRequireDefault(_dateFormats);\n\nvar _DateContainer = require('../../styles/DateContainer');\n\nvar _DateContainer2 = _interopRequireDefault(_DateContainer);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _utils = require('../../utils');\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DateRange = function (_Component) {\n\t_inherits(DateRange, _Component);\n\n\tfunction DateRange(props) {\n\t\t_classCallCheck(this, DateRange);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar currentDate = props.defaultValue || props.value || null;\n\t\tif (props.selectedValue) {\n\t\t\tif (Array.isArray(props.selectedValue)) {\n\t\t\t\tcurrentDate = {\n\t\t\t\t\tstart: (0, _dayjs2.default)(new Date(props.selectedValue[0])).toISOString(),\n\t\t\t\t\tend: (0, _dayjs2.default)(new Date(props.selectedValue[1])).toISOString()\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tvar _props$selectedValue = props.selectedValue,\n\t\t\t\t    start = _props$selectedValue.start,\n\t\t\t\t    end = _props$selectedValue.end;\n\n\t\t\t\tcurrentDate = {\n\t\t\t\t\tstart: (0, _dayjs2.default)(new Date(start)).toISOString(),\n\t\t\t\t\tend: (0, _dayjs2.default)(new Date(end)).toISOString()\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t_this.state = {\n\t\t\tcurrentDate: currentDate,\n\t\t\tdateHovered: null,\n\t\t\tstartKey: 'on-start',\n\t\t\tendKey: 'on-end'\n\t\t};\n\t\tvar hasMounted = false;\n\n\t\t// Set custom query in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, _this.state.currentDate);\n\n\t\tif (currentDate) {\n\t\t\t_this.handleDateChange(currentDate, false, props, hasMounted);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tDateRange.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\tif (!(0, _helper.isEqual)(JSON.stringify(this.props.value), JSON.stringify(prevProps.value))) {\n\t\t\tthis.handleDateChange(this.props.value, false, this.props);\n\t\t} else {\n\t\t\tvar currentDate = this.state.currentDate;\n\t\t\tvar _props = this.props,\n\t\t\t    selectedValue = _props.selectedValue,\n\t\t\t    value = _props.value,\n\t\t\t    onChange = _props.onChange;\n\t\t\t// comparing array format of selectedValue with object form of the state if not null\n\n\t\t\tvar formattedSelectedValue = Array.isArray(selectedValue) && selectedValue.length ? [this.formatInputDate(selectedValue[0]), this.formatInputDate(selectedValue[1])] : [];\n\t\t\tif (!(0, _helper.isEqual)(currentDate ? [this.formatInputDate(currentDate.start), this.formatInputDate(currentDate.end)] // prettier-ignore\n\t\t\t: null, formattedSelectedValue) && !(0, _helper.isEqual)(prevProps.selectedValue, selectedValue)) {\n\t\t\t\tvar modDate = selectedValue ? {\n\t\t\t\t\tstart: this.props.selectedValue[0] || '',\n\t\t\t\t\tend: this.props.selectedValue[1] || '' // prettier-ignore\n\t\t\t\t} : { start: '', end: '' };\n\t\t\t\tif ((value === undefined || value && value.start === '' && value.end === '') && !onChange) {\n\t\t\t\t\tthis.handleDateChange(modDate, true, this.props);\n\t\t\t\t} else if (onChange) {\n\t\t\t\t\tonChange(modDate);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField', 'aggregationSize'], function () {\n\t\t\treturn _this2.updateQuery(_this2.state.currentDate ? {\n\t\t\t\t// we need the date in correct queryFormat\n\t\t\t\tstart: (0, _helper.formatDate)(_this2.state.currentDate.start, _this2.props),\n\t\t\t\tend: (0, _helper.formatDate)(_this2.state.currentDate.end, _this2.props) // prettier-ignore\n\t\t\t} : _this2.state.currentDate, _this2.props);\n\t\t});\n\t};\n\n\tDateRange.prototype.render = function render() {\n\t\tvar _state = this.state,\n\t\t    currentDate = _state.currentDate,\n\t\t    dateHovered = _state.dateHovered;\n\n\t\tvar start = currentDate ? (0, _helper.unwrapToNativeDate)(currentDate.start) : '';\n\t\tvar end = currentDate ? (0, _helper.unwrapToNativeDate)(currentDate.end) : '';\n\t\tvar endDay = currentDate ? dateHovered : '';\n\t\tvar selectedDays = [start, { from: start, to: endDay }];\n\t\tvar modifiers = { start: start, end: endDay };\n\n\t\treturn _react2.default.createElement(\n\t\t\t_DateContainer2.default,\n\t\t\t{\n\t\t\t\trange: true,\n\t\t\t\tstyle: this.props.style,\n\t\t\t\tclassName: this.props.className,\n\t\t\t\tshowBorder: !this.props.showClear\n\t\t\t},\n\t\t\tthis.props.title && _react2.default.createElement(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\t_react2.default.createElement(\n\t\t\t\t_Flex2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'input-container') || null },\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\tflex: 2,\n\t\t\t\t\t\tshowBorder: this.props.showClear,\n\t\t\t\t\t\ticonPosition: 'right',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackground: this.props.theme.colors.backgroundColor || 'transparent'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_react2.default.createElement(_DayPickerInput2.default, _extends({\n\t\t\t\t\t\tref: this.getStartDateRef,\n\t\t\t\t\t\tshowOverlay: this.props.focused,\n\t\t\t\t\t\tformatDate: this.formatInputDate,\n\t\t\t\t\t\tvalue: start,\n\t\t\t\t\t\tkey: this.state.startKey,\n\t\t\t\t\t\tplaceholder: this.props.placeholder.start,\n\t\t\t\t\t\tdayPickerProps: {\n\t\t\t\t\t\t\tnumberOfMonths: this.props.numberOfMonths,\n\t\t\t\t\t\t\tinitialMonth: this.props.initialMonth,\n\t\t\t\t\t\t\tdisabledDays: {\n\t\t\t\t\t\t\t\tafter: end || ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tselectedDays: selectedDays,\n\t\t\t\t\t\t\tmodifiers: modifiers\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\t'aria-label': this.props.componentId + '-start-input'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDayChange: this.handleStartDate,\n\t\t\t\t\t\tclassNames: {\n\t\t\t\t\t\t\tcontainer: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n\t\t\t\t\t\t\toverlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n\t\t\t\t\t\t\toverlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this.props.dayPickerInputProps)),\n\t\t\t\t\tthis.props.showClear && this.state.currentDate && this.state.currentDate.start && _react2.default.createElement(_CancelSvg2.default, { onClick: this.clearDayPickerStart })\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{ justifyContent: 'center', alignItems: 'center', basis: '20px' },\n\t\t\t\t\t'-'\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\tflex: 2,\n\t\t\t\t\t\tshowBorder: this.props.showClear,\n\t\t\t\t\t\ticonPosition: 'right',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackground: this.props.theme.colors.backgroundColor || 'transparent'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_react2.default.createElement(_DayPickerInput2.default, _extends({\n\t\t\t\t\t\tref: this.getEndDateRef,\n\t\t\t\t\t\tshowOverlay: this.props.focused,\n\t\t\t\t\t\tformatDate: this.formatInputDate,\n\t\t\t\t\t\tvalue: end,\n\t\t\t\t\t\tkey: this.state.endKey,\n\t\t\t\t\t\tplaceholder: this.props.placeholder.end,\n\t\t\t\t\t\tdayPickerProps: {\n\t\t\t\t\t\t\tnumberOfMonths: this.props.numberOfMonths,\n\t\t\t\t\t\t\tinitialMonth: this.props.initialMonth,\n\t\t\t\t\t\t\tonDayMouseEnter: this.handleDayMouseEnter,\n\t\t\t\t\t\t\tdisabledDays: {\n\t\t\t\t\t\t\t\tbefore: start || ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tselectedDays: selectedDays,\n\t\t\t\t\t\t\tmodifiers: modifiers\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\t'aria-label': this.props.componentId + '-end-input'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDayChange: this.handleEndDate,\n\t\t\t\t\t\tclassNames: {\n\t\t\t\t\t\t\tcontainer: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n\t\t\t\t\t\t\toverlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n\t\t\t\t\t\t\toverlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this.props.dayPickerInputProps)),\n\t\t\t\t\tthis.props.showClear && this.state.currentDate && this.state.currentDate.end && _react2.default.createElement(_CancelSvg2.default, { onClick: this.clearDayPickerEnd })\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\treturn DateRange;\n}(_react.Component);\n\nDateRange.defaultQuery = function (value, props) {\n\treturn {\n\t\tquery: {\n\t\t\tqueryFormat: props.queryFormat,\n\t\t\tdataField: props.dataField,\n\t\t\tvalue: value,\n\t\t\tnestedField: props.nestedField\n\t\t}\n\t};\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this3 = this;\n\n\tthis.formatInputDate = function (date) {\n\t\tvar dayjsDate = (0, _dayjs2.default)(new Date(date));\n\t\treturn dayjsDate.isValid() ? dayjsDate.format('YYYY-MM-DD') : '';\n\t};\n\n\tthis.getEndDateRef = function (ref) {\n\t\t_this3.endDateRef = ref;\n\t};\n\n\tthis.getStartDateRef = function (ref) {\n\t\t_this3.startDateRef = ref;\n\t};\n\n\tthis.clearDayPickerStart = function () {\n\t\tif (_this3.state.currentDate && _this3.state.currentDate.start !== '') {\n\t\t\tvar _props2 = _this3.props,\n\t\t\t    value = _props2.value,\n\t\t\t    onChange = _props2.onChange;\n\n\n\t\t\tif (value === undefined && !onChange) {\n\t\t\t\t_this3.handleStartDate('', false); // resets the day picker component\n\t\t\t} else if (onChange) {\n\t\t\t\tonChange({ start: '', end: _this3.state.currentDate.end });\n\t\t\t} else {\n\t\t\t\t// Since value prop is defined and onChange is not define\n\t\t\t\t// we keep the same date as in store\n\t\t\t\t_this3.setState({\n\t\t\t\t\tcurrentDate: _this3.state.currentDate\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.clearDayPickerEnd = function () {\n\t\tif (_this3.state.currentDate && _this3.state.currentDate.end !== '') {\n\t\t\t_this3.handleEndDate(''); // resets the day picker component\n\t\t\tvar _props3 = _this3.props,\n\t\t\t    value = _props3.value,\n\t\t\t    onChange = _props3.onChange;\n\n\n\t\t\tif (value === undefined && !onChange) {\n\t\t\t\t_this3.handleEndDate('', false); // resets the day picker component\n\t\t\t} else if (onChange) {\n\t\t\t\tonChange({ start: _this3.state.currentDate.start, end: '' });\n\t\t\t} else {\n\t\t\t\t// Since value prop is defined and onChange is not define\n\t\t\t\t// we keep the same date as in store\n\t\t\t\t_this3.setState({\n\t\t\t\t\tcurrentDate: _this3.state.currentDate\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.handleStartDate = function (date) {\n\t\tvar autoFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\tvar currentDate = _this3.state.currentDate;\n\n\t\tvar end = currentDate ? currentDate.end : '';\n\t\tvar _props4 = _this3.props,\n\t\t    value = _props4.value,\n\t\t    onChange = _props4.onChange;\n\n\t\tif ((value === undefined || value && value.start === '') && !onChange) {\n\t\t\tif (_this3.startDateRef.getInput().value.length === 10) {\n\t\t\t\t_this3.handleDateChange({\n\t\t\t\t\tstart: date,\n\t\t\t\t\tend: end\n\t\t\t\t});\n\t\t\t\t_this3.setState(function (state) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstartKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\t// focus the end date DayPicker if its empty\n\t\t\t\tif (_this3.props.autoFocusEnd && autoFocus) {\n\t\t\t\t\t_this3.endDateRef.getInput().focus();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (onChange) {\n\t\t\tif (_this3.startDateRef.getInput().value.length === 10) {\n\t\t\t\tonChange({\n\t\t\t\t\tstart: date,\n\t\t\t\t\tend: end\n\t\t\t\t});\n\t\t\t\t// focus the end date DayPicker if its empty\n\t\t\t\tif (_this3.props.autoFocusEnd && autoFocus) {\n\t\t\t\t\t_this3.endDateRef.getInput().focus();\n\t\t\t\t}\n\t\t\t\t// this will trigger a remount on the date component\n\t\t\t\t// since DayPickerInput doesn't respect the controlled behavior setting on its own\n\t\t\t\t_this3.setState(function (state) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstartKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t// this will trigger a remount on the date component\n\t\t\t// since DayPickerInput doesn't respect the controlled behavior setting on its own\n\t\t\t_this3.setState(function (state) {\n\t\t\t\treturn {\n\t\t\t\t\tstartKey: state.startKey === 'on-start' ? 'off-start' : 'on-start'\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleEndDate = function (selectedDay) {\n\t\tvar currentDate = _this3.state.currentDate;\n\t\tvar _props5 = _this3.props,\n\t\t    value = _props5.value,\n\t\t    onChange = _props5.onChange;\n\n\t\tvar start = currentDate ? currentDate.start : '';\n\n\t\tif ((value === undefined || value && value.end === '') && !onChange) {\n\t\t\tif (_this3.endDateRef.getInput().value.length === 10) {\n\t\t\t\t_this3.handleDayMouseEnter(selectedDay);\n\t\t\t\t_this3.handleDateChange({\n\t\t\t\t\tstart: currentDate ? currentDate.start : '',\n\t\t\t\t\tend: selectedDay\n\t\t\t\t});\n\t\t\t\t_this3.setState(function (state) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tendKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (onChange) {\n\t\t\tif (_this3.endDateRef.getInput().value.length === 10) {\n\t\t\t\tonChange({\n\t\t\t\t\tstart: start,\n\t\t\t\t\tend: selectedDay\n\t\t\t\t});\n\t\t\t}\n\t\t\t// this will trigger a remount on the date component\n\t\t\t// since DayPickerInput doesn't respect the controlled behavior setting on its own\n\t\t\t_this3.setState(function (state) {\n\t\t\t\treturn {\n\t\t\t\t\tendKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\t// this will trigger a remount on the date component\n\t\t\t// since DayPickerInput doesn't respect the controlled behavior setting on its own\n\t\t\t_this3.setState(function (state) {\n\t\t\t\treturn {\n\t\t\t\t\tendKey: state.endKey === 'on-end' ? 'off-end' : 'on-end'\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleDayMouseEnter = function (day) {\n\t\t_this3.setState({\n\t\t\tdateHovered: day\n\t\t});\n\t};\n\n\tthis.handleDateChange = function (currentDate) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this3.props;\n\t\tvar hasMounted = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n\t\tvar value = null;\n\t\t// modCurrentDate would check if the currentValue passed is\n\t\t// in correct format or not\n\t\t// when setting value from outside this component\n\t\t// the selectedvalue passed was in a different format and\n\t\t// thus breaking the code\n\t\tvar modCurrentDate = currentDate;\n\t\tif (typeof currentDate.start === 'string' || typeof currentDate.end === 'string') {\n\t\t\tmodCurrentDate = {\n\t\t\t\tstart: currentDate.start ? (0, _dayjs2.default)(new Date(currentDate.start)).toISOString() : '',\n\t\t\t\tend: currentDate.end ? (0, _dayjs2.default)(new Date(currentDate.end)).toISOString() : ''\n\t\t\t};\n\t\t}\n\t\tif (modCurrentDate && !(modCurrentDate.start === '' && modCurrentDate.end === '')) {\n\t\t\tvalue = {\n\t\t\t\tstart: _this3.formatInputDate(modCurrentDate.start),\n\t\t\t\tend: _this3.formatInputDate(modCurrentDate.end)\n\t\t\t}; // prettier-ignore\n\t\t}\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tvar handleUpdates = function handleUpdates() {\n\t\t\t\t_this3.updateQuery(value, props);\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t};\n\n\t\t\tif (hasMounted) {\n\t\t\t\t_this3.setState({\n\t\t\t\t\tcurrentDate: modCurrentDate\n\t\t\t\t}, handleUpdates);\n\t\t\t} else {\n\t\t\t\thandleUpdates();\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tif (!value || value && value.start.length && value.end.length) {\n\t\t\tvar customQuery = props.customQuery;\n\n\t\t\tvar query = DateRange.defaultQuery(value, props);\n\t\t\tvar customQueryOptions = void 0;\n\t\t\tif (customQuery) {\n\t\t\t\tvar customQueryObject = customQuery(value, props);\n\t\t\t\tquery = customQueryObject && customQueryObject.query;\n\t\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n\t\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t\t}\n\t\t\tprops.setQueryOptions(props.componentId, customQueryOptions, false);\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tquery: query,\n\t\t\t\tvalue: value ? [value.start, value.end] : null,\n\t\t\t\tshowFilter: props.showFilter,\n\t\t\t\tlabel: props.filterLabel,\n\t\t\t\tURLParams: props.URLParams,\n\t\t\t\tcomponentType: _constants.componentTypes.dateRange\n\t\t\t});\n\t\t}\n\t};\n};\n\nDateRange.propTypes = {\n\tupdateQuery: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tsetCustomQuery: _types2.default.funcRequired,\n\t// component props\n\tautoFocusEnd: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tdataField: _types2.default.dataFieldArray,\n\tdayPickerInputProps: _types2.default.props,\n\tdefaultValue: _types2.default.dateObject,\n\tvalue: _types2.default.dateObject,\n\tfilterLabel: _types2.default.string,\n\tfocused: _types2.default.bool,\n\tinitialMonth: _types2.default.dateObject,\n\tinnerClass: _types2.default.style,\n\tnumberOfMonths: _types2.default.number,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tplaceholder: _types2.default.rangeLabels,\n\tnestedField: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatDate,\n\tparseDate: _types2.default.func,\n\treact: _types2.default.react,\n\tshowClear: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttheme: _types2.default.style,\n\ttitle: _types2.default.string,\n\tindex: _types2.default.string,\n\tendpoint: _types2.default.endpoint\n};\n\nDateRange.defaultProps = {\n\tautoFocusEnd: true,\n\tnumberOfMonths: 2,\n\tplaceholder: {\n\t\tstart: 'Start date',\n\t\tend: 'End date'\n\t},\n\tshowClear: true,\n\tshowFilter: true,\n\tqueryFormat: 'epoch_millis'\n};\n\n// Add componentType for SSR\nDateRange.componentType = _constants.componentTypes.dateRange;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions() {\n\t\t\treturn dispatch(_actions.setQueryOptions.apply(undefined, arguments));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn _react2.default.createElement(DateRange, _extends({ ref: props.myForwardedRef }, props));\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn _react2.default.createElement(\n\t\t_PreferencesConsumer2.default,\n\t\t{\n\t\t\tuserProps: _extends({}, props, !props.queryFormat ? { queryFormat: _dateFormats2.default.epoch_millis } : {})\n\t\t},\n\t\tfunction (preferenceProps) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_ComponentWrapper2.default,\n\t\t\t\t_extends({}, preferenceProps, {\n\t\t\t\t\tinternalComponent: true,\n\t\t\t\t\tcomponentType: _constants.componentTypes.dateRange\n\t\t\t\t}),\n\t\t\t\tfunction (componentProps) {\n\t\t\t\t\treturn _react2.default.createElement(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n\t\t\t\t\t\tmyForwardedRef: ref\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DateRange);\n\nForwardRefComponent.displayName = 'DateRange';\nexports.default = ForwardRefComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}