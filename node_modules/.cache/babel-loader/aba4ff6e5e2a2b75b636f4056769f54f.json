{"ast":null,"code":"import React, { Component } from 'react';\nimport PropTypes from 'prop-types'; // istanbul ignore next\n\nvar statusDiv = typeof document === 'undefined' ? null : document.getElementById('a11y-status-message');\nvar statuses = [];\n\nfunction setStatus(status) {\n  var isSameAsLast = statuses[statuses.length - 1] === status;\n\n  if (isSameAsLast) {\n    statuses = [].concat(statuses, [status]);\n  } else {\n    statuses = [status];\n  }\n\n  var div = getStatusDiv(); // Remove previous children\n\n  while (div.lastChild) {\n    div.removeChild(div.firstChild);\n  }\n\n  statuses.filter(Boolean).forEach(function (statusItem, index) {\n    div.appendChild(getStatusChildDiv(statusItem, index));\n  });\n}\n\nfunction getStatusChildDiv(status, index) {\n  var display = index === statuses.length - 1 ? 'block' : 'none';\n  var childDiv = document.createElement('div');\n  childDiv.style.display = display;\n  childDiv.textContent = status;\n  return childDiv;\n}\n\nfunction getStatusDiv() {\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = document.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'assertive');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  document.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n\nfunction findParent(finder, node, rootNode) {\n  if (node !== null && node !== rootNode.parentNode) {\n    if (finder(node)) {\n      if (node === document.body && node.scrollTop === 0) {\n        // in chrome body.scrollTop always return 0\n        return document.documentElement;\n      }\n\n      return node;\n    } else {\n      return findParent(finder, node.parentNode, rootNode);\n    }\n  } else {\n    return null;\n  }\n}\n/**\n * Get the closest element that scrolls\n * @param {HTMLElement} node - the child element to start searching for scroll parent at\n * @param {HTMLElement} rootNode - the root element of the component\n * @return {HTMLElement} the closest parentNode that scrolls\n */\n\n\nvar getClosestScrollParent = findParent.bind(null, function (node) {\n  return node.scrollHeight > node.clientHeight;\n});\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node - the element that should scroll into view\n * @param {HTMLElement} rootNode - the root element of the component\n * @param {Boolean} alignToTop - align element to the top of the visible area of the scrollable ancestor\n */\n// eslint-disable-next-line complexity\n\nfunction scrollIntoView(node, rootNode) {\n  var scrollParent = getClosestScrollParent(node, rootNode);\n\n  if (scrollParent === null) {\n    return;\n  }\n\n  var scrollParentStyles = getComputedStyle(scrollParent);\n  var scrollParentRect = scrollParent.getBoundingClientRect();\n  var scrollParentBorderTopWidth = parseInt(scrollParentStyles.borderTopWidth, 10);\n  var scrollParentBorderBottomWidth = parseInt(scrollParentStyles.borderBottomWidth, 10);\n  var bordersWidth = scrollParentBorderTopWidth + scrollParentBorderBottomWidth;\n  var scrollParentTop = scrollParentRect.top + scrollParentBorderTopWidth;\n  var nodeRect = node.getBoundingClientRect();\n\n  if (nodeRect.top < 0 && scrollParentRect.top < 0) {\n    scrollParent.scrollTop += nodeRect.top;\n    return;\n  }\n\n  if (nodeRect.top < 0) {\n    // the item is above the viewport and the parent is not above the viewport\n    scrollParent.scrollTop += nodeRect.top - scrollParentTop;\n    return;\n  }\n\n  if (nodeRect.top > 0 && scrollParentRect.top < 0) {\n    if (scrollParentRect.bottom > 0 && nodeRect.bottom + bordersWidth > scrollParentRect.bottom) {\n      // the item is below scrollable area\n      scrollParent.scrollTop += nodeRect.bottom - scrollParentRect.bottom + bordersWidth;\n    } // item and parent top are on different sides of view top border (do nothing)\n\n\n    return;\n  }\n\n  var nodeOffsetTop = nodeRect.top + scrollParent.scrollTop;\n  var nodeTop = nodeOffsetTop - scrollParentTop;\n\n  if (nodeTop < scrollParent.scrollTop) {\n    // the item is above the scrollable area\n    scrollParent.scrollTop = nodeTop;\n  } else if (nodeTop + nodeRect.height + bordersWidth > scrollParent.scrollTop + scrollParentRect.height) {\n    // the item is below the scrollable area\n    scrollParent.scrollTop = nodeTop + nodeRect.height - scrollParentRect.height + bordersWidth;\n  } // the item is within the scrollable area (do nothing)\n\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId = void 0;\n  return wrapper;\n\n  function wrapper() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(undefined, args);\n    }, time);\n  }\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction composeEventHandlers() {\n  for (var _len2 = arguments.length, fns = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      fn && fn.apply(undefined, [event].concat(args)); // TODO: remove everything after the || in the next breaking change\n\n      return event.preventDownshiftDefault || event.defaultPrevented;\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Returns the first argument that is not undefined\n * @param {...*} args the arguments\n * @return {*} the defined value\n */\n\n\nfunction firstDefined() {\n  for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    args[_key4] = arguments[_key4];\n  }\n\n  return args.find(function (a) {\n    return typeof a !== 'undefined';\n  });\n} // eslint-disable-next-line complexity\n\n\nfunction getA11yStatusMessage(_ref) {\n  var isOpen = _ref.isOpen,\n      highlightedItem = _ref.highlightedItem,\n      selectedItem = _ref.selectedItem,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount,\n      itemToString = _ref.itemToString;\n\n  if (!isOpen) {\n    if (selectedItem) {\n      return itemToString(selectedItem);\n    } else {\n      return '';\n    }\n  }\n\n  if (!resultCount) {\n    return 'No results.';\n  } else if (!highlightedItem || resultCount !== previousResultCount) {\n    return resultCount + ' ' + (resultCount === 1 ? 'result is' : 'results are') + ' available, use up and down arrow keys to navigate.';\n  }\n\n  return itemToString(highlightedItem);\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  /* istanbul ignore if */\n  if (element.nodeName) {\n    // then this is preact\n    return typeof element.nodeName === 'string';\n  } else {\n    // then we assume this is react\n    return typeof element.type === 'string';\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  // props for react, attributes for preact\n  return element.props ||\n  /* istanbul ignore next (preact) */\n  element.attributes;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  throw new Error('The property \"' + propName + '\" is required in \"' + fnName + '\"');\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state The state object\n * @return {Object} State that is relevant to downshift\n */\n\nfunction pickState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a KeyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return 'Arrow' + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n/* eslint camelcase:0 */\n\n\nvar Downshift = function (_Component) {\n  inherits(Downshift, _Component);\n\n  function Downshift() {\n    classCallCheck(this, Downshift);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args)));\n\n    _initialiseProps.call(_this);\n\n    var state = _this.getState({\n      highlightedIndex: _this.props.defaultHighlightedIndex,\n      isOpen: _this.props.defaultIsOpen,\n      inputValue: _this.props.defaultInputValue,\n      selectedItem: _this.props.defaultSelectedItem\n    });\n\n    if (state.selectedItem != null) {\n      state.inputValue = _this.props.itemToString(state.selectedItem);\n    }\n\n    _this.state = state;\n    _this.id = _this.props.id || 'downshift-' + generateId();\n    return _this;\n  } // itemCount can be changed asynchronously\n  // from within downshift (so it can't come from a prop)\n  // this is why we store it as an instance and use\n  // getItemCount rather than just use items.length\n  // (to support windowing + async)\n\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n\n\n  Downshift.prototype.getState = function getState() {\n    var _this2 = this;\n\n    var stateToMerge = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state;\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this2.isControlledProp(key) ? _this2.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  };\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n\n\n  Downshift.prototype.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  Downshift.prototype.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n\n    /* eslint-disable no-negated-condition */\n    if (this.itemCount != null) {\n      return this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      return this.props.itemCount;\n    } else {\n      return this.items.length;\n    }\n    /* eslint-enable no-negated-condition */\n\n  };\n\n  Downshift.prototype.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  Downshift.prototype.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      scrollIntoView(node, this._rootNode);\n    }\n  };\n\n  Downshift.prototype.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    if (this.getState().isOpen) {\n      this.changeHighlightedIndex(amount, otherStateToSet);\n    } else {\n      this.setHighlightedIndex(undefined, _extends({\n        isOpen: true\n      }, otherStateToSet));\n    }\n  }; // eslint-disable-next-line complexity\n\n\n  Downshift.prototype.changeHighlightedIndex = function changeHighlightedIndex(moveAmount, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n\n    if (itemsLastIndex < 0) {\n      return;\n    }\n\n    var _getState = this.getState(),\n        highlightedIndex = _getState.highlightedIndex;\n\n    var baseIndex = highlightedIndex;\n\n    if (baseIndex === null) {\n      baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n    }\n\n    var newIndex = baseIndex + moveAmount;\n\n    if (newIndex < 0) {\n      newIndex = itemsLastIndex;\n    } else if (newIndex > itemsLastIndex) {\n      newIndex = 0;\n    }\n\n    this.setHighlightedIndex(newIndex, otherStateToSet);\n  }; // any piece of our state can live in two places:\n  // 1. Uncontrolled: it's internal (this.state)\n  //    We will call this.setState to update that state\n  // 2. Controlled: it's external (this.props)\n  //    We will call this.props.onStateChange to update that state\n  //\n  // In addition, we'll call this.props.onChange if the\n  // selectedItem is changed.\n\n\n  Downshift.prototype.getStateAndHelpers = function getStateAndHelpers() {\n    var _getState2 = this.getState(),\n        highlightedIndex = _getState2.highlightedIndex,\n        inputValue = _getState2.inputValue,\n        selectedItem = _getState2.selectedItem,\n        isOpen = _getState2.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getButtonProps = this.getButtonProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getButtonProps: getButtonProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n      //props\n      itemToString: itemToString,\n      //derived\n      id: id,\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  }; //////////////////////////// ROOT\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n  //////////////////////////// BUTTON\n  // TODO: remove this in 2.0.0 and just call it `getToggleButtonProps`\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n  /////////////////////////////// LABEL\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n  /////////////////////////////// INPUT\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n  /////////////////////////////// ITEM\n\n\n  Downshift.prototype.getItemId = function getItemId(index) {\n    return this.id + '-item-' + index;\n  }; //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n\n\n  Downshift.prototype.componentDidMount = function componentDidMount() {\n    var _this3 = this; // the _isMounted property is because we have `updateStatus` in a `debounce`\n    // and we don't want to update the status if the component has been umounted\n\n\n    this._isMounted = true;\n    /* istanbul ignore if (react-native) */\n\n    {\n      // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n      var onMouseDown = function () {\n        _this3.isMouseDown = true;\n      };\n\n      var onMouseUp = function (event) {\n        var document = _this3.props.environment.document;\n        _this3.isMouseDown = false;\n        var targetInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, event.target);\n        var activeElementInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, document.activeElement);\n\n        if (!targetInDownshift && !activeElementInDownshift && _this3.getState().isOpen) {\n          _this3.reset({\n            type: Downshift.stateChangeTypes.mouseUp\n          }, function () {\n            return _this3.props.onOuterClick(_this3.getStateAndHelpers());\n          });\n        }\n      }; // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n\n\n      var onTouchStart = function (event) {\n        var targetInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, event.target);\n\n        if (!targetInDownshift && _this3.getState().isOpen) {\n          _this3.reset({\n            type: Downshift.stateChangeTypes.touchStart\n          }, function () {\n            return _this3.props.onOuterClick(_this3.getStateAndHelpers());\n          });\n        }\n      };\n\n      this.props.environment.addEventListener('mousedown', onMouseDown);\n      this.props.environment.addEventListener('mouseup', onMouseUp);\n      this.props.environment.addEventListener('touchstart', onTouchStart);\n\n      this.cleanup = function () {\n        _this3._isMounted = false;\n\n        _this3.props.environment.removeEventListener('mousedown', onMouseDown);\n\n        _this3.props.environment.removeEventListener('mouseup', onMouseUp);\n\n        _this3.props.environment.removeEventListener('touchstart', onTouchStart);\n      };\n    }\n  };\n\n  Downshift.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: Downshift.stateChangeTypes.controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    var current = this.props.highlightedIndex === undefined ? this.state : this.props;\n    var prev = prevProps.highlightedIndex === undefined ? prevState : prevProps;\n\n    if (current.highlightedIndex !== prev.highlightedIndex && !this.avoidScrolling) {\n      this.scrollHighlightedItemIntoView();\n    }\n\n    this.updateStatus();\n  };\n\n  Downshift.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  }; // eslint-disable-next-line complexity\n\n\n  Downshift.prototype.render = function render() {\n    var children = unwrapArray(this.props.render || this.props.children, noop); // because the items are rerendered every time we call the children\n    // we clear this out each render and\n\n    this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n    this.getLabelProps.called = false; // and something similar for getInputProps\n\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n\n    if (!element) {\n      return null;\n    }\n\n    if (this.getRootProps.called) {\n      if (!this.getRootProps.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return React.cloneElement(element, this.getRootProps(getElementProps(element)));\n    } else {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must use apply the getRootProps function');\n    }\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultSelectedItem: null,\n  defaultInputValue: '',\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i)) {\n      //eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n\n    return String(i);\n  },\n  onStateChange: function onStateChange() {},\n  onInputValueChange: function onInputValueChange() {},\n  onUserAction: function onUserAction() {},\n  onChange: function onChange() {},\n  onSelect: function onSelect() {},\n  onOuterClick: function onOuterClick() {},\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  breakingChanges: {}\n};\nDownshift.stateChangeTypes = {\n  unknown: '__autocomplete_unknown__',\n  mouseUp: '__autocomplete_mouseup__',\n  itemMouseEnter: '__autocomplete_item_mouseenter__',\n  keyDownArrowUp: '__autocomplete_keydown_arrow_up__',\n  keyDownArrowDown: '__autocomplete_keydown_arrow_down__',\n  keyDownEscape: '__autocomplete_keydown_escape__',\n  keyDownEnter: '__autocomplete_keydown_enter__',\n  clickItem: '__autocomplete_click_item__',\n  blurInput: '__autocomplete_blur_input__',\n  changeInput: '__autocomplete_change_input__',\n  keyDownSpaceButton: '__autocomplete_keydown_space_button__',\n  clickButton: '__autocomplete_click_button__',\n  blurButton: '__autocomplete_blur_button__',\n  controlledPropUpdatedSelectedItem: '__autocomplete_controlled_prop_updated_selected_item__',\n  touchStart: '__autocomplete_touchstart__'\n};\n\nvar _initialiseProps = function () {\n  var _this4 = this;\n\n  this.input = null;\n  this.items = [];\n  this.itemCount = null;\n  this.previousResultCount = 0;\n\n  this.setItemCount = function (count) {\n    return _this4.itemCount = count;\n  };\n\n  this.unsetItemCount = function () {\n    return _this4.itemCount = null;\n  };\n\n  this.setHighlightedIndex = function () {\n    var highlightedIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.props.defaultHighlightedIndex;\n    var otherStateToSet = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    otherStateToSet = pickState(otherStateToSet);\n\n    _this4.internalSetState(_extends({\n      highlightedIndex: highlightedIndex\n    }, otherStateToSet));\n  };\n\n  this.clearSelection = function (cb) {\n    _this4.internalSetState({\n      selectedItem: null,\n      inputValue: '',\n      isOpen: false\n    }, cb);\n  };\n\n  this.selectItem = function (item, otherStateToSet, cb) {\n    otherStateToSet = pickState(otherStateToSet);\n\n    _this4.internalSetState(_extends({\n      isOpen: false,\n      highlightedIndex: _this4.props.defaultHighlightedIndex,\n      selectedItem: item,\n      inputValue: _this4.isControlledProp('selectedItem') && _this4.props.breakingChanges.resetInputOnSelection ? _this4.props.defaultInputValue : _this4.props.itemToString(item)\n    }, otherStateToSet), cb);\n  };\n\n  this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n    var item = _this4.items[itemIndex];\n\n    if (item == null) {\n      return;\n    }\n\n    _this4.selectItem(item, otherStateToSet, cb);\n  };\n\n  this.selectHighlightedItem = function (otherStateToSet, cb) {\n    return _this4.selectItemAtIndex(_this4.getState().highlightedIndex, otherStateToSet, cb);\n  };\n\n  this.internalSetState = function (stateToSet, cb) {\n    var isItemSelected = void 0,\n        onChangeArg = void 0;\n    var onStateChangeArg = {};\n    var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n    // so someone controlling the `inputValue` state gets notified of\n    // the input change as soon as possible. This avoids issues with\n    // preserving the cursor position.\n    // See https://github.com/paypal/downshift/issues/217 for more info.\n\n    if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n      _this4.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this4.getStateAndHelpers(), stateToSet));\n    }\n\n    return _this4.setState(function (state) {\n      state = _this4.getState(state);\n      var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n      newStateToSet = _this4.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n      // what was selected before\n      // used to determine if onSelect and onChange callbacks should be called\n\n      isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n      var nextState = {}; // this is just used to tell whether the state changed\n\n      var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n      // and we're trying to update that state. OR if the selection has changed and we're\n      // trying to update the selection\n\n      if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n        onChangeArg = newStateToSet.selectedItem;\n      }\n\n      newStateToSet.type = newStateToSet.type || Downshift.stateChangeTypes.unknown;\n      Object.keys(newStateToSet).forEach(function (key) {\n        // onStateChangeArg should only have the state that is\n        // actually changing\n        if (state[key] !== newStateToSet[key]) {\n          onStateChangeArg[key] = newStateToSet[key];\n        } // the type is useful for the onStateChangeArg\n        // but we don't actually want to set it in internal state.\n        // this is an undocumented feature for now... Not all internalSetState\n        // calls support it and I'm not certain we want them to yet.\n        // But it enables users controlling the isOpen state to know when\n        // the isOpen state changes due to mouseup events which is quite handy.\n\n\n        if (key === 'type') {\n          return;\n        }\n\n        nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n        if (!_this4.isControlledProp(key)) {\n          nextState[key] = newStateToSet[key];\n        }\n      }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n      // earlier, so we'll call it now that we know what the inputValue state will be.\n\n      if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n        _this4.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this4.getStateAndHelpers(), newStateToSet));\n      }\n\n      return nextState;\n    }, function () {\n      // call the provided callback if it's a callback\n      cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n      // we have relevant information to pass them.\n\n      var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n      if (hasMoreStateThanType) {\n        _this4.props.onStateChange(onStateChangeArg, _this4.getStateAndHelpers());\n      }\n\n      if (isItemSelected) {\n        _this4.props.onSelect(stateToSet.selectedItem, _this4.getStateAndHelpers());\n      }\n\n      if (onChangeArg !== undefined) {\n        _this4.props.onChange(onChangeArg, _this4.getStateAndHelpers());\n      } // this is currently undocumented and therefore subject to change\n      // We'll try to not break it, but just be warned.\n\n\n      _this4.props.onUserAction(onStateChangeArg, _this4.getStateAndHelpers());\n    });\n  };\n\n  this.rootRef = function (node) {\n    return _this4._rootNode = node;\n  };\n\n  this.getRootProps = function () {\n    var _babelHelpers$extends;\n\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref3$suppressRefErro = _ref3.suppressRefError,\n        suppressRefError = _ref3$suppressRefErro === undefined ? false : _ref3$suppressRefErro;\n\n    var _ref2$refKey = _ref2.refKey,\n        refKey = _ref2$refKey === undefined ? 'ref' : _ref2$refKey,\n        rest = objectWithoutProperties(_ref2, ['refKey']); // this is used in the render to know whether the user has called getRootProps.\n    // It uses that to know whether to apply the props automatically\n\n    _this4.getRootProps.called = true;\n    _this4.getRootProps.refKey = refKey;\n    _this4.getRootProps.suppressRefError = suppressRefError;\n    return _extends((_babelHelpers$extends = {}, _babelHelpers$extends[refKey] = _this4.rootRef, _babelHelpers$extends), rest);\n  };\n\n  this.keyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      var amount = event.shiftKey ? 5 : 1;\n      this.moveHighlightedIndex(amount, {\n        type: Downshift.stateChangeTypes.keyDownArrowDown\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      var amount = event.shiftKey ? -5 : -1;\n      this.moveHighlightedIndex(amount, {\n        type: Downshift.stateChangeTypes.keyDownArrowUp\n      });\n    },\n    Enter: function Enter(event) {\n      if (this.getState().isOpen) {\n        event.preventDefault();\n        var itemIndex = this.getState().highlightedIndex;\n        var item = this.items[itemIndex];\n        var itemNode = this.getItemNodeFromIndex(itemIndex);\n\n        if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n          return;\n        }\n\n        this.selectHighlightedItem({\n          type: Downshift.stateChangeTypes.keyDownEnter\n        });\n      }\n    },\n    Escape: function Escape(event) {\n      event.preventDefault();\n      this.reset({\n        type: Downshift.stateChangeTypes.keyDownEscape\n      });\n    }\n  };\n  this.buttonKeyDownHandlers = _extends({}, this.keyDownHandlers, {\n    ' ': function _(event) {\n      event.preventDefault();\n      this.toggleMenu({\n        type: Downshift.stateChangeTypes.keyDownSpaceButton\n      });\n    }\n  });\n\n  this.getToggleButtonProps = function () {\n    var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onClick = _ref4.onClick,\n        onKeyDown = _ref4.onKeyDown,\n        onBlur = _ref4.onBlur,\n        rest = objectWithoutProperties(_ref4, ['onClick', 'onKeyDown', 'onBlur']);\n\n    var _getState3 = _this4.getState(),\n        isOpen = _getState3.isOpen;\n\n    var enabledEventHandlers = {\n      onClick: composeEventHandlers(onClick, _this4.button_handleClick),\n      onKeyDown: composeEventHandlers(onKeyDown, _this4.button_handleKeyDown),\n      onBlur: composeEventHandlers(onBlur, _this4.button_handleBlur)\n    };\n    var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n    return _extends({\n      type: 'button',\n      role: 'button',\n      'aria-label': isOpen ? 'close menu' : 'open menu',\n      'aria-expanded': isOpen,\n      'aria-haspopup': true,\n      'data-toggle': true\n    }, eventHandlers, rest);\n  };\n\n  this.getButtonProps = this.getToggleButtonProps;\n\n  this.button_handleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (_this4.buttonKeyDownHandlers[key]) {\n      _this4.buttonKeyDownHandlers[key].call(_this4, event);\n    }\n  };\n\n  this.button_handleClick = function (event) {\n    event.preventDefault(); // handle odd case for Safari and Firefox which\n    // don't give the button the focus properly.\n\n    /* istanbul ignore if (can't reasonably test this) */\n\n    if (_this4.props.environment.document.activeElement === _this4.props.environment.document.body) {\n      event.target.focus();\n    } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n    // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n    // when building for production and should therefore have no impact on production code.\n\n\n    if (process.env.NODE_ENV === 'test') {\n      _this4.toggleMenu({\n        type: Downshift.stateChangeTypes.clickButton\n      });\n    } else {\n      // Ensure that toggle of menu occurs after the potential blur event in iOS\n      setTimeout(function () {\n        return _this4.toggleMenu({\n          type: Downshift.stateChangeTypes.clickButton\n        });\n      });\n    }\n  };\n\n  this.button_handleBlur = function (event) {\n    var blurTarget = event.target; // Save blur target for comparison with activeElement later\n    // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n    setTimeout(function () {\n      if (!_this4.isMouseDown && (_this4.props.environment.document.activeElement == null || _this4.props.environment.document.activeElement.id !== _this4.inputId) && _this4.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n      ) {\n        _this4.reset({\n          type: Downshift.stateChangeTypes.blurButton\n        });\n      }\n    });\n  };\n\n  this.getLabelProps = function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _this4.getLabelProps.called = true;\n\n    if (_this4.getInputProps.called && props.htmlFor && props.htmlFor !== _this4.inputId) {\n      throw new Error('downshift: You provided the htmlFor of \"' + props.htmlFor + '\" for your label, but the id of your input is \"' + _this4.inputId + '\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.');\n    }\n\n    _this4.inputId = firstDefined(_this4.inputId, props.htmlFor, _this4.id + '-input');\n    return _extends({}, props, {\n      htmlFor: _this4.inputId\n    });\n  };\n\n  this.getInputProps = function () {\n    var _ref6;\n\n    var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onKeyDown = _ref5.onKeyDown,\n        onBlur = _ref5.onBlur,\n        onChange = _ref5.onChange,\n        onInput = _ref5.onInput,\n        rest = objectWithoutProperties(_ref5, ['onKeyDown', 'onBlur', 'onChange', 'onInput']);\n    _this4.getInputProps.called = true;\n\n    if (_this4.getLabelProps.called && rest.id && rest.id !== _this4.inputId) {\n      throw new Error('downshift: You provided the id of \"' + rest.id + '\" for your input, but the htmlFor of your label is \"' + _this4.inputId + '\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.');\n    }\n\n    _this4.inputId = firstDefined(_this4.inputId, rest.id, _this4.id + '-input');\n    var onChangeKey = void 0;\n    /* istanbul ignore next (preact) */\n\n    onChangeKey = 'onChange';\n\n    var _getState4 = _this4.getState(),\n        inputValue = _getState4.inputValue,\n        isOpen = _getState4.isOpen,\n        highlightedIndex = _getState4.highlightedIndex;\n\n    var eventHandlers = rest.disabled ? {} : (_ref6 = {}, _ref6[onChangeKey] = composeEventHandlers(onChange, onInput, _this4.input_handleChange), _ref6.onKeyDown = composeEventHandlers(onKeyDown, _this4.input_handleKeyDown), _ref6.onBlur = composeEventHandlers(onBlur, _this4.input_handleBlur), _ref6);\n    return _extends({\n      role: 'combobox',\n      'aria-autocomplete': 'list',\n      'aria-expanded': isOpen,\n      'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this4.getItemId(highlightedIndex) : null,\n      autoComplete: 'off',\n      value: inputValue\n    }, eventHandlers, rest, {\n      id: _this4.inputId\n    });\n  };\n\n  this.input_handleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && _this4.keyDownHandlers[key]) {\n      _this4.keyDownHandlers[key].call(_this4, event);\n    }\n  };\n\n  this.input_handleChange = function (event) {\n    _this4.internalSetState({\n      type: Downshift.stateChangeTypes.changeInput,\n      isOpen: true,\n      inputValue: event.target.value\n    });\n  };\n\n  this.input_handleBlur = function () {\n    // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n    setTimeout(function () {\n      var downshiftButtonIsActive = _this4.props.environment.document.activeElement.dataset.toggle && _this4._rootNode && _this4._rootNode.contains(_this4.props.environment.document.activeElement);\n\n      if (!_this4.isMouseDown && !downshiftButtonIsActive) {\n        _this4.reset({\n          type: Downshift.stateChangeTypes.blurInput\n        });\n      }\n    });\n  };\n\n  this.getItemProps = function () {\n    var _enabledEventHandlers;\n\n    var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onMouseMove = _ref7.onMouseMove,\n        onMouseDown = _ref7.onMouseDown,\n        onClick = _ref7.onClick,\n        index = _ref7.index,\n        _ref7$item = _ref7.item,\n        item = _ref7$item === undefined ? requiredProp('getItemProps', 'item') : _ref7$item,\n        rest = objectWithoutProperties(_ref7, ['onMouseMove', 'onMouseDown', 'onClick', 'index', 'item']);\n\n    if (index === undefined) {\n      _this4.items.push(item);\n\n      index = _this4.items.indexOf(item);\n    } else {\n      _this4.items[index] = item;\n    }\n\n    var onSelectKey = 'onClick';\n    var enabledEventHandlers = (_enabledEventHandlers = {\n      // onMouseMove is used over onMouseEnter here. onMouseMove\n      // is only triggered on actual mouse movement while onMouseEnter\n      // can fire on DOM changes, interrupting keyboard navigation\n      onMouseMove: composeEventHandlers(onMouseMove, function () {\n        if (index === _this4.getState().highlightedIndex) {\n          return;\n        }\n\n        _this4.setHighlightedIndex(index, {\n          type: Downshift.stateChangeTypes.itemMouseEnter\n        }); // We never want to manually scroll when changing state based\n        // on `onMouseMove` because we will be moving the element out\n        // from under the user which is currently scrolling/moving the\n        // cursor\n\n\n        _this4.avoidScrolling = true;\n        setTimeout(function () {\n          return _this4.avoidScrolling = false;\n        }, 250);\n      }),\n      onMouseDown: composeEventHandlers(onMouseDown, function (event) {\n        // This prevents the activeElement from being changed\n        // to the item so it can remain with the current activeElement\n        // which is a more common use case.\n        event.preventDefault();\n      })\n    }, _enabledEventHandlers[onSelectKey] = composeEventHandlers(onClick, function () {\n      _this4.selectItemAtIndex(index, {\n        type: Downshift.stateChangeTypes.clickItem\n      });\n    }), _enabledEventHandlers);\n    var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n    return _extends({\n      id: _this4.getItemId(index)\n    }, eventHandlers, rest);\n  };\n\n  this.clearItems = function () {\n    _this4.items = [];\n  };\n\n  this.reset = function () {\n    var otherStateToSet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var cb = arguments[1];\n    otherStateToSet = pickState(otherStateToSet);\n\n    _this4.internalSetState(function (_ref8) {\n      var selectedItem = _ref8.selectedItem;\n      return _extends({\n        isOpen: false,\n        highlightedIndex: _this4.props.defaultHighlightedIndex,\n        inputValue: _this4.props.itemToString(selectedItem)\n      }, otherStateToSet);\n    }, cbToCb(cb));\n  };\n\n  this.toggleMenu = function () {\n    var otherStateToSet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var cb = arguments[1];\n    otherStateToSet = pickState(otherStateToSet);\n\n    _this4.internalSetState(function (_ref9) {\n      var isOpen = _ref9.isOpen;\n      return _extends({\n        isOpen: !isOpen\n      }, otherStateToSet);\n    }, function () {\n      var _getState5 = _this4.getState(),\n          isOpen = _getState5.isOpen;\n\n      if (isOpen) {\n        // highlight default index\n        _this4.setHighlightedIndex(undefined, otherStateToSet);\n      }\n\n      cbToCb(cb)();\n    });\n  };\n\n  this.openMenu = function (cb) {\n    _this4.internalSetState({\n      isOpen: true\n    }, cbToCb(cb));\n  };\n\n  this.closeMenu = function (cb) {\n    _this4.internalSetState({\n      isOpen: false\n    }, cbToCb(cb));\n  };\n\n  this.updateStatus = debounce(function () {\n    if (!_this4._isMounted) {\n      return;\n    }\n\n    var state = _this4.getState();\n\n    var item = _this4.items[state.highlightedIndex];\n\n    var resultCount = _this4.getItemCount();\n\n    var status = _this4.props.getA11yStatusMessage(_extends({\n      itemToString: _this4.props.itemToString,\n      previousResultCount: _this4.previousResultCount,\n      resultCount: resultCount,\n      highlightedItem: item\n    }, state));\n\n    _this4.previousResultCount = resultCount;\n    /* istanbul ignore else (react-native) */\n\n    setStatus(status);\n  }, 200);\n};\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  render: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultSelectedItem: PropTypes.any,\n  defaultInputValue: PropTypes.string,\n  defaultIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  breakingChanges: PropTypes.shape({\n    resetInputOnSelection: PropTypes.bool\n  })\n  /* eslint-enable */\n\n} : void 0;\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref) {\n  var refKey = _ref.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified) {\n    throw new Error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    throw new Error('downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \"' + refKey + '\"');\n  }\n\n  if (!getElementProps(element)[refKey]) {\n    throw new Error('downshift: You must apply the ref prop \"' + refKey + '\" from getRootProps onto your root element.');\n  }\n}\n/*\n * Fix importing in typescript after rollup compilation\n * https://github.com/rollup/rollup/issues/1156\n * https://github.com/Microsoft/TypeScript/issues/13017#issuecomment-268657860\n */\n\n\nDownshift.default = Downshift;\nDownshift.resetIdCounter = resetIdCounter;\nexport default Downshift;","map":{"version":3,"names":["React","Component","PropTypes","statusDiv","document","getElementById","statuses","setStatus","status","isSameAsLast","length","concat","div","getStatusDiv","lastChild","removeChild","firstChild","filter","Boolean","forEach","statusItem","index","appendChild","getStatusChildDiv","display","childDiv","createElement","style","textContent","setAttribute","Object","assign","border","clip","height","margin","overflow","padding","position","width","body","idCounter","cbToCb","cb","noop","findParent","finder","node","rootNode","parentNode","scrollTop","documentElement","getClosestScrollParent","bind","scrollHeight","clientHeight","scrollIntoView","scrollParent","scrollParentStyles","getComputedStyle","scrollParentRect","getBoundingClientRect","scrollParentBorderTopWidth","parseInt","borderTopWidth","scrollParentBorderBottomWidth","borderBottomWidth","bordersWidth","scrollParentTop","top","nodeRect","bottom","nodeOffsetTop","nodeTop","isOrContainsNode","parent","child","contains","debounce","fn","time","timeoutId","wrapper","_len","arguments","args","Array","_key","clearTimeout","setTimeout","apply","undefined","composeEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","preventDownshiftDefault","defaultPrevented","generateId","String","resetIdCounter","firstDefined","_len4","_key4","find","a","getA11yStatusMessage","_ref","isOpen","highlightedItem","selectedItem","resultCount","previousResultCount","itemToString","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","nodeName","type","getElementProps","props","attributes","requiredProp","fnName","propName","Error","stateKeys","pickState","state","result","k","hasOwnProperty","normalizeArrowKey","key","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","classCallCheck","instance","Constructor","TypeError","_extends","target","i","source","inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","objectWithoutProperties","keys","possibleConstructorReturn","self","ReferenceError","Downshift","_Component","_this","_initialiseProps","getState","highlightedIndex","defaultHighlightedIndex","defaultIsOpen","inputValue","defaultInputValue","defaultSelectedItem","id","_this2","stateToMerge","reduce","isControlledProp","getItemCount","itemCount","items","getItemNodeFromIndex","environment","getItemId","scrollHighlightedItemIntoView","_rootNode","moveHighlightedIndex","amount","otherStateToSet","changeHighlightedIndex","setHighlightedIndex","moveAmount","itemsLastIndex","_getState","baseIndex","newIndex","getStateAndHelpers","_getState2","getRootProps","getButtonProps","getToggleButtonProps","getLabelProps","getInputProps","getItemProps","openMenu","closeMenu","toggleMenu","selectItem","selectItemAtIndex","selectHighlightedItem","clearSelection","clearItems","reset","setItemCount","unsetItemCount","setState","internalSetState","componentDidMount","_this3","_isMounted","onMouseDown","isMouseDown","onMouseUp","targetInDownshift","activeElementInDownshift","activeElement","stateChangeTypes","mouseUp","onOuterClick","onTouchStart","touchStart","addEventListener","cleanup","removeEventListener","componentDidUpdate","prevProps","prevState","selectedItemChanged","controlledPropUpdatedSelectedItem","current","prev","avoidScrolling","updateStatus","componentWillUnmount","render","children","called","refKey","suppressRefError","validateGetRootPropsCalledCorrectly","cloneElement","defaultProps","process","env","NODE_ENV","console","warn","onStateChange","onInputValueChange","onUserAction","onChange","onSelect","prevItem","item","window","stateReducer","stateToSet","breakingChanges","unknown","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","_this4","input","count","resetInputOnSelection","itemIndex","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","newStateToSet","nextState","nextFullState","hasMoreStateThanType","rootRef","_babelHelpers$extends","_ref2","_ref3","_ref3$suppressRefErro","_ref2$refKey","rest","keyDownHandlers","ArrowDown","preventDefault","shiftKey","ArrowUp","Enter","itemNode","hasAttribute","Escape","buttonKeyDownHandlers","_","_ref4","onClick","onKeyDown","onBlur","_getState3","enabledEventHandlers","button_handleClick","button_handleKeyDown","button_handleBlur","eventHandlers","disabled","role","focus","blurTarget","inputId","htmlFor","_ref6","_ref5","onInput","onChangeKey","_getState4","input_handleChange","input_handleKeyDown","input_handleBlur","autoComplete","downshiftButtonIsActive","dataset","toggle","_enabledEventHandlers","_ref7","onMouseMove","_ref7$item","push","onSelectKey","_ref8","_ref9","_getState5","propTypes","func","number","any","string","bool","shape","refKeySpecified","isComposite","default"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/downshift/dist/downshift.esm.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// istanbul ignore next\nvar statusDiv = typeof document === 'undefined' ? null : document.getElementById('a11y-status-message');\n\nvar statuses = [];\n\nfunction setStatus(status) {\n  var isSameAsLast = statuses[statuses.length - 1] === status;\n  if (isSameAsLast) {\n    statuses = [].concat(statuses, [status]);\n  } else {\n    statuses = [status];\n  }\n  var div = getStatusDiv();\n\n  // Remove previous children\n  while (div.lastChild) {\n    div.removeChild(div.firstChild);\n  }\n\n  statuses.filter(Boolean).forEach(function (statusItem, index) {\n    div.appendChild(getStatusChildDiv(statusItem, index));\n  });\n}\n\nfunction getStatusChildDiv(status, index) {\n  var display = index === statuses.length - 1 ? 'block' : 'none';\n\n  var childDiv = document.createElement('div');\n  childDiv.style.display = display;\n  childDiv.textContent = status;\n\n  return childDiv;\n}\n\nfunction getStatusDiv() {\n  if (statusDiv) {\n    return statusDiv;\n  }\n  statusDiv = document.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'assertive');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  document.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar idCounter = 0;\n\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\nfunction noop() {}\n\nfunction findParent(finder, node, rootNode) {\n  if (node !== null && node !== rootNode.parentNode) {\n    if (finder(node)) {\n      if (node === document.body && node.scrollTop === 0) {\n        // in chrome body.scrollTop always return 0\n        return document.documentElement;\n      }\n      return node;\n    } else {\n      return findParent(finder, node.parentNode, rootNode);\n    }\n  } else {\n    return null;\n  }\n}\n\n/**\n * Get the closest element that scrolls\n * @param {HTMLElement} node - the child element to start searching for scroll parent at\n * @param {HTMLElement} rootNode - the root element of the component\n * @return {HTMLElement} the closest parentNode that scrolls\n */\nvar getClosestScrollParent = findParent.bind(null, function (node) {\n  return node.scrollHeight > node.clientHeight;\n});\n\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node - the element that should scroll into view\n * @param {HTMLElement} rootNode - the root element of the component\n * @param {Boolean} alignToTop - align element to the top of the visible area of the scrollable ancestor\n */\n// eslint-disable-next-line complexity\nfunction scrollIntoView(node, rootNode) {\n  var scrollParent = getClosestScrollParent(node, rootNode);\n  if (scrollParent === null) {\n    return;\n  }\n  var scrollParentStyles = getComputedStyle(scrollParent);\n  var scrollParentRect = scrollParent.getBoundingClientRect();\n  var scrollParentBorderTopWidth = parseInt(scrollParentStyles.borderTopWidth, 10);\n  var scrollParentBorderBottomWidth = parseInt(scrollParentStyles.borderBottomWidth, 10);\n  var bordersWidth = scrollParentBorderTopWidth + scrollParentBorderBottomWidth;\n  var scrollParentTop = scrollParentRect.top + scrollParentBorderTopWidth;\n  var nodeRect = node.getBoundingClientRect();\n\n  if (nodeRect.top < 0 && scrollParentRect.top < 0) {\n    scrollParent.scrollTop += nodeRect.top;\n    return;\n  }\n\n  if (nodeRect.top < 0) {\n    // the item is above the viewport and the parent is not above the viewport\n    scrollParent.scrollTop += nodeRect.top - scrollParentTop;\n    return;\n  }\n\n  if (nodeRect.top > 0 && scrollParentRect.top < 0) {\n    if (scrollParentRect.bottom > 0 && nodeRect.bottom + bordersWidth > scrollParentRect.bottom) {\n      // the item is below scrollable area\n      scrollParent.scrollTop += nodeRect.bottom - scrollParentRect.bottom + bordersWidth;\n    }\n    // item and parent top are on different sides of view top border (do nothing)\n    return;\n  }\n\n  var nodeOffsetTop = nodeRect.top + scrollParent.scrollTop;\n  var nodeTop = nodeOffsetTop - scrollParentTop;\n  if (nodeTop < scrollParent.scrollTop) {\n    // the item is above the scrollable area\n    scrollParent.scrollTop = nodeTop;\n  } else if (nodeTop + nodeRect.height + bordersWidth > scrollParent.scrollTop + scrollParentRect.height) {\n    // the item is below the scrollable area\n    scrollParent.scrollTop = nodeTop + nodeRect.height - scrollParentRect.height + bordersWidth;\n  }\n  // the item is within the scrollable area (do nothing)\n}\n\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains(child);\n}\n\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\nfunction debounce(fn, time) {\n  var timeoutId = void 0;\n  return wrapper;\n  function wrapper() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(undefined, args);\n    }, time);\n  }\n}\n\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\nfunction composeEventHandlers() {\n  for (var _len2 = arguments.length, fns = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      fn && fn.apply(undefined, [event].concat(args));\n      // TODO: remove everything after the || in the next breaking change\n      return event.preventDownshiftDefault || event.defaultPrevented;\n    });\n  };\n}\n\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\nfunction generateId() {\n  return String(idCounter++);\n}\n\n/**\n * Resets idCounter to 0. Used for SSR.\n */\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n\n/**\n * Returns the first argument that is not undefined\n * @param {...*} args the arguments\n * @return {*} the defined value\n */\nfunction firstDefined() {\n  for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    args[_key4] = arguments[_key4];\n  }\n\n  return args.find(function (a) {\n    return typeof a !== 'undefined';\n  });\n}\n\n// eslint-disable-next-line complexity\nfunction getA11yStatusMessage(_ref) {\n  var isOpen = _ref.isOpen,\n      highlightedItem = _ref.highlightedItem,\n      selectedItem = _ref.selectedItem,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount,\n      itemToString = _ref.itemToString;\n\n  if (!isOpen) {\n    if (selectedItem) {\n      return itemToString(selectedItem);\n    } else {\n      return '';\n    }\n  }\n\n  if (!resultCount) {\n    return 'No results.';\n  } else if (!highlightedItem || resultCount !== previousResultCount) {\n    return resultCount + ' ' + (resultCount === 1 ? 'result is' : 'results are') + ' available, use up and down arrow keys to navigate.';\n  }\n  return itemToString(highlightedItem);\n}\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ? /* istanbul ignore next (preact) */arg[0] : arg;\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\nfunction isDOMElement(element) {\n  /* istanbul ignore if */\n  if (element.nodeName) {\n    // then this is preact\n    return typeof element.nodeName === 'string';\n  } else {\n    // then we assume this is react\n    return typeof element.type === 'string';\n  }\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\nfunction getElementProps(element) {\n  // props for react, attributes for preact\n  return element.props || /* istanbul ignore next (preact) */element.attributes;\n}\n\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\nfunction requiredProp(fnName, propName) {\n  throw new Error('The property \"' + propName + '\" is required in \"' + fnName + '\"');\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state The state object\n * @return {Object} State that is relevant to downshift\n */\nfunction pickState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a KeyboardEvent object\n * @return {String} keyboard key\n */\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return 'Arrow' + key;\n  }\n  return key;\n}\n\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/* eslint camelcase:0 */\n\nvar Downshift = function (_Component) {\n  inherits(Downshift, _Component);\n\n  function Downshift() {\n    classCallCheck(this, Downshift);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args)));\n\n    _initialiseProps.call(_this);\n\n    var state = _this.getState({\n      highlightedIndex: _this.props.defaultHighlightedIndex,\n      isOpen: _this.props.defaultIsOpen,\n      inputValue: _this.props.defaultInputValue,\n      selectedItem: _this.props.defaultSelectedItem\n    });\n    if (state.selectedItem != null) {\n      state.inputValue = _this.props.itemToString(state.selectedItem);\n    }\n    _this.state = state;\n    _this.id = _this.props.id || 'downshift-' + generateId();\n    return _this;\n  }\n  // itemCount can be changed asynchronously\n  // from within downshift (so it can't come from a prop)\n  // this is why we store it as an instance and use\n  // getItemCount rather than just use items.length\n  // (to support windowing + async)\n\n\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n  Downshift.prototype.getState = function getState() {\n    var _this2 = this;\n\n    var stateToMerge = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state;\n\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this2.isControlledProp(key) ? _this2.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  };\n\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n\n\n  Downshift.prototype.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  Downshift.prototype.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n    /* eslint-disable no-negated-condition */\n    if (this.itemCount != null) {\n      return this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      return this.props.itemCount;\n    } else {\n      return this.items.length;\n    }\n    /* eslint-enable no-negated-condition */\n  };\n\n  Downshift.prototype.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  Downshift.prototype.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      scrollIntoView(node, this._rootNode);\n    }\n  };\n\n  Downshift.prototype.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    if (this.getState().isOpen) {\n      this.changeHighlightedIndex(amount, otherStateToSet);\n    } else {\n      this.setHighlightedIndex(undefined, _extends({ isOpen: true }, otherStateToSet));\n    }\n  };\n\n  // eslint-disable-next-line complexity\n\n\n  Downshift.prototype.changeHighlightedIndex = function changeHighlightedIndex(moveAmount, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n    if (itemsLastIndex < 0) {\n      return;\n    }\n\n    var _getState = this.getState(),\n        highlightedIndex = _getState.highlightedIndex;\n\n    var baseIndex = highlightedIndex;\n    if (baseIndex === null) {\n      baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n    }\n    var newIndex = baseIndex + moveAmount;\n    if (newIndex < 0) {\n      newIndex = itemsLastIndex;\n    } else if (newIndex > itemsLastIndex) {\n      newIndex = 0;\n    }\n    this.setHighlightedIndex(newIndex, otherStateToSet);\n  };\n\n  // any piece of our state can live in two places:\n  // 1. Uncontrolled: it's internal (this.state)\n  //    We will call this.setState to update that state\n  // 2. Controlled: it's external (this.props)\n  //    We will call this.props.onStateChange to update that state\n  //\n  // In addition, we'll call this.props.onChange if the\n  // selectedItem is changed.\n\n\n  Downshift.prototype.getStateAndHelpers = function getStateAndHelpers() {\n    var _getState2 = this.getState(),\n        highlightedIndex = _getState2.highlightedIndex,\n        inputValue = _getState2.inputValue,\n        selectedItem = _getState2.selectedItem,\n        isOpen = _getState2.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getButtonProps = this.getButtonProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getButtonProps: getButtonProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n\n      //props\n      itemToString: itemToString,\n\n      //derived\n      id: id,\n\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  };\n\n  //////////////////////////// ROOT\n\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n\n  //////////////////////////// BUTTON\n\n  // TODO: remove this in 2.0.0 and just call it `getToggleButtonProps`\n\n\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n\n  /////////////////////////////// LABEL\n\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n\n  /////////////////////////////// INPUT\n\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n\n  /////////////////////////////// ITEM\n  Downshift.prototype.getItemId = function getItemId(index) {\n    return this.id + '-item-' + index;\n  };\n  //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n\n  Downshift.prototype.componentDidMount = function componentDidMount() {\n    var _this3 = this;\n\n    // the _isMounted property is because we have `updateStatus` in a `debounce`\n    // and we don't want to update the status if the component has been umounted\n    this._isMounted = true;\n    /* istanbul ignore if (react-native) */\n    {\n      // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n      var onMouseDown = function () {\n        _this3.isMouseDown = true;\n      };\n      var onMouseUp = function (event) {\n        var document = _this3.props.environment.document;\n\n        _this3.isMouseDown = false;\n        var targetInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, event.target);\n        var activeElementInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, document.activeElement);\n        if (!targetInDownshift && !activeElementInDownshift && _this3.getState().isOpen) {\n          _this3.reset({ type: Downshift.stateChangeTypes.mouseUp }, function () {\n            return _this3.props.onOuterClick(_this3.getStateAndHelpers());\n          });\n        }\n      };\n      // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n      var onTouchStart = function (event) {\n        var targetInDownshift = _this3._rootNode && isOrContainsNode(_this3._rootNode, event.target);\n        if (!targetInDownshift && _this3.getState().isOpen) {\n          _this3.reset({ type: Downshift.stateChangeTypes.touchStart }, function () {\n            return _this3.props.onOuterClick(_this3.getStateAndHelpers());\n          });\n        }\n      };\n\n      this.props.environment.addEventListener('mousedown', onMouseDown);\n      this.props.environment.addEventListener('mouseup', onMouseUp);\n      this.props.environment.addEventListener('touchstart', onTouchStart);\n\n      this.cleanup = function () {\n        _this3._isMounted = false;\n        _this3.props.environment.removeEventListener('mousedown', onMouseDown);\n        _this3.props.environment.removeEventListener('mouseup', onMouseUp);\n        _this3.props.environment.removeEventListener('touchstart', onTouchStart);\n      };\n    }\n  };\n\n  Downshift.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: Downshift.stateChangeTypes.controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    var current = this.props.highlightedIndex === undefined ? this.state : this.props;\n    var prev = prevProps.highlightedIndex === undefined ? prevState : prevProps;\n\n    if (current.highlightedIndex !== prev.highlightedIndex && !this.avoidScrolling) {\n      this.scrollHighlightedItemIntoView();\n    }\n\n    this.updateStatus();\n  };\n\n  Downshift.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  };\n\n  // eslint-disable-next-line complexity\n\n\n  Downshift.prototype.render = function render() {\n    var children = unwrapArray(this.props.render || this.props.children, noop);\n    // because the items are rerendered every time we call the children\n    // we clear this out each render and\n    this.clearItems();\n    // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined;\n    // we do something similar for getLabelProps\n    this.getLabelProps.called = false;\n    // and something similar for getInputProps\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n    if (!element) {\n      return null;\n    }\n    if (this.getRootProps.called) {\n      if (!this.getRootProps.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return React.cloneElement(element, this.getRootProps(getElementProps(element)));\n    } else {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must use apply the getRootProps function');\n    }\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultSelectedItem: null,\n  defaultInputValue: '',\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i)) {\n      //eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n    return String(i);\n  },\n  onStateChange: function onStateChange() {},\n  onInputValueChange: function onInputValueChange() {},\n  onUserAction: function onUserAction() {},\n  onChange: function onChange() {},\n  onSelect: function onSelect() {},\n  onOuterClick: function onOuterClick() {},\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined' /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  breakingChanges: {}\n};\nDownshift.stateChangeTypes = {\n  unknown: '__autocomplete_unknown__',\n  mouseUp: '__autocomplete_mouseup__',\n  itemMouseEnter: '__autocomplete_item_mouseenter__',\n  keyDownArrowUp: '__autocomplete_keydown_arrow_up__',\n  keyDownArrowDown: '__autocomplete_keydown_arrow_down__',\n  keyDownEscape: '__autocomplete_keydown_escape__',\n  keyDownEnter: '__autocomplete_keydown_enter__',\n  clickItem: '__autocomplete_click_item__',\n  blurInput: '__autocomplete_blur_input__',\n  changeInput: '__autocomplete_change_input__',\n  keyDownSpaceButton: '__autocomplete_keydown_space_button__',\n  clickButton: '__autocomplete_click_button__',\n  blurButton: '__autocomplete_blur_button__',\n  controlledPropUpdatedSelectedItem: '__autocomplete_controlled_prop_updated_selected_item__',\n  touchStart: '__autocomplete_touchstart__'\n};\n\nvar _initialiseProps = function () {\n  var _this4 = this;\n\n  this.input = null;\n  this.items = [];\n  this.itemCount = null;\n  this.previousResultCount = 0;\n\n  this.setItemCount = function (count) {\n    return _this4.itemCount = count;\n  };\n\n  this.unsetItemCount = function () {\n    return _this4.itemCount = null;\n  };\n\n  this.setHighlightedIndex = function () {\n    var highlightedIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.props.defaultHighlightedIndex;\n    var otherStateToSet = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    otherStateToSet = pickState(otherStateToSet);\n    _this4.internalSetState(_extends({ highlightedIndex: highlightedIndex }, otherStateToSet));\n  };\n\n  this.clearSelection = function (cb) {\n    _this4.internalSetState({\n      selectedItem: null,\n      inputValue: '',\n      isOpen: false\n    }, cb);\n  };\n\n  this.selectItem = function (item, otherStateToSet, cb) {\n    otherStateToSet = pickState(otherStateToSet);\n    _this4.internalSetState(_extends({\n      isOpen: false,\n      highlightedIndex: _this4.props.defaultHighlightedIndex,\n      selectedItem: item,\n      inputValue: _this4.isControlledProp('selectedItem') && _this4.props.breakingChanges.resetInputOnSelection ? _this4.props.defaultInputValue : _this4.props.itemToString(item)\n    }, otherStateToSet), cb);\n  };\n\n  this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n    var item = _this4.items[itemIndex];\n    if (item == null) {\n      return;\n    }\n    _this4.selectItem(item, otherStateToSet, cb);\n  };\n\n  this.selectHighlightedItem = function (otherStateToSet, cb) {\n    return _this4.selectItemAtIndex(_this4.getState().highlightedIndex, otherStateToSet, cb);\n  };\n\n  this.internalSetState = function (stateToSet, cb) {\n    var isItemSelected = void 0,\n        onChangeArg = void 0;\n\n    var onStateChangeArg = {};\n    var isStateToSetFunction = typeof stateToSet === 'function';\n\n    // we want to call `onInputValueChange` before the `setState` call\n    // so someone controlling the `inputValue` state gets notified of\n    // the input change as soon as possible. This avoids issues with\n    // preserving the cursor position.\n    // See https://github.com/paypal/downshift/issues/217 for more info.\n    if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n      _this4.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this4.getStateAndHelpers(), stateToSet));\n    }\n    return _this4.setState(function (state) {\n      state = _this4.getState(state);\n      var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet;\n\n      // Your own function that could modify the state that will be set.\n      newStateToSet = _this4.props.stateReducer(state, newStateToSet);\n\n      // checks if an item is selected, regardless of if it's different from\n      // what was selected before\n      // used to determine if onSelect and onChange callbacks should be called\n      isItemSelected = newStateToSet.hasOwnProperty('selectedItem');\n      // this keeps track of the object we want to call with setState\n      var nextState = {};\n      // this is just used to tell whether the state changed\n      var nextFullState = {};\n      // we need to call on change if the outside world is controlling any of our state\n      // and we're trying to update that state. OR if the selection has changed and we're\n      // trying to update the selection\n      if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n        onChangeArg = newStateToSet.selectedItem;\n      }\n      newStateToSet.type = newStateToSet.type || Downshift.stateChangeTypes.unknown;\n\n      Object.keys(newStateToSet).forEach(function (key) {\n        // onStateChangeArg should only have the state that is\n        // actually changing\n        if (state[key] !== newStateToSet[key]) {\n          onStateChangeArg[key] = newStateToSet[key];\n        }\n        // the type is useful for the onStateChangeArg\n        // but we don't actually want to set it in internal state.\n        // this is an undocumented feature for now... Not all internalSetState\n        // calls support it and I'm not certain we want them to yet.\n        // But it enables users controlling the isOpen state to know when\n        // the isOpen state changes due to mouseup events which is quite handy.\n        if (key === 'type') {\n          return;\n        }\n        nextFullState[key] = newStateToSet[key];\n        // if it's coming from props, then we don't care to set it internally\n        if (!_this4.isControlledProp(key)) {\n          nextState[key] = newStateToSet[key];\n        }\n      });\n\n      // if stateToSet is a function, then we weren't able to call onInputValueChange\n      // earlier, so we'll call it now that we know what the inputValue state will be.\n      if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n        _this4.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this4.getStateAndHelpers(), newStateToSet));\n      }\n\n      return nextState;\n    }, function () {\n      // call the provided callback if it's a callback\n      cbToCb(cb)();\n\n      // only call the onStateChange and onChange callbacks if\n      // we have relevant information to pass them.\n      var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n      if (hasMoreStateThanType) {\n        _this4.props.onStateChange(onStateChangeArg, _this4.getStateAndHelpers());\n      }\n\n      if (isItemSelected) {\n        _this4.props.onSelect(stateToSet.selectedItem, _this4.getStateAndHelpers());\n      }\n\n      if (onChangeArg !== undefined) {\n        _this4.props.onChange(onChangeArg, _this4.getStateAndHelpers());\n      }\n      // this is currently undocumented and therefore subject to change\n      // We'll try to not break it, but just be warned.\n      _this4.props.onUserAction(onStateChangeArg, _this4.getStateAndHelpers());\n    });\n  };\n\n  this.rootRef = function (node) {\n    return _this4._rootNode = node;\n  };\n\n  this.getRootProps = function () {\n    var _babelHelpers$extends;\n\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref3$suppressRefErro = _ref3.suppressRefError,\n        suppressRefError = _ref3$suppressRefErro === undefined ? false : _ref3$suppressRefErro;\n\n    var _ref2$refKey = _ref2.refKey,\n        refKey = _ref2$refKey === undefined ? 'ref' : _ref2$refKey,\n        rest = objectWithoutProperties(_ref2, ['refKey']);\n\n    // this is used in the render to know whether the user has called getRootProps.\n    // It uses that to know whether to apply the props automatically\n    _this4.getRootProps.called = true;\n    _this4.getRootProps.refKey = refKey;\n    _this4.getRootProps.suppressRefError = suppressRefError;\n    return _extends((_babelHelpers$extends = {}, _babelHelpers$extends[refKey] = _this4.rootRef, _babelHelpers$extends), rest);\n  };\n\n  this.keyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      var amount = event.shiftKey ? 5 : 1;\n      this.moveHighlightedIndex(amount, {\n        type: Downshift.stateChangeTypes.keyDownArrowDown\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      var amount = event.shiftKey ? -5 : -1;\n      this.moveHighlightedIndex(amount, {\n        type: Downshift.stateChangeTypes.keyDownArrowUp\n      });\n    },\n    Enter: function Enter(event) {\n      if (this.getState().isOpen) {\n        event.preventDefault();\n        var itemIndex = this.getState().highlightedIndex;\n        var item = this.items[itemIndex];\n        var itemNode = this.getItemNodeFromIndex(itemIndex);\n        if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n          return;\n        }\n        this.selectHighlightedItem({\n          type: Downshift.stateChangeTypes.keyDownEnter\n        });\n      }\n    },\n    Escape: function Escape(event) {\n      event.preventDefault();\n      this.reset({ type: Downshift.stateChangeTypes.keyDownEscape });\n    }\n  };\n  this.buttonKeyDownHandlers = _extends({}, this.keyDownHandlers, {\n    ' ': function _(event) {\n      event.preventDefault();\n      this.toggleMenu({ type: Downshift.stateChangeTypes.keyDownSpaceButton });\n    }\n  });\n\n  this.getToggleButtonProps = function () {\n    var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onClick = _ref4.onClick,\n        onKeyDown = _ref4.onKeyDown,\n        onBlur = _ref4.onBlur,\n        rest = objectWithoutProperties(_ref4, ['onClick', 'onKeyDown', 'onBlur']);\n\n    var _getState3 = _this4.getState(),\n        isOpen = _getState3.isOpen;\n\n    var enabledEventHandlers = {\n      onClick: composeEventHandlers(onClick, _this4.button_handleClick),\n      onKeyDown: composeEventHandlers(onKeyDown, _this4.button_handleKeyDown),\n      onBlur: composeEventHandlers(onBlur, _this4.button_handleBlur)\n    };\n    var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n    return _extends({\n      type: 'button',\n      role: 'button',\n      'aria-label': isOpen ? 'close menu' : 'open menu',\n      'aria-expanded': isOpen,\n      'aria-haspopup': true,\n      'data-toggle': true\n    }, eventHandlers, rest);\n  };\n\n  this.getButtonProps = this.getToggleButtonProps;\n\n  this.button_handleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n    if (_this4.buttonKeyDownHandlers[key]) {\n      _this4.buttonKeyDownHandlers[key].call(_this4, event);\n    }\n  };\n\n  this.button_handleClick = function (event) {\n    event.preventDefault();\n    // handle odd case for Safari and Firefox which\n    // don't give the button the focus properly.\n    /* istanbul ignore if (can't reasonably test this) */\n    if (_this4.props.environment.document.activeElement === _this4.props.environment.document.body) {\n      event.target.focus();\n    }\n    // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n    // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n    // when building for production and should therefore have no impact on production code.\n    if (process.env.NODE_ENV === 'test') {\n      _this4.toggleMenu({ type: Downshift.stateChangeTypes.clickButton });\n    } else {\n      // Ensure that toggle of menu occurs after the potential blur event in iOS\n      setTimeout(function () {\n        return _this4.toggleMenu({ type: Downshift.stateChangeTypes.clickButton });\n      });\n    }\n  };\n\n  this.button_handleBlur = function (event) {\n    var blurTarget = event.target; // Save blur target for comparison with activeElement later\n    // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n    setTimeout(function () {\n      if (!_this4.isMouseDown && (_this4.props.environment.document.activeElement == null || _this4.props.environment.document.activeElement.id !== _this4.inputId) && _this4.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n      ) {\n          _this4.reset({ type: Downshift.stateChangeTypes.blurButton });\n        }\n    });\n  };\n\n  this.getLabelProps = function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _this4.getLabelProps.called = true;\n    if (_this4.getInputProps.called && props.htmlFor && props.htmlFor !== _this4.inputId) {\n      throw new Error('downshift: You provided the htmlFor of \"' + props.htmlFor + '\" for your label, but the id of your input is \"' + _this4.inputId + '\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.');\n    }\n    _this4.inputId = firstDefined(_this4.inputId, props.htmlFor, _this4.id + '-input');\n    return _extends({}, props, {\n      htmlFor: _this4.inputId\n    });\n  };\n\n  this.getInputProps = function () {\n    var _ref6;\n\n    var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onKeyDown = _ref5.onKeyDown,\n        onBlur = _ref5.onBlur,\n        onChange = _ref5.onChange,\n        onInput = _ref5.onInput,\n        rest = objectWithoutProperties(_ref5, ['onKeyDown', 'onBlur', 'onChange', 'onInput']);\n\n    _this4.getInputProps.called = true;\n    if (_this4.getLabelProps.called && rest.id && rest.id !== _this4.inputId) {\n      throw new Error('downshift: You provided the id of \"' + rest.id + '\" for your input, but the htmlFor of your label is \"' + _this4.inputId + '\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.');\n    }\n    _this4.inputId = firstDefined(_this4.inputId, rest.id, _this4.id + '-input');\n    var onChangeKey = void 0;\n    /* istanbul ignore next (preact) */\n    onChangeKey = 'onChange';\n\n    var _getState4 = _this4.getState(),\n        inputValue = _getState4.inputValue,\n        isOpen = _getState4.isOpen,\n        highlightedIndex = _getState4.highlightedIndex;\n\n    var eventHandlers = rest.disabled ? {} : (_ref6 = {}, _ref6[onChangeKey] = composeEventHandlers(onChange, onInput, _this4.input_handleChange), _ref6.onKeyDown = composeEventHandlers(onKeyDown, _this4.input_handleKeyDown), _ref6.onBlur = composeEventHandlers(onBlur, _this4.input_handleBlur), _ref6);\n    return _extends({\n      role: 'combobox',\n      'aria-autocomplete': 'list',\n      'aria-expanded': isOpen,\n      'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this4.getItemId(highlightedIndex) : null,\n      autoComplete: 'off',\n      value: inputValue\n    }, eventHandlers, rest, {\n      id: _this4.inputId\n    });\n  };\n\n  this.input_handleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n    if (key && _this4.keyDownHandlers[key]) {\n      _this4.keyDownHandlers[key].call(_this4, event);\n    }\n  };\n\n  this.input_handleChange = function (event) {\n    _this4.internalSetState({\n      type: Downshift.stateChangeTypes.changeInput,\n      isOpen: true,\n      inputValue: event.target.value\n    });\n  };\n\n  this.input_handleBlur = function () {\n    // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n    setTimeout(function () {\n      var downshiftButtonIsActive = _this4.props.environment.document.activeElement.dataset.toggle && _this4._rootNode && _this4._rootNode.contains(_this4.props.environment.document.activeElement);\n      if (!_this4.isMouseDown && !downshiftButtonIsActive) {\n        _this4.reset({ type: Downshift.stateChangeTypes.blurInput });\n      }\n    });\n  };\n\n  this.getItemProps = function () {\n    var _enabledEventHandlers;\n\n    var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var onMouseMove = _ref7.onMouseMove,\n        onMouseDown = _ref7.onMouseDown,\n        onClick = _ref7.onClick,\n        index = _ref7.index,\n        _ref7$item = _ref7.item,\n        item = _ref7$item === undefined ? requiredProp('getItemProps', 'item') : _ref7$item,\n        rest = objectWithoutProperties(_ref7, ['onMouseMove', 'onMouseDown', 'onClick', 'index', 'item']);\n\n    if (index === undefined) {\n      _this4.items.push(item);\n      index = _this4.items.indexOf(item);\n    } else {\n      _this4.items[index] = item;\n    }\n\n    var onSelectKey = 'onClick';\n\n    var enabledEventHandlers = (_enabledEventHandlers = {\n      // onMouseMove is used over onMouseEnter here. onMouseMove\n      // is only triggered on actual mouse movement while onMouseEnter\n      // can fire on DOM changes, interrupting keyboard navigation\n      onMouseMove: composeEventHandlers(onMouseMove, function () {\n        if (index === _this4.getState().highlightedIndex) {\n          return;\n        }\n        _this4.setHighlightedIndex(index, {\n          type: Downshift.stateChangeTypes.itemMouseEnter\n        });\n\n        // We never want to manually scroll when changing state based\n        // on `onMouseMove` because we will be moving the element out\n        // from under the user which is currently scrolling/moving the\n        // cursor\n        _this4.avoidScrolling = true;\n        setTimeout(function () {\n          return _this4.avoidScrolling = false;\n        }, 250);\n      }),\n      onMouseDown: composeEventHandlers(onMouseDown, function (event) {\n        // This prevents the activeElement from being changed\n        // to the item so it can remain with the current activeElement\n        // which is a more common use case.\n        event.preventDefault();\n      })\n    }, _enabledEventHandlers[onSelectKey] = composeEventHandlers(onClick, function () {\n      _this4.selectItemAtIndex(index, {\n        type: Downshift.stateChangeTypes.clickItem\n      });\n    }), _enabledEventHandlers);\n\n    var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n\n    return _extends({\n      id: _this4.getItemId(index)\n    }, eventHandlers, rest);\n  };\n\n  this.clearItems = function () {\n    _this4.items = [];\n  };\n\n  this.reset = function () {\n    var otherStateToSet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var cb = arguments[1];\n\n    otherStateToSet = pickState(otherStateToSet);\n    _this4.internalSetState(function (_ref8) {\n      var selectedItem = _ref8.selectedItem;\n      return _extends({\n        isOpen: false,\n        highlightedIndex: _this4.props.defaultHighlightedIndex,\n        inputValue: _this4.props.itemToString(selectedItem)\n      }, otherStateToSet);\n    }, cbToCb(cb));\n  };\n\n  this.toggleMenu = function () {\n    var otherStateToSet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var cb = arguments[1];\n\n    otherStateToSet = pickState(otherStateToSet);\n    _this4.internalSetState(function (_ref9) {\n      var isOpen = _ref9.isOpen;\n\n      return _extends({ isOpen: !isOpen }, otherStateToSet);\n    }, function () {\n      var _getState5 = _this4.getState(),\n          isOpen = _getState5.isOpen;\n\n      if (isOpen) {\n        // highlight default index\n        _this4.setHighlightedIndex(undefined, otherStateToSet);\n      }\n      cbToCb(cb)();\n    });\n  };\n\n  this.openMenu = function (cb) {\n    _this4.internalSetState({ isOpen: true }, cbToCb(cb));\n  };\n\n  this.closeMenu = function (cb) {\n    _this4.internalSetState({ isOpen: false }, cbToCb(cb));\n  };\n\n  this.updateStatus = debounce(function () {\n    if (!_this4._isMounted) {\n      return;\n    }\n    var state = _this4.getState();\n    var item = _this4.items[state.highlightedIndex];\n    var resultCount = _this4.getItemCount();\n    var status = _this4.props.getA11yStatusMessage(_extends({\n      itemToString: _this4.props.itemToString,\n      previousResultCount: _this4.previousResultCount,\n      resultCount: resultCount,\n      highlightedItem: item\n    }, state));\n    _this4.previousResultCount = resultCount;\n    /* istanbul ignore else (react-native) */\n    setStatus(status);\n  }, 200);\n};\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  render: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultSelectedItem: PropTypes.any,\n  defaultInputValue: PropTypes.string,\n  defaultIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  breakingChanges: PropTypes.shape({\n    resetInputOnSelection: PropTypes.bool\n  })\n  /* eslint-enable */\n} : void 0;\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref) {\n  var refKey = _ref.refKey;\n\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n  if (isComposite && !refKeySpecified) {\n    throw new Error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    throw new Error('downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \"' + refKey + '\"');\n  }\n  if (!getElementProps(element)[refKey]) {\n    throw new Error('downshift: You must apply the ref prop \"' + refKey + '\" from getRootProps onto your root element.');\n  }\n}\n\n/*\n * Fix importing in typescript after rollup compilation\n * https://github.com/rollup/rollup/issues/1156\n * https://github.com/Microsoft/TypeScript/issues/13017#issuecomment-268657860\n */\nDownshift.default = Downshift;\nDownshift.resetIdCounter = resetIdCounter;\n\nexport default Downshift;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}