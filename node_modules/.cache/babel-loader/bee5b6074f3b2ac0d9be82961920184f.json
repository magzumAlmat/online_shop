{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _assign2 = require('lodash/fp/assign');\n\nvar _assign3 = _interopRequireDefault(_assign2);\n\nvar _setWith2 = require('lodash/fp/setWith');\n\nvar _setWith3 = _interopRequireDefault(_setWith2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nexports.default = dataReducer;\n\nvar _constants = require('../constants');\n\nvar _reducers = require('../utils/reducers');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar CLEAR_DATA = _constants.actionTypes.CLEAR_DATA,\n    GET_SUCCESS = _constants.actionTypes.GET_SUCCESS,\n    LISTENER_RESPONSE = _constants.actionTypes.LISTENER_RESPONSE,\n    LISTENER_ERROR = _constants.actionTypes.LISTENER_ERROR,\n    DELETE_SUCCESS = _constants.actionTypes.DELETE_SUCCESS,\n    DOCUMENT_ADDED = _constants.actionTypes.DOCUMENT_ADDED,\n    DOCUMENT_MODIFIED = _constants.actionTypes.DOCUMENT_MODIFIED,\n    DOCUMENT_REMOVED = _constants.actionTypes.DOCUMENT_REMOVED;\n\nfunction dataReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments[1];\n\n  switch (action.type) {\n    case GET_SUCCESS:\n    case LISTENER_RESPONSE:\n      var meta = action.meta,\n          payload = action.payload;\n\n      if (!payload || payload.data === undefined) {\n        return state;\n      }\n\n      var getDocName = function getDocName(data) {\n        return data.subcollections ? getDocName(data.subcollections.slice(-1)[0]) : data.doc;\n      };\n\n      var docName = getDocName(meta);\n      var data = docName ? (0, _get3.default)(payload.data, docName) : payload.data;\n      var previousData = (0, _get3.default)(state, meta.storeAs || (0, _reducers.pathFromMeta)(meta));\n\n      if (!previousData || meta.subcollections) {\n        return (0, _setWith3.default)(Object, meta.storeAs || (0, _reducers.pathFromMeta)(meta), data, state);\n      }\n\n      var mergedData = (0, _assign3.default)(previousData, data);\n      return (0, _setWith3.default)(Object, meta.storeAs || (0, _reducers.pathFromMeta)(meta), mergedData, state);\n\n    case DOCUMENT_MODIFIED:\n    case DOCUMENT_ADDED:\n      return (0, _setWith3.default)(Object, (0, _reducers.pathFromMeta)(action.meta), action.payload.data, state);\n\n    case DOCUMENT_REMOVED:\n    case DELETE_SUCCESS:\n      var removePath = (0, _reducers.pathFromMeta)(action.meta);\n      var cleanedState = (0, _setWith3.default)(Object, removePath, null, state);\n\n      if (action.preserve && action.preserve.data) {\n        return (0, _reducers.preserveValuesFromState)(state, action.preserve.data, cleanedState);\n      }\n\n      return cleanedState;\n\n    case CLEAR_DATA:\n      if (action.preserve && action.preserve.data) {\n        return (0, _reducers.preserveValuesFromState)(state, action.preserve.data, {});\n      }\n\n      return {};\n\n    case LISTENER_ERROR:\n      var nextState = (0, _setWith3.default)(Object, (0, _reducers.pathFromMeta)(action.meta), null, state);\n\n      if (action.preserve && action.preserve.data) {\n        return (0, _reducers.preserveValuesFromState)(state, action.preserve.data, nextState);\n      }\n\n      var existingState = (0, _get3.default)(state, (0, _reducers.pathFromMeta)(action.meta));\n\n      if (existingState) {\n        return state;\n      }\n\n      return nextState;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","_assign2","require","_assign3","_interopRequireDefault","_setWith2","_setWith3","_get2","_get3","default","dataReducer","_constants","_reducers","obj","__esModule","CLEAR_DATA","actionTypes","GET_SUCCESS","LISTENER_RESPONSE","LISTENER_ERROR","DELETE_SUCCESS","DOCUMENT_ADDED","DOCUMENT_MODIFIED","DOCUMENT_REMOVED","state","arguments","length","undefined","action","type","meta","payload","data","getDocName","subcollections","slice","doc","docName","previousData","storeAs","pathFromMeta","mergedData","removePath","cleanedState","preserve","preserveValuesFromState","nextState","existingState"],"sources":["/Users/billionare/Documents/reactSmartshop/SmartShopProduction-main/node_modules/redux-firestore/es/reducers/dataReducer.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _assign2 = require('lodash/fp/assign');\n\nvar _assign3 = _interopRequireDefault(_assign2);\n\nvar _setWith2 = require('lodash/fp/setWith');\n\nvar _setWith3 = _interopRequireDefault(_setWith2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nexports.default = dataReducer;\n\nvar _constants = require('../constants');\n\nvar _reducers = require('../utils/reducers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CLEAR_DATA = _constants.actionTypes.CLEAR_DATA,\n    GET_SUCCESS = _constants.actionTypes.GET_SUCCESS,\n    LISTENER_RESPONSE = _constants.actionTypes.LISTENER_RESPONSE,\n    LISTENER_ERROR = _constants.actionTypes.LISTENER_ERROR,\n    DELETE_SUCCESS = _constants.actionTypes.DELETE_SUCCESS,\n    DOCUMENT_ADDED = _constants.actionTypes.DOCUMENT_ADDED,\n    DOCUMENT_MODIFIED = _constants.actionTypes.DOCUMENT_MODIFIED,\n    DOCUMENT_REMOVED = _constants.actionTypes.DOCUMENT_REMOVED;\nfunction dataReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments[1];\n\n  switch (action.type) {\n    case GET_SUCCESS:\n    case LISTENER_RESPONSE:\n      var meta = action.meta,\n          payload = action.payload;\n\n      if (!payload || payload.data === undefined) {\n        return state;\n      }\n\n      var getDocName = function getDocName(data) {\n        return data.subcollections ? getDocName(data.subcollections.slice(-1)[0]) : data.doc;\n      };\n      var docName = getDocName(meta);\n\n      var data = docName ? (0, _get3.default)(payload.data, docName) : payload.data;\n\n      var previousData = (0, _get3.default)(state, meta.storeAs || (0, _reducers.pathFromMeta)(meta));\n\n      if (!previousData || meta.subcollections) {\n        return (0, _setWith3.default)(Object, meta.storeAs || (0, _reducers.pathFromMeta)(meta), data, state);\n      }\n\n      var mergedData = (0, _assign3.default)(previousData, data);\n\n      return (0, _setWith3.default)(Object, meta.storeAs || (0, _reducers.pathFromMeta)(meta), mergedData, state);\n    case DOCUMENT_MODIFIED:\n    case DOCUMENT_ADDED:\n      return (0, _setWith3.default)(Object, (0, _reducers.pathFromMeta)(action.meta), action.payload.data, state);\n    case DOCUMENT_REMOVED:\n    case DELETE_SUCCESS:\n      var removePath = (0, _reducers.pathFromMeta)(action.meta);\n      var cleanedState = (0, _setWith3.default)(Object, removePath, null, state);\n      if (action.preserve && action.preserve.data) {\n        return (0, _reducers.preserveValuesFromState)(state, action.preserve.data, cleanedState);\n      }\n      return cleanedState;\n    case CLEAR_DATA:\n      if (action.preserve && action.preserve.data) {\n        return (0, _reducers.preserveValuesFromState)(state, action.preserve.data, {});\n      }\n      return {};\n    case LISTENER_ERROR:\n      var nextState = (0, _setWith3.default)(Object, (0, _reducers.pathFromMeta)(action.meta), null, state);\n      if (action.preserve && action.preserve.data) {\n        return (0, _reducers.preserveValuesFromState)(state, action.preserve.data, nextState);\n      }\n      var existingState = (0, _get3.default)(state, (0, _reducers.pathFromMeta)(action.meta));\n\n      if (existingState) {\n        return state;\n      }\n      return nextState;\n    default:\n      return state;\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}