{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _Pagination = require('./addons/Pagination');\n\nvar _Pagination2 = _interopRequireDefault(_Pagination);\n\nvar _PoweredBy = require('./addons/PoweredBy');\n\nvar _PoweredBy2 = _interopRequireDefault(_PoweredBy);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _results = require('../../styles/results');\n\nvar _Card = require('../../styles/Card');\n\nvar _ListItem = require('../../styles/ListItem');\n\nvar _utils = require('../../utils');\n\nvar _Results = require('./addons/Results');\n\nvar _Results2 = _interopRequireDefault(_Results);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _Button = require('../../styles/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _DownloadSvg = require('../shared/DownloadSvg');\n\nvar _DownloadSvg2 = _interopRequireDefault(_DownloadSvg);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/** @jsxRuntime classic */\n\n/** @jsx jsx */\n\n\nvar ReactiveList = function (_Component) {\n  _inherits(ReactiveList, _Component);\n\n  function ReactiveList(props) {\n    _classCallCheck(this, ReactiveList); // no support for pagination and aggregationField together\n\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    if (props.pagination && props.aggregationField) {\n      console.warn('Pagination is not supported when aggregationField is present. The list will be rendered with infinite scroll');\n    }\n\n    var currentPage = 0;\n\n    if (_this.props.defaultPage >= 0) {\n      currentPage = _this.props.defaultPage;\n    } else if (_this.props.currentPage) {\n      currentPage = Math.max(_this.props.currentPage - 1, 0);\n    }\n\n    _this.initialFrom = currentPage * props.size; // used for page resetting on query change\n\n    _this.shouldRenderPagination = props.pagination && !props.aggregationField;\n    _this.state = {\n      from: _this.initialFrom,\n      currentPage: currentPage,\n      exportLoading: false\n    };\n    _this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n    _this.sortOptionIndex = _this.props.defaultSortOption ? _this.props.sortOptions.findIndex(function (s) {\n      return s.label === _this.props.defaultSortOption;\n    }) : 0;\n\n    if (_this.props.urlSortOption) {\n      _this.sortOptionIndex = _this.props.sortOptions.findIndex(function (s) {\n        return s.label === _this.props.urlSortOption;\n      }) || 0;\n    }\n\n    var options = (0, _helper.getQueryOptions)(_this.props);\n    options.from = _this.state.from;\n\n    if (_this.props.sortOptions) {\n      var _ref;\n\n      var sortField = _this.props.sortOptions[_this.sortOptionIndex].dataField;\n      var sortBy = _this.props.sortOptions[_this.sortOptionIndex].sortBy;\n      options.sort = [(_ref = {}, _ref[sortField] = {\n        order: sortBy\n      }, _ref)]; // To handle sort options for RS API\n\n      _this.props.updateComponentProps(_this.props.componentId, Object.assign({}, _this.props, {\n        dataField: sortField\n      }, {\n        sortBy: sortBy\n      }, _this.absProps), _constants.componentTypes.reactiveList);\n    } else if (_this.props.sortBy) {\n      var _ref2;\n\n      options.sort = [(_ref2 = {}, _ref2[_this.props.dataField] = {\n        order: _this.props.sortBy\n      }, _ref2)];\n    } // Override sort query with defaultQuery's sort if defined\n\n\n    _this.defaultQuery = null;\n\n    if (_this.props.defaultQuery) {\n      _this.defaultQuery = _this.props.defaultQuery();\n      options = _extends({}, options, (0, _helper.getOptionsFromQuery)(_this.defaultQuery));\n    }\n\n    var _ref3 = _this.defaultQuery || {},\n        query = _ref3.query; // execute is set to false at the time of mount\n    // to avoid firing (multiple) partial queries.\n    // Hence we are building the query in parts here\n    // and only executing it with setReact() at core\n\n\n    var execute = false;\n\n    _this.props.setQueryOptions(_this.props.componentId, _extends({}, options, _this.getAggsQuery()), execute);\n\n    if (_this.defaultQuery) {\n      _this.props.updateQuery({\n        componentId: _this.internalComponent,\n        query: query\n      }, execute); // Update calculated default query in store\n\n\n      (0, _helper.updateDefaultQuery)(_this.props.componentId, _this.props);\n    } else {\n      _this.props.updateQuery({\n        componentId: _this.internalComponent,\n        query: null\n      }, execute);\n    }\n\n    return _this;\n  }\n\n  ReactiveList.prototype.componentDidMount = function componentDidMount() {\n    this.domNode = window;\n\n    if (this.showInfiniteScroll) {\n      var scrollTarget = this.props.scrollTarget;\n\n      if (typeof scrollTarget === 'string' || scrollTarget instanceof String) {\n        this.domNode = document.getElementById(scrollTarget);\n      } else if (scrollTarget instanceof Element || scrollTarget instanceof HTMLDocument) {\n        this.domNode = scrollTarget;\n      }\n\n      this.domNode.addEventListener('scroll', this.scrollHandler);\n    }\n  };\n\n  ReactiveList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    var totalPages = Math.ceil(this.props.total / this.props.size) || 0;\n\n    if (this.props.onData) {\n      (0, _helper.checkSomePropChange)(this.props, prevProps, ['hits', 'promotedResults', 'customData', 'total', 'size', 'time', 'hidden'], function () {\n        _this2.props.onData(_this2.getData());\n      });\n    }\n\n    if (!(0, _helper.isEqual)(this.props.sortOptions, prevProps.sortOptions) || this.props.sortBy !== prevProps.sortBy || this.props.size !== prevProps.size || !(0, _helper.isEqual)(this.props.dataField, prevProps.dataField) || !(0, _helper.isEqual)(this.props.includeFields, prevProps.includeFields) || !(0, _helper.isEqual)(this.props.excludeFields, prevProps.excludeFields) || !(0, _helper.isEqual)(this.props.highlight, prevProps.highlight) || !(0, _helper.isEqual)(this.props.highlightConfig, prevProps.highlightConfig)) {\n      var options = (0, _helper.getQueryOptions)(this.props);\n      options.from = this.state.from;\n\n      if (this.props.sortOptions) {\n        var _ref4;\n\n        options.sort = [(_ref4 = {}, _ref4[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n          order: this.props.sortOptions[this.sortOptionIndex].sortBy\n        }, _ref4)];\n      } else if (this.props.sortBy) {\n        var _ref5;\n\n        options.sort = [(_ref5 = {}, _ref5[this.props.dataField] = {\n          order: this.props.sortBy\n        }, _ref5)];\n      }\n\n      this.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), true);\n    }\n\n    if (this.props.defaultQuery && !(0, _helper.isEqual)(this.props.defaultQuery(), this.defaultQuery)) {\n      var _options = (0, _helper.getQueryOptions)(this.props);\n\n      _options.from = 0;\n      this.defaultQuery = this.props.defaultQuery(); // Update calculated default query in store\n\n      (0, _helper.updateDefaultQuery)(this.props.componentId, this.props);\n      var query = this.defaultQuery.query;\n      var queryOptions = (0, _helper.getOptionsFromQuery)(this.defaultQuery);\n\n      if (queryOptions) {\n        _options = _extends({}, _options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n        this.props.setQueryOptions(this.props.componentId, _options, !query);\n      }\n\n      this.props.updateQuery({\n        componentId: this.internalComponent,\n        query: query\n      }, true); // reset page because of query change\n      // eslint-disable-next-line\n\n      this.setState({\n        currentPage: 0,\n        from: 0\n      }, function () {\n        _this2.updatePageURL(0);\n      });\n    }\n\n    if (this.shouldRenderPagination) {\n      // called when page is changed\n      if (this.props.isLoading && (this.props.hits || prevProps.hits)) {\n        if (this.props.onPageChange) {\n          this.props.onPageChange(this.state.currentPage + 1, totalPages);\n        } else if (this.props.scrollOnChange && this.props.pagination) {\n          this.scrollToTop();\n        }\n      }\n\n      if (this.props.currentPage !== prevProps.currentPage && this.props.currentPage > 0 && this.props.currentPage <= totalPages) {\n        this.setPage(this.props.currentPage - 1);\n      }\n    }\n\n    if (this.showInfiniteScroll) {\n      if (this.props.hits && prevProps.hits) {\n        if ( // new items are loaded (from: 0)\n        this.props.hits.length < prevProps.hits.length // new items are loaded and 'from' hasn't changed\n        || this.props.hits.length === prevProps.hits.length && this.props.hits !== prevProps.hits) {\n          // query has changed\n          if (this.props.scrollOnChange) {\n            this.scrollToTop();\n          } // eslint-disable-next-line\n\n\n          this.setState({\n            from: 0\n          });\n        }\n      }\n    }\n\n    if (prevProps.queryLog && this.props.queryLog && prevProps.queryLog !== this.props.queryLog) {\n      // usecase:\n      // - query has changed from non-null prev query\n      if (this.props.queryLog.from !== this.state.from) {\n        // query's 'from' key doesn't match the state's 'from' key,\n        // i.e. this query change was not triggered by the page change (loadMore)\n        // eslint-disable-next-line\n        this.setState({\n          currentPage: 0\n        }, function () {\n          _this2.updatePageURL(0);\n        });\n\n        if (this.props.onPageChange) {\n          this.props.onPageChange(1, totalPages);\n        }\n      }\n    } // handle window url history change (on native back and forth interactions)\n\n\n    if (this.state.currentPage !== this.props.defaultPage && this.props.defaultPage !== prevProps.defaultPage) {\n      this.setPage(this.props.defaultPage >= 0 ? this.props.defaultPage : 0);\n    }\n  };\n\n  ReactiveList.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.domNode) {\n      this.domNode.removeEventListener('scroll', this.scrollHandler);\n    }\n  }; // Calculate results\n\n\n  ReactiveList.prototype.render = function render() {\n    var _props = this.props,\n        renderItem = _props.renderItem,\n        size = _props.size,\n        error = _props.error,\n        renderPagination = _props.renderPagination,\n        analytics = _props.analytics;\n    var currentPage = this.state.currentPage;\n\n    var _getAllData = this.getAllData(),\n        filteredResults = _getAllData.filteredResults;\n\n    var paginationProps = {\n      pages: this.props.pages,\n      totalPages: Math.ceil(this.props.total / size),\n      currentPage: this.state.currentPage,\n      setPage: this.setPage,\n      showEndPage: this.props.showEndPage,\n      innerClass: this.props.innerClass,\n      fragmentName: this.props.componentId\n    };\n    var paginationElement = renderPagination ? renderPagination(paginationProps) : (0, _core.jsx)(_Pagination2.default, paginationProps);\n    var base = currentPage * size;\n    return (0, _core.jsx)('div', {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.isLoading && this.shouldRenderPagination && this.props.loader, this.renderError(), (0, _core.jsx)(_Flex2.default, {\n      labelPosition: this.props.sortOptions ? 'right' : 'left',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'resultsInfo'),\n      justifyContent: 'space-between'\n    }, this.props.sortOptions ? this.renderSortOptions() : null, this.props.showExport && filteredResults.length !== 0 ? this.renderExportOptions() : null, this.props.showResultStats ? this.renderResultStats() : null), !this.props.isLoading && !error && filteredResults.length === 0 ? this.renderNoResults() : null, this.shouldRenderPagination && ['top', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null, (0, _core.jsx)(_Results2.default, {\n      base: base,\n      analytics: analytics,\n      hasCustomRender: this.hasCustomRenderer,\n      getComponent: this.getComponent,\n      listClass: this.props.listClass,\n      innerClass: this.props.innerClass,\n      renderItem: renderItem,\n      triggerClickAnalytics: this.triggerClickAnalytics,\n      filteredResults: filteredResults\n    }), this.props.showLoader && this.props.isLoading && this.showInfiniteScroll ? this.props.loader || (0, _core.jsx)('div', {\n      style: {\n        textAlign: 'center',\n        margin: '20px 0',\n        color: '#666'\n      }\n    }, 'Loading...') // prettier-ignore\n    : null, this.shouldRenderPagination && ['bottom', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null, (0, _core.jsx)(_PoweredBy2.default, {\n      show: !!(this.props.config.url.endsWith('appbase.io') && filteredResults.length),\n      innerClass: this.props.innerClass\n    }));\n  };\n\n  _createClass(ReactiveList, [{\n    key: 'stats',\n    get: function get() {\n      var currentPage = this.state.currentPage;\n\n      var _getAllData2 = this.getAllData(),\n          filteredResults = _getAllData2.filteredResults;\n\n      return _extends({}, (0, _helper.getResultStats)(this.props), {\n        currentPage: currentPage,\n        displayedResults: filteredResults.length\n      });\n    } // Returns the props without default props to apply search relevancy settings for RS API\n\n  }, {\n    key: 'absProps',\n    get: function get() {\n      var _props$originalProps = this.props.originalProps,\n          includeFields = _props$originalProps.includeFields,\n          excludeFields = _props$originalProps.excludeFields,\n          size = _props$originalProps.size;\n      return {\n        includeFields: includeFields || undefined,\n        excludeFields: excludeFields || undefined,\n        size: size || undefined\n      };\n    }\n  }, {\n    key: 'showInfiniteScroll',\n    get: function get() {\n      // Pagination has higher priority then infinite scroll\n      var infiniteScroll = this.props.infiniteScroll;\n      return infiniteScroll && !this.shouldRenderPagination;\n    }\n  }, {\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _helper.hasCustomRenderer)(this.props);\n    } // only used for SSR\n\n  }]);\n\n  return ReactiveList;\n}(_react.Component);\n\nReactiveList.ResultCardsWrapper = function (_ref6) {\n  var children = _ref6.children,\n      rest = _objectWithoutProperties(_ref6, ['children']);\n\n  return (0, _core.jsx)('div', _extends({\n    css: _Card.container\n  }, rest), children);\n};\n\nReactiveList.ResultListWrapper = function (_ref7) {\n  var children = _ref7.children,\n      rest = _objectWithoutProperties(_ref7, ['children']);\n\n  return (0, _core.jsx)('div', _extends({\n    css: _ListItem.container\n  }, rest), children);\n};\n\nReactiveList.generateQueryOptions = function (props) {\n  // simulate default (includeFields and excludeFields) props to generate consistent query\n  var options = (0, _helper.getQueryOptions)(_extends({\n    includeFields: ['*'],\n    excludeFields: []\n  }, props));\n  var size = props.size,\n      dataField = props.dataField,\n      defaultSortOption = props.defaultSortOption,\n      sortOptionsNew = props.sortOptions,\n      currentPage = props.currentPage,\n      sortBy = props.sortBy;\n  options.from = currentPage ? (currentPage - 1) * (size || 10) : 0;\n  options.size = size || 10;\n\n  var getSortOption = function getSortOption() {\n    var _ref9;\n\n    if (defaultSortOption) {\n      var sortOption = sortOptionsNew.find(function (option) {\n        return option.label === defaultSortOption;\n      });\n\n      if (sortOption) {\n        var _ref8;\n\n        return _ref8 = {}, _ref8[sortOption.dataField] = {\n          order: sortOption.sortBy\n        }, _ref8;\n      }\n    }\n\n    return _ref9 = {}, _ref9[sortOptionsNew[0].dataField] = {\n      order: sortOptionsNew[0].sortBy\n    }, _ref9;\n  };\n\n  if (sortOptionsNew) {\n    options.sort = [getSortOption()];\n  } else if (sortBy) {\n    var _ref10;\n\n    options.sort = [(_ref10 = {}, _ref10[dataField] = {\n      order: sortBy\n    }, _ref10)];\n  }\n\n  return options;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.getAggsQuery = function () {\n    var _props2 = _this3.props,\n        size = _props2.size,\n        aggregationField = _props2.aggregationField,\n        afterKey = _props2.afterKey;\n    var queryOptions = {\n      size: size\n    };\n\n    if (aggregationField) {\n      queryOptions.aggs = (0, _helper.getCompositeAggsQuery)({\n        props: _this3.props,\n        after: afterKey ? {\n          after: afterKey\n        } : null,\n        showTopHits: true\n      }).aggs;\n    }\n\n    return queryOptions;\n  };\n\n  this.getAllData = function () {\n    var _props3 = _this3.props,\n        size = _props3.size,\n        promotedResults = _props3.promotedResults,\n        aggregationData = _props3.aggregationData,\n        customData = _props3.customData;\n    var currentPage = _this3.state.currentPage;\n    var results = (0, _helper.parseHits)(_this3.props.hits) || [];\n    var parsedPromotedResults = (0, _helper.parseHits)(promotedResults || []) || [];\n    var filteredResults = results;\n    var base = currentPage * size;\n\n    if (parsedPromotedResults.length) {\n      var ids = parsedPromotedResults.map(function (item) {\n        return item._id;\n      }).filter(Boolean);\n\n      if (ids) {\n        filteredResults = filteredResults.filter(function (item) {\n          return !ids.includes(item._id);\n        });\n      }\n\n      filteredResults = [].concat(parsedPromotedResults, filteredResults);\n    }\n\n    return {\n      results: results,\n      filteredResults: filteredResults,\n      promotedResults: parsedPromotedResults,\n      customData: customData || {},\n      aggregationData: aggregationData || [],\n      loadMore: _this3.loadMore,\n      base: base,\n      triggerClickAnalytics: _this3.triggerClickAnalytics\n    };\n  };\n\n  this.scrollToTop = function () {\n    if (_this3.domNode === window) {\n      document.documentElement.scrollTop = 0;\n      document.body.scrollTop = 0;\n    } else {\n      _this3.domNode.scrollTop = 0;\n    }\n  };\n\n  this.scrollHandler = function () {\n    var renderLoader = window.innerHeight + window.pageYOffset + 300 >= document.body.scrollHeight;\n\n    if (_this3.props.scrollTarget) {\n      renderLoader = _this3.domNode.clientHeight + _this3.domNode.scrollTop + 300 >= _this3.domNode.scrollHeight;\n    }\n\n    if (!_this3.props.isLoading && renderLoader) {\n      _this3.loadMore();\n    }\n  };\n\n  this.loadMore = function () {\n    if (_this3.props.aggregationField && !_this3.props.afterKey) return;\n\n    if (_this3.props.hits && _this3.props.total > _this3.props.hits.length) {\n      var value = _this3.state.from + _this3.props.size; // If current hits length is less than the current from then it means\n      // that there are no results present.\n      // It can happen because of many reasons some of them are:\n      // 1. Using the `collapse` query to remove results\n      // 2. Shard failure\n      // In above cases infinite scroll should not load more results that can\n      // cause the resetting of the `from` value\n\n      if (_this3.props.hits.length < value) {\n        return;\n      }\n\n      var options = _extends({}, (0, _helper.getQueryOptions)(_this3.props), _this3.getAggsQuery());\n\n      _this3.setState({\n        from: value\n      });\n\n      _this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n        from: value\n      }), true, !!_this3.props.aggregationField);\n    }\n  };\n\n  this.setPage = function (page) {\n    // onPageClick will be called everytime a pagination button is clicked\n    if (page !== _this3.state.currentPage) {\n      var onPageClick = _this3.props.onPageClick;\n\n      if (onPageClick) {\n        onPageClick(page + 1);\n      }\n\n      var value = _this3.props.size * page;\n      var options = (0, _helper.getQueryOptions)(_this3.props);\n      options.from = _this3.state.from;\n\n      _this3.setState({\n        from: value,\n        currentPage: page\n      }, function () {\n        _this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n          from: value\n        }), false);\n\n        _this3.updatePageURL(page);\n      });\n    }\n  };\n\n  this.renderResultStats = function () {\n    var _props4 = _this3.props,\n        hits = _props4.hits,\n        promotedResults = _props4.promotedResults,\n        total = _props4.total;\n    var shouldStatsVisible = hits && hits.length || promotedResults && promotedResults.length;\n\n    if (_this3.props.renderResultStats && shouldStatsVisible) {\n      return _this3.props.renderResultStats(_this3.stats);\n    }\n\n    if (total) {\n      return (0, _core.jsx)('p', {\n        css: _results.resultStats,\n        className: (0, _helper.getClassName)(_this3.props.innerClass, 'resultStats')\n      }, _this3.props.total, ' results found in ', _this3.props.time || 0, 'ms');\n    }\n\n    return null;\n  };\n\n  this.renderNoResults = function () {\n    return (0, _core.jsx)('div', {\n      className: (0, _helper.getClassName)(_this3.props.innerClass, 'noResults') || null\n    }, _this3.props.renderNoResults());\n  };\n\n  this.handleSortChange = function (e) {\n    var _ref11;\n\n    var index = e.target.value;\n    var options = (0, _helper.getQueryOptions)(_this3.props); // This fixes issue #371 (where sorting a multi-result page with infinite loader breaks)\n\n    options.from = 0;\n    var sortField = _this3.props.sortOptions[index].dataField;\n    var sortBy = _this3.props.sortOptions[index].sortBy;\n    options.sort = [(_ref11 = {}, _ref11[sortField] = {\n      order: sortBy\n    }, _ref11)]; // To handle sortOptions for RS API\n\n    _this3.props.updateComponentProps(_this3.props.componentId, Object.assign({}, _this3.props, {\n      dataField: sortField\n    }, {\n      sortBy: sortBy\n    }, _this3.absProps), _constants.componentTypes.reactiveList);\n\n    _this3.props.setQueryOptions(_this3.props.componentId, options, true);\n\n    _this3.sortOptionIndex = index;\n\n    _this3.setState({\n      currentPage: 0,\n      from: 0\n    }, function () {\n      _this3.updatePageURL(0);\n    });\n  };\n\n  this.updatePageURL = function (page) {\n    try {\n      if (_this3.props.sortOptions && _this3.props.sortOptions[_this3.sortOptionIndex]) {\n        var sortOption = _this3.props.sortOptions[_this3.sortOptionIndex].label;\n\n        _this3.props.setPageURL(_this3.props.componentId + 'sortOption', sortOption, _this3.props.componentId + 'sortOption', false, _this3.props.URLParams);\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log('error\\', ' + error);\n    }\n\n    _this3.props.setPageURL(_this3.props.componentId, page + 1, _this3.props.componentId, false, _this3.props.URLParams);\n  };\n\n  this.triggerClickAnalytics = function (searchPosition, documentId) {\n    var docId = documentId;\n\n    if (!docId) {\n      var _getData = _this3.getData(),\n          data = _getData.data;\n\n      var hitData = data.find(function (hit) {\n        return hit._click_id === searchPosition;\n      });\n\n      if (hitData && hitData._id) {\n        docId = hitData._id;\n      }\n    }\n\n    _this3.props.triggerAnalytics(searchPosition, docId);\n  };\n\n  this.renderSortOptions = function () {\n    return (0, _core.jsx)('select', {\n      css: _results.sortOptions,\n      className: (0, _helper.getClassName)(_this3.props.innerClass, 'sortOptions'),\n      name: 'sort-options',\n      'aria-label': 'Sort options',\n      onChange: _this3.handleSortChange,\n      value: _this3.sortOptionIndex\n    }, _this3.props.sortOptions.map(function (sort, index) {\n      return (0, _core.jsx)('option', {\n        key: sort.label,\n        value: index\n      }, sort.label);\n    }));\n  };\n\n  this.triggerExportCSV = function () {\n    var _props5 = _this3.props,\n        exportData = _props5.exportData,\n        componentId = _props5.componentId,\n        total = _props5.total;\n\n    _this3.setState({\n      exportLoading: true\n    });\n\n    exportData(componentId, '', total).then(function (res) {\n      var arrayOfJson = res.map(function (item) {\n        return (0, _helper.flatten)(item);\n      }); // convert JSON to CSV\n\n      var replacer = function replacer(key, value) {\n        return value === null ? '' : value;\n      }; // specify how you want to handle null values here\n\n\n      var header = [];\n      arrayOfJson.forEach(function (item) {\n        var keys = Object.keys(item); // 👇️ {'a', 'b', 'c'}\n\n        var set = new Set([].concat(keys, header));\n        header = Array.from(set);\n      });\n      header = header.filter(function (item) {\n        return (typeof item === 'undefined' ? 'undefined' : _typeof(item)) !== 'object';\n      });\n      var csv = arrayOfJson.map(function (row) {\n        return header.map(function (fieldName) {\n          return JSON.stringify(row[fieldName], replacer);\n        }).join(',');\n      });\n      csv.unshift(header.join(','));\n      csv = csv.join('\\r\\n'); // Create link and download\n\n      (0, _helper.saveDataAsFile)('csvData', csv, 'csv');\n    }).catch(function (error) {\n      console.error(error, error.stack);\n    }).finally(function () {\n      _this3.setState({\n        exportLoading: false\n      });\n    });\n  };\n\n  this.triggerExportJSON = function () {\n    var _props6 = _this3.props,\n        exportData = _props6.exportData,\n        componentId = _props6.componentId,\n        total = _props6.total;\n\n    _this3.setState({\n      exportLoading: true\n    });\n\n    exportData(componentId, '', total).then(function (res) {\n      var arrayOfJson = res;\n      (0, _helper.saveDataAsFile)('jsonData', arrayOfJson, 'json');\n    }).catch(function (error) {\n      console.error(error, error.stack);\n    }).finally(function () {\n      _this3.setState({\n        exportLoading: false\n      });\n    });\n  };\n\n  this.renderExportOptions = function () {\n    var exportLoading = _this3.state.exportLoading;\n\n    if (typeof _this3.props.renderExport === 'function') {\n      return _this3.props.renderExport({\n        triggerExportCSV: _this3.triggerExportCSV,\n        triggerExportJSON: _this3.triggerExportJSON\n      });\n    }\n\n    return (0, _core.jsx)(_Flex2.default, {\n      labelPosition: 'left',\n      flex: '1 1 auto',\n      className: (0, _helper.getClassName)(_this3.props.innerClass, 'export')\n    }, (0, _core.jsx)('span', null, exportLoading ? 'Exporting... ' : 'Export: ', ' '), (0, _core.jsx)(_Button2.default, {\n      style: {\n        gap: '2px'\n      },\n      isLinkType: true,\n      onClick: _this3.triggerExportCSV,\n      className: '' + (exportLoading ? 'disabled' : '')\n    }, 'CSV ', (0, _core.jsx)(_DownloadSvg2.default, null)), (0, _core.jsx)(_Button2.default, {\n      style: {\n        gap: '2px',\n        paddingLeft: '0'\n      },\n      isLinkType: true,\n      onClick: _this3.triggerExportJSON,\n      className: '' + (exportLoading ? 'disabled' : '')\n    }, 'JSON ', (0, _core.jsx)(_DownloadSvg2.default, null)));\n  };\n\n  this.renderError = function () {\n    var _props7 = _this3.props,\n        error = _props7.error,\n        isLoading = _props7.isLoading,\n        renderError = _props7.renderError;\n\n    if (renderError && error && !isLoading) {\n      return (0, _helper.isFunction)(renderError) ? renderError(error) : renderError;\n    }\n\n    return null;\n  };\n\n  this.withClickIds = function (results) {\n    var _getAllData3 = _this3.getAllData(),\n        base = _getAllData3.base;\n\n    return results.map(function (result, index) {\n      return _extends({}, result, {\n        _click_id: base + index\n      });\n    });\n  };\n\n  this.getData = function () {\n    var _getAllData4 = _this3.getAllData(),\n        filteredResults = _getAllData4.filteredResults,\n        promotedResults = _getAllData4.promotedResults,\n        aggregationData = _getAllData4.aggregationData,\n        customData = _getAllData4.customData;\n\n    return {\n      data: _this3.withClickIds(filteredResults),\n      aggregationData: _this3.withClickIds(aggregationData || []),\n      promotedData: _this3.withClickIds(promotedResults || []),\n      customData: customData,\n      rawData: _this3.props.rawData,\n      resultStats: _this3.stats,\n      settings: _this3.props.settings,\n      triggerExportCSV: _this3.triggerExportCSV,\n      triggerExportJSON: _this3.triggerExportJSON,\n      setPage: _this3.setPage\n    };\n  };\n\n  this.getComponent = function () {\n    var _props8 = _this3.props,\n        error = _props8.error,\n        isLoading = _props8.isLoading;\n\n    var data = _extends({\n      error: error,\n      loading: isLoading,\n      loadMore: _this3.loadMore,\n      triggerClickAnalytics: _this3.triggerClickAnalytics\n    }, _this3.getData());\n\n    return (0, _helper.getComponent)(data, _this3.props);\n  };\n};\n\nReactiveList.propTypes = {\n  loadMore: _types2.default.funcRequired,\n  onQueryChange: _types2.default.func,\n  onError: _types2.default.func,\n  setPageURL: _types2.default.func,\n  setQueryOptions: _types2.default.funcRequired,\n  setDefaultQuery: _types2.default.funcRequired,\n  updateComponentProps: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  currentPage: _types2.default.number,\n  hits: _types2.default.hits,\n  rawData: _types2.default.rawData,\n  isLoading: _types2.default.bool,\n  includeFields: _types2.default.includeFields,\n  promotedResults: _types2.default.hits,\n  customData: _types2.default.title,\n  time: _types2.default.number,\n  total: _types2.default.number,\n  hidden: _types2.default.number,\n  config: _types2.default.props,\n  analytics: _types2.default.bool,\n  queryLog: _types2.default.props,\n  settings: _types2.default.props,\n  error: _types2.default.title,\n  headers: _types2.default.headers,\n  // component props\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  children: _types2.default.func,\n  dataField: _types2.default.stringRequired,\n  aggregationField: _types2.default.string,\n  aggregationSize: _types2.default.number,\n  aggregationData: _types2.default.aggregationData,\n  defaultPage: _types2.default.number,\n  defaultQuery: _types2.default.func,\n  excludeFields: _types2.default.excludeFields,\n  innerClass: _types2.default.style,\n  infiniteScroll: _types2.default.bool,\n  listClass: _types2.default.string,\n  loader: _types2.default.title,\n  render: _types2.default.func,\n  renderItem: _types2.default.func,\n  renderError: _types2.default.title,\n  renderPagination: _types2.default.func,\n  onData: _types2.default.func,\n  renderNoResults: _types2.default.title,\n  onPageChange: _types2.default.func,\n  onPageClick: _types2.default.func,\n  pages: _types2.default.number,\n  pagination: _types2.default.bool,\n  paginationAt: _types2.default.paginationAt,\n  showEndPage: _types2.default.bool,\n  react: _types2.default.react,\n  renderResultStats: _types2.default.func,\n  scrollOnChange: _types2.default.bool,\n  scrollTarget: _types2.default.string,\n  showLoader: _types2.default.bool,\n  showResultStats: _types2.default.bool,\n  size: _types2.default.number,\n  sortBy: _types2.default.sortBy,\n  sortOptions: _types2.default.sortOptions,\n  style: _types2.default.style,\n  triggerAnalytics: _types2.default.funcRequired,\n  URLParams: _types2.default.bool,\n  defaultSortOption: _types2.default.string,\n  afterKey: _types2.default.props,\n  distinctField: _types2.default.string,\n  distinctFieldConfig: _types2.default.componentObject,\n  highlight: _types2.default.bool,\n  highlightConfig: _types2.default.componentObject,\n  // eslint-disable-next-line\n  originalProps: _types2.default.any,\n  index: _types2.default.string,\n  urlSortOption: _types2.default.string,\n  showExport: _types2.default.bool,\n  renderExport: _types2.default.func,\n  exportData: _types2.default.funcRequired,\n  endpoint: _types2.default.endpoint\n};\nReactiveList.defaultProps = {\n  className: null,\n  currentPage: 0,\n  listClass: '',\n  pages: 5,\n  infiniteScroll: true,\n  pagination: false,\n  analytics: false,\n  paginationAt: 'bottom',\n  showEndPage: false,\n  includeFields: ['*'],\n  excludeFields: [],\n  showResultStats: true,\n  size: 10,\n  style: {},\n  URLParams: false,\n  showLoader: true,\n  renderNoResults: function renderNoResults() {\n    return 'No Results found.';\n  },\n  scrollOnChange: true,\n  defaultSortOption: null,\n  originalProps: {},\n  showExport: false\n}; // Add componentType for SSR\n\nReactiveList.componentType = _constants.componentTypes.reactiveList;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    defaultPage: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value - 1 || -1,\n    urlSortOption: state.selectedValues[props.componentId + 'sortOption'] && state.selectedValues[props.componentId + 'sortOption'].value,\n    hits: state.hits[props.componentId] && state.hits[props.componentId].hits,\n    rawData: state.rawData[props.componentId],\n    analytics: state.config && state.config.analytics,\n    aggregationData: state.compositeAggregations[props.componentId],\n    isLoading: state.isLoading[props.componentId] || false,\n    time: state.hits[props.componentId] && state.hits[props.componentId].time,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    config: state.config,\n    queryLog: state.queryLog[props.componentId] && state.queryLog[props.componentId][props.componentId],\n    error: state.error[props.componentId],\n    promotedResults: state.promotedResults[props.componentId],\n    customData: state.customData[props.componentId],\n    settings: state.settings[props.componentId],\n    afterKey: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.aggregationField] && state.aggregations[props.componentId][props.aggregationField].after_key\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    },\n    updateComponentProps: function updateComponentProps(component, options, componentType) {\n      return dispatch((0, _actions.updateComponentProps)(component, options, componentType));\n    },\n    loadMore: function loadMore(component, options, append, appendAggs) {\n      return dispatch((0, _actions.loadMore)(component, options, append, appendAggs));\n    },\n    setPageURL: function setPageURL(component, value, label, showFilter, URLParams) {\n      return dispatch((0, _actions.setValue)(component, value, label, showFilter, URLParams));\n    },\n    setQueryOptions: function setQueryOptions(component, props, execute) {\n      return dispatch((0, _actions.setQueryOptions)(component, props, execute));\n    },\n    updateQuery: function updateQuery(updateQueryObject, execute) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject, execute));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition, docId) {\n      return dispatch((0, _actions.recordResultClick)(searchPosition, docId));\n    },\n    exportData: function exportData(component, cursor, total) {\n      return dispatch((0, _actions.loadDataToExport)(component, cursor, total));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  var includeFields = props.includeFields,\n      excludeFields = props.excludeFields,\n      size = props.size;\n  return (0, _core.jsx)(ReactiveList, _extends({\n    ref: props.myForwardedRef\n  }, props, {\n    originalProps: {\n      includeFields: includeFields,\n      excludeFields: excludeFields,\n      size: size\n    }\n  }));\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(_PreferencesConsumer2.default, {\n    userProps: props\n  }, function (preferenceProps) {\n    return (0, _core.jsx)(_ComponentWrapper2.default, _extends({\n      internalComponent: true,\n      componentType: _constants.componentTypes.reactiveList\n    }, preferenceProps), function (componentProps) {\n      return (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n        myForwardedRef: ref\n      }));\n    });\n  });\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, ReactiveList);\nForwardRefComponent.displayName = 'ReactiveList';\nexports.default = ForwardRefComponent;","map":{"version":3,"names":["exports","__esModule","_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_core","require","_react","_react2","_interopRequireDefault","_hoistNonReactStatics","_hoistNonReactStatics2","_emotionTheming","_actions","_helper","_types","_types2","_constants","_transform","_Pagination","_Pagination2","_PoweredBy","_PoweredBy2","_Flex","_Flex2","_results","_Card","_ListItem","_utils","_Results","_Results2","_PreferencesConsumer","_PreferencesConsumer2","_ComponentWrapper","_ComponentWrapper2","_Button","_Button2","_DownloadSvg","_DownloadSvg2","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","value","setPrototypeOf","__proto__","ReactiveList","_Component","_this","_initialiseProps","pagination","aggregationField","console","warn","currentPage","defaultPage","Math","max","initialFrom","size","shouldRenderPagination","state","from","exportLoading","internalComponent","getInternalComponentID","componentId","sortOptionIndex","defaultSortOption","sortOptions","findIndex","s","label","urlSortOption","options","getQueryOptions","_ref","sortField","dataField","sortBy","sort","order","updateComponentProps","absProps","componentTypes","reactiveList","_ref2","defaultQuery","getOptionsFromQuery","_ref3","query","execute","setQueryOptions","getAggsQuery","updateQuery","updateDefaultQuery","componentDidMount","domNode","window","showInfiniteScroll","scrollTarget","String","document","getElementById","Element","HTMLDocument","addEventListener","scrollHandler","componentDidUpdate","prevProps","_this2","totalPages","ceil","total","onData","checkSomePropChange","getData","isEqual","includeFields","excludeFields","highlight","highlightConfig","_ref4","_ref5","_options","queryOptions","setState","updatePageURL","isLoading","hits","onPageChange","scrollOnChange","scrollToTop","setPage","queryLog","componentWillUnmount","removeEventListener","render","_props","renderItem","error","renderPagination","analytics","_getAllData","getAllData","filteredResults","paginationProps","pages","showEndPage","innerClass","fragmentName","paginationElement","jsx","base","style","className","loader","renderError","labelPosition","getClassName","justifyContent","renderSortOptions","showExport","renderExportOptions","showResultStats","renderResultStats","renderNoResults","paginationAt","hasCustomRender","hasCustomRenderer","getComponent","listClass","triggerClickAnalytics","showLoader","textAlign","margin","color","show","config","url","endsWith","get","_getAllData2","getResultStats","displayedResults","_props$originalProps","originalProps","undefined","infiniteScroll","Component","ResultCardsWrapper","_ref6","children","rest","css","container","ResultListWrapper","_ref7","generateQueryOptions","sortOptionsNew","getSortOption","_ref9","sortOption","find","option","_ref8","_ref10","_this3","_props2","afterKey","aggs","getCompositeAggsQuery","after","showTopHits","_props3","promotedResults","aggregationData","customData","results","parseHits","parsedPromotedResults","ids","map","item","_id","filter","Boolean","includes","concat","loadMore","documentElement","scrollTop","body","renderLoader","innerHeight","pageYOffset","scrollHeight","clientHeight","page","onPageClick","_props4","shouldStatsVisible","stats","resultStats","time","handleSortChange","e","_ref11","index","setPageURL","URLParams","log","searchPosition","documentId","docId","_getData","data","hitData","hit","_click_id","triggerAnalytics","name","onChange","triggerExportCSV","_props5","exportData","then","res","arrayOfJson","flatten","replacer","header","forEach","set","Set","Array","csv","row","fieldName","JSON","stringify","join","unshift","saveDataAsFile","catch","stack","finally","triggerExportJSON","_props6","renderExport","flex","gap","isLinkType","onClick","paddingLeft","_props7","isFunction","withClickIds","_getAllData3","result","_getAllData4","promotedData","rawData","settings","_props8","loading","propTypes","funcRequired","onQueryChange","func","onError","setDefaultQuery","number","bool","title","hidden","headers","string","stringRequired","aggregationSize","react","distinctField","distinctFieldConfig","componentObject","any","endpoint","defaultProps","componentType","mapStateToProps","selectedValues","compositeAggregations","aggregations","after_key","mapDispatchtoProps","dispatch","component","append","appendAggs","showFilter","setValue","updateQueryObject","recordResultClick","cursor","loadDataToExport","ConnectedComponent","connect","withTheme","ref","myForwardedRef","ForwardRefComponent","forwardRef","userProps","preferenceProps","componentProps","displayName"],"sources":["/Users/billionare/Documents/eshakids/eshaKids/node_modules/@appbaseio/reactivesearch/lib/components/result/ReactiveList.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _Pagination = require('./addons/Pagination');\n\nvar _Pagination2 = _interopRequireDefault(_Pagination);\n\nvar _PoweredBy = require('./addons/PoweredBy');\n\nvar _PoweredBy2 = _interopRequireDefault(_PoweredBy);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _results = require('../../styles/results');\n\nvar _Card = require('../../styles/Card');\n\nvar _ListItem = require('../../styles/ListItem');\n\nvar _utils = require('../../utils');\n\nvar _Results = require('./addons/Results');\n\nvar _Results2 = _interopRequireDefault(_Results);\n\nvar _PreferencesConsumer = require('../basic/PreferencesConsumer');\n\nvar _PreferencesConsumer2 = _interopRequireDefault(_PreferencesConsumer);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _Button = require('../../styles/Button');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _DownloadSvg = require('../shared/DownloadSvg');\n\nvar _DownloadSvg2 = _interopRequireDefault(_DownloadSvg);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsxRuntime classic */\n/** @jsx jsx */\n\n\nvar ReactiveList = function (_Component) {\n\t_inherits(ReactiveList, _Component);\n\n\tfunction ReactiveList(props) {\n\t\t_classCallCheck(this, ReactiveList);\n\n\t\t// no support for pagination and aggregationField together\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tif (props.pagination && props.aggregationField) {\n\t\t\tconsole.warn('Pagination is not supported when aggregationField is present. The list will be rendered with infinite scroll');\n\t\t}\n\n\t\tvar currentPage = 0;\n\t\tif (_this.props.defaultPage >= 0) {\n\t\t\tcurrentPage = _this.props.defaultPage;\n\t\t} else if (_this.props.currentPage) {\n\t\t\tcurrentPage = Math.max(_this.props.currentPage - 1, 0);\n\t\t}\n\t\t_this.initialFrom = currentPage * props.size; // used for page resetting on query change\n\t\t_this.shouldRenderPagination = props.pagination && !props.aggregationField;\n\t\t_this.state = {\n\t\t\tfrom: _this.initialFrom,\n\t\t\tcurrentPage: currentPage,\n\t\t\texportLoading: false\n\t\t};\n\t\t_this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n\t\t_this.sortOptionIndex = _this.props.defaultSortOption ? _this.props.sortOptions.findIndex(function (s) {\n\t\t\treturn s.label === _this.props.defaultSortOption;\n\t\t}) : 0;\n\t\tif (_this.props.urlSortOption) {\n\t\t\t_this.sortOptionIndex = _this.props.sortOptions.findIndex(function (s) {\n\t\t\t\treturn s.label === _this.props.urlSortOption;\n\t\t\t}) || 0;\n\t\t}\n\t\tvar options = (0, _helper.getQueryOptions)(_this.props);\n\t\toptions.from = _this.state.from;\n\t\tif (_this.props.sortOptions) {\n\t\t\tvar _ref;\n\n\t\t\tvar sortField = _this.props.sortOptions[_this.sortOptionIndex].dataField;\n\t\t\tvar sortBy = _this.props.sortOptions[_this.sortOptionIndex].sortBy;\n\t\t\toptions.sort = [(_ref = {}, _ref[sortField] = {\n\t\t\t\torder: sortBy\n\t\t\t}, _ref)];\n\t\t\t// To handle sort options for RS API\n\t\t\t_this.props.updateComponentProps(_this.props.componentId, Object.assign({}, _this.props, { dataField: sortField }, { sortBy: sortBy }, _this.absProps), _constants.componentTypes.reactiveList);\n\t\t} else if (_this.props.sortBy) {\n\t\t\tvar _ref2;\n\n\t\t\toptions.sort = [(_ref2 = {}, _ref2[_this.props.dataField] = {\n\t\t\t\torder: _this.props.sortBy\n\t\t\t}, _ref2)];\n\t\t}\n\n\t\t// Override sort query with defaultQuery's sort if defined\n\t\t_this.defaultQuery = null;\n\t\tif (_this.props.defaultQuery) {\n\t\t\t_this.defaultQuery = _this.props.defaultQuery();\n\t\t\toptions = _extends({}, options, (0, _helper.getOptionsFromQuery)(_this.defaultQuery));\n\t\t}\n\n\t\tvar _ref3 = _this.defaultQuery || {},\n\t\t    query = _ref3.query;\n\n\t\t// execute is set to false at the time of mount\n\t\t// to avoid firing (multiple) partial queries.\n\t\t// Hence we are building the query in parts here\n\t\t// and only executing it with setReact() at core\n\n\n\t\tvar execute = false;\n\n\t\t_this.props.setQueryOptions(_this.props.componentId, _extends({}, options, _this.getAggsQuery()), execute);\n\n\t\tif (_this.defaultQuery) {\n\t\t\t_this.props.updateQuery({\n\t\t\t\tcomponentId: _this.internalComponent,\n\t\t\t\tquery: query\n\t\t\t}, execute);\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(_this.props.componentId, _this.props);\n\t\t} else {\n\t\t\t_this.props.updateQuery({\n\t\t\t\tcomponentId: _this.internalComponent,\n\t\t\t\tquery: null\n\t\t\t}, execute);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tReactiveList.prototype.componentDidMount = function componentDidMount() {\n\t\tthis.domNode = window;\n\t\tif (this.showInfiniteScroll) {\n\t\t\tvar scrollTarget = this.props.scrollTarget;\n\n\t\t\tif (typeof scrollTarget === 'string' || scrollTarget instanceof String) {\n\t\t\t\tthis.domNode = document.getElementById(scrollTarget);\n\t\t\t} else if (scrollTarget instanceof Element || scrollTarget instanceof HTMLDocument) {\n\t\t\t\tthis.domNode = scrollTarget;\n\t\t\t}\n\t\t\tthis.domNode.addEventListener('scroll', this.scrollHandler);\n\t\t}\n\t};\n\n\tReactiveList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\tvar totalPages = Math.ceil(this.props.total / this.props.size) || 0;\n\t\tif (this.props.onData) {\n\t\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['hits', 'promotedResults', 'customData', 'total', 'size', 'time', 'hidden'], function () {\n\t\t\t\t_this2.props.onData(_this2.getData());\n\t\t\t});\n\t\t}\n\t\tif (!(0, _helper.isEqual)(this.props.sortOptions, prevProps.sortOptions) || this.props.sortBy !== prevProps.sortBy || this.props.size !== prevProps.size || !(0, _helper.isEqual)(this.props.dataField, prevProps.dataField) || !(0, _helper.isEqual)(this.props.includeFields, prevProps.includeFields) || !(0, _helper.isEqual)(this.props.excludeFields, prevProps.excludeFields) || !(0, _helper.isEqual)(this.props.highlight, prevProps.highlight) || !(0, _helper.isEqual)(this.props.highlightConfig, prevProps.highlightConfig)) {\n\t\t\tvar options = (0, _helper.getQueryOptions)(this.props);\n\t\t\toptions.from = this.state.from;\n\t\t\tif (this.props.sortOptions) {\n\t\t\t\tvar _ref4;\n\n\t\t\t\toptions.sort = [(_ref4 = {}, _ref4[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n\t\t\t\t\torder: this.props.sortOptions[this.sortOptionIndex].sortBy\n\t\t\t\t}, _ref4)];\n\t\t\t} else if (this.props.sortBy) {\n\t\t\t\tvar _ref5;\n\n\t\t\t\toptions.sort = [(_ref5 = {}, _ref5[this.props.dataField] = {\n\t\t\t\t\torder: this.props.sortBy\n\t\t\t\t}, _ref5)];\n\t\t\t}\n\t\t\tthis.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), true);\n\t\t}\n\n\t\tif (this.props.defaultQuery && !(0, _helper.isEqual)(this.props.defaultQuery(), this.defaultQuery)) {\n\t\t\tvar _options = (0, _helper.getQueryOptions)(this.props);\n\t\t\t_options.from = 0;\n\t\t\tthis.defaultQuery = this.props.defaultQuery();\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(this.props.componentId, this.props);\n\n\t\t\tvar query = this.defaultQuery.query;\n\n\n\t\t\tvar queryOptions = (0, _helper.getOptionsFromQuery)(this.defaultQuery);\n\t\t\tif (queryOptions) {\n\t\t\t\t_options = _extends({}, _options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n\t\t\t\tthis.props.setQueryOptions(this.props.componentId, _options, !query);\n\t\t\t}\n\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: query\n\t\t\t}, true);\n\n\t\t\t// reset page because of query change\n\t\t\t// eslint-disable-next-line\n\t\t\tthis.setState({\n\t\t\t\tcurrentPage: 0,\n\t\t\t\tfrom: 0\n\t\t\t}, function () {\n\t\t\t\t_this2.updatePageURL(0);\n\t\t\t});\n\t\t}\n\n\t\tif (this.shouldRenderPagination) {\n\t\t\t// called when page is changed\n\t\t\tif (this.props.isLoading && (this.props.hits || prevProps.hits)) {\n\t\t\t\tif (this.props.onPageChange) {\n\t\t\t\t\tthis.props.onPageChange(this.state.currentPage + 1, totalPages);\n\t\t\t\t} else if (this.props.scrollOnChange && this.props.pagination) {\n\t\t\t\t\tthis.scrollToTop();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.props.currentPage !== prevProps.currentPage && this.props.currentPage > 0 && this.props.currentPage <= totalPages) {\n\t\t\t\tthis.setPage(this.props.currentPage - 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.showInfiniteScroll) {\n\t\t\tif (this.props.hits && prevProps.hits) {\n\t\t\t\tif (\n\t\t\t\t// new items are loaded (from: 0)\n\t\t\t\tthis.props.hits.length < prevProps.hits.length\n\t\t\t\t// new items are loaded and 'from' hasn't changed\n\t\t\t\t|| this.props.hits.length === prevProps.hits.length && this.props.hits !== prevProps.hits) {\n\t\t\t\t\t// query has changed\n\t\t\t\t\tif (this.props.scrollOnChange) {\n\t\t\t\t\t\tthis.scrollToTop();\n\t\t\t\t\t}\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tfrom: 0\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (prevProps.queryLog && this.props.queryLog && prevProps.queryLog !== this.props.queryLog) {\n\t\t\t// usecase:\n\t\t\t// - query has changed from non-null prev query\n\n\t\t\tif (this.props.queryLog.from !== this.state.from) {\n\t\t\t\t// query's 'from' key doesn't match the state's 'from' key,\n\t\t\t\t// i.e. this query change was not triggered by the page change (loadMore)\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrentPage: 0\n\t\t\t\t}, function () {\n\t\t\t\t\t_this2.updatePageURL(0);\n\t\t\t\t});\n\n\t\t\t\tif (this.props.onPageChange) {\n\t\t\t\t\tthis.props.onPageChange(1, totalPages);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// handle window url history change (on native back and forth interactions)\n\t\tif (this.state.currentPage !== this.props.defaultPage && this.props.defaultPage !== prevProps.defaultPage) {\n\t\t\tthis.setPage(this.props.defaultPage >= 0 ? this.props.defaultPage : 0);\n\t\t}\n\t};\n\n\tReactiveList.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tif (this.domNode) {\n\t\t\tthis.domNode.removeEventListener('scroll', this.scrollHandler);\n\t\t}\n\t};\n\n\t// Calculate results\n\n\n\tReactiveList.prototype.render = function render() {\n\t\tvar _props = this.props,\n\t\t    renderItem = _props.renderItem,\n\t\t    size = _props.size,\n\t\t    error = _props.error,\n\t\t    renderPagination = _props.renderPagination,\n\t\t    analytics = _props.analytics;\n\t\tvar currentPage = this.state.currentPage;\n\n\t\tvar _getAllData = this.getAllData(),\n\t\t    filteredResults = _getAllData.filteredResults;\n\n\t\tvar paginationProps = {\n\t\t\tpages: this.props.pages,\n\t\t\ttotalPages: Math.ceil(this.props.total / size),\n\t\t\tcurrentPage: this.state.currentPage,\n\t\t\tsetPage: this.setPage,\n\t\t\tshowEndPage: this.props.showEndPage,\n\t\t\tinnerClass: this.props.innerClass,\n\t\t\tfragmentName: this.props.componentId\n\t\t};\n\t\tvar paginationElement = renderPagination ? renderPagination(paginationProps) : (0, _core.jsx)(_Pagination2.default, paginationProps);\n\n\t\tvar base = currentPage * size;\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.isLoading && this.shouldRenderPagination && this.props.loader,\n\t\t\tthis.renderError(),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_Flex2.default,\n\t\t\t\t{\n\t\t\t\t\tlabelPosition: this.props.sortOptions ? 'right' : 'left',\n\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'resultsInfo'),\n\t\t\t\t\tjustifyContent: 'space-between'\n\t\t\t\t},\n\t\t\t\tthis.props.sortOptions ? this.renderSortOptions() : null,\n\t\t\t\tthis.props.showExport && filteredResults.length !== 0 ? this.renderExportOptions() : null,\n\t\t\t\tthis.props.showResultStats ? this.renderResultStats() : null\n\t\t\t),\n\t\t\t!this.props.isLoading && !error && filteredResults.length === 0 ? this.renderNoResults() : null,\n\t\t\tthis.shouldRenderPagination && ['top', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null,\n\t\t\t(0, _core.jsx)(_Results2.default, {\n\t\t\t\tbase: base,\n\t\t\t\tanalytics: analytics,\n\t\t\t\thasCustomRender: this.hasCustomRenderer,\n\t\t\t\tgetComponent: this.getComponent,\n\t\t\t\tlistClass: this.props.listClass,\n\t\t\t\tinnerClass: this.props.innerClass,\n\t\t\t\trenderItem: renderItem,\n\t\t\t\ttriggerClickAnalytics: this.triggerClickAnalytics,\n\t\t\t\tfilteredResults: filteredResults\n\t\t\t}),\n\t\t\tthis.props.showLoader && this.props.isLoading && this.showInfiniteScroll ? this.props.loader || (0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\tmargin: '20px 0',\n\t\t\t\t\t\tcolor: '#666'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'Loading...'\n\t\t\t) // prettier-ignore\n\t\t\t: null,\n\t\t\tthis.shouldRenderPagination && ['bottom', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null,\n\t\t\t(0, _core.jsx)(_PoweredBy2.default, {\n\t\t\t\tshow: !!(this.props.config.url.endsWith('appbase.io') && filteredResults.length),\n\t\t\t\tinnerClass: this.props.innerClass\n\t\t\t})\n\t\t);\n\t};\n\n\t_createClass(ReactiveList, [{\n\t\tkey: 'stats',\n\t\tget: function get() {\n\t\t\tvar currentPage = this.state.currentPage;\n\n\t\t\tvar _getAllData2 = this.getAllData(),\n\t\t\t    filteredResults = _getAllData2.filteredResults;\n\n\t\t\treturn _extends({}, (0, _helper.getResultStats)(this.props), {\n\t\t\t\tcurrentPage: currentPage,\n\t\t\t\tdisplayedResults: filteredResults.length\n\t\t\t});\n\t\t}\n\n\t\t// Returns the props without default props to apply search relevancy settings for RS API\n\n\t}, {\n\t\tkey: 'absProps',\n\t\tget: function get() {\n\t\t\tvar _props$originalProps = this.props.originalProps,\n\t\t\t    includeFields = _props$originalProps.includeFields,\n\t\t\t    excludeFields = _props$originalProps.excludeFields,\n\t\t\t    size = _props$originalProps.size;\n\n\t\t\treturn {\n\t\t\t\tincludeFields: includeFields || undefined,\n\t\t\t\texcludeFields: excludeFields || undefined,\n\t\t\t\tsize: size || undefined\n\t\t\t};\n\t\t}\n\t}, {\n\t\tkey: 'showInfiniteScroll',\n\t\tget: function get() {\n\t\t\t// Pagination has higher priority then infinite scroll\n\t\t\tvar infiniteScroll = this.props.infiniteScroll;\n\n\t\t\treturn infiniteScroll && !this.shouldRenderPagination;\n\t\t}\n\t}, {\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _helper.hasCustomRenderer)(this.props);\n\t\t}\n\n\t\t// only used for SSR\n\n\t}]);\n\n\treturn ReactiveList;\n}(_react.Component);\n\nReactiveList.ResultCardsWrapper = function (_ref6) {\n\tvar children = _ref6.children,\n\t    rest = _objectWithoutProperties(_ref6, ['children']);\n\n\treturn (0, _core.jsx)(\n\t\t'div',\n\t\t_extends({ css: _Card.container }, rest),\n\t\tchildren\n\t);\n};\n\nReactiveList.ResultListWrapper = function (_ref7) {\n\tvar children = _ref7.children,\n\t    rest = _objectWithoutProperties(_ref7, ['children']);\n\n\treturn (0, _core.jsx)(\n\t\t'div',\n\t\t_extends({ css: _ListItem.container }, rest),\n\t\tchildren\n\t);\n};\n\nReactiveList.generateQueryOptions = function (props) {\n\t// simulate default (includeFields and excludeFields) props to generate consistent query\n\tvar options = (0, _helper.getQueryOptions)(_extends({ includeFields: ['*'], excludeFields: [] }, props));\n\tvar size = props.size,\n\t    dataField = props.dataField,\n\t    defaultSortOption = props.defaultSortOption,\n\t    sortOptionsNew = props.sortOptions,\n\t    currentPage = props.currentPage,\n\t    sortBy = props.sortBy;\n\n\toptions.from = currentPage ? (currentPage - 1) * (size || 10) : 0;\n\toptions.size = size || 10;\n\n\tvar getSortOption = function getSortOption() {\n\t\tvar _ref9;\n\n\t\tif (defaultSortOption) {\n\t\t\tvar sortOption = sortOptionsNew.find(function (option) {\n\t\t\t\treturn option.label === defaultSortOption;\n\t\t\t});\n\t\t\tif (sortOption) {\n\t\t\t\tvar _ref8;\n\n\t\t\t\treturn _ref8 = {}, _ref8[sortOption.dataField] = {\n\t\t\t\t\torder: sortOption.sortBy\n\t\t\t\t}, _ref8;\n\t\t\t}\n\t\t}\n\t\treturn _ref9 = {}, _ref9[sortOptionsNew[0].dataField] = {\n\t\t\torder: sortOptionsNew[0].sortBy\n\t\t}, _ref9;\n\t};\n\n\tif (sortOptionsNew) {\n\t\toptions.sort = [getSortOption()];\n\t} else if (sortBy) {\n\t\tvar _ref10;\n\n\t\toptions.sort = [(_ref10 = {}, _ref10[dataField] = {\n\t\t\torder: sortBy\n\t\t}, _ref10)];\n\t}\n\n\treturn options;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this3 = this;\n\n\tthis.getAggsQuery = function () {\n\t\tvar _props2 = _this3.props,\n\t\t    size = _props2.size,\n\t\t    aggregationField = _props2.aggregationField,\n\t\t    afterKey = _props2.afterKey;\n\n\t\tvar queryOptions = { size: size };\n\t\tif (aggregationField) {\n\t\t\tqueryOptions.aggs = (0, _helper.getCompositeAggsQuery)({\n\t\t\t\tprops: _this3.props,\n\t\t\t\tafter: afterKey ? { after: afterKey } : null,\n\t\t\t\tshowTopHits: true\n\t\t\t}).aggs;\n\t\t}\n\t\treturn queryOptions;\n\t};\n\n\tthis.getAllData = function () {\n\t\tvar _props3 = _this3.props,\n\t\t    size = _props3.size,\n\t\t    promotedResults = _props3.promotedResults,\n\t\t    aggregationData = _props3.aggregationData,\n\t\t    customData = _props3.customData;\n\t\tvar currentPage = _this3.state.currentPage;\n\n\t\tvar results = (0, _helper.parseHits)(_this3.props.hits) || [];\n\t\tvar parsedPromotedResults = (0, _helper.parseHits)(promotedResults || []) || [];\n\t\tvar filteredResults = results;\n\t\tvar base = currentPage * size;\n\n\t\tif (parsedPromotedResults.length) {\n\t\t\tvar ids = parsedPromotedResults.map(function (item) {\n\t\t\t\treturn item._id;\n\t\t\t}).filter(Boolean);\n\t\t\tif (ids) {\n\t\t\t\tfilteredResults = filteredResults.filter(function (item) {\n\t\t\t\t\treturn !ids.includes(item._id);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfilteredResults = [].concat(parsedPromotedResults, filteredResults);\n\t\t}\n\t\treturn {\n\t\t\tresults: results,\n\t\t\tfilteredResults: filteredResults,\n\t\t\tpromotedResults: parsedPromotedResults,\n\t\t\tcustomData: customData || {},\n\t\t\taggregationData: aggregationData || [],\n\t\t\tloadMore: _this3.loadMore,\n\t\t\tbase: base,\n\t\t\ttriggerClickAnalytics: _this3.triggerClickAnalytics\n\t\t};\n\t};\n\n\tthis.scrollToTop = function () {\n\t\tif (_this3.domNode === window) {\n\t\t\tdocument.documentElement.scrollTop = 0;\n\t\t\tdocument.body.scrollTop = 0;\n\t\t} else {\n\t\t\t_this3.domNode.scrollTop = 0;\n\t\t}\n\t};\n\n\tthis.scrollHandler = function () {\n\t\tvar renderLoader = window.innerHeight + window.pageYOffset + 300 >= document.body.scrollHeight;\n\t\tif (_this3.props.scrollTarget) {\n\t\t\trenderLoader = _this3.domNode.clientHeight + _this3.domNode.scrollTop + 300 >= _this3.domNode.scrollHeight;\n\t\t}\n\t\tif (!_this3.props.isLoading && renderLoader) {\n\t\t\t_this3.loadMore();\n\t\t}\n\t};\n\n\tthis.loadMore = function () {\n\t\tif (_this3.props.aggregationField && !_this3.props.afterKey) return;\n\t\tif (_this3.props.hits && _this3.props.total > _this3.props.hits.length) {\n\t\t\tvar value = _this3.state.from + _this3.props.size;\n\t\t\t// If current hits length is less than the current from then it means\n\t\t\t// that there are no results present.\n\t\t\t// It can happen because of many reasons some of them are:\n\t\t\t// 1. Using the `collapse` query to remove results\n\t\t\t// 2. Shard failure\n\t\t\t// In above cases infinite scroll should not load more results that can\n\t\t\t// cause the resetting of the `from` value\n\n\t\t\tif (_this3.props.hits.length < value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar options = _extends({}, (0, _helper.getQueryOptions)(_this3.props), _this3.getAggsQuery());\n\t\t\t_this3.setState({\n\t\t\t\tfrom: value\n\t\t\t});\n\t\t\t_this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n\t\t\t\tfrom: value\n\t\t\t}), true, !!_this3.props.aggregationField);\n\t\t}\n\t};\n\n\tthis.setPage = function (page) {\n\t\t// onPageClick will be called everytime a pagination button is clicked\n\t\tif (page !== _this3.state.currentPage) {\n\t\t\tvar onPageClick = _this3.props.onPageClick;\n\n\t\t\tif (onPageClick) {\n\t\t\t\tonPageClick(page + 1);\n\t\t\t}\n\t\t\tvar value = _this3.props.size * page;\n\t\t\tvar options = (0, _helper.getQueryOptions)(_this3.props);\n\t\t\toptions.from = _this3.state.from;\n\t\t\t_this3.setState({\n\t\t\t\tfrom: value,\n\t\t\t\tcurrentPage: page\n\t\t\t}, function () {\n\t\t\t\t_this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n\t\t\t\t\tfrom: value\n\t\t\t\t}), false);\n\n\t\t\t\t_this3.updatePageURL(page);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.renderResultStats = function () {\n\t\tvar _props4 = _this3.props,\n\t\t    hits = _props4.hits,\n\t\t    promotedResults = _props4.promotedResults,\n\t\t    total = _props4.total;\n\n\n\t\tvar shouldStatsVisible = hits && hits.length || promotedResults && promotedResults.length;\n\t\tif (_this3.props.renderResultStats && shouldStatsVisible) {\n\t\t\treturn _this3.props.renderResultStats(_this3.stats);\n\t\t}\n\t\tif (total) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t'p',\n\t\t\t\t{ css: _results.resultStats, className: (0, _helper.getClassName)(_this3.props.innerClass, 'resultStats') },\n\t\t\t\t_this3.props.total,\n\t\t\t\t' results found in ',\n\t\t\t\t_this3.props.time || 0,\n\t\t\t\t'ms'\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderNoResults = function () {\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\t{ className: (0, _helper.getClassName)(_this3.props.innerClass, 'noResults') || null },\n\t\t\t_this3.props.renderNoResults()\n\t\t);\n\t};\n\n\tthis.handleSortChange = function (e) {\n\t\tvar _ref11;\n\n\t\tvar index = e.target.value;\n\t\tvar options = (0, _helper.getQueryOptions)(_this3.props);\n\t\t// This fixes issue #371 (where sorting a multi-result page with infinite loader breaks)\n\t\toptions.from = 0;\n\n\t\tvar sortField = _this3.props.sortOptions[index].dataField;\n\t\tvar sortBy = _this3.props.sortOptions[index].sortBy;\n\t\toptions.sort = [(_ref11 = {}, _ref11[sortField] = {\n\t\t\torder: sortBy\n\t\t}, _ref11)];\n\t\t// To handle sortOptions for RS API\n\t\t_this3.props.updateComponentProps(_this3.props.componentId, Object.assign({}, _this3.props, { dataField: sortField }, { sortBy: sortBy }, _this3.absProps), _constants.componentTypes.reactiveList);\n\t\t_this3.props.setQueryOptions(_this3.props.componentId, options, true);\n\t\t_this3.sortOptionIndex = index;\n\n\t\t_this3.setState({\n\t\t\tcurrentPage: 0,\n\t\t\tfrom: 0\n\t\t}, function () {\n\t\t\t_this3.updatePageURL(0);\n\t\t});\n\t};\n\n\tthis.updatePageURL = function (page) {\n\t\ttry {\n\t\t\tif (_this3.props.sortOptions && _this3.props.sortOptions[_this3.sortOptionIndex]) {\n\t\t\t\tvar sortOption = _this3.props.sortOptions[_this3.sortOptionIndex].label;\n\n\t\t\t\t_this3.props.setPageURL(_this3.props.componentId + 'sortOption', sortOption, _this3.props.componentId + 'sortOption', false, _this3.props.URLParams);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log('error\\', ' + error);\n\t\t}\n\n\t\t_this3.props.setPageURL(_this3.props.componentId, page + 1, _this3.props.componentId, false, _this3.props.URLParams);\n\t};\n\n\tthis.triggerClickAnalytics = function (searchPosition, documentId) {\n\t\tvar docId = documentId;\n\t\tif (!docId) {\n\t\t\tvar _getData = _this3.getData(),\n\t\t\t    data = _getData.data;\n\n\t\t\tvar hitData = data.find(function (hit) {\n\t\t\t\treturn hit._click_id === searchPosition;\n\t\t\t});\n\t\t\tif (hitData && hitData._id) {\n\t\t\t\tdocId = hitData._id;\n\t\t\t}\n\t\t}\n\t\t_this3.props.triggerAnalytics(searchPosition, docId);\n\t};\n\n\tthis.renderSortOptions = function () {\n\t\treturn (0, _core.jsx)(\n\t\t\t'select',\n\t\t\t{\n\t\t\t\tcss: _results.sortOptions,\n\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'sortOptions'),\n\t\t\t\tname: 'sort-options',\n\t\t\t\t'aria-label': 'Sort options',\n\t\t\t\tonChange: _this3.handleSortChange,\n\t\t\t\tvalue: _this3.sortOptionIndex\n\t\t\t},\n\t\t\t_this3.props.sortOptions.map(function (sort, index) {\n\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t'option',\n\t\t\t\t\t{ key: sort.label, value: index },\n\t\t\t\t\tsort.label\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t};\n\n\tthis.triggerExportCSV = function () {\n\t\tvar _props5 = _this3.props,\n\t\t    exportData = _props5.exportData,\n\t\t    componentId = _props5.componentId,\n\t\t    total = _props5.total;\n\n\t\t_this3.setState({\n\t\t\texportLoading: true\n\t\t});\n\t\texportData(componentId, '', total).then(function (res) {\n\t\t\tvar arrayOfJson = res.map(function (item) {\n\t\t\t\treturn (0, _helper.flatten)(item);\n\t\t\t});\n\n\t\t\t// convert JSON to CSV\n\t\t\tvar replacer = function replacer(key, value) {\n\t\t\t\treturn value === null ? '' : value;\n\t\t\t}; // specify how you want to handle null values here\n\t\t\tvar header = [];\n\t\t\tarrayOfJson.forEach(function (item) {\n\t\t\t\tvar keys = Object.keys(item); // 👇️ {'a', 'b', 'c'}\n\t\t\t\tvar set = new Set([].concat(keys, header));\n\t\t\t\theader = Array.from(set);\n\t\t\t});\n\t\t\theader = header.filter(function (item) {\n\t\t\t\treturn (typeof item === 'undefined' ? 'undefined' : _typeof(item)) !== 'object';\n\t\t\t});\n\n\t\t\tvar csv = arrayOfJson.map(function (row) {\n\t\t\t\treturn header.map(function (fieldName) {\n\t\t\t\t\treturn JSON.stringify(row[fieldName], replacer);\n\t\t\t\t}).join(',');\n\t\t\t});\n\t\t\tcsv.unshift(header.join(','));\n\t\t\tcsv = csv.join('\\r\\n');\n\n\t\t\t// Create link and download\n\t\t\t(0, _helper.saveDataAsFile)('csvData', csv, 'csv');\n\t\t}).catch(function (error) {\n\t\t\tconsole.error(error, error.stack);\n\t\t}).finally(function () {\n\t\t\t_this3.setState({\n\t\t\t\texportLoading: false\n\t\t\t});\n\t\t});\n\t};\n\n\tthis.triggerExportJSON = function () {\n\t\tvar _props6 = _this3.props,\n\t\t    exportData = _props6.exportData,\n\t\t    componentId = _props6.componentId,\n\t\t    total = _props6.total;\n\n\t\t_this3.setState({\n\t\t\texportLoading: true\n\t\t});\n\t\texportData(componentId, '', total).then(function (res) {\n\t\t\tvar arrayOfJson = res;\n\t\t\t(0, _helper.saveDataAsFile)('jsonData', arrayOfJson, 'json');\n\t\t}).catch(function (error) {\n\t\t\tconsole.error(error, error.stack);\n\t\t}).finally(function () {\n\t\t\t_this3.setState({\n\t\t\t\texportLoading: false\n\t\t\t});\n\t\t});\n\t};\n\n\tthis.renderExportOptions = function () {\n\t\tvar exportLoading = _this3.state.exportLoading;\n\n\t\tif (typeof _this3.props.renderExport === 'function') {\n\t\t\treturn _this3.props.renderExport({\n\t\t\t\ttriggerExportCSV: _this3.triggerExportCSV,\n\t\t\t\ttriggerExportJSON: _this3.triggerExportJSON\n\t\t\t});\n\t\t}\n\t\treturn (0, _core.jsx)(\n\t\t\t_Flex2.default,\n\t\t\t{\n\t\t\t\tlabelPosition: 'left',\n\t\t\t\tflex: '1 1 auto',\n\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'export')\n\t\t\t},\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'span',\n\t\t\t\tnull,\n\t\t\t\texportLoading ? 'Exporting... ' : 'Export: ',\n\t\t\t\t' '\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_Button2.default,\n\t\t\t\t{\n\t\t\t\t\tstyle: { gap: '2px' },\n\t\t\t\t\tisLinkType: true,\n\t\t\t\t\tonClick: _this3.triggerExportCSV,\n\t\t\t\t\tclassName: '' + (exportLoading ? 'disabled' : '')\n\t\t\t\t},\n\t\t\t\t'CSV ',\n\t\t\t\t(0, _core.jsx)(_DownloadSvg2.default, null)\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_Button2.default,\n\t\t\t\t{\n\t\t\t\t\tstyle: { gap: '2px', paddingLeft: '0' },\n\t\t\t\t\tisLinkType: true,\n\t\t\t\t\tonClick: _this3.triggerExportJSON,\n\t\t\t\t\tclassName: '' + (exportLoading ? 'disabled' : '')\n\t\t\t\t},\n\t\t\t\t'JSON ',\n\t\t\t\t(0, _core.jsx)(_DownloadSvg2.default, null)\n\t\t\t)\n\t\t);\n\t};\n\n\tthis.renderError = function () {\n\t\tvar _props7 = _this3.props,\n\t\t    error = _props7.error,\n\t\t    isLoading = _props7.isLoading,\n\t\t    renderError = _props7.renderError;\n\n\t\tif (renderError && error && !isLoading) {\n\t\t\treturn (0, _helper.isFunction)(renderError) ? renderError(error) : renderError;\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.withClickIds = function (results) {\n\t\tvar _getAllData3 = _this3.getAllData(),\n\t\t    base = _getAllData3.base;\n\n\t\treturn results.map(function (result, index) {\n\t\t\treturn _extends({}, result, {\n\t\t\t\t_click_id: base + index\n\t\t\t});\n\t\t});\n\t};\n\n\tthis.getData = function () {\n\t\tvar _getAllData4 = _this3.getAllData(),\n\t\t    filteredResults = _getAllData4.filteredResults,\n\t\t    promotedResults = _getAllData4.promotedResults,\n\t\t    aggregationData = _getAllData4.aggregationData,\n\t\t    customData = _getAllData4.customData;\n\n\t\treturn {\n\t\t\tdata: _this3.withClickIds(filteredResults),\n\t\t\taggregationData: _this3.withClickIds(aggregationData || []),\n\t\t\tpromotedData: _this3.withClickIds(promotedResults || []),\n\t\t\tcustomData: customData,\n\t\t\trawData: _this3.props.rawData,\n\t\t\tresultStats: _this3.stats,\n\t\t\tsettings: _this3.props.settings,\n\t\t\ttriggerExportCSV: _this3.triggerExportCSV,\n\t\t\ttriggerExportJSON: _this3.triggerExportJSON,\n\t\t\tsetPage: _this3.setPage\n\t\t};\n\t};\n\n\tthis.getComponent = function () {\n\t\tvar _props8 = _this3.props,\n\t\t    error = _props8.error,\n\t\t    isLoading = _props8.isLoading;\n\n\t\tvar data = _extends({\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tloadMore: _this3.loadMore,\n\t\t\ttriggerClickAnalytics: _this3.triggerClickAnalytics\n\t\t}, _this3.getData());\n\t\treturn (0, _helper.getComponent)(data, _this3.props);\n\t};\n};\n\nReactiveList.propTypes = {\n\tloadMore: _types2.default.funcRequired,\n\tonQueryChange: _types2.default.func,\n\tonError: _types2.default.func,\n\tsetPageURL: _types2.default.func,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tsetDefaultQuery: _types2.default.funcRequired,\n\tupdateComponentProps: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\tcurrentPage: _types2.default.number,\n\thits: _types2.default.hits,\n\trawData: _types2.default.rawData,\n\tisLoading: _types2.default.bool,\n\tincludeFields: _types2.default.includeFields,\n\tpromotedResults: _types2.default.hits,\n\tcustomData: _types2.default.title,\n\ttime: _types2.default.number,\n\ttotal: _types2.default.number,\n\thidden: _types2.default.number,\n\tconfig: _types2.default.props,\n\tanalytics: _types2.default.bool,\n\tqueryLog: _types2.default.props,\n\tsettings: _types2.default.props,\n\terror: _types2.default.title,\n\theaders: _types2.default.headers,\n\t// component props\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tchildren: _types2.default.func,\n\tdataField: _types2.default.stringRequired,\n\taggregationField: _types2.default.string,\n\taggregationSize: _types2.default.number,\n\taggregationData: _types2.default.aggregationData,\n\tdefaultPage: _types2.default.number,\n\tdefaultQuery: _types2.default.func,\n\texcludeFields: _types2.default.excludeFields,\n\tinnerClass: _types2.default.style,\n\tinfiniteScroll: _types2.default.bool,\n\tlistClass: _types2.default.string,\n\tloader: _types2.default.title,\n\trender: _types2.default.func,\n\trenderItem: _types2.default.func,\n\trenderError: _types2.default.title,\n\trenderPagination: _types2.default.func,\n\tonData: _types2.default.func,\n\trenderNoResults: _types2.default.title,\n\tonPageChange: _types2.default.func,\n\tonPageClick: _types2.default.func,\n\tpages: _types2.default.number,\n\tpagination: _types2.default.bool,\n\tpaginationAt: _types2.default.paginationAt,\n\tshowEndPage: _types2.default.bool,\n\treact: _types2.default.react,\n\trenderResultStats: _types2.default.func,\n\tscrollOnChange: _types2.default.bool,\n\tscrollTarget: _types2.default.string,\n\tshowLoader: _types2.default.bool,\n\tshowResultStats: _types2.default.bool,\n\tsize: _types2.default.number,\n\tsortBy: _types2.default.sortBy,\n\tsortOptions: _types2.default.sortOptions,\n\tstyle: _types2.default.style,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\tURLParams: _types2.default.bool,\n\tdefaultSortOption: _types2.default.string,\n\tafterKey: _types2.default.props,\n\tdistinctField: _types2.default.string,\n\tdistinctFieldConfig: _types2.default.componentObject,\n\thighlight: _types2.default.bool,\n\thighlightConfig: _types2.default.componentObject,\n\t// eslint-disable-next-line\n\toriginalProps: _types2.default.any,\n\tindex: _types2.default.string,\n\turlSortOption: _types2.default.string,\n\tshowExport: _types2.default.bool,\n\trenderExport: _types2.default.func,\n\texportData: _types2.default.funcRequired,\n\tendpoint: _types2.default.endpoint\n};\n\nReactiveList.defaultProps = {\n\tclassName: null,\n\tcurrentPage: 0,\n\tlistClass: '',\n\tpages: 5,\n\tinfiniteScroll: true,\n\tpagination: false,\n\tanalytics: false,\n\tpaginationAt: 'bottom',\n\tshowEndPage: false,\n\tincludeFields: ['*'],\n\texcludeFields: [],\n\tshowResultStats: true,\n\tsize: 10,\n\tstyle: {},\n\tURLParams: false,\n\tshowLoader: true,\n\trenderNoResults: function renderNoResults() {\n\t\treturn 'No Results found.';\n\t},\n\tscrollOnChange: true,\n\tdefaultSortOption: null,\n\toriginalProps: {},\n\tshowExport: false\n};\n\n// Add componentType for SSR\nReactiveList.componentType = _constants.componentTypes.reactiveList;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tdefaultPage: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value - 1 || -1,\n\t\turlSortOption: state.selectedValues[props.componentId + 'sortOption'] && state.selectedValues[props.componentId + 'sortOption'].value,\n\t\thits: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\t\trawData: state.rawData[props.componentId],\n\t\tanalytics: state.config && state.config.analytics,\n\t\taggregationData: state.compositeAggregations[props.componentId],\n\t\tisLoading: state.isLoading[props.componentId] || false,\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tconfig: state.config,\n\t\tqueryLog: state.queryLog[props.componentId] && state.queryLog[props.componentId][props.componentId],\n\t\terror: state.error[props.componentId],\n\t\tpromotedResults: state.promotedResults[props.componentId],\n\t\tcustomData: state.customData[props.componentId],\n\t\tsettings: state.settings[props.componentId],\n\t\tafterKey: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.aggregationField] && state.aggregations[props.componentId][props.aggregationField].after_key\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t},\n\t\tupdateComponentProps: function updateComponentProps(component, options, componentType) {\n\t\t\treturn dispatch((0, _actions.updateComponentProps)(component, options, componentType));\n\t\t},\n\t\tloadMore: function loadMore(component, options, append, appendAggs) {\n\t\t\treturn dispatch((0, _actions.loadMore)(component, options, append, appendAggs));\n\t\t},\n\t\tsetPageURL: function setPageURL(component, value, label, showFilter, URLParams) {\n\t\t\treturn dispatch((0, _actions.setValue)(component, value, label, showFilter, URLParams));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props, execute) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props, execute));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject, execute) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject, execute));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition, docId) {\n\t\t\treturn dispatch((0, _actions.recordResultClick)(searchPosition, docId));\n\t\t},\n\t\texportData: function exportData(component, cursor, total) {\n\t\t\treturn dispatch((0, _actions.loadDataToExport)(component, cursor, total));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\tvar includeFields = props.includeFields,\n\t    excludeFields = props.excludeFields,\n\t    size = props.size;\n\n\treturn (0, _core.jsx)(ReactiveList, _extends({\n\t\tref: props.myForwardedRef\n\t}, props, {\n\t\toriginalProps: {\n\t\t\tincludeFields: includeFields,\n\t\t\texcludeFields: excludeFields,\n\t\t\tsize: size\n\t\t}\n\t}));\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(\n\t\t_PreferencesConsumer2.default,\n\t\t{ userProps: props },\n\t\tfunction (preferenceProps) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_ComponentWrapper2.default,\n\t\t\t\t_extends({\n\t\t\t\t\tinternalComponent: true,\n\t\t\t\t\tcomponentType: _constants.componentTypes.reactiveList\n\t\t\t\t}, preferenceProps),\n\t\t\t\tfunction (componentProps) {\n\t\t\t\t\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, preferenceProps, componentProps, {\n\t\t\t\t\t\tmyForwardedRef: ref\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, ReactiveList);\n\nForwardRefComponent.displayName = 'ReactiveList';\nexports.default = ForwardRefComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}